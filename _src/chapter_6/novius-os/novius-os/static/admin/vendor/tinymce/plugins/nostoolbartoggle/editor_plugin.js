(function(){tinymce.PluginManager.requireLangPack("nostoolbartoggle");tinymce.create("tinymce.plugins.NosToolbarTogglePlugin",{init:function(b,c){var a=this;a.editor=b;tinymce.DOM.loadCSS(c+"/css/ui.css")},createControl:function(a,g){var j=this,d=j.editor,k=d.theme.settings,b=[],h=["1","2","3"],c,f,e;if(a==="nostoolbartoggle"){j.control=g.createButton("nostoolbartoggle",{title:"nostoolbartoggle.title",label:"nostoolbartoggle.label_open","class":"mce_toolbar_toggle_open",cmd:"nosToggleToolbars"});for(c=0;c<h.length;c++){b[c]=d.getParam("","toolbar"+(h[c]).replace(" ",""))}f=function(m,i){var l="";tinymce.each(k,function(q,p){if(p.substr(-16)==="toolbar_location"){l=q;return false}return true});if(l==="external"){var n=tinymce.DOM.get(m.id+"_external");$(n).css("top",($(n).position().top+i)+"px")}else{var o=m.getContentAreaContainer().firstChild;tinymce.DOM.setStyle(o,"height",tinymce.DOM.getSize(o).h+i);m.theme.deltaHeight+=i}};e=function(i){var l=j.control;l.setActive(i);tinymce.DOM.setAttrib(tinymce.DOM.select(".mceIcon",l.id),"class","mceIcon");tinymce.DOM.addClass(tinymce.DOM.select(".mceIcon",l.id),i?"mce_toolbar_toggle_close":"mce_toolbar_toggle_open");tinymce.DOM.setHTML(tinymce.DOM.select(".mceButtonLabel",l.id),d.getLang(i?"nostoolbartoggle.label_close":"nostoolbartoggle.label_open",0))};d.addCommand("nosToggleToolbars",function(){var q,n,o,i=tinymce.util.Cookie,l,p=i.getHash("TinyMCE_toggle")||{},m=0;for(n=0;n<b.length;n++){o=d.controlManager.get(b[n]);if(typeof o=="undefined"){continue}q=o.id;if(tinymce.DOM.isHidden(q)){l=1;tinymce.DOM.show(q);m=m-26}else{l=0;tinymce.DOM.hide(q);m=m+26}}f(d,m);e(l);p[d.id]=l;i.setHash("TinyMCE_toggle",p)});d.onPostRender.add(function(){var n,o,i=tinymce.util.Cookie.getHash("TinyMCE_toggle")||{},l=0,m=false;if(i[d.id]==null){m=true}else{if(i[d.id]==="0"){m=true}}if(m){for(c=0;c<h.length;c++){n=d.getParam("","toolbar"+(h[c]).replace(" ",""));o=d.controlManager.get(n).id;tinymce.DOM.hide(o);l=l+26}f(d,l);e(0)}});return j.control}return null}});tinymce.PluginManager.add("nostoolbartoggle",tinymce.plugins.NosToolbarTogglePlugin)})();