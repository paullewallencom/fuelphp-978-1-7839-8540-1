var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(e){var g=jQuery;function f(i,j){var h=g.extend(true,{},i,j);delete h.constructor;return h}e.extendWidgetOptions=f;var d=(function(i){__extends(h,i);function h(){i.apply(this,arguments);this._dataOffset=0;this.rowOuterHeight=-1;this._windowResizeTimer=0;this.mEditSkechRowIndex=-1;this.mCurrentCellLocker=false}h.CSS={wijgrid:"wijmo-wijgrid",root:"wijmo-wijgrid-root",editedCellMarker:"wijmo-wijgrid-cell-edit",inputMarker:"wijgridinput",table:"wijmo-wijgrid-table",TH:"wijgridth",TD:"wijgridtd",cellContainer:"wijmo-wijgrid-innercell",aggregateContainer:"wijmo-wijgrid-aggregate",rowHeader:"wijmo-wijgrid-rowheader",currentRowHeaderCell:"wijmo-wijgrid-current-rowheadercell",currentHeaderCell:"wijmo-wijgrid-current-headercell",currentCell:"wijmo-wijgrid-current-cell",cellAlignLeft:"wijalign-left",cellAlignRight:"wijalign-right",cellAlignCenter:"wijalign-center",filterList:"wijmo-wijgrid-filterlist",filter:"wijmo-wijgrid-filter",filterInput:"wijmo-wijgrid-filter-input",filterTrigger:"wijmo-wijgrid-filter-trigger",filterNativeHtmlEditorWrapper:"wijgrid-input-wrapper",headerArea:"wijmo-wijgrid-header",footerArea:"wijmo-wijgrid-footer",headerRow:"wijmo-wijgrid-headerrow",row:"wijmo-wijgrid-row",dataRow:"wijmo-wijgrid-datarow",altRow:"wijmo-wijgrid-alternatingrow",emptyDataRow:"wijmo-wijgrid-emptydatarow",filterRow:"wijmo-wijgrid-filterrow",groupHeaderRow:"wijmo-wijgrid-groupheaderrow",groupFooterRow:"wijmo-wijgrid-groupfooterrow",groupHeaderRowCollapsed:"wijmo-wijgrid-groupheaderrow-collapsed",groupHeaderRowExpanded:"wijmo-wijgrid-groupheaderrow-expanded",footerRow:"wijmo-wijgrid-footerrow",loadingOverlay:"wijmo-wijgrid-overlay",loadingText:"wijmo-wijgrid-loadingtext",groupArea:"wijmo-wijgrid-group-area",groupAreaEmpty:"wijmo-wijgrid-group-area-empty",groupAreaButton:"wijmo-wijgrid-group-button",groupAreaButtonSort:"wijmo-wijgrid-group-button-sort",groupAreaButtonClose:"wijmo-wijgrid-group-button-close",groupToggleVisibilityButton:"wijmo-wijgrid-grouptogglebtn",fixedView:"wijmo-wijgrid-fixedview",scroller:"wijmo-wijgrid-scroller",dndHelper:"wijmo-wijgrid-dnd-helper",dndArrowTopContainer:"wijmo-wijgrid-dnd-arrow-top",dndArrowBottomContainer:"wijmo-wijgrid-dnd-arrow-bottom",freezingHandleV:"wijmo-wijgrid-freezing-handle-v",freezingHandleH:"wijmo-wijgrid-freezing-handle-h",freezingHandleContent:"wijmo-wijgrid-freezing-handle-content",resizingHandle:"wijmo-wijgrid-resizehandle",headerCellSortIcon:"wijmo-wijgrid-sort-icon",headerCellText:"wijmo-wijgrid-headertext",c1basefield:"wijmo-c1basefield",c1band:"wijmo-c1band",c1field:"wijmo-c1field"};h.prototype._createWidget=function(j,k){var l=j&&(b).data.util.isClassInstance(j.data)&&!((typeof wijdatasource==="function")&&(j.data instanceof wijdatasource))&&j.data;if(l){j._lateBindingFlag=true;delete j.data}i.prototype._createWidget.apply(this,arguments);if(l){delete j._lateBindingFlag;j.data=l;this.option("data",l)}};h.prototype._create=function(){var l=this;if(!this.element.is("table")){throw"invalid markup"}this.mCurrentCellLocker=false;this._windowResizeTimer=0;this._dataOffset=0;this._scrollingState={x:null,y:null,index:0};this.rowOuterHeight=-1;this._initialized=false;this._destroyed=false;this._rendered=false;this._eventUID=undefined;this._dataViewWrapper=undefined;this._originalHtml=undefined;this._originalAttr=undefined;this._originalCssText=undefined;this._autoHeight=undefined;this._autoWidth=undefined;this._renderCounter=0;this.$superPanelHeader=undefined;this.$topPagerDiv=undefined;this.$bottomPagerDiv=undefined;this.$groupArea=undefined;this.__uid=undefined;this._wijDataView=undefined;this.outerDiv=undefined;this.sketchTable=undefined;this.cellFormatter=undefined;this.rowStyleFormatter=undefined;this.cellStyleFormatter=undefined;this._eventUID=b.grid.getUID();this._spinnerIsActivated=false;this.deficientFilters={};var k=("data" in this.options),m=k&&this.options.data;if(k){delete this.options.data}this.options=g.extend(true,{},this.options);if(g.isFunction(window.wijmoASPNetParseOptions)){window.wijmoASPNetParseOptions(this.options)}if(k){this.options.data=m}if(window.wijmoApplyWijTouchUtilEvents){g=(window).wijmoApplyWijTouchUtilEvents(g)}this._initialized=false;this._destroyed=false;this.mClosestCulture=Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default");this._dataViewWrapper=new b.grid.dataViewWrapper(this);this._originalHtml=this.element.html();this._originalAttr={};this._originalCssText=this.element[0].style.cssText;this.element.addClass(b.grid.wijgrid.CSS.root);this.element.wrap('<div class="'+this.options.wijCSS.widget+" "+b.grid.wijgrid.CSS.wijgrid+" "+this.options.wijCSS.wijgrid+" "+this.options.wijCSS.content+" "+this.options.wijCSS.cornerAll+'"></div>');this.outerDiv=this.element.parent();var n=this.element[0].style.height,j=this.element[0].style.width;if(n){this.outerDiv.css("height",n)}this._autoHeight=(n==""||n=="auto");if(j){this.outerDiv.css("width",this.element[0].style.width)}this._autoWidth=(j==""||j=="auto");this.element.css({height:"",width:""});if(this.options.disabled){this.disable()}this.cellFormatter=new b.grid.cellFormatterHelper();this.rowStyleFormatter=new b.grid.rowStyleFormatterHelper(this);this.cellStyleFormatter=new b.grid.cellStyleFormatterHelper(this);this._viewPortBounds({start:0,end:0});if(this._allowVirtualScrolling()){this._viewPortBounds().start=this._scrollingState.index;if(this._serverSideVirtualScrolling()){this._dataOffset=this._scrollingState.index}}if(this.element.wijAddVisibilityObserver){this.element.wijAddVisibilityObserver(function(o){if(l._initialized&&!l._destroyed&&(o.target!==l.outerDiv[0])){l.setSize()}},"wijgrid")}this._renderCounter=0};h.prototype._destroy=function(){var k,j=this;try{this._view().dispose();this._detachEvents(true);if(this._resizerui){this._resizerui.dispose();this._resizerui=null}if(this._frozenerui){this._frozenerui.dispose();this._frozenerui=null}if(this._selectionui){this._selectionui.dispose();this._selectionui=null}if(this._dragndropui){this._dragndropui.dispose();this._dragndropui=null}this._dataViewWrapper.dispose();b.grid.remove$dataByPrefix(this.element,this._data$prefix);if(this.element.wijRemoveVisibilityObserver){this.element.wijRemoveVisibilityObserver()}this.element.insertBefore(this.outerDiv);this.outerDiv.remove();this.element.html(this._originalHtml);g.each(this._originalAttr,function(l,m){if(m===undefined){j.element.removeAttr(l)}else{j.element.attr(l,m)}});this.element.removeClass(b.grid.wijgrid.CSS.root);this.element[0].style.cssText=this._originalCssText}finally{this._destroyed=true}};h.prototype._init=function(){this.$superPanelHeader=null;this.$topPagerDiv=null;this.$bottomPagerDiv=null;this.$groupArea=null;this._prevHoveredSketchRowIndex=-1;this.mClosestCulture=Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default");if(!this.options.data){if(!this._field("thead")){this._field("thead",b.grid.readTableSection(this.element,1))}if(!this._field("tfoot")){this._field("tfoot",b.grid.readTableSection(this.element,3))}}this._initialized=this._initialized||false;this.ensureControl(true)};h.prototype._setOption=function(l,n){var o=this["_preset_"+l],k=this.options[l],m,j;if(o!==undefined){n=o.apply(this,[n,k])}m=(n!==k)||(l.toLowerCase()==="columns");i.prototype._setOption.apply(this,[l,n]);if(m){j=this["_postset_"+l];if(j!==undefined){j.apply(this,[n,k])}}};h.prototype.columns=function(){return this._field("columns")||[]};h.prototype.currentCell=function(l,j,p){var o,k=this._view(),m=this._rows();if(arguments.length===0){o=this._field("currentCell");if(!o){this._field("currentCell",o=b.grid.cellInfo.outsideValue)}return o}else{o=(typeof(l)!=="number")?(l)._clone():new b.grid.cellInfo(l,j);if(!o.isEqual(b.grid.cellInfo.outsideValue)){if(!o._isValid()){throw"invalid arguments"}o._clip(this._getDataCellsRange(e.dataRowsRangeMode.sketch));if(o.rowIndex()>=0){var n=k._getRowInfoBySketchRowIndex(o.rowIndex());if(!n||!(n.type&b.grid.rowType.data)){return}}}o._setGridView(this);this._changeCurrentCell(null,o,{changeSelection:p||false,setFocus:false});return this._field("currentCell")}};h.prototype.data=function(){return this._dataViewWrapper.dataView().getSource()};h.prototype.dataView=function(){return this._dataViewWrapper.dataView()};h.prototype.doRefresh=function(m){var p=this;if(!g.isPlainObject(m)){m={}}var q,w=this,r=b.grid.EXPANDO,l=m&&m.virtualScrollData;if(!this._initialized){try{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.getFieldsInfo(),true,true)}catch(s){throw s}finally{this._ownerise(true);this._initialized=true}}else{}if(!l){this._rebuildLeaves();var j=e.lazy(this._dataViewWrapper.data,this._dataViewWrapper);var v=this._dataViewWrapper.dataView();var n=this._prepareTotalsRequest(true);if(n.length){g.each(this._field("leaves"),function(x,y){y._totalsValue=(j().totals)?j().totals[y.dataKey]:undefined})}if(v.count()){q=this._field("leaves");var o=new b.grid.LazySketchTable({count:function(){return v.count()},getRange:function(D,B,z,C){for(var A=0;A<B;A++){var y=D+A;var x=v.item(y);z[C+A]=p._buildSketchRow({values:x,originalRowIndex:y},q)}}});if(this._hasGrouping()||this._hasMerging()){o.ensureNotLazy()}this.sketchTable=o}else{this.sketchTable=new b.grid.SketchTable();var u=j().emptyData;if(u){q=this._field("visibleLeaves");g.each(u,function(x,y){w.sketchTable.add(w._buildSketchRowEmptyDataItem(y,q,x===u.length-1))})}}}this._onRendering(m);if(!l){this._refresh(m)}else{this._refreshVirtual(m)}if(m&&g.isFunction(m.beforeOnRendered)){m.beforeOnRendered.apply(this,[m])}var t=this._view();if(this.mEditSkechRowIndex>=0&&(t._isRowRendered(this.mEditSkechRowIndex)>=0)){var k=t._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex);if(k&&(k.state&b.grid.renderState.editing)){t._makeRowEditable(k)}}this._onRendered(m);if(m&&g.isFunction(m.afterRefresh)){m.afterRefresh.apply(this,[m])}};h.prototype.beginEdit=function(){if(!this._allowCellEditing()){throw'Can be used only if the editingMode option is set to "cell".'}return this._beginEditInternal(null)};h.prototype.endEdit=function(){return this._endEditInternal(null)};h.prototype.editRow=function(m){if(this.options.editingMode!=="row"){throw'Can be used only if the editingMode option is set to "row".'}if(this.mEditSkechRowIndex>=0){this.cancelRowEditing()}if(m>=0){var k=-1,o;for(var l=0;l<this.sketchTable.count()&&k<0;l++){o=this.sketchTable.row(l);if(o.isDataRow()&&((o.dataItemIndex())===m)){k=l}}if(k>=0){var j=this._view();this.mEditSkechRowIndex=k;o.renderState|=b.grid.renderState.editing;if(j._isRowRendered(this.mEditSkechRowIndex)>=0){var n=j._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,false);n.state|=b.grid.renderState.editing;j._removeBodyRow(n.sectionRowIndex,false);n=j._insertBodyRow(o,n.sectionRowIndex,n.dataItemIndex,-1);j._makeRowEditable(n);this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}}}};h.prototype.updateRow=function(){if(this.mEditSkechRowIndex>=0){var u=b.grid.asEditableDataView(this._dataViewWrapper.dataView()),l=false;if(!u){throw"The provided DataView doesn't supports the editing operation."}try{var m=this.sketchTable.row(this.mEditSkechRowIndex),t=this._view();if(!m||!m.isDataRow()||!(m.renderState&b.grid.renderState.editing)){throw"Invalid row"}if(this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){var k=t._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,false);var r=this._field("visibleLeaves"),w=[],p=new b.grid.cellEditorHelper();for(var q=0;q<r.length;q++){var o=r[q];if(b.grid.validDataKey(o.dataKey)&&!o.readOnly){var s=k.$rows.children("td, th").eq(q);if(s.length){var j=t._changeCellRenderState(s,b.grid.renderState.none,true);if(j&b.grid.renderState.editing){var n=t.getAbsoluteCellInfo(s[0],true),v=p.updateCell(this,n,null);if(!(v&e.updateCellResult.success)){l=true;return}if(!(v&e.updateCellResult.notEdited)){w.push(n)}}}}}for(var q=0;q<w.length;q++){p.cellEditEnd(this,w[q],null)}m.renderState&=~b.grid.renderState.editing;k.state&=~b.grid.renderState.editing;t._removeBodyRow(k.sectionRowIndex,false);k=t._insertBodyRow(m,k.sectionRowIndex,k.dataItemIndex,-1);this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}else{m.renderState&=~b.grid.renderState.editing}}finally{if(!l){this.mEditSkechRowIndex=-1}}}};h.prototype.cancelRowEditing=function(){if(this.mEditSkechRowIndex>=0){try{var l=this.sketchTable.row(this.mEditSkechRowIndex),j=this._view();if(!l||!l.isDataRow()||!(l.renderState&b.grid.renderState.editing)){throw"Invalid row."}l.renderState&=~b.grid.renderState.editing;if(this._view()._isRowRendered(this.mEditSkechRowIndex)>=0){var k=j._getRowInfoBySketchRowIndex(this.mEditSkechRowIndex,false);k.state&=~b.grid.renderState.editing;j._removeBodyRow(k.sectionRowIndex,false);k=j._insertBodyRow(l,k.sectionRowIndex,k.dataItemIndex,-1);this.selection()._ensureSelectionInRow(this.mEditSkechRowIndex)}}finally{this.mEditSkechRowIndex=-1}}};h.prototype.deleteRow=function(j){if(j>=0){var k=b.grid.asEditableDataView(this._dataViewWrapper.dataView());if(!k||!k.canRemove()){throw"The provided DataView doesn't supports the deleting operation."}this._dataViewWrapper.ignoreChangeEvent(true);k.remove(j);this._dataViewWrapper.ignoreChangeEvent(false);this.ensureControl(true,{forceDataLoad:true})}};h.prototype.ensureControl=function(k,j){this._loading();if(!g.isPlainObject(j)){j={data:null,afterRefresh:null,beforeRefresh:null}}if(this._initialized){if(!j||!j.virtualScrollData){this._convertWidgetsToOptions()}}else{this._prepareColumnOptions(this.options.columns,this.options.columnsAutogenerationMode,this._dataViewWrapper.isDataLoaded()&&this._dataViewWrapper.getFieldsInfo(),this._dataViewWrapper.isDataLoaded(),false);if(!this._dataViewWrapper.isOwnDataView()){(new b.grid.settingsManager(this)).MapDVToWG()}}this._ownerise(true);if(this._initialized){if(j&&g.isFunction(j.beforeRefresh)){j.beforeRefresh.apply(this)}}if(!j||!j.virtualScrollData){this.mAllowVirtualScrolling=undefined;this.mEditSkechRowIndex=-1}if(k===true){this._dataViewWrapper.load(j)}else{this.doRefresh(j);this._loaded()}};h.prototype.getCellInfo=function(k){var j=null;if(k&&(k=this._findUntilOuterDiv(k,{td:true,th:true}))){j=this._view().getAbsoluteCellInfo(k,false)}return j};h.prototype.getFilterOperatorsByDataType=function(j){return(new b.grid.filterOperatorsCache(this)).getByDataType(j||"string")};h.prototype.pageCount=function(){if(this._customPagingEnabled()){return Math.ceil(this.options.totalRows/this.options.pageSize)||1}return this.options.allowPaging?(this._dataViewWrapper.dataView()).pageCount():1};h.prototype._closestCulture=function(){return this.mClosestCulture};h.prototype._serverShaping=function(){return false};h.prototype._pageIndexForDataView=function(){return this.options.pageIndex};h.prototype.setSize=function(o,l){var m=this._view(),n=null,p=this.outerDiv,k=this._field("visibleLeaves"),j=[];if(m&&m.getScrollValue){n=m.getScrollValue()}if(o||(o===0)){this._autoWidth=false;p.width(o)}if(l||(l===0)){this._autoHeight=false;p.height(l)}g.each(k,function(s,r){var t=m.getHeaderCell(s),u=m.getJoinedCols(s);g(t).css("width","");g.each(u,function(w,v){g(v).css("width","")})});this._setSizeInternal(n);var q=this._UIFrozener();if(q){q.refresh()}};h.prototype._setSizeInternal=function(j){this._view().updateSplits(j)};h.prototype.selection=function(){var j=this._field("selection");if(!j){this._field("selection",j=new b.grid.selection(this))}return j};h.prototype._onDataViewCurrentPositionChanged=function(l,k){var j=this._currentCellFromDataView(this.currentCell().cellIndex());j=this.currentCell(j,null,true)};h.prototype._resetColumns=function(){this._ownerise(false);b.grid.traverse(this.options.columns,function(l,k){if(l.dynamic){var j=g.inArray(l,k);if(j>=0){k.splice(j,1)}}else{l.dataKey=l._originalDataKey;l.headerText=l._originalHeaderText}});this._initialized=false};h.prototype._resetDataProperties=function(){this.options.pageIndex=0};h.prototype._resetVerticalBounds=function(){var j=this._viewPortBounds();j.start=0;this._scrollingState.index=0;this._scrollingState.y=0};h.prototype._onDataViewLoading=function(){this._activateSpinner();this._trigger("dataLoading")};h.prototype._onDataViewReset=function(j,k){if(!this.options._lateBindingFlag){(new b.grid.settingsManager(this)).MapDVToWG();this._trigger("dataLoaded");if(k){this._resetColumns()}this.doRefresh(j);this._loaded()}else{delete this.options._lateBindingFlag}};h.prototype._onDataViewLoaded=function(){};h.prototype._loading=function(){this._activateSpinner();this._trigger("loading")};h.prototype._loaded=function(){this._deactivateSpinner();this._trigger("loaded")};h.prototype._buildSketchRow=function(u,m){var k,n,o,r,s,l,t=b.data.Expando.getFrom(u.values,false),q=t?t[b.grid.EXPANDO]:null,j=new e.SketchDataRow(u.originalRowIndex,b.grid.renderState.rendering,q&&q.rowAttributes),p=q&&q.cellsAttributes;for(k=0,n=m.length;k<n;k++){o=m[k];if(b.grid.validDataKey(o.dataKey)){r=p?p[o.dataKey]:null;s=this._dataViewWrapper.getValue(u.values,o.dataKey);j.add(new e.ValueCell(this.parse(o,s),r))}}return j};h.prototype._buildSketchRowEmptyDataItem=function(k,p,o){var l,j,n=new e.SketchRow(b.grid.rowType.emptyDataRow,b.grid.renderState.rendering,null),m=p.length;for(l=0,j=k.length;l<j;l++){n.add(new e.HtmlCell(k[l],{colSpan:(m>0&&o)?m:1}))}return n};h.prototype._prepareColumnOptions=function(k,l,j,m,r){b.grid.traverse(k,function(t){t.isBand=(g.isArray(t.columns)||(t.clientType==="c1band"));if(e.c1commandbtnfield.test(t)||e.c1btnfield.test(t)){t.dataKey=null}t._originalDataKey=t.dataKey;t._originalHeaderText=t.headerText});new b.grid.bandProcessor().getVisibleHeight(k,true);var o=[],p=this._originalHeaderRowData(),n=this._originalFooterRowData(),q=(l||"").toLowerCase(),s=this;if(m){b.grid.columnsGenerator.generate(q,j,k)}b.grid.setTraverseIndex(k);b.grid.traverse(k,function(t){t.isBand=(g.isArray(t.columns)||(t.clientType==="c1band"));b.grid.shallowMerge(t,e.c1basefield.prototype.options);if(!t.isBand){if(e.c1commandbtnfield.test(t)){t.clientType="c1commandbtnfield";b.grid.shallowMerge(t,e.c1btnfieldbase.prototype.options);b.grid.shallowMerge(t,e.c1commandbtnfield.prototype.options);t.editCommand=(t.editCommand||{});b.grid.shallowMerge(t.editCommand,e.c1commandbtnfield.prototype.options.editCommand);t.cancelCommand=(t.cancelCommand||{});b.grid.shallowMerge(t.cancelCommand,e.c1commandbtnfield.prototype.options.cancelCommand);t.deleteCommand=(t.deleteCommand||{});b.grid.shallowMerge(t.deleteCommand,e.c1commandbtnfield.prototype.options.deleteCommand);t.updateCommand=(t.updateCommand||{});b.grid.shallowMerge(t.updateCommand,e.c1commandbtnfield.prototype.options.updateCommand)}else{if(e.c1btnfield.test(t)){t.clientType="c1btnfield";b.grid.shallowMerge(t,e.c1btnfieldbase.prototype.options);b.grid.shallowMerge(t,e.c1btnfield.prototype.options)}else{b.grid.shallowMerge(t,e.c1field.prototype.options);t.groupInfo=t.groupInfo||{};b.grid.shallowMerge(t.groupInfo,e.c1field.prototype.options.groupInfo);if(!t.clientType){t.clientType="c1field"}}}}else{t.clientType="c1band"}if(t.isLeaf&&!t.isBand){o.push(t)}});this._field("leaves",o);if(m){g.each(o,g.proxy(function(v,t){var u=(typeof(t.dataKey)==="number")?t.dataKey:v;if(q==="merge"||t.dynamic===true){if(t.headerText===undefined){if(s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&p&&(u<p.length)){t.headerText=g.trim(p[u])}else{if(b.grid.validDataKey(t.dataKey)){t.headerText=""+t.dataKey}}}}if(s._dataViewWrapper&&s._dataViewWrapper.isBoundedToDOM()&&n&&(u<n.length)){t._footerTextDOM=g.trim(n[u])}},this))}};h.prototype._rebuildLeaves=function(){var j=[],l=[],k;if(this._showRowHeader()){k=b.grid.createDynamicField({clientType:"c1basefield",dataIndex:-1,travIdx:-1,parentVis:true,allowMoving:false,allowSizing:false,allowSort:false,isRowHeader:true});k.owner=this;j.push(k)}g.each(this.options.columns,function(m,n){j.push(n)});this._columnsHeadersTable(new b.grid.bandProcessor().generateSpanTable(j,l));this._field("leaves",l);this._onLeavesCreated()};h.prototype._onLeavesCreated=function(){var o=this._field("leaves"),m=this._dataViewWrapper.getFieldsInfo(),n,l=0,j=0,k=this;this._field("visibleLeaves",g.grep(o,function(p,q){p.leavesIdx=q;if(b.grid.validDataKey(p.dataKey)){p.dataIndex=l++}else{p.dataIndex=-1}if(!p.isBand){n=m[p.dataKey];if(n){p._underlyingDataType=n.type;p._underlyingDataFormatString=n.format}if(g.isFunction(p.dataParser)){p.dataParser=new (p.dataParser)()}}if(p.parentVis){p.visLeavesIdx=j++;return true}return false}))};h.prototype._allowEditing=function(){return(this.options.allowEditing===true)||(this.options.editingMode==="cell")||(this.options.editingMode==="row")};h.prototype._allowCellEditing=function(){var j=this.options.editingMode;if(j==="row"){return false}return(this.options.allowEditing===true)||(j==="cell")};h.prototype._allowVirtualScrolling=function(){if(this.mAllowVirtualScrolling===undefined){this.mAllowVirtualScrolling=!this.options.allowPaging&&this.options.allowVirtualScrolling&&(this.options.staticRowIndex<0)&&(this.options.scrollMode!=="none")&&!this._hasMerging()}return this.mAllowVirtualScrolling};h.prototype._headerRows=function(){return this._view().headerRows()};h.prototype._filterRow=function(){return this._view().filterRow()};h.prototype._rows=function(){return this._view().bodyRows()};h.prototype._localizeFilterOperators=function(k){var j=this,l=new b.grid.filterOperatorsCache(this);g.each(k,function(m,p){if(p.name){var n=l.getByName(p.name);if(n){n.displayName=p.displayName}}})};h.prototype._KeyDownEventListener=function(){if(!this.mKeyDownEventListener){var j=this._view(),k=j&&j.focusableElement();if(k){this.mKeyDownEventListener=new e.keyDownEventListener(this,k)}}return this.mKeyDownEventListener};h.prototype._UIDragndrop=function(j){if(!this._dragndropui&&j){this._dragndropui=new b.grid.uiDragndrop(this)}return this._dragndropui};h.prototype._UIFrozener=function(j){if(!this._frozenerui&&j){this._frozenerui=new b.grid.uiFrozener(this)}return this._frozenerui};h.prototype._UIResizer=function(j){if(!this._resizerui&&j){this._resizerui=new b.grid.uiResizer(this)}return this._resizerui};h.prototype._UISelection=function(j){if(!this._selectionui&&j){this._selectionui=new b.grid.uiSelection(this)}return this._selectionui};h.prototype._postset_allowColMoving=function(m,l){var k=this;g.each(this.columns(),function(n,o){if(m){k._UIDragndrop(true).attach(o)}else{k._UIDragndrop(true).detach(o)}});var j=this._field("groupedWidgets");if(j){g.each(j,function(n,o){if(m){k._UIDragndrop(true).attach(o)}else{k._UIDragndrop(true).detach(o)}})}};h.prototype._postset_allowEditing=function(k,j){this._postset_editingMode(this.options.editingMode,undefined)};h.prototype._postset_allowSorting=function(k,j){this.ensureControl(false)};h.prototype._postset_columns=function(k,j){this._initialized=false;this.ensureControl(true)};h.prototype._postset_allowPaging=function(k,j){this.ensureControl(true)};h.prototype._postset_freezingMode=function(k,j){if(this._frozenerui){this._frozenerui.refresh()}};h.prototype._postset_culture=function(k,j){this.mClosestCulture=Globalize.findClosestCulture(k)||Globalize.findClosestCulture("default");this.ensureControl(false)};h.prototype._postset_customFilterOperators=function(k,j){var l=this._dataViewWrapper.dataView()};h.prototype._postset_data=function(k,j){this._resetColumns();if(this._dataViewWrapper){this._dataViewWrapper.dispose()}this._dataViewWrapper=new b.grid.dataViewWrapper(this);this.ensureControl(true)};h.prototype._postset_disabled=function(m,l){var k=this,j=this._view();b.grid.iterateChildrenWidgets(this.outerDiv,function(n,o){if(o!==k){o.option("disabled",m)}});if(j){j.ensureDisabledState()}};h.prototype._postset_editingMode=function(k,j){if(this.mKeyDownEventListener){this.mKeyDownEventListener.dispose();this.mKeyDownEventListener=null;this._KeyDownEventListener()}};h.prototype._postset_groupIndent=function(k,j){this.ensureControl(false)};h.prototype._postset_groupAreaCaption=function(l,k){var j=this._groupedColumns();if(this.$groupArea&&(!j||!j.length)){this.$groupArea.html(l||"&nbsp;")}};h.prototype._postset_highlightCurrentCell=function(k,j){var l=this.currentCell();if(l&&l._isValid()){this._highlightCellPosition(l,k)}};h.prototype._preset_pageIndex=function(n,l){if(isNaN(n)){throw"out of range"}var k=this.pageCount(),m=function(o){if(o>k-1){o=k-1}if(o<0){o=0}return o},j;n=m(n);if(this.options.allowPaging&&n!==l){j={newPageIndex:n};if(!this._onPageIndexChanging(j)){n=l}else{n=m(j.newPageIndex)}}return n};h.prototype._postset_pageIndex=function(l,k){if(this.options.allowPaging){var j={newPageIndex:l};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onPageIndexChanged(j)}else{this.ensureControl(true,{afterRefresh:function(){this._onPageIndexChanged(j)}})}}};h.prototype._preset_pageSize=function(k,j){if(isNaN(k)){throw"out of range"}if(k<=0){k=1}return k};h.prototype._postset_pageSize=function(k,j){this._resetDataProperties();if(this.options.allowPaging&&!this._customPagingEnabled()){this.ensureControl(true)}};h.prototype._postset_pagerSettings=function(k,j){this.ensureControl(false)};h.prototype._postset_rowHeight=function(k,j){this.rowOuterHeight=-1;this.ensureControl(false)};h.prototype._postset_scrollMode=function(k,j){this.ensureControl(false)};h.prototype._postset_selectionMode=function(m,k){var l=this.selection(),n=this.currentCell(),j=this.selection().selectedCells().length();l.beginUpdate();l.clear();if(n&&n._isValid()&&j){l._selectRange(new b.grid.cellInfoRange(n,n),false,false,b.grid.cellRangeExtendMode.none,null)}l.endUpdate();this._view().toggleDOMSelection(m==="none")};h.prototype._postset_showFilter=function(k,j){this.ensureControl(false)};h.prototype._postset_showGroupArea=function(k,j){this.ensureControl(false)};h.prototype._postset_showRowHeader=function(k,j){this.ensureControl(false)};h.prototype._postset_staticRowIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};h.prototype._postset_staticColumnIndex=function(){if(this.options.scrollMode!=="none"){this.ensureControl(false)}};h.prototype._postset_allowVirtualScrolling=function(k,j){this.ensureControl(false)};h.prototype._preset_allowVirtualScrolling=function(k,j){if(isNaN(k)||k<0){throw"out of range"}return k};h.prototype._activateSpinner=function(){if(!this._spinnerIsActivated){var k=b.grid.wijgrid.CSS,l=this.options.wijCSS,j=this.outerDiv.append('<div class="'+k.loadingOverlay+" "+l.wijgridLoadingOverlay+" "+l.overlay+'"></div><span class="'+k.loadingText+" "+l.wijgridLoadingText+" "+l.content+" "+l.cornerAll+'"><span class="'+l.icon+" "+l.iconClock+'"></span>'+this.options.loadingText+"</span>").find("> ."+k.loadingText);j.position({my:"center",at:"center center",of:this.outerDiv,collision:"none"});this._spinnerIsActivated=true}};h.prototype._customPagingEnabled=function(){return this.options.allowPaging&&this.options.totalRows>=0};h.prototype._deactivateSpinner=function(){if(this._spinnerIsActivated){try{var j=b.grid.wijgrid.CSS;this.outerDiv.find("> ."+j.loadingOverlay+", > ."+j.loadingText).remove()}finally{this._spinnerIsActivated=false}}};h.prototype._columnWidgetsFactory=function(j,m){var k,l=m.clientType;if(!l&&m.isBand){l="c1band"}m=g.extend({},m,{disabled:this.options.disabled});try{g.data(j[0],"wijgridowner",this);switch(l){case"c1basefield":k=j.c1basefield(m);break;case"c1band":k=j.c1band(m);break;case"c1btnfield":k=j.c1btnfield(m);break;case"c1commandbtnfield":k=j.c1commandbtnfield(m);break;default:k=j.c1field(m)}}finally{g.removeData(j[0],"wijgridowner")}return k};h.prototype._convertWidgetsToOptions=function(){if(this._initialized&&this._mergeWidgetsWithOptions){this._ownerise(false);this._widgetsToOptions();this._ownerise(true)}};h.prototype._field=function(j,k){return b.grid.dataPrefix(this.element,this._data$prefix,j,k)};h.prototype._removeField=function(j){var k=this._data$prefix+j;this.element.removeData(k)};h.prototype._prepareTotalsRequest=function(k){var m=this._field("leaves"),j,l;if(!m||!this.options.showFooter){return[]}j=g.map((m),function(o,n){if(!o.isBand&&b.grid.validDataKey(o.dataKey)&&o.aggregate&&o.aggregate!=="none"){if(k){return[{column:o,aggregate:o.aggregate}]}else{return[{dataKey:o.dataKey,aggregate:o.aggregate}]}}return null});return j};h.prototype._widgetsToOptions=function(){var j=b.grid.flatten(this.options.columns);g.each(this.columns(),function(m,l){delete l.options.columns;var k=j[l.options.travIdx];g.extend(true,k,l.options);k.filterValue=l.options.filterValue;k.filterOperator=l.options.filterOperator})};h.prototype._recreateColumnWidgets=function(){g.each(this.columns(),function(s,t){t.destroy()});var n=[],p=this._headerRows(),r,o,q,m,l,j,k;if(p&&p.length()){r=[];b.grid.traverse(this.options.columns,function(s){if(s.parentVis){r.push(s)}});for(o=0,q=r.length;o<q;o++){m=r[o];l=p.item(m.thY);j=b.grid.rowAccessor.getCell(l,m.thX);k=this._columnWidgetsFactory(g(j),m);n.push(k.data(b.grid.widgetName(k)))}}this._field("columns",n)};h.prototype._groupedColumns=function(l){var j;l=!(j=this._field("groupedColumns"))||l;if(l){j=[];var n=this._field("leaves")||[],m=false,k=function(o){return o.groupInfo&&o.groupInfo.position&&(o.groupInfo.position!=="none")};g.each(n,function(o,p){if(k(p)){m=m||(p.groupedIndex===undefined);if(!m){j.push(p)}}else{delete p.groupedIndex}});if(m){g.each(n,function(o,p){if(k(p)){p.groupedIndex=j.length;j.push(p)}})}else{j.sort(function(p,o){return p.groupedIndex-o.groupedIndex});g.each(j,function(o,p){p.groupedIndex=o})}this._field("groupedColumns",j)}return j||[]};h.prototype._ownerise=function(j){if(j){var k=this;b.grid.traverse(this.options.columns,function(o){o.owner=k;var n,m,l;if((n=o.groupInfo)){n.owner=o;if(n.expandInfo){for(m=0,l=n.expandInfo.length;m<l;m++){n.expandInfo[m].owner=n}}}})}else{b.grid.traverse(this.options.columns,function(o){delete o.owner;var n,m,l;if((n=o.groupInfo)){delete n.owner;if(n.expandInfo){for(m=0,l=n.expandInfo.length;m<l;m++){delete n.expandInfo[m].owner}}}})}};h.prototype._ensureRenderableBounds=function(j){return b.grid.ensureBounds(j,this._renderableRowsCount()-1)};h.prototype._ensureTotalRowsBounds=function(j){return b.grid.ensureBounds(j,this._totalRowsCount()-1)};h.prototype._ensureViewPortBoundsVisible=function(k){var j=this._renderableRowsCount();if(k.end>=j){k.start-=k.end-(j-1);k.end=j-1;k.start=Math.max(0,k.start);k.end=Math.max(0,k.end)}return k};h.prototype._renderableBoundsCollection=function(){return this.mRenderableBoundsCollection};h.prototype._rebuildRenderBoundsCollection=function(){var o=-1,j=-1,m=false,n=this._totalRowsCount();this.mRenderableBoundsCollection=new b.grid.renderBoundsCollection(n-1);if(this._allowVirtualScrolling()&&this._serverSideVirtualScrolling()){this.mRenderableBoundsCollection.add({start:0,end:n-1})}else{if(!this._allowVirtualScrolling()||!this._hasGrouping()){this.mRenderableBoundsCollection.add({start:0,end:n-1})}else{for(var l=0;l<this.sketchTable.count();l++){var k=this.sketchTable.row(l);if(k.extInfo.state&b.grid.renderStateEx.hidden){if(o>=0){this.mRenderableBoundsCollection.add({start:o,end:j});m=false}o=j=-1}else{if(o<0){m=true;o=j=l}else{j++}}}if(m){this.mRenderableBoundsCollection.add({start:o,end:j})}}}};h.prototype._refresh=function(j){new b.grid.grouper().group(this,this.sketchTable,this._field("leaves"));new b.grid.merger().merge(this.sketchTable,this._field("visibleLeaves"));this._rebuildRenderBoundsCollection();if(this.options.scrollMode!=="none"){this.mView=new b.grid.fixedView(this,this._viewPortBounds())}else{this.mView=new b.grid.flatView(this,this._viewPortBounds())}this._render();this._ownerise(false);this._recreateColumnWidgets();this._ownerise(true);if(this.options.allowPaging){if(this.$topPagerDiv){this.$topPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}if(this.$bottomPagerDiv){this.$bottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}}};h.prototype._refreshVirtual=function(j){var l=j.virtualScrollData,k={top:0,bottom:0};if(l.data){k=this._processVirtualData(l)}this._updateRowInfos(l,k);this._renderVirtualIntoView(l)};h.prototype._updateRowInfos=function(o,l){var j=this._viewPortBounds(),q=this._view(),m=o.newBounds,s=this._view().bodyRows(),p,n,r,k;switch(o.mode){case e.intersectionMode.reset:break;case e.intersectionMode.overlapBottom:p={start:m.start-j.start,end:j.end-j.start};r=m.start-j.start;for(n=p.start;n<=p.end;n++){k=q._getRowInfo(s.item(n),false);k.sectionRowIndex-=r;if(l.top!==0){k.dataItemIndex+=l.top}q._setRowInfo(k.$rows,k)}break;case e.intersectionMode.overlapTop:p={start:j.start-j.start,end:m.end-j.start};r=j.start-m.start;for(n=p.start;n<=p.end;n++){k=q._getRowInfo(s.item(n),false);k.sectionRowIndex+=r;if(l.top!==0){k.dataItemIndex+=l.top}q._setRowInfo(k.$rows,k)}break}};h.prototype._renderVirtualIntoView=function(n){var j=this._viewPortBounds(),r=this,k,q=this._view(),o,m,l;switch(n.mode){case e.intersectionMode.reset:q._clearBody();var p=n.newBounds.end-n.newBounds.start+1;this._renderableBoundsCollection().forEachIndex(n.newBounds.start,p,function(s){k=r.sketchTable.row(s-r._dataOffset);q._insertBodyRow(k,-1,k.dataItemIndex(),s)});q._rebuildOffsets();break;case e.intersectionMode.overlapBottom:o={start:n.newBounds.start,end:j.end};for(m=0;m<o.start-j.start;m++){q._removeBodyRow(0)}var p=n.newBounds.end-o.end;this._renderableBoundsCollection().forEachIndex(o.end+1,p,function(s){k=r.sketchTable.row(s-r._dataOffset);q._insertBodyRow(k,-1,k.dataItemIndex(),s)});break;case e.intersectionMode.overlapTop:o={start:j.start,end:n.newBounds.end};for(m=0;m<j.end-n.newBounds.end;m++){q._removeBodyRow(o.end-o.start+1)}l=0;var p=j.start-n.newBounds.start;this._renderableBoundsCollection().forEachIndex(n.newBounds.start,p,function(s){k=r.sketchTable.row(s-r._dataOffset);q._insertBodyRow(k,l++,k.dataItemIndex(),s)});break;default:break}};h.prototype._processVirtualData=function(q){var r=this._dataViewWrapper,j=r.dataView().getSource(),k,s=this._field("leaves"),p,m,l,o=0,u={top:0,bottom:0},t,n=this._serverSideVirtualScrollingMargin();switch(q.mode){case e.intersectionMode.reset:this.sketchTable.clear();r._unsafeSplice(0,j.length);this._dataOffset=q.request.index;for(p=0;p<q.data.length;p++){r._unsafePush(k=q.data[p]);this.sketchTable.add(this._buildSketchRow(r._wrapDataItem(k,p),s))}break;case e.intersectionMode.overlapBottom:for(p=0;p<q.data.length;p++){r._unsafePush(k=q.data[p]);this.sketchTable.add(this._buildSketchRow(r._wrapDataItem(k,j.length-1),s))}u.bottom=q.data.length;break;case e.intersectionMode.overlapTop:for(p=q.data.length-1;p>=0;p--){r._unsafeSplice(0,0,k=q.data[p]);this.sketchTable.insert(0,this._buildSketchRow(r._wrapDataItem(k,p),s))}this._dataOffset=q.request.index;u.top=q.data.length;break}m=this._ensureTotalRowsBounds({start:q.newBounds.start,end:q.newBounds.end});l={start:this._dataOffset,end:this._dataOffset+j.length-1};o=(l.end-m.end)-n;if(o>0){u.bottom-=o;r._unsafeSplice(j.length-o,o);this.sketchTable.removeLast(o)}o=(m.start-l.start)-n;if(o>0){u.top-=o;r._unsafeSplice(0,o);this.sketchTable.removeFirst(o);this._dataOffset+=o}this.sketchTable.updateIndexes();r._refreshSilent();return u};h.prototype._needToCreatePagerItem=function(){return this.options.allowPaging===true};h.prototype._isMobileEnv=function(){return this._isMobile};h.prototype._isTouchEnv=function(){return !!(g.support.isTouchEnabled&&g.support.isTouchEnabled())};h.prototype._render=function(){var j=this._view(),n=this.options,k=b.grid.wijgrid.CSS,m=this.options.wijCSS,l;j.render();l=this.outerDiv;if(n.scrollMode!=="none"){l=this.outerDiv.find("div."+k.scroller+":first")}this.$superPanelHeader=null;if(this.$topPagerDiv){if(this.$topPagerDiv.data("wijmo-wijpager")){this.$topPagerDiv.wijpager("destroy")}this.$topPagerDiv.remove()}this.$topPagerDiv=null;if(this._needToCreatePagerItem()&&((n.pagerSettings.position==="top")||(n.pagerSettings.position==="topAndBottom"))){if(!this.$topPagerDiv){l.prepend(this.$superPanelHeader=g('<div class="wijmo-wijsuperpanel-header"></div>'));this.$superPanelHeader.prepend(this.$topPagerDiv=g('<div class="'+k.headerArea+" "+m.wijgridHeaderArea+" "+m.header+" "+m.cornerTop+'"></div>'))}}if(n.showGroupArea){this._processGroupArea(l)}else{this.$groupArea=null}if(this.$bottomPagerDiv){if(this.$bottomPagerDiv.data("wijmo-wijpager")){this.$bottomPagerDiv.wijpager("destroy")}this.$bottomPagerDiv.remove()}this.$bottomPagerDiv=null;if(this._needToCreatePagerItem()&&((n.pagerSettings.position==="bottom")||(n.pagerSettings.position==="topAndBottom"))){if(!this.$bottomPagerDiv){l.append(this.$bottomPagerDiv=g('<div class="'+k.footerArea+" "+m.wijgridFooterArea+" wijmo-wijsuperpanel-footer "+m.stateDefault+" "+m.cornerBottom+'"></div>'))}}};h.prototype._processGroupArea=function(m){var j=this,k=this._groupedColumns(),o=[],l=b.grid.wijgrid.CSS,n=this.options.wijCSS;this.$groupArea=g('<div class="'+n.content+" "+n.helperClearFix+" "+l.groupArea+" "+n.wijgridGroupArea+'"></div>');if(k.length>0){g.each(k,function(p,r){var q=g('<a href="#"></a>').appendTo(j.$groupArea);try{g.data(q[0],"wijgridowner",j);q.c1groupedfield(g.extend({},{allowMoving:r.allowMoving,allowSort:r.allowSort,dataIndex:r.dataIndex,dataKey:r.dataKey,headerText:r.headerText,isBand:r.isBand,isLeaf:r.isLeaf,linearIdx:r.linearIdx,parentIdx:r.parentIdx,sortDirection:r.sortDirection,travIdx:r.travIdx,groupedIndex:r.groupedIndex},{disabled:j.options.disabled}))}finally{g.removeData(q[0],"wijgridowner")}o.push(q.data("wijmo-c1groupedfield"))})}else{this.$groupArea.addClass(l.groupAreaEmpty).css("padding",0).html(this.options.groupAreaCaption||"&nbsp;")}this._field("groupedWidgets",o);if(!this.$superPanelHeader){m.prepend(this.$superPanelHeader=g('<div class="wijmo-wijsuperpanel-header"></div>'))}this.$superPanelHeader.prepend(this.$groupArea);this._UIDragndrop(true).attachGroupArea(this.$groupArea)};h.prototype._pagerSettings2PagerWidgetSettings=function(){return g.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:g.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:g.proxy(this._onPagerWidgetPageIndexChanged,this)})};h.prototype._showRowHeader=function(){return(this.options.showRowHeader===true)&&(this.options.staticColumnsAlignment!=="right")};h.prototype._attachEvents=function(){var j=this._view(),l=j.focusableElement(),k=this;l.bind("keydown."+this.widgetName,g.proxy(this._onKeyDown,this));l.bind("focusin."+this.widgetName,g.proxy(this._onFocusIn,this));this._KeyDownEventListener();g.each(j.subTables(),function(m,n){var o=n.element();if(o){if(o.tHead){g(o.tHead).bind("click."+k.widgetName,g.proxy(k._onClick,k))}if(o.tBodies.length){g(o.tBodies[0]).bind("click."+k.widgetName,g.proxy(k._onClick,k)).bind("dblclick."+k.widgetName,g.proxy(k._onDblClick,k)).bind("mousemove."+k.widgetName,g.proxy(k._onMouseMove,k)).bind("mouseout."+k.widgetName,g.proxy(k._onMouseOut,k))}}});g(window).bind("resize."+this.widgetName+"."+this._eventUID,g.proxy(this._onWindowResize,this))};h.prototype._detachEvents=function(m){var j=this._view(),l=this,k;this._windowResizeTimer=0;g(window).unbind("resize."+this.widgetName+"."+this._eventUID);if(j){k=j.focusableElement();k.unbind("."+this.widgetName);g.each(j.subTables(),function(){var n=this.element();if(n){if(n.tHead){g(n.tHead).unbind("."+l.widgetName)}if(n.tBodies.length){g(n.tBodies[0]).unbind("."+l.widgetName)}}})}};h.prototype._handleSort=function(o,k){var n=this.options.columns,j=o.travIdx,m,l;if(o&&this.options.allowSorting){m=((o.sortDirection==="none")?"ascending":((o.sortDirection==="ascending")?"descending":"ascending"));l={column:o,sortDirection:m,sortCommand:o.dataKey+" "+(m==="ascending"?"asc":"desc")};if(this._onColumnSorting(l)){o.sortDirection=l.sortDirection;if(k){o.sortOrder=this._customSortOrder++}else{this._customSortOrder=1000;g.each(this.columns(),function(p,q){q.options.sortOrder=0;if(q.options.travIdx!==j&&!(q.options.groupInfo&&q.options.groupInfo.position!=="none")){q.options.sortDirection="none"}});b.grid.traverse(n,function(p){p.sortOrder=0;if(p.travIdx!==j&&!(p.groupInfo&&p.groupInfo.position!=="none")){p.sortDirection="none"}})}l={column:o,sortDirection:o.sortDirection,sortCommand:o.dataKey+" "+(o.sortDirection==="ascending"?"asc":"desc")};if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnSorted(l)}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnSorted(l)}})}}}};h.prototype._handleDragnDrop=function(n,r,m,j,q){var p=b.grid.getColumnByTravIdx(this.options.columns,n),l=b.grid.getColumnByTravIdx(this.options.columns,r),k=j?"groupArea":"columns",o=q?"groupArea":"columns";if(q){if(this._onColumnGrouping({drag:p.found,drop:l?l.found:null,dragSource:k,dropSource:o,at:m})){this.ensureControl(true,{beforeRefresh:function(){if(!l){p.found.groupedIndex=0}else{switch(m){case"left":p.found.groupedIndex=l.found.groupedIndex-0.5;break;case"right":p.found.groupedIndex=l.found.groupedIndex+0.5;break}}if(!j){g.extend(true,p.found,{groupInfo:{position:"header"}})}},afterRefresh:function(){this._onColumnGrouped({drag:p.found,drop:l?l.found:null,dragSource:k,dropSource:o,at:m})}})}}else{if(this._onColumnDropping({drag:p.found,drop:l.found,at:m})){this.ensureControl(false,{beforeRefresh:function(){p.at.splice(p.found.linearIdx,1);switch(m){case"left":if(p.at===l.at&&p.found.linearIdx<l.found.linearIdx){l.at.splice(l.found.linearIdx-1,0,p.found)}else{l.at.splice(l.found.linearIdx,0,p.found)}break;case"right":if(p.at===l.at&&p.found.linearIdx<l.found.linearIdx){l.at.splice(l.found.linearIdx,0,p.found)}else{l.at.splice(l.found.linearIdx+1,0,p.found)}break;case"center":l.found.columns.push(p.found);break}b.grid.setTraverseIndex(this.options.columns)},afterRefresh:function(){this._onColumnDropped({drag:p.found,drop:l.found,at:m})}})}}};h.prototype._handleFilter=function(m,p,o){var j=(new b.grid.filterOperatorsCache(this)).getByName(p),n,l,k;if(j){if(j.arity>1){n=this.parse(m.options,o);l=(n!==null&&(b.grid.getDataType(m.options)==="string"||!isNaN(n)))}else{l=true}if(l){k={column:m.options,operator:j.name,value:n};if(this._onColumnFiltering(k)){m.options.filterValue=k.value;m.options.filterOperator=k.operator;this._resetDataProperties();this._resetVerticalBounds();if(this._customPagingEnabled()){this._convertWidgetsToOptions();this._onColumnFiltered({column:m.options})}else{this.ensureControl(true,{afterRefresh:function(){this._onColumnFiltered({column:m.options})}})}}}}};h.prototype._handleUngroup=function(l){var k=b.grid.getColumnByTravIdx(this.options.columns,l),j;if(k&&k.found){j=k.found;if(this._onColumnUngrouping({column:j})){this.ensureControl(true,{beforeRefresh:function(){delete j.groupedIndex;g.extend(true,j,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:j})}})}}};h.prototype._onVirtualScrolling=function(o,l,p,j,n,m){var k=this;this.ensureControl(this._serverSideVirtualScrolling(),{virtualScrollData:{newBounds:o,request:l,mode:p,data:m},beforeOnRendered:function(q){var r=k._viewPortBounds();g.extend(r,q.virtualScrollData.newBounds)},afterRefresh:function(q){(k._view())._adjustRowsHeights();if(n){n(j)}}})};h.prototype._handleVirtualScrolling=function(s,k,q){if(typeof k==="undefined"){k=null}var p=this._view(),j=this._viewPortBounds(),l=this._ensureRenderableBounds({start:s,end:s+p.getVirtualPageSize()-1}),r=this._ensureTotalRowsBounds({start:this._dataOffset,end:this._dataOffset+this._dataViewWrapper.dataView().count()-1}),m=null,o,n=(this._view()).getVirtualPageSize();if(k){o=k}else{if(l.start>j.end||l.end<j.start){o=e.intersectionMode.reset}else{if(l.start>j.start){o=e.intersectionMode.overlapBottom}else{if(l.start<j.start){o=e.intersectionMode.overlapTop}else{o=l.start!==j.start||l.end!==j.end?e.intersectionMode.reset:e.intersectionMode.none}}}}if(this._serverSideVirtualScrolling()){switch(o){case e.intersectionMode.reset:m={index:s,maxCount:n};break;case e.intersectionMode.overlapBottom:if(l.end>r.end){m={index:r.end+1,maxCount:n}}break;case e.intersectionMode.overlapTop:if(l.start<r.start){m={index:Math.max(0,r.start-n),maxCount:0};m.maxCount=r.start-m.index}break}}if(o!==e.intersectionMode.none){this._onVirtualScrolling(l,m,o,s,q)}};h.prototype._serverSideVirtualScrolling=function(){return false};h.prototype._serverSideVirtualScrollingMargin=function(){var j=(this._view()).getVirtualPageSize()*2;if(j<20){j=20}return j};h.prototype._onColumnDropping=function(j){return this._trigger("columnDropping",null,j)};h.prototype._onColumnDropped=function(j){this._trigger("columnDropped",null,j)};h.prototype._onColumnGrouping=function(j){return this._trigger("columnGrouping",null,j)};h.prototype._onColumnGrouped=function(j){this._trigger("columnGrouped",null,j)};h.prototype._onColumnUngrouping=function(j){return this._trigger("columnUngrouping",null,j)};h.prototype._onColumnUngrouped=function(j){this._trigger("columnUngrouped",null,j)};h.prototype._onColumnFiltering=function(j){return this._trigger("filtering",null,j)};h.prototype._onColumnFiltered=function(j){this._trigger("filtered",null,j)};h.prototype._onFilterOperatorsListShowing=function(j){this._trigger("filterOperatorsListShowing",null,j)};h.prototype._onColumnSorting=function(j){return this._trigger("sorting",null,j)};h.prototype._onColumnSorted=function(j){this._trigger("sorted",null,j)};h.prototype._onCurrentCellChanged=function(n,m){var r=this;var q=this.options,p=this.currentCell(),l=p.row(),k=function(){var x=r.currentCell(),s=r._getDataCellsRange(e.dataRowsRangeMode.sketch);if(r.options.highlightCurrentCell){var o=new b.grid.cellInfo(m.changingEventArgs.oldCellIndex,m.changingEventArgs.oldRowIndex,r);if(o._isValid&&s._containsCellInfo(o)){r._highlightCellPosition(o,false)}r._highlightCellPosition(x,true)}var y;if(m.setFocus&&(y=x.tableCell())){r._setFocusOnCell(m.hasFocusedChild?g(n.target):g(y),m.hasFocusedChild,x.column())}r._trigger("currentCellChanged");var u=(n&&(n.type||"").toLowerCase())||"";if(m.changeSelection){var v=r.selection(),w=r.options.selectionMode.toLowerCase(),t=m.selectionExtendMode||b.grid.cellRangeExtendMode.none;v.beginUpdate();if(u){if(x._isValid()){switch(u){case"focusin":case"click":if(!n.shiftKey||(!v._multipleRangesAllowed()&&w!=="singlerange")){v._startNewTransaction(x)}if(n.shiftKey&&n.ctrlKey){v._clearRange(new b.grid.cellInfoRange(x,x),t)}else{v._selectRange(new b.grid.cellInfoRange(v._anchorCell(),x),n.ctrlKey,n.shiftKey,t,null)}break;case"keydown":if(!n.shiftKey||(!v._multipleRangesAllowed()&&w!=="singlerange")){v._startNewTransaction(x)}v._selectRange(new b.grid.cellInfoRange(v._anchorCell(),x),false,n.shiftKey,b.grid.cellRangeExtendMode.none,null);break}}}else{v.clear();if(x._isValid()){v._startNewTransaction(x);v._selectRange(new b.grid.cellInfoRange(x,x),false,false,b.grid.cellRangeExtendMode.none,null)}}v.endUpdate()}if(u==="click"&&r._editBySingleClick()){r._beginEditInternal(n)}};this.mCurrentCellLocker=true;this._dataViewWrapper.currentPosition((l&&(l.type&b.grid.rowType.data))?l.dataItemIndex:-1);if(q.scrollMode!=="none"&&p&&!p.isEqual(b.grid.cellInfo.outsideValue)){var j=p,l=j.row();if(l&&!(l.type&b.grid.rowType.data)&&!j.tableCell()){j=p._clone();j.cellIndex(0)}(this._view()).scrollTo(j,function(){try{k()}finally{r.mCurrentCellLocker=false}},m)}else{try{k()}finally{this.mCurrentCellLocker=false}}};h.prototype._onPageIndexChanging=function(j){return this._trigger("pageIndexChanging",null,j)};h.prototype._onPageIndexChanged=function(j){this._trigger("pageIndexChanged",null,j)};h.prototype._onPagerWidgetPageIndexChanging=function(k,j){j.handled=true};h.prototype._onPagerWidgetPageIndexChanged=function(k,j){this._setOption("pageIndex",j.newPageIndex)};h.prototype._onRendering=function(j){var k=this._view();this._rendered=false;if(j.virtualScrollData){}else{var l=this._field("currentCell");this._field("currentCellPrevCycle",l?{x:l.cellIndex(),y:l.rowIndex(),dataItemIndex:l.row()?l.row().dataItemIndex:-1}:{x:-1,y:-1,dataItemIndex:-1});this._field("currentCell",null);if(k){k.dispose()}this._detachEvents(false);this.element.detach();this.element.css({"table-layout":"",width:""});this.element.empty();this.outerDiv.empty();this.outerDiv.append(this.element);if(this._selectionui){this._selectionui.dispose();this._selectionui=null}if(this._resizerui){this._resizerui.dispose();this._resizerui=null}if(this._frozenerui){this._frozenerui.dispose();this._frozenerui=null}if(this.mKeyDownEventListener){this.mKeyDownEventListener.dispose();this.mKeyDownEventListener=null}}this._trigger("rendering")};h.prototype._onRendered=function(j){var k=this._view(),n,l=this.selection().selectedCells().length()>0;this._rendered=true;this._renderCounter++;if(!j.virtualScrollData){this._field("selection",null);this._attachEvents();this._setAttr(k.focusableElement(),"tabIndex",0);var m=this._field("currentCellPrevCycle");n=this._currentCellFromDataView(m.x);if(!n._isValid()&&this.options.showSelectionOnRender){n=this._getFirstDataRowCell(0)}this.currentCell(n,null,true);this._UISelection(true);var o=new b.grid.uiResizer(this);g.each(this.columns(),function(q,p){var r=p.options;if(r.visible&&r.parentVis&&r.isLeaf){o.addElement(p)}});this._resizerui=o;this._setSizeInternal(this._scrollingState);if(this.options.scrollMode!=="none"){this._frozenerui=new b.grid.uiFrozener(this)}}else{var n=this.currentCell();this.currentCell(n,null,false);if(n._isEdit()&&!n.row()){n._isEdit(false)}this.selection()._ensureSelection()}this._trigger("rendered")};h.prototype._onClick=function(o){if(!this._canInteract()||!o.target){return}var r=this._view(),n=this._findUntilOuterDiv(o.target,{td:true,th:true}),p,j,k=b.grid.cellRangeExtendMode.none,q,s,l=false,t=!!(o&&(o.type==="click"));if(n){if(t&&g(o.target).hasClass(b.grid.wijgrid.CSS.groupToggleVisibilityButton)){this._onGroupBtnClick(o);o.stopPropagation();return false}p=g(n).closest("tr");if(!p.length){return}j=r.getAbsoluteCellInfo(n,false);if(p.hasClass(b.grid.wijgrid.CSS.dataRow)||p.hasClass(b.grid.wijgrid.CSS.headerRow)){if(j.cellIndex()<0||j.rowIndex()<0){if(j.rowIndex()>=0){j=new b.grid.cellInfo(0,j.rowIndex());k=b.grid.cellRangeExtendMode.row;l=true}else{if(j.cellIndex()>=0){j=this._getFirstDataRowCell(j.cellIndex());k=b.grid.cellRangeExtendMode.column;l=true}}}if(!l){j=r.getAbsoluteCellInfo(n,true)}this._changeCurrentCell(o,j,{changeSelection:true,setFocus:t,selectionExtendMode:k})}if(t){var m={cell:j};this._trigger("cellClicked",null,m)}}};h.prototype._onDblClick=function(j){if(!this._editBySingleClick()){this._beginEditInternal(j)}};h.prototype._onGroupBtnClick=function(p){if(!this._canInteract()){return}var j=g(p.target).closest("tr"),l=b.grid.groupHelper,m=l.getGroupInfo(j[0]),n,o,k=this;if(m){n=l.getColumnByGroupLevel(this._field("leaves"),m.level);if(n){o=n.groupInfo.expandInfo[m.index];if(o.isExpanded){o.collapse()}else{o.expand(p.shiftKey)}if(this._allowVirtualScrolling()){this._rebuildRenderBoundsCollection();(this._view()).vsUI._changeVisibleRowsCount(this._renderableBoundsCollection().capacity());this._ensureViewPortBoundsVisible(this._viewPortBounds());this._handleVirtualScrolling(this._viewPortBounds().start,e.intersectionMode.reset)}this.setSize()}}};h.prototype._onKeyDown=function(m){var k=this._KeyDownEventListener().isHiddenInput(g(m.target));if(!this._canInteract()||(k&&this._KeyDownEventListener().canHandle(m))){return true}var r=(m.target).tagName.toLowerCase(),j=g(m.target),o=this.currentCell(),l=b.getKeyCodeEnum();if(!k&&(r==="input"||r==="option"||r==="select"||r==="textarea")&&(j.closest("tr.wijmo-wijgrid-datarow").length===0)){return true}if(this._allowCellEditing()){if((m.which===l.ESCAPE||m.which===113)&&(o._isValid()&&o._isEdit())){this._endEditInternal(m);return false}else{if(m.which===113){this._beginEditInternal(m);return false}}}if(!this.options.allowKeyboardNavigation){return true}var q;switch(m.which){case l.DOWN:case l.PAGE_DOWN:case l.UP:case l.PAGE_UP:case l.LEFT:case l.RIGHT:case l.HOME:case l.END:case l.TAB:if(m.which===l.TAB){var p=this._field("visibleLeaves");if(!p||!p.length){return true}}if(k||this._canMoveToAnotherCell(m.target,m.which)){var n=this._getDataCellsRange(e.dataRowsRangeMode.renderable);q=this._getNextCurrentCell(n,o,m.keyCode,m.shiftKey)}break}if(q){this._changeCurrentCell(m,q,{changeSelection:true,setFocus:true});return false}return true};h.prototype._onFocusIn=function(j){if(this.options.allowKeyboardNavigation&&j&&j.target&&g(j.target).is(":input")&&!this._KeyDownEventListener().isHiddenInput(g(j.target))){this._onClick(j)}};h.prototype._onMouseMove=function(o){var q=this._view(),m=this._frozenerui,n,l,r,p,j,k=b.grid.renderState;if(!this.options.highlightOnHover||!this._canInteract()||(m&&m.inProgress())){return}n=this._findUntilOuterDiv(o.target,{td:true,th:true});if(n){l=g(n).closest("tr");if(!l.length||!(l.hasClass(b.grid.wijgrid.CSS.dataRow)||l.hasClass(b.grid.wijgrid.CSS.headerRow))){return}r=q.getAbsoluteCellInfo(n,true);var s=r.rowIndex();if(s!==this._prevHoveredSketchRowIndex){if(this._prevHoveredSketchRowIndex!==undefined&&(q._isRowRendered(this._prevHoveredSketchRowIndex)>=0)){j=q._getRowInfoBySketchRowIndex(this._prevHoveredSketchRowIndex);if(j){q._changeRowRenderState(j,k.hovered,false);this.rowStyleFormatter.format(j)}}this._prevHoveredSketchRowIndex=s;if(s>=0){j=q._getRowInfoBySketchRowIndex(s);if(j){q._changeRowRenderState(j,k.hovered,true);this.rowStyleFormatter.format(j)}}}}};h.prototype._onMouseOut=function(n){if(!this._canInteract()){return}var m=this._findUntilOuterDiv(n.relatedTarget,{tr:true});if(!m||!g(m).hasClass(b.grid.wijgrid.CSS.dataRow)){var k=this._prevHoveredSketchRowIndex,j=this._view();if(k>=0){var l=j._getRowInfoBySketchRowIndex(k);if(l&&l.$rows){j._changeRowRenderState(l,b.grid.renderState.hovered,false);this.rowStyleFormatter.format(l)}this._prevHoveredSketchRowIndex=-1}}};h.prototype._onWindowResize=function(k){var j=this;if(this._windowResizeTimer>0){window.clearTimeout(this._windowResizeTimer);this._windowResizeTimer=0}if(this._windowResizeTimer!==-1){this._windowResizeTimer=window.setTimeout(function(){j._windowResizeTimer=-1;try{if(!j._destroyed&&j._initialized&&j.element.parent().length){j.setSize()}}finally{j._windowResizeTimer=0}},50)}};h.prototype._fieldResized=function(n,k,m){if(k<0){k=0}if(m<=0){m=1}var l={column:n.options,oldWidth:k,newWidth:m};if(this._trigger("columnResizing",null,l)!==false){if(isNaN(l.newWidth)||l.newWidth<0){l.newWidth=1}n.option("width",l.newWidth);var j={column:n.options};this._trigger("columnResized",null,j)}};h.prototype._setFocusOnCell=function(k,j,l){if(j){}else{this._KeyDownEventListener().focus(k,l)}};h.prototype._findFocusedChild=function(k){var j=k.find(":focus");return j.length?j:null};h.prototype._changeCurrentCell=function(p,o,l){if(this.mCurrentCellLocker===true){return}var r=this.currentCell(),q=this._getDataCellsRange(e.dataRowsRangeMode.sketch);if((q._isValid()&&q._containsCellInfo(o))||(o.isEqual(b.grid.cellInfo.outsideValue))){var j=p&&p.target&&g(p.target),s=o.tableCell(),t=o.container(),n=null;l.hasFocusedChild=!!(s&&j&&(j[0]!==s)&&(j[0]!==t[0])&&!this._KeyDownEventListener().isHiddenInput(j)&&(n=this._findFocusedChild(t)));if(r.cellIndex()!==o.cellIndex()||r.rowIndex()!==o.rowIndex()){var m={cellIndex:o.cellIndex(),rowIndex:o.rowIndex(),oldCellIndex:r.cellIndex(),oldRowIndex:r.rowIndex()};if(this._trigger("currentCellChanging",null,m)){var k=false;if(!this._allowCellEditing()||!r._isEdit()||(k=this._endEditInternal(null))){l.changingEventArgs=m;r=o._clone();r._setGridView(this);this._field("currentCell",r);this._onCurrentCellChanged(p,l)}}else{return false}}else{if(this.options.highlightCurrentCell){this._highlightCellPosition(r,true)}if(s&&!r._isEdit()){if(p&&this._editBySingleClick()){this._beginEditInternal(p)}else{if(l.setFocus){this._setFocusOnCell(l.hasFocusedChild?n:g(s),l.hasFocusedChild,r.column())}}}}}else{}return true};h.prototype._highlightCellPosition=function(m,r){if(m&&m._isValid()){var q=m.cellIndexAbs(),o=m.rowIndexAbs(),l=b.grid.renderState,p=this._view(),k,n,j;n=p.getHeaderCell(q);if(n){k=p._getRowInfo(this._headerRows().item(m.column().thY));n=g(n);j=p._changeCellRenderState(n,l.current,r);this.cellStyleFormatter.format(n,q,m.column(),k,j)}if(m._isRendered()){n=p.getJoinedRows(o,0);if(n){k=p._getRowInfo(n);p._changeRowRenderState(k,l.current,r);this.rowStyleFormatter.format(k)}n=p.getCell(q,o);if(n){n=g(n);j=p._changeCellRenderState(n,l.current,r);this.cellStyleFormatter.format(n,q,m.column(),k,j)}}}};h.prototype._beginEditInternal=function(m){if(this._canInteract()&&this._allowCellEditing()){var j=this.currentCell(),l=j.column(),k;if(l&&!l.readOnly){k=new b.grid.cellEditorHelper().cellEditStart(this,j,m);if(k){}return k}}return false};h.prototype._endEditInternal=function(m){if(this._canInteract()&&this._allowCellEditing()){var j=this.currentCell(),k=new b.grid.cellEditorHelper(),l=k.updateCell(this,j,m);if(l&e.updateCellResult.success){if(l&e.updateCellResult.notEdited){return true}k.cellEditEnd(this,j,m);j=this.currentCell();var n=j.tableCell();if(n){this._KeyDownEventListener().focus(g(n),j.column())}else{g(this._view().focusableElement()).focus()}if(!this._allowVirtualScrolling()){this._view().ensureHeight(j.rowIndex())}return true}}return false};h.prototype._onViewInsertEmptyRow=function(o,p,j,k,l,n,m){return null};h.prototype._onViewCreateEmptyCell=function(l,j,k){return null};h.prototype._onViewCellRendered=function(m,l,j,k){};h.prototype._onViewRowRendered=function(l,j,k){};h.prototype._getDataParser=function(j){return j.dataParser||b.data.defaultParsers[j.dataType]||b.data.defaultParsers.string};h.prototype.parse=function(k,m){var l=b.grid.getDataType(k),j=b.grid.getDataType(k);if(g.isFunction(m)){m=m()}m=b.data.convert(m,l,j,{culture:this.mClosestCulture,format:k.dataFormatString||k._underlyingDataFormatString,nullString:this.options.nullString,parser:k.dataParser});return m};h.prototype.toStr=function(k,m){var n=this._dataViewWrapper.dataView(),l=b.grid.getDataType(k),j="string";m=b.data.convert(m,l,j,{culture:this.mClosestCulture,format:k.dataFormatString||k._underlyingDataFormatString,nullString:this.options.nullString,parser:k.dataParser});return m};h.prototype.parseFailed=function(l,m,k,j){return m};h.prototype._funcOptions=function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","cellClicked","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]};h.prototype._canInteract=function(){return !this.options.disabled};h.prototype._canMoveToAnotherCell=function(p,o){var k=p.tagName.toLowerCase(),j,q,n,m;switch(k){case"input":if(g(p).hasClass(b.grid.wijgrid.CSS.inputMarker)){var l=p;if(l.type==="text"){j=l.value.length;q=new b.grid.domSelection(l).getSelection();n=b.getKeyCodeEnum();m=((o===n.TAB)||(o===n.UP||o===n.DOWN||o===n.PAGE_DOWN||o===n.PAGE_UP)||(q.length===0&&((q.start===0&&(o===n.LEFT||o===n.HOME))||(q.end>=j&&(o===n.RIGHT||o===n.END)))));return m}return true}return false;case"textarea":case"select":return false}return true};h.prototype._editBySingleClick=function(){var j=(this.options.editingInitOption||"").toLowerCase();switch(j){case"click":case"doubleclick":break;case"auto":default:j=this._isMobileEnv()?"click":"doubleclick";break}return j==="click"};h.prototype._getDataToAbsOffset=function(){var j=0,l=0,k=this._headerRows();if(this._showRowHeader()){j++}if(k){l+=k.length()}if(this._filterRow()){l++}return{x:j,y:l}};h.prototype._currentCellFromDataView=function(l){var j=this._dataViewWrapper.currentPosition(),k=new b.grid.cellInfo(l,this._dataViewDataRowIndexToGrid(j),null);if(k.rowIndex()<0){k.cellIndex(-1)}else{if(k.cellIndex()<0){k.cellIndex(0)}}return k};h.prototype._dataViewDataRowIndexToGrid=function(l){if(this.sketchTable){for(var j=0;j<this.sketchTable.count();j++){var k=this.sketchTable.row(j);if(k.isDataRow()&&k.dataItemIndex()===l){return j}}}return -1};h.prototype._getDataCellsRange=function(n,m){if(typeof m==="undefined"){m=false}var l=0,j=0,k=this._field("visibleLeaves").length-1,o;switch(n){case e.dataRowsRangeMode.rendered:if(this._rendered){o=this._rows().length()-1;break}case e.dataRowsRangeMode.sketch:o=this._totalRowsCount()-1;break;case e.dataRowsRangeMode.renderable:o=this._renderableRowsCount()-1;break}if(this._showRowHeader()){k--}if(m&&o>0){o--}if(k<0||o<0){l=j=k=o=-1}return new b.grid.cellInfoRange(new b.grid.cellInfo(l,j,null),new b.grid.cellInfo(k,o,null))};h.prototype._getDataItem=function(j){return this.dataView().item(j)};h.prototype._getFirstDataRowCell=function(o){var p,k,n,l=this._view(),m=this._rows(),j=b.grid.rowType;for(p=0,k=m.length();p<k;p++){n=l._getRowInfo(m.item(p));if(n.type&j.data){return new b.grid.cellInfo(o,p)}}return b.grid.cellInfo.outsideValue};h.prototype._getNextCurrentCell=function(s,n,w,m){var t=n.cellIndex(),u=n.rowIndex(),r=b.getKeyCodeEnum(),j=this.sketchTable,k=this._renderableBoundsCollection().getRenderedIndex(u),o=this._renderableBoundsCollection(),p,l=(w===r.TAB),v=this,x=v._serverSideVirtualScrolling(),q=function(C,E,B,z){if(typeof z==="undefined"){z=false}var D=C?o.forEachIndex:o.forEachIndexBackward,A=0,y=null;D.call(o,E,-1,function(G){var F=G-v._dataOffset;if(x&&(F<0||F>=j.count())){y=G;return false}var I=j.row(F),H=I.isDataRow();if((!z||H)&&(!(I.extInfo.state&b.grid.renderStateEx.hidden))){y=G;if(++A>=B){return false}}});return y};switch(w){case r.ENTER:case r.DOWN:if((p=q(true,k+1,1))!=null){u=p}break;case r.PAGE_DOWN:if((p=q(true,k+1,this._pageSizeKey))!=null){u=p}break;case r.UP:if((p=q(false,k-1,1))!=null){u=p}break;case r.PAGE_UP:if((p=q(false,k-1,this._pageSizeKey))!=null){u=p}break;case r.TAB:if(m){t--;if(t<s.topLeft().cellIndex()){t=s.bottomRight().cellIndex();if((p=q(false,k-1,1,true))!=null){u=p}else{if((p=q(false,o.capacity()-1,1,true))!=null){u=p}}}}else{t++;if(t>s.bottomRight().cellIndex()){t=s.topLeft().cellIndex();if((p=q(true,k+1,1,true))!=null){u=p}else{if((p=q(true,0,1,true))!=null){u=p}}}}break;case r.END:t=s.bottomRight().cellIndex();break;case r.HOME:t=s.topLeft().cellIndex();break;case r.LEFT:if(t>s.topLeft().cellIndex()){t--}break;case r.RIGHT:if(t<s.bottomRight().cellIndex()){t++}break}return new b.grid.cellInfo(t,u,this)};h.prototype._findUntilOuterDiv=function(p,j){var n=p,m=this.outerDiv[0],k,o,l=null;for(;n;n=n.parentNode){o=n.nodeName&&n.nodeName.toLowerCase();if(o){if(n===m){k=n;break}if(j[o]){l=n}}}return k?l:null};h.prototype._getStaticIndex=function(l){var j,k=this._getDataCellsRange(e.dataRowsRangeMode.rendered);if(this._hasSpannedCells()){return -1}if(l){j=Math.min(this.options.staticRowIndex,k.bottomRight().rowIndex())}else{j=Math.min(this.options.staticColumnIndex,k.bottomRight().cellIndex())}if(j<-1){j=-1}return j};h.prototype._getStaticOffsetIndex=function(j){var k=0;if(j){if(this._showRowHeader()){k++}}else{k=this._columnsHeadersTable().length;if(this.options.showFilter){k++}}return k};h.prototype._getRealStaticColumnIndex=function(){var l=this._getStaticOffsetIndex(true),o=this._getStaticIndex(false),n=o+l;if(o>=0){var q=this._field("visibleLeaves"),k=b.grid.flatten(this.options.columns),j=q.length;if(n<j-1){var m=b.grid.getTompostParent(q[n],k);if(m){for(n++;n<j;n++){var p=b.grid.getTompostParent(q[n],k);if(p!==m){n--;break}}}}if(n>=j){n=j-1}}return n};h.prototype._getRealStaticRowIndex=function(){var j=this._getStaticOffsetIndex(false);return this._getStaticIndex(true)+j};h.prototype._hasMerging=function(){var n=this._field("leaves"),m,k,l,j=false;if(n){for(m=0,k=n.length;(m<k)&&!j;m++){l=n[m];j=j||(l.parentVis&&(l.rowMerge&&(l.rowMerge!=="none")))}}return j};h.prototype._hasGrouping=function(){var n=this._field("leaves"),m,k,l,j=false;for(m=0,k=n.length;(m<k)&&!j;m++){l=n[m];j=l.groupInfo&&(l.groupInfo.position!=="none")}return j};h.prototype._hasSpannedCells=function(){return this._hasGrouping()||this._hasMerging()};h.prototype._columnsHeadersTable=function(j){if(arguments.length){this._field("columnsHeadersTable",j)}return this._field("columnsHeadersTable")};h.prototype._view=function(){return this.mView};h.prototype._originalFooterRowData=function(){var j=this._field("tfoot");return(j&&j.length)?j[0]:null};h.prototype._originalHeaderRowData=function(){var j=this._field("thead");return(j&&j.length)?j[0]:null};h.prototype._setAttr=function(j,l,m){var k=this;if(j===this.element){if(arguments.length===2){g.each(l,function(o,n){if(!(o in k._originalAttr)){k._originalAttr[o]=j.attr(o)}});return j.attr(l)}else{if(!(l in this._originalAttr)){this._originalAttr[l]=j.attr(l)}return j.attr(l,m)}}else{return(arguments.length===3)?j.attr(l,m):j.attr(l)}return this};h.prototype._totalRowsCount=function(){return this.sketchTable.count()};h.prototype._renderableRowsCount=function(){return this._renderableBoundsCollection().capacity()};h.prototype._trackScrollingPosition=function(j,k){this._scrollingState.x=j;this._scrollingState.y=k};h.prototype._trackScrollingIndex=function(j){this._scrollingState.index=j};h.prototype._uid=function(){if(this.__uid===undefined){this.__uid=b.grid.getUID()}return"wijgrid"+this.__uid};h.prototype._viewPortBounds=function(j){if(arguments.length){this.mViewPortBounds=j}return this.mViewPortBounds};h.prototype._viewPortBoundsOfEntirelyShownRows=function(){var l=this._viewPortBounds(),m=false,k=l.end-l.start+1;if(this._allowVirtualScrolling()){var j=this._view();if(k<j.getVirtualPageSize()){m=true}}if(!m){l=g.extend({},l);l.end--}return l};return h})(b.wijmoWidget);e.wijgrid=d;d.prototype.widgetEventPrefix="wijgrid";d.prototype._data$prefix="wijgrid";d.prototype._customSortOrder=1000;d.prototype._pageSizeKey=10;d.prototype._mergeWidgetsWithOptions=true;var c=(function(){function h(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c",stateHighlight:"ui-btn-down-e"};this.wijCSS={wijgrid:"",wijgridTable:"",wijgridTH:"",wijgridTD:"",wijgridCellContainer:"",wijgridRowHeader:"",wijgridCurrentRowHeaderCell:"",wijgridCurrentHeaderCell:"",wijgridCurrentCell:"",wijgridCellAlignLeft:"",wijgridCellAlignRight:"",wijgridCellAlignCenter:"",wijgridFilterList:"",wijgridFilter:"",wijgridFilterInput:"",wijgridFilterTrigger:"",wijgridFilterNativeHtmlEditorWrapper:"",wijgridHeaderArea:"",wijgridFooterArea:"",wijgridHeaderRow:"",wijgridRow:"",wijgridDataRow:"",wijgridAltRow:"",wijgridEmptyDataRow:"",wijgridFilterRow:"",wijgridGroupHeaderRow:"",wijgridGroupFooterRow:"",wijgridGroupHeaderRowCollapsed:"",wijgridGroupHeaderRowExpanded:"",wijgridFooterRow:"",wijgridLoadingOverlay:"",wijgridLoadingText:"",wijgridGroupArea:"",wijgridGroupAreaButton:"",wijgridGroupAreaButtonSort:"",wijgridGroupAreaButtonClose:"",wijgridGroupToggleVisibilityButton:"",wijgridFixedView:"",wijgridScroller:"",wijgridDndHelper:"",wijgridDndArrowTopContainer:"",wijgridDndArrowBottomContainer:"",wijgridFreezingHandleV:"",wijgridFreezingHandleH:"",wijgridResizingHandle:"",wijgridHeaderCellSortIcon:"",wijgridHeaderCellText:""};this.allowColMoving=false;this.allowColSizing=false;this.allowEditing=false;this.allowKeyboardNavigation=true;this.allowPaging=false;this.allowSorting=false;this.allowVirtualScrolling=false;this.cellStyleFormatter=undefined;this.columns=[];this.columnsAutogenerationMode="merge";this.culture="";this.customFilterOperators=[];this.data=null;this.editingInitOption="auto";this.editingMode="none";this.ensureColumnsPxWidth=false;this.filterOperatorsSortMode="alphabeticalCustomFirst";this.freezingMode="none";this.groupAreaCaption="Drag a column here to group by that column.";this.groupIndent=10;this.highlightCurrentCell=false;this.highlightOnHover=true;this.loadingText="Loading...";this.nullString="";this.pageIndex=0;this.pageSize=10;this.pagerSettings={mode:"numeric",pageButtonCount:10,position:"bottom"};this.readAttributesFromData=false;this.rowHeight=-1;this.rowStyleFormatter=undefined;this.scrollMode="none";this.selectionMode="singleRow";this.showFilter=false;this.showFooter=false;this.showGroupArea=false;this.showSelectionOnRender=true;this.showRowHeader=false;this.staticColumnIndex=-1;this.staticColumnsAlignment="left";this.staticRowIndex=-1;this.totalRows=-1;this.afterCellEdit=null;this.afterCellUpdate=null;this.beforeCellEdit=null;this.beforeCellUpdate=null;this.cellClicked=null;this.columnDragging=null;this.columnDragged=null;this.columnDropping=null;this.columnDropped=null;this.columnGrouping=null;this.columnGrouped=null;this.columnResizing=null;this.columnResized=null;this.columnUngrouping=null;this.columnUngrouped=null;this.currentCellChanging=null;this.currentCellChanged=null;this.filterOperatorsListShowing=null;this.filtering=null;this.filtered=null;this.groupAggregate=null;this.groupText=null;this.invalidCellValue=null;this.pageIndexChanging=null;this.pageIndexChanged=null;this.selectionChanged=null;this.sorting=null;this.sorted=null;this.dataLoading=null;this.dataLoaded=null;this.loading=null;this.loaded=null;this.rendering=null;this.rendered=null}return h})();d.prototype.options=b.grid.extendWidgetOptions(b.wijmoWidget.prototype.options,new c());g.wijmo.registerWidget("wijgrid",d.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var g=jQuery;var h=(function(){function n(o){if(o){this.__attr=o}}n.prototype.attrs=function(){return this.__attr};n.prototype.ensureAttr=function(){this.__attr=this.__attr||{};return this.__attr};n.prototype.attr=function(o,p){if(arguments.length==0){return this.__attr}if(arguments.length==1){return this.__attr?this.__attr[o]:null}else{this.ensureAttr()[o]=p}};n.prototype.style=function(o,p){if(arguments.length==0){return this.__style}else{if(arguments.length==1){return this.__style&&this.__style[o]}else{this.ensureStyle()[o]=p}}};n.prototype.deleteAttr=function(o){if(this.__attr){delete this.__attr[o]}};n.prototype.deleteStyle=function(o){if(this.__style){delete this.__style[o]}};n.prototype.ensureStyle=function(){this.__style=this.__style||{};return this.__style};return n})();c.SketchObject=h;var k=(function(o){__extends(n,o);function n(p){o.call(this,p)}n.prototype.visible=function(p){if(arguments.length==0){return !(this._visible===false)}else{this._visible=p}};return n})(h);c.SketchCell=k;var l=(function(o){__extends(n,o);function n(q,p){o.call(this,p);this.value=q}return n})(k);c.ValueCell=l;var e=(function(p){__extends(o,p);function o(r,q){p.call(this,q);this.html=r||""}o.nbsp=function n(){return new o("&nbsp;",null)};return o})(k);c.HtmlCell=e;var f=(function(n){__extends(o,n);function o(q,r,p){n.call(this,p);this.rowType=q;this.renderState=r;this.extInfo={state:c.renderStateEx.none}}o.prototype.isDataRow=function(){return(this.rowType&b.grid.rowType.data)==b.grid.rowType.data};o.prototype.dataItemIndex=function(p){if(typeof p==="undefined"){p=0}return -1};o.prototype.cellCount=function(){return this._cells?this._cells.length:0};o.prototype._ensureCells=function(){this._cells=this._cells||[]};o.prototype.add=function(p){this._ensureCells();this._cells.push(p)};o.prototype.insert=function(p,q){this._ensureCells();this._cells.splice(p,0,q)};o.prototype.cell=function(p){return this._cells[p]};o.prototype.valueCell=function(p){return this.cell(p)};o.prototype.removeAt=function(p){if(!this._cells){throw"Wrong index"}this._cells.splice(p,1)};o.prototype.clear=function(){};o.prototype.getRowInfo=function(){return{type:this.rowType,state:this.renderState,sectionRowIndex:null,dataRowIndex:null,virtualDataItemIndex:null,dataItemIndex:this.dataItemIndex(),$rows:null,_extInfo:this.extInfo}};return o})(h);c.SketchRow=f;var d=(function(o){__extends(n,o);function n(q,r,p){o.call(this,b.grid.rowType.data|((q%2)==1?b.grid.rowType.dataAlt:0),r,p);this.originalRowIndex=q}n.prototype.dataItemIndex=function(p){if(typeof p==="undefined"){p=0}return p+this.originalRowIndex};n.prototype.isDataRow=function(){return true};return n})(f);c.SketchDataRow=d;var m=(function(o){__extends(n,o);function n(r,p){var q=r?b.grid.rowType.groupHeader:b.grid.rowType.groupFooter;o.call(this,q,b.grid.renderState.rendering,p)}n.prototype.getRowInfo=function(){var p=o.prototype.getRowInfo.call(this);if(this.groupByValue!==undefined){p.groupByValue=this.groupByValue}return p};return n})(f);c.SketchGroupRow=m;var i=(function(){function n(){this._table=[]}n.prototype.getRawTable=function(){return this._table};n.prototype.row=function(o){return this._table[o]};n.prototype.valueAt=function(p,o){return this.row(p).valueCell(o).value};n.prototype.count=function(o){if(typeof o==="number"){this._table.length=o}return this._table.length};n.prototype.add=function(o){this._table.push(o)};n.prototype.insert=function(o,p){this._table.splice(o,0,p)};n.prototype.clear=function(){this._table.length=0};n.prototype.removeFirst=function(o){if(typeof o==="undefined"){o=1}this._table.splice(0,o)};n.prototype.removeLast=function(o){if(typeof o==="undefined"){o=1}this._table.splice(this._table.length-o,o)};n.prototype.replace=function(o,q){var p=this._table.splice(o,1,q);if(p&&p.length&&q){q.extInfo=p[0].extInfo}};n.prototype.updateIndexes=function(){for(var o=0;o<this._table.length;o++){var p=this._table[o];if(this._table[o].isDataRow()){(p).originalRowIndex=o}}};n.prototype.isLazy=function(){return false};n.prototype.ensureNotLazy=function(){};return n})();c.SketchTable=i;var j=(function(o){__extends(n,o);function n(p){o.call(this);this.mIsLazy=true;this.pageSize=30;if(p==null){throw"Row source is null"}this.mSource=p;this._table.length=p.count()}n.prototype.isLazy=function(){return this.mIsLazy};n.prototype.ensureNotLazy=function(){if(!this.isLazy()){return}this.ensureRange();this.mIsLazy=false};n.prototype.invalidate=function(){this._table=new Array(this.mSource.count());if(!this.isLazy()){this.updateRange()}};n.prototype.row=function(p){if(!o.prototype.row.call(this,p)){this.ensureRange(Math.max(0,p-this.pageSize/2),this.pageSize)}return o.prototype.row.call(this,p)};n.prototype.ensureRange=function(r,q){if(typeof r==="undefined"){r=0}if(typeof q==="undefined"){q=this._table.length-r}if(!this.isLazy()){return}if(r<0){throw"Wrong range start"}this._table.length=this.mSource.count();if(this._table.length==0){if(q>0){throw"Wrong range length"}return}while(r<this._table.length&&this._table[r]){r++}if(r>=this._table.length){return}var p=Math.min(r+q-1,this._table.length-1);while(p>=r&&this._table[p]){p--}q=p-r+1;if(q>0){this.updateRange(r,q)}};n.prototype.updateRange=function(q,p){if(typeof q==="undefined"){q=0}if(typeof p==="undefined"){p=this._table.length-q}if(this.mSource==null){throw"Cannot create sketch row because source is null"}this.mSource.getRange(q,p,this._table,q)};return n})(i);c.LazySketchTable=j})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(e){var f=jQuery;var d=(function(h){__extends(g,h);function g(){h.apply(this,arguments)}g.prototype._create=function(){var i=f.data(this.element[0],"wijgridowner");this._field("owner",i);b.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass(i.options.wijCSS.widget+" "+b.grid.wijgrid.CSS.c1basefield+" "+i.options.wijCSS.stateDefault);if(this.options.disabled){this.disable()}if(i.options.allowColMoving){i._UIDragndrop(true).attach(this)}};g.prototype._init=function(){this.element.wrapInner("<div class='"+b.grid.wijgrid.CSS.cellContainer+" "+this._owner().options.wijCSS.wijgridCellContainer+"'></div>");this._refreshHeaderCell()};g.prototype.destroy=function(){try{h.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};g.prototype._destroy=function(){if(this._isDestroyed()){return}var i=this._owner();if(i&&i._UIDragndrop()){i._UIDragndrop().detach(this)}b.grid.remove$dataByPrefix(this.element,this._data$prefix);var j=b.grid.wijgrid.CSS,k=i.options.wijCSS;this.element.removeClass(k.widget+" "+j.c1basefield+" "+k.c1basefield+" "+k.stateDefault).html(this.element.find("."+j.headerCellText).html())};g.prototype._field=function(i,j){return b.grid.dataPrefix(this.element,this._data$prefix,i,j)};g.prototype._removeField=function(i){var j=this._data$prefix+i;this.element.removeData(j)};g.prototype._setOption=function(k,m){var o=this["_preset_"+k],j=this.options[k],l,i;if(o!==undefined){m=o.apply(this,[m,j])}l=(m!==j);h.prototype._setOption.apply(this,[k,m]);if(l){if(this.options.groupedIndex!==undefined){var n=this._owner()._field("groupedWidgets")[this.options.groupedIndex];if(n&&(k in n.options)){n._setOption(k,m)}}i=this["_postset_"+k];if(i!==undefined){i.apply(this,[m,j])}}};g.prototype._postset_allowMoving=function(j,i){};g.prototype._preset_clientType=function(j,i){throw"read-only"};g.prototype._postset_headerText=function(j,i){this._refreshHeaderCell()};g.prototype._postset_visible=function(j,i){this._owner().ensureControl(false)};g.prototype._postset_width=function(l,i){var j=this._owner();if(j){this.options.ensurePxWidth=true;var k=b.grid.getColumnByTravIdx(j.options.columns,this.options.travIdx);if(k){k.found.width=l;k.found.ensurePxWidth=true}j.setSize()}};g.prototype._owner=function(){return this._field("owner")};g.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};g.prototype._canDrag=function(){return this.options.allowMoving===true};g.prototype._canDropTo=function(i){if(b.grid.isChildOf(this._owner().options.columns,i,this)){return false}return true};g.prototype._createHeaderContent=function(i){return i.html(this.options.headerText||"&nbsp;")};g.prototype._decorateHeaderContent=function(i){return i.wrapInner('<span class="'+b.grid.wijgrid.CSS.headerCellText+" "+this._owner().options.wijCSS.wijgridHeaderCellText+'" />')};g.prototype._refreshHeaderCell=function(){var i=this.element.children("."+b.grid.wijgrid.CSS.cellContainer).empty();this._createHeaderContent(i);this._decorateHeaderContent(i)};g.prototype._isDestroyed=function(){return this._destroyed};return g})(b.wijmoWidget);e.c1basefield=d;d.prototype._data$prefix="c1basefield";var c=(function(){function g(){this.allowMoving=true;this.allowSizing=true;this.cellFormatter=undefined;this.dataKey=undefined;this.ensurePxWidth=undefined;this.footerText=undefined;this.headerText=undefined;this.textAlignment=undefined;this.visible=true;this.width=undefined}return g})();e.c1basefield_options=c;d.prototype.options=b.grid.extendWidgetOptions(b.wijmoWidget.prototype.options,new c());f.wijmo.registerWidget("c1basefield",d.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var e=jQuery;var f=(function(g){__extends(h,g);function h(){g.apply(this,arguments)}h.prototype._create=function(){g.prototype._create.apply(this,arguments);var i=this._owner();this.element.addClass(i.options.wijCSS.widget+" "+b.grid.wijgrid.CSS.c1field)};h.prototype._destroy=function(){if(this._isDestroyed()){return}var i=this._owner();this.element.find("*").unbind("."+this.widgetName);if(this.$filterEditor){this.$filterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType(this.options)){case"date":if(this.$filterEditor.data("wijmo-wijinputdate")){this.$filterEditor.wijinputdate("destroy")}break;case"text":if(this.$filterEditor.data("wijmo-wijinputtext")){this.$filterEditor.wijinputtext("destroy")}break;case"numberCurrency":case"numberNumber":case"numberPercent":if(this.$filterEditor.data("wijmo-wijinputnumber")){this.$filterEditor.wijinputnumber("destroy")}break}this.$filterEditor=null}this.element.removeClass(i.options.wijCSS.widget+" "+b.grid.wijgrid.CSS.c1field);this._removeDropDownFilterList();g.prototype._destroy.apply(this,arguments)};h.prototype._init=function(){g.prototype._init.apply(this,arguments);this.$filterEditor=null;var i=this._owner();this.filterRow=i._filterRow();if(i.options.showFilter&&this.options.showFilter&&(this.options.dataIndex>=0)){this._prepareFilterCell()}};h.prototype._postset_aggregate=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_allowSort=function(j,i){this._refreshHeaderCell()};h.prototype._postset_dataType=function(j,i){throw"read-only"};h.prototype._postset_dataParser=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_disabled=function(j,i){if(this.$filterEditor){e.each(this.$filterEditor.data(),function(k,l){if(l&&l.widgetName&&l.option){l.option("disabled",j)}})}};h.prototype._postset_dataFormatString=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_filterOperator=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_filterValue=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_groupInfo=function(j,i){this._owner().ensureControl(true)};h.prototype._postset_rowMerge=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_showFilter=function(j,i){this._owner().ensureControl(false)};h.prototype._postset_sortDirection=function(j,i){this.options.sortOrder=0;this._owner().ensureControl(true)};h.prototype._postset_width=function(j,i){g.prototype._postset_width.apply(this,arguments)};h.prototype._canDropTo=function(i){if(g.prototype._canDropTo.apply(this,arguments)){if(this.options.groupedIndex!==undefined&&(i instanceof e.wijmo.c1groupedfield)){return false}return true}return false};h.prototype._isSortable=function(){return b.grid.validDataKey(this.options.dataKey)};h.prototype._isSortableUI=function(){var i=this._owner();return i&&i.options.allowSorting&&this.options.allowSort&&this._isSortable()};h.prototype._decorateHeaderContent=function(m){var j=this._owner(),k=b.grid.wijgrid.CSS,l=j.options.wijCSS;if(!this._isSortable()){g.prototype._decorateHeaderContent.apply(this,arguments)}else{if(this._isSortableUI()){m.wrapInner('<a class="'+k.headerCellText+" "+l.wijgridHeaderCellText+'" href="#" role="button" />').children("a").bind("click."+this.widgetName,this,e.proxy(this._onHrefClick,this))}else{g.prototype._decorateHeaderContent.apply(this,arguments)}var i=k.headerCellSortIcon+" "+l.wijgridHeaderCellSortIcon+" "+l.icon;switch(this.options.sortDirection){case"ascending":m.append(e('<span class="'+i+" "+l.iconArrowUp+'"></span>'));break;case"descending":m.append(e('<span class="'+i+" "+l.iconArrowDown+'"></span>'));break}}};h.prototype._prepareFilterCell=function(){var q=this.options.visLeavesIdx,n=this._owner(),l=null,i,o,r=this,j,k=b.grid.HTML5InputSupport.getDefaultInputType(n._isMobileEnv(),this.options),p=n.options.wijCSS,m=b.grid.wijgrid.CSS;if(q>=0){n=this._owner();if(this.filterRow){l=e(b.grid.rowAccessor.getCell(this.filterRow,q))}else{throw"exception"}this.$filterEditor=l.find("input");l.bind(((e.support).selectstart?"selectstart":"mousedown"),function(s){s.stopPropagation()});i=n.parse(this.options,b.grid.filterHelper.getSingleValue(this.options.filterValue));if(i===null||i==="undefined"){switch(b.grid.getDataType(this.options)){case"boolean":i=false;break;case"number":case"currency":i=0;break;case"datetime":i=new Date();break;default:i=""}}o={culture:n.options.culture,disabled:n.options.disabled,decimalPlaces:(function(s){var t=/^(n|p|c){1}(\d*)$/.exec(s);if(t&&t[2]){return parseInt(t[2],10)}t=/^(d){1}(\d*)$/.exec(s);if(t){return 0}return 2})(this.options.dataFormatString),imeMode:this.options.imeMode,triggerMouseUp:function(s){if(n){e.each(n.columns(),function(u,t){if(t.$dropDownFilterList){t._removeDropDownFilterList()}})}}};this.$filterEditor.bind("keypress."+this.widgetName,e.proxy(this._onFilterEditorKeyPress,this));switch(j=this._getInputEditorType(this.options)){case"date":if(k==="text"){this.$filterEditor.wijinputdate(e.extend(o,{date:i,dateFormat:this.options.dataFormatString||undefined,showTrigger:true}))}else{this._createHtmlEditor(this.$filterEditor,k,b.grid.HTML5InputSupport.toStr(i,k))}break;case"text":this.$filterEditor.wijinputtext(e.extend(o,{text:i+""}));break;case"numberCurrency":this.$filterEditor.wijinputnumber(e.extend(o,{type:"currency",value:i}));break;case"numberNumber":if(k==="text"){this.$filterEditor.wijinputnumber(e.extend(o,{value:i}))}else{this._createHtmlEditor(this.$filterEditor,k,b.grid.HTML5InputSupport.toStr(i,k))}break;case"numberPercent":this.$filterEditor.wijinputnumber(e.extend(o,{type:"percent",value:i*100}));break;default:throw b.grid.stringFormat('Unsupported editor type: "{0}"',j)}l.find("."+m.filterTrigger).attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(s){if(!r.options.disabled){e(this).addClass(p.stateDefault+" "+p.stateHover)}}).bind("mouseleave."+this.widgetName,function(s){if(!r.options.disabled){e(this).removeClass(p.stateDefault+" "+p.stateHover+" "+p.stateActive)}}).bind("mouseup."+this.widgetName,this,function(s){if(!r.options.disabled){e(this).removeClass(p.stateDefault+" "+p.stateActive)}}).bind("mousedown."+this.widgetName,{column:this},e.proxy(this._onFilterBtnClick,this)).bind("click."+this.widgetName,function(s){s.preventDefault()})}};h.prototype._createHtmlEditor=function(i,k,l){var j=b.grid.wijgrid.CSS,m=this._owner().options.wijCSS;(i[0]).type=k;return i.addClass(m.stateDefault).wrap('<span class="'+j.filterNativeHtmlEditorWrapper+" "+m.wijgridFilterNativeHtmlEditorWrapper+'"></span').val(l)};h.prototype._onFilterBtnClick=function(p){var m=this;var k=p.data.column,l=8,o=k._owner(),n,r,s,q,i,j;if(k.options.disabled){return false}if(k.$dropDownFilterList){k._removeDropDownFilterList();return false}(p.target).focus();n=b.grid.filterHelper.getSingleOperatorName(k.options.filterOperator).toLowerCase();r=o.getFilterOperatorsByDataType(b.grid.getDataType(k.options));s={operators:e.extend(true,[],r),column:k.options};o._onFilterOperatorsListShowing(s);q=[];if(s.operators){e.each(s.operators,function(u,t){q.push({label:t.displayName||t.name,value:t.name,selected:t.name.toLowerCase()===n})})}k.$dropDownFilterList=e("<div />").addClass(b.grid.wijgrid.CSS.filterList+" "+o.options.wijCSS.wijgridFilterList).appendTo(document.body).wijlist({autoSize:true,maxItemsCount:l,selected:function(u,t){var v=m._getFilterValueFromEditor(k);k._removeDropDownFilterList();o._handleFilter(k,t.item.value,v)}});k.$dropDownFilterList.css("z-index",b.grid.getZIndex(o.outerDiv,9999));k.$dropDownFilterList.wijlist("setItems",q).wijlist("renderList");i=k.$dropDownFilterList.width()|150;k.$dropDownFilterList.width(q.length>l?i+20:i).wijlist("refreshSuperPanel").position({of:e(p.currentTarget),my:"left top",at:"left bottom"});(k.$dropDownFilterList).$button=e(p.currentTarget);j=(k.$dropDownFilterList).eventUID=b.grid.getUID();e(document).bind("mousedown."+k.widgetName+"."+j,{column:k},k._onDocMouseDown)};h.prototype._onFilterEditorKeyPress=function(k){if(k&&(k.which===13)){var j=this._owner(),l=this._getFilterValueFromEditor(this),i=(this.options.filterOperator||"").toLowerCase();if(!l){l=undefined;i="nofilter"}else{if(!i||(i==="nofilter")){i=(b.grid.getDataType(this.options)==="string")?"contains":"equals"}}this._removeDropDownFilterList();j._handleFilter(this,i,l)}};h.prototype._onDocMouseDown=function(m){var i=e(m.target),j=b.grid.wijgrid.CSS,k=i.parents("."+j.filterList+":first"),l=i.is("."+j.filterTrigger)?i:i.parents("."+j.filterTrigger+":first");if((l.length&&(l[0]===m.data.column.$dropDownFilterList.$button[0]))||(k.length&&(k[0]===m.data.column.$dropDownFilterList[0]))){}else{m.data.column._removeDropDownFilterList()}};h.prototype._onHrefClick=function(i){if(i.data.options.disabled){return false}if(i.data.options.allowSort){var j=i.data._owner();j._handleSort(i.data.options,i.ctrlKey)}return false};h.prototype._removeDropDownFilterList=function(){if(this.$dropDownFilterList){var i=(this.$dropDownFilterList).eventUID;this.$dropDownFilterList.remove();this.$dropDownFilterList=null;e(document).unbind("mousedown."+this.widgetName+"."+i,this._onDocMouseDown)}};h.prototype._getInputEditorType=function(i){switch(b.grid.getDataType(i)){case"number":return(i.dataFormatString&&i.dataFormatString.indexOf("p")===0)?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"text"}};h.prototype._getFilterValueFromEditor=function(k){var i=k._owner(),j=b.grid.HTML5InputSupport.getDefaultInputType(i._isMobileEnv(),k.options),l;switch(k._getInputEditorType(k.options)){case"date":if(j==="text"){l=k.$filterEditor.wijinputdate("option","date")||new Date()}else{l=b.grid.HTML5InputSupport.parse(k.$filterEditor.val(),j)||new Date()}break;case"text":l=k.$filterEditor.wijinputtext("option","text");break;case"numberNumber":if(j!=="text"){l=b.grid.HTML5InputSupport.parse(k.$filterEditor.val(),j)||0;break}case"numberCurrency":l=k.$filterEditor.wijinputnumber("option","value");break;case"numberPercent":l=k.$filterEditor.wijinputnumber("option","value")/100;break}return l};return h})(c.c1basefield);c.c1field=f;var d=(function(g){__extends(h,g);function h(){g.apply(this,arguments);this.aggregate="none";this.allowSort=true;this.dataType=undefined;this.dataParser=undefined;this.dataFormatString=undefined;this.encodeHtml=false;this.filterOperator="nofilter";this.filterValue=undefined;this.groupInfo={expandInfo:[],level:undefined,groupSingleRow:true,collapsedImageClass:undefined,expandedImageClass:undefined,position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined};this.imeMode="auto";this.inputType=undefined;this.readOnly=false;this.rowMerge="none";this.showFilter=true;this.sortDirection="none";this.valueRequired=false}return h})(c.c1basefield_options);c.c1field_options=d;f.prototype.options=b.grid.extendWidgetOptions(c.c1basefield.prototype.options,new d());e.wijmo.registerWidget("c1field",e.wijmo.c1basefield,f.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(g){__extends(h,g);function h(){g.apply(this,arguments)}h.prototype._create=function(){g.prototype._create.apply(this,arguments);var i=this._owner();this.element.addClass(i.options.wijCSS.widget+" "+b.grid.wijgrid.CSS.c1band)};h.prototype._canDropTo=function(i){if(g.prototype._canDropTo.apply(this,arguments)){return !(i instanceof d.wijmo.c1groupedfield)}return false};return h})(c.c1basefield);c.c1band=e;var f=(function(g){__extends(h,g);function h(){g.apply(this,arguments);this.columns=[]}return h})(c.c1field_options);e.prototype.options=b.grid.extendWidgetOptions(c.c1basefield.prototype.options,new f());d.wijmo.registerWidget("c1band",d.wijmo.c1basefield,e.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(f){__extends(g,f);function g(){f.apply(this,arguments)}g.prototype._create=function(){var h=d.data(this.element[0],"wijgridowner"),i=b.grid.wijgrid.CSS,j=h.options.wijCSS;this._field("owner",h);b.grid.widgetName(this.element[0],this.widgetFullName);this._destroyed=false;this.element.addClass(i.groupAreaButton+" "+j.wijgridGroupAreaButton+" "+j.stateDefault+" "+j.cornerAll);if(this.options.disabled){this.disable()}if(h.options.allowColMoving){h._UIDragndrop(true).attach(this)}};g.prototype._init=function(){this._refreshHeaderCell()};g.prototype.destroy=function(){try{f.prototype.destroy.apply(this,arguments)}finally{this._destroyed=true}};g.prototype._destroy=function(){if(this._isDestroyed()){return}this.element.find("*").unbind("."+this.widgetName);var h=this._owner();if(h&&h._dragndrop(false)){h._dragndrop(false).detach(this)}b.grid.remove$dataByPrefix(this.element,this._data$prefix)};g.prototype._field=function(h,i){return b.grid.dataPrefix(this.element,this._data$prefix,h,i)};g.prototype._removeField=function(h){var i=this._data$prefix+h;this.element.removeData(i)};g.prototype._setOption=function(j,l){var m=this["_preset_"+j],i=this.options[j],k,h;if(m!==undefined){l=m.apply(this,[l,i])}k=(l!==i);f.prototype._setOption.apply(this,[j,l]);if(k){h=this["_postset_"+j];if(h!==undefined){h.apply(this,[l,i])}}};g.prototype._postset_headerText=function(j,i,h){this._refreshHeaderCell()};g.prototype._postset_allowSort=function(j,i,h){this._refreshHeaderCell()};g.prototype._owner=function(){return this._field("owner")};g.prototype._canSize=function(){return this.options.allowSizing&&this._owner().options.allowColSizing};g.prototype._canDrag=function(){return this.options.allowMoving===true};g.prototype._canDropTo=function(h){if(!(h instanceof d.wijmo.c1groupedfield)){return false}if(b.grid.isChildOf(this._owner().options.columns,h,this)){return false}return true};g.prototype._isSortable=function(){return b.grid.validDataKey(this.options.dataKey)};g.prototype._isSortableUI=function(){var h=this._owner();return h&&h.options.allowSorting&&this.options.allowSort&&this._isSortable()};g.prototype._refreshHeaderCell=function(){var i=b.grid.wijgrid.CSS,k=this._owner().options.wijCSS,j=d('<span class="'+i.groupAreaButtonClose+" "+k.wijgridGroupAreaButtonClose+" "+k.stateDefault+" "+k.cornerAll+'"><span class="'+k.icon+" "+k.iconClose+'"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.html(this.options.headerText||"").prepend(j);if(this._isSortableUI()){this.element.bind("click."+this.widgetName,this,d.proxy(this._onHrefClick,this))}else{}if(this._isSortable()){var h=i.groupAreaButtonSort+" "+k.wijgridGroupAreaButtonSort+" "+k.icon;switch(this.options.sortDirection){case"ascending":this.element.append(d('<span class="'+h+" "+k.iconArrowUp+'"></span>'));break;case"descending":this.element.append(d('<span class="'+h+" "+k.iconArrowDown+'"></span>'));break}}};g.prototype._onCloseClick=function(i){var h=i.data.options;if(!h.disabled){(i.data._owner())._handleUngroup(i.data.options.travIdx)}return false};g.prototype._onHrefClick=function(i){var j=i.data._owner(),h=i.data.options,k;if(!(h).disabled&&h.allowSort){k=b.grid.search(j.columns(),function(l){return l.options.travIdx===h.travIdx});k=(!k.found)?b.grid.getColumnByTravIdx(j.options.columns,h.travIdx).found:k.found.options;if(k){j._handleSort(k,i.ctrlKey)}}return false};g.prototype._isDestroyed=function(){return this._destroyed};return g})(b.wijmoWidget);c.c1groupedfield=e;e.prototype._data$prefix="c1groupedfield";e.prototype.options=d.extend(true,{},b.wijmoWidget.prototype.options,{wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},allowMoving:true,allowSort:true,headerText:undefined,sortDirection:"none"});d.wijmo.registerWidget("c1groupedfield",e.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(f){var h=jQuery;var e=(function(l){__extends(k,l);function k(){l.apply(this,arguments)}k.prototype._create=function(){b.grid.widgetName(this.element[0],this.widgetFullName);this.element.css("display","inline").addClass((this.options).wijCSS.widget)};k.prototype._destroy=function(){this.mBtnElement=null};k.prototype._init=function(){var m=this;this.mBtnElement=this._createElement(this.options).addClass("wijmo-wijgrid-commandbutton").click(function(n){if(!m.options.disabled&&h.isFunction(m.options.click)){m.options.click.call(self,n)}});this.element.append(this.mBtnElement);this._attachWidget(this.mBtnElement,this.options)};k.prototype._setOption=function(n,o){var m=this.options[n];l.prototype._setOption.apply(this,[n,o]);if((m!==o)&&(n==="disabled")){this._onDisabledChanged(o===true)}};k.prototype._createElement=function(m){throw"not implemented"};k.prototype._attachWidget=function(m,n){throw"not implemented"};k.prototype._btnElement=function(){return this.mBtnElement};k.prototype._onDisabledChanged=function(m){};return k})(b.wijmoWidget);f.wijgridcommandbuttonbase=e;var g=(function(){function k(){this.text=undefined;this.click=undefined;this.iconClass=undefined;this.disabled=false}return k})();f.wijgridcommandbuttonbase_options=g;e.prototype.options=b.grid.extendWidgetOptions(b.wijmoWidget.prototype.options,new g());h.wijmo.registerWidget("wijgridcommandbuttonbase",e.prototype);var i=(function(k){__extends(l,k);function l(){k.apply(this,arguments)}l.prototype._createElement=function(n){var m=h('<a href="#" />').text(n.text||"");if(n.disabled){m.prop("disabled","disabled")}return m};l.prototype._attachWidget=function(m,n){};l.prototype._onDisabledChanged=function(n){var m=this._btnElement();if(m){m.prop("disabled",n)}};return l})(e);f.wijgridcommandlink=i;h.wijmo.registerWidget("wijgridcommandlink",h.wijmo.wijgridcommandbuttonbase,i.prototype);var d=(function(l){__extends(k,l);function k(){l.apply(this,arguments)}k.prototype._createElement=function(m){return h('<input type="button" />').val(m.text)};k.prototype._attachWidget=function(m,n){m.button({disabled:n.disabled})};k.prototype._onDisabledChanged=function(n){var m=this._btnElement();if(m){m.button({disabled:n})}};return k})(e);f.wijgridcommandbutton=d;h.wijmo.registerWidget("wijgridcommandbutton",h.wijmo.wijgridcommandbuttonbase,d.prototype);var j=(function(k){__extends(l,k);function l(){k.apply(this,arguments)}l.prototype._createElement=function(o){var n=h("<button />"),m=!!o.text;if(m){n.text(o.text)}else{n.html("&nbsp;")}return n};l.prototype._attachWidget=function(n,o){var m=!!o.text;n.button({disabled:o.disabled,icons:{primary:o.iconClass},text:m})};l.prototype._onDisabledChanged=function(n){var m=this._btnElement();if(m){m.button({disabled:n})}};return l})(e);f.wijgridcommandimagebutton=j;h.wijmo.registerWidget("wijgridcommandimagebutton",h.wijmo.wijgridcommandbuttonbase,j.prototype);var c=(function(l){__extends(k,l);function k(){l.apply(this,arguments)}k.prototype._createElement=function(n){var m=h("<button />").html("&nbsp;");return m};k.prototype._attachWidget=function(m,n){m.button({disabled:n.disabled,icons:{primary:n.iconClass},text:false})};k.prototype._onDisabledChanged=function(n){var m=this._btnElement();if(m){m.button({disabled:n})}};return k})(e);f.wijgridcommandimage=c;h.wijmo.registerWidget("wijgridcommandimage",h.wijmo.wijgridcommandbuttonbase,c.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(f){var i=jQuery;var e=(function(m){__extends(l,m);function l(){m.apply(this,arguments)}l.testC1GridViewCommandField=function k(p){return p&&p.innerState&&(p.innerState.clientType||"").toLowerCase()==="c1commandfield"};l.testC1GridViewButtonField=function o(p){return p&&p.innerState&&(p.innerState.clientType||"").toLowerCase()==="c1buttonfield"};l.test=function n(p){return(p&&p.buttonType)&&!l.testC1GridViewCommandField(p)&&!l.testC1GridViewButtonField(p)};return l})(f.c1basefield);f.c1btnfieldbase=e;var g=(function(l){__extends(k,l);function k(){l.apply(this,arguments);this.buttonType="button"}return k})(f.c1basefield_options);f.c1btnfieldbase_options=g;e.prototype.options=b.grid.extendWidgetOptions(f.c1basefield.prototype.options,new g());var h=(function(k){__extends(l,k);function l(){k.apply(this,arguments)}l.test=function m(n){return e.test(n)||n.command};return l})(e);f.c1btnfield=h;var d=(function(l){__extends(k,l);function k(){l.apply(this,arguments);this.command=undefined}return k})(g);f.c1btnfield_options=d;h.prototype.options=b.grid.extendWidgetOptions(e.prototype.options,new d());i.wijmo.registerWidget("c1btnfield",h.prototype);var j=(function(k){__extends(l,k);function l(){k.apply(this,arguments)}l.test=function m(n){if(e.testC1GridViewCommandField(n)||e.testC1GridViewButtonField(n)){return false}return((n.showDeleteButton&&n.showDeleteButton!==false)||(n.showEditButton&&n.showEditButton!==false)||n.cancelCommand||n.deleteCommand||n.editCommand||n.updateCommand)};return l})(e);f.c1commandbtnfield=j;var c=(function(l){__extends(k,l);function k(){l.apply(this,arguments);this.showDeleteButton=false;this.showEditButton=false;this.cancelCommand={text:"Cancel",iconClass:"ui-icon-close",click:undefined};this.deleteCommand={text:"Delete",iconClass:"ui-icon-trash",click:undefined};this.editCommand={text:"Edit",iconClass:"ui-icon-pencil",click:undefined};this.updateCommand={text:"Update",iconClass:"ui-icon-disk",click:undefined}}return k})(g);f.c1commandbtnfield_options=c;j.prototype.options=b.grid.extendWidgetOptions(e.prototype.options,new c());i.wijmo.registerWidget("c1commandbtnfield",j.prototype)})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var j=jQuery;var o=(function(){function q(){}q.prototype.generateSpanTable=function(r,t){this._height=this._width=this._inc=this._shift=0;this._table=[];this._traverseList=[];this._savedXPos=[];var s=this._generateSpanTable(r,t,true);return s};q.prototype._generateSpanTable=function(r,w,u){var v,t,s=this;this._height=this.getVisibleHeight(r,u);w=w||[];b.grid.traverse(r,function(x){if(x.isLeaf){w.push(x)}s._traverseList.push(x)});this._width=w.length;for(v=0;v<this._height;v++){this._table[v]=[];for(t=0;t<this._width;t++){this._table[v][t]={column:null,colSpan:0,rowSpan:0}}}this._setTableValues(r,0,0);return this._table};q.prototype.getVisibleHeight=function(t,u){var w,s,x,v,r=0;if(j.isArray(t)){for(w=0,s=t.length;w<s;w++){v=this.getVisibleHeight(t[w],u);r=Math.max(r,v)}}else{x=(t.visible===undefined)?true:t.visible;t.parentVis=x&&u;if(t.isBand){for(w=0,s=t.columns.length;w<s;w++){v=this.getVisibleHeight(t.columns[w],t.parentVis);r=Math.max(r,v)}if(!t.parentVis){return r}t.isLeaf=(r===0);r++}else{t.isLeaf=true;if(t.parentVis){r=1}}}return r};q.prototype._getVisibleParent=function(r){while(r){r=this._traverseList[r.parentIdx];if(r&&(r.parentVis||r.parentVis===undefined)){return r}}return null};q.prototype._setTableValues=function(z,w,A){var t,v,u,s,B,r;if(j.isArray(z)){for(t=0,v=z.length;t<v;t++){this._setTableValues(z[t],w,A)}}else{if(z.travIdx===undefined){throw"undefined travIdx"}u=A+this._shift;if(z.parentVis){s=u+this._inc;this._table[w][s].column=z;this._savedXPos[z.travIdx]=s}if(z.isBand){for(t=0,v=z.columns.length;t<v;t++){this._setTableValues(z.columns[t],w+1,A)}}if(z.parentVis){if(this._shift-u===0){this._table[w][this._savedXPos[z.travIdx]].rowSpan=this._height-w;this._shift++}else{this._table[w][this._savedXPos[z.travIdx]].colSpan=this._shift-u}}else{if(!z.isBand&&this._height>0){r=this._getVisibleParent(z);B=(r)?r.isLeaf:false;if(B){this._inc++}if(w>=this._height){w=this._height-1}s=A+this._shift+this._inc;this._table[w][s].column=z;if(!B){if(r&&(this._savedXPos[r.travIdx]===s)){this._shiftTableElements(s,w)}this._inc++}}}}};q.prototype._shiftTableElements=function(r,s){var t;for(t=0;t<s;t++){this._table[t][r+1]=this._table[t][r];this._table[t][r]={column:null,colSpan:0,rowSpan:0};if(this._table[t][r+1].column){this._savedXPos[this._table[t][r+1].column.travIdx]++}}};return q})();d.bandProcessor=o;function c(r){var q=[];b.grid.traverse(r,function(s){q.push(s)});return q}d.flatten=c;function h(q){var r=[];k(q,r);return r}d.getAllLeaves=h;function k(t,v){var s,r,u,q;if(t){for(s=0,r=t.length;s<r;s++){u=t[s];if(u.options){u=u.options}q=u.columns;if(q&&q.length){k(q,v)}else{v.push(u)}}}}function i(u,s){var t,r,v,q=null;if(u&&s>=0){for(t=0,r=u.length;t<r&&!q;t++){v=u[t];if(v.options){v=v.options}if(v.travIdx===s){return{found:v,at:u}}if(v.columns){q=this.getColumnByTravIdx(v.columns,s)}}}return q}d.getColumnByTravIdx=i;function g(q){var r=[];f(q,r);return r}d.getLeaves=g;function f(s,u){var r,q,t;if(s){for(r=0,q=s.length;r<q;r++){t=s[r];if(t.isLeaf){u.push(t)}if(t.columns){f(t.columns,u)}}}}function p(s,q){if(!s||!q||(s.parentIdx===-1)){return null}var r=q[s.parentIdx];if(r.parentIdx===-1){return r}return b.grid.getTompostParent(r,q)}d.getTompostParent=p;function m(q,t,r){if(t.options){t=t.options}if(r.options){r=r.options}if(r.isBand&&t.parentIdx>=0){if(t.parentIdx===r.travIdx){return true}if(t.parentIdx>r.travIdx){var s=this.flatten(q);while(true){t=s[t.parentIdx];if(t.travIdx===r.travIdx){return true}if(t.parentIdx===-1){break}}}}return false}d.isChildOf=m;function n(q){return e(q,0,-1)}d.setTraverseIndex=n;function e(t,r,v){var s,q,u;if(t){for(s=0,q=t.length;s<q;s++){u=t[s];if(u.options){u=u.options}u.linearIdx=s;u.travIdx=r++;u.parentIdx=v;if(u.columns){r=e(u.columns,r,r-1)}}}return r}function l(s,u){var r,q,t;if(s&&(j.isFunction(u))){for(r=0;r<s.length;r++){t=s[r];if(t.options){t=t.options}q=s.length;u(t,s);if(s.length!==q){r--;continue}if(t.columns){b.grid.traverse(t.columns,u)}}}}d.traverse=l})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._dvFilteringSettings=undefined;this._dvPagingSettings=undefined;this._dvSortingSettings=undefined;this._wgFilteringSettings=undefined;this._wgPagingSettings=undefined;this._wgSortingSettings=undefined;if(!g){throw"exception"}this._wijgrid=g;this._dataView=g._dataViewWrapper.dataView();this._filterCache=new b.grid.filterOperatorsCache(g)}f.prototype.compareSettings=function(){var j=true,k,h,l,g;j=((k=this.DVPagingSettings())===(h=this.WGPagingSettings()));if(!j&&k&&h){j=(k.pageSize===h.pageSize&&k.pageIndex===h.pageIndex)}if(j){j=((k=this.DVSortingSettings())===(h=this.WGSortingSettings()));if(!j&&k&&h&&((g=k.length)===h.length)){j=true;for(l=0;l<g&&j;l++){j=((k[l].dataKey===h[l].dataKey)&&(k[l].sortDirection===h[l].sortDirection))}}}if(j){k=this.DVFilteringSettings();h=this.WGFilteringSettings();j=b.grid.compareObj(k,h)}return j};f.prototype.DVFilteringSettings=function(){function h(j,k){var l;e.each(j,function(m,n){if(typeof(n)==="string"){l=n}else{if(e.isArray(n)){h(n,k)}else{k.filterValue.push(n.value);k.filterOperator.push({name:n.originalOperator||n.operator,condition:l})}}})}if(this._dvFilteringSettings===undefined){var i=[],g=this._dataView.filter();if(g){e.each(g,function(l,j){var k={dataKey:l};if(e.isArray(j)){k.filterValue=[];k.filterOperator=[];h(j,k)}else{if(e.isPlainObject(j)){k.filterValue=j.value;k.filterOperator=j.originalOperator||j.operator||"Equals"}else{k.filterValue=j;k.filterOperator="Equals"}}i.push(k)})}this._dvFilteringSettings=(i.length)?i:null}return this._dvFilteringSettings};f.prototype.DVPagingSettings=function(){if(this._dvPagingSettings===undefined){var h=b.grid.asPagedDataView(this._dataView);if(h){var g=h.pageSize();this._dvPagingSettings=(g>0)?{pageSize:h.pageSize(),pageIndex:h.pageIndex()}:null}}return this._dvPagingSettings};f.prototype.DVSortingSettings=function(){if(this._dvSortingSettings===undefined){var h=[];if(true){var g=b.data.sorting.compile(this._dataView.sort()).normalized;if(g){e.each(g,function(i,j){if(j!==null){h.push({dataKey:(typeof(j)==="string")?j:j.property,sortDirection:j.asc||j.asc===undefined?"ascending":"descending"})}})}}this._dvSortingSettings=(h.length)?h:null}return this._dvSortingSettings};f.prototype.WGFilteringSettings=function(){if(this._wgFilteringSettings===undefined){var i=[],h=this._wijgrid._field("leaves"),g=this;if(h){e.each(h,function(l,j){if(b.grid.validDataKey(j.dataKey)&&j.filterOperator){var m=(b.grid.deepExtend({},{foo:j.filterValue})).foo,k=(b.grid.deepExtend({},{foo:j.filterOperator})).foo,n=b.grid.filterHelper.verify(k,m,j.dataType,g._filterCache);if(n){i.push({owner:j,dataKey:j.dataKey,filterValue:n.filterValue,filterOperator:n.filterOperator})}}})}this._wgFilteringSettings=(i.length)?i:null}return this._wgFilteringSettings};f.prototype.WGPagingSettings=function(){if(this._wgPagingSettings===undefined){this._wgPagingSettings=this._wijgrid.options.allowPaging?{pageSize:this._wijgrid.options.pageSize,pageIndex:this._wijgrid.options.pageIndex}:null}return this._wgPagingSettings};f.prototype.WGSortingSettings=function(){if(this._wgSortingSettings===undefined){var h={},i=[],g=this._wijgrid._groupedColumns(true),l=this._wijgrid._field("leaves")||[],k=function(m){return(!m.isBand&&b.grid.validDataKey(m.dataKey))},j=0;e.each(g,function(n,m){if(k(m)){if(m.sortDirection==="none"){m.sortDirection="ascending"}h[m.dataKey]={dataKey:m.dataKey,sortDirection:m.sortDirection,sortOrder:j++}}});j++;e.each(l,function(n,m){if(k(m)){if(m.sortDirection==="ascending"||m.sortDirection==="descending"){if(!h[m.dataKey]){h[m.dataKey]={dataKey:m.dataKey,sortDirection:m.sortDirection,sortOrder:(m.sortOrder||0)+j}}}}});e.each(h,function(m,n){i.push(n)});i.sort(function(n,m){return n.sortOrder-m.sortOrder});e.each(i,function(m,n){delete n.sortOrder});this._wgSortingSettings=(i.length)?i:null}return this._wgSortingSettings};f.prototype.MapWGToDV=function(){var j=this;var g={},i,h;if(this._mapPagingParams()&&(i=this.WGPagingSettings())){g.pageIndex=i.pageIndex;g.pageSize=i.pageSize}else{g.pageSize=-1}if(this._mapSortingParams()){g.sort=[];if(i=this.WGSortingSettings()){g.sort=[];e.each(i,function(k,l){g.sort.push({property:l.dataKey,asc:l.sortDirection==="ascending"})})}}this._wijgrid.deficientFilters={};if(this._mapFilteringParams()){e.each(this._wijgrid._field("leaves"),function(l,k){if(b.grid.validDataKey(k.dataKey)&&((k.filterOperator===undefined)^(k.filterValue===undefined))){j._wijgrid.deficientFilters[k.dataKey]={filterOperator:k.filterOperator,filterValue:k.filterValue}}});g.filter={};if(i=this.WGFilteringSettings()){g.filter=this._convertFilterToDV(i)}if(e.isEmptyObject(g.filter)){g.filter=null}}return g};f.prototype.MapDVToWG=function(){var m,k={},g=this._mapSortingParams(),l=this._mapPagingParams(),j=this._mapFilteringParams(),i=b.grid.asPagedDataView(this._dataView),h=this;e.each(this._wijgrid._field("leaves"),function(o,n){if(g){n.sortOrder=0;n.sortDirection="none"}if(j){n.filterOperator="nofilter";n.filterValue=undefined}k[n.dataKey]=n});if(l&&i){this._wijgrid.options.pageSize=i.pageSize();this._wijgrid.options.pageIndex=i.pageIndex()}if(g&&(m=this.DVSortingSettings())){e.each(m,function(n,q){var p;if((p=k[q.dataKey])){p.sortDirection=q.sortDirection;p.sortOrder=n}})}if(j){if(m=this.DVFilteringSettings()){e.each(m,function(p,q){var n;if((n=k[q.dataKey])){n.filterValue=q.filterValue;n.filterOperator=q.filterOperator;if(e.isPlainObject(n.filterOperator)){n.filterOperator=n.filterOperator.name}delete h._wijgrid.deficientFilters[n.dataKey]}})}e.each(this._wijgrid.deficientFilters,function(o,n){k[o].filterOperator=n.filterOperator;k[o].filterValue=n.filterValue})}};f.prototype._mapPagingParams=function(){return this._wijgrid.options.allowPaging&&!this._wijgrid._customPagingEnabled()&&!this._wijgrid._serverShaping()};f.prototype._mapSortingParams=function(){return !this._wijgrid._serverShaping()};f.prototype._mapFilteringParams=function(){return !this._wijgrid._serverShaping()};f.prototype.makeProxyFilter=function(j,h,i,m){i=i.toLowerCase();var n=this,k=(j.dataType==="datetime"),p={originalOperator:undefined,property:h,operator:i,value:m};var o=this._filterCache.getByNameInt(i);var l=b.data.filtering.ops[i];if((i!=="nofilter")&&(o.isCustom||k)){p.originalOperator=p.operator;if(o.isCustom){p.operator=e.extend(true,{},o.op);p.operator.apply=p.operator.operator}else{p.operator=e.extend(true,{},l);var g=j.inputType?b.grid.TimeUnitConverter.convertInputType(j.inputType):b.grid.TimeUnitConverter.convertFormatString(j.dataFormatString||"d");p.operator.apply=function(r,q){if(!(r instanceof Date)){r=n._wijgrid.parse(j,r)}if(!(q instanceof Date)){q=n._wijgrid.parse(j,q)}b.grid.TimeUnitConverter.cutDate(r,g);b.grid.TimeUnitConverter.cutDate(q,g);return l.apply(r,q)}}}return p};f.prototype._convertFilterToDV=function(i){var g={},h=this;e.each(i,function(n,q){var k=q.dataKey,j=[],o="and",l,m,r,p;if(!e.isPlainObject(q)){return}m=q.filterOperator;r=q.filterValue;if(m==null){return}if(!e.isArray(m)){m=[m]}if(!e.isArray(r)){r=[r]}if(m.length!=r.length){throw"The number of filter operators must match the number of filter values"}if(m.length==0){return}e.each(m,function(u,s){var v;if(typeof s==="string"){s={name:s}}if(!e.isPlainObject(s)||!s.name){throw"Invalid filter operator"}v=r[u];if(!e.isArray(v)){v=[v]}p=e.map(v,function(x){return h.makeProxyFilter(q.owner,k,s.name,x)});function t(){if(p.length>1){p.splice(0,0,"or")}else{p=p[0]}}function w(){if(o==null){o=l;j.splice(0,0,l)}}o=null;l=s.condition||"or";if(j.length<=1||o==l){if(p.length==1||j.length<=1||o=="or"){j=j.concat(p);w()}else{t();j.push(p);w()}}else{t();j=[j,p];w()}});e.each(j,function(s,t){if(e.isArray(t)&&t.length==2){j[s]=t[1]}});if(j.length==2&&typeof(j[0]==="string")){j.shift()}if(j.length==1){j=j[0]}g[k]=j});return g};return f})();d.settingsManager=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var g=jQuery;var f=(function(){function j(k){this._domSource=null;this._ignoreAllEvents=false;this._ignoreChangeEvent=false;this._ignoreCurrentChangedEvent=false;this._sharedDataItems=null;this._userData=null;this._totals=null;this._changeTimer=0;this._toDispose=[];this._isOwnDataView=false;this._isWijdatasource=false;this._isKODataView=false;this._isDynamicWijdatasource=false;this._wijgrid=k;this._createDataViewWrapper()}j.prototype.data=function(){var l=this._getDataViewInst(),k=b.grid.asPagedDataView(l);return{data:this._getSharedDataItems(),totalRows:k!=null?k.totalItemCount():(l.getSource()||[]).length,totals:this._getTotals(),emptyData:this.isBoundedToDOM()?this._domSource.emptyData:null}};j.prototype.dataView=function(){return this._getDataViewInst()};j.prototype.dispose=function(){var k=this._getDataViewInst();this._propChangeListener.dispose();g.each(this._toDispose,function(l,m){m.dispose()});if(k&&this._isOwnDataView){k.dispose()}this._wijgrid._wijDataView=null};j.prototype.ignoreChangeEvent=function(k){if(arguments.length){this._ignoreChangeEvent=(k===true)}else{return this._ignoreChangeEvent}};j.prototype.ignoreCurrentChangedEvent=function(k){if(arguments.length){this._ignoreCurrentChangedEvent=(k===true)}else{return this._ignoreCurrentChangedEvent}};j.prototype.isDataLoaded=function(){var k=this._getDataViewInst();return k.isLoaded()};j.prototype.isOwnDataView=function(){return this._isOwnDataView};j.prototype.getFieldsInfo=function(){var k=this._getDataViewInst();return this._propDescriptorsToFieldsInfo(k.getProperties())};j.prototype._propDescriptorsToFieldsInfo=function(l){var k={};if(l){g.each(l,function(m,n){if(n.name==="$$hash"||n.name==="$$hashKey"){return}k[n.name]={name:n.name,type:n.type||"string"}})}return k};j.prototype.isBoundedToDOM=function(){return this._domSource!==null};j.prototype.load=function(l){this._userData=l;var r=this._getDataViewInst();if(!r){this._createDataViewWrapper();r=this._getDataViewInst()}this._onDataViewLoading();var o=new b.grid.settingsManager(this._wijgrid);if((l&&l.forceDataLoad)||this._needToLoad(o)){var p=o.MapWGToDV(),q=false;if(this._isWijdatasource&&!this._isDynamicWijdatasource&&r.isLoaded()){q=true}var s=b.grid.asPagedDataView(r),t=-1;if(s&&(p.pageSize>=0)&&((t=s.totalItemCount())>=0)){if(this._isOwnDataView&&!this._isKODataView&&!this._isDynamicWijdatasource&&(s.pageSize()>0)){var k=s.getSource();if(k&&(k.length<t)){t=k.length}}var n=Math.ceil(t/p.pageSize)||1,m=p.pageIndex;if(m>=n){m=Math.max(0,n-1)}p.pageIndex=m}this.ignoreCurrentChangedEvent(true);r.refresh(p,q)}else{if(this.isDataLoaded()){this._onDataViewLoaded();this._onDataViewReset()}}};j.prototype.currentPosition=function(l){var k=this._getDataViewInst();if(!arguments.length){return k.currentPosition()}this.ignoreCurrentChangedEvent(true);try{k.currentPosition(l)}finally{this.ignoreCurrentChangedEvent(false)}};j.prototype.getValue=function(l,k){var m=this._getDataViewInst();if(typeof(k)==="number"){k=k+""}return m.getProperty(l,k)};j.prototype.setValue=function(l,k,m){var n=this._getDataViewInst();this.ignoreChangeEvent(true);try{if(typeof(k)==="number"){k=k+""}n.setProperty(l,k,m)}finally{this.ignoreChangeEvent(false)}};j.prototype.makeDirty=function(){this._propChangeListener.removeAll();this._totals=null;this._sharedDataItems=null};j.prototype._createDataViewWrapper=function(){var l,n=this._wijgrid.options.data,o=this._getDataViewInst(),m=false;if(o){return}if(!n){this._domSource=this._processDOM(this._wijgrid.element,this._wijgrid.options.readAttributesFromData);n=this._domSource.items}m=(typeof(wijdatasource)!=="undefined"&&(n instanceof wijdatasource));this._isKODataView=n instanceof b.grid.koDataView;this._isOwnDataView=(g.isArray(n)||m||this._isKODataView);this._isWijdatasource=!!(this._isOwnDataView&&m);this._isDynamicWijdatasource=!!(this._isOwnDataView&&m&&n.dynamic);if(this._isOwnDataView&&!this._isKODataView){if(!this._domSource&&this._wijgrid.options.readAttributesFromData){this._moveAttributesToExpando(n)}var k=this.isBoundedToDOM()&&b.grid.getTableSection(this._wijgrid.element,b.grid.rowScope.body);o=b.grid.GridDataView.create(b.data.asDataView(this._parseOwnData(n,k)))}else{o=n}this._wijgrid._wijDataView=o;this._toDispose.push(o.isLoading.subscribe(g.proxy(this._onDataViewLoadingInternal,this)));this._toDispose.push(o.isLoaded.subscribe(g.proxy(this._onDataViewLoadedInternal,this)));this._toDispose.push(o.subscribe(g.proxy(this._onDataViewChangeInternal,this)));this._toDispose.push(o.currentPosition.subscribe(g.proxy(this._onDataViewCurrentChangedInternal,this)));this._propChangeListener=new b.grid.propChangeListener(g.proxy(this._onPropertyChanged,this))};j.prototype._parseOwnData=function(q,m){var l=this;if(q&&q.length){var n=g.extend(true,[],this._wijgrid.options.columns),o=b.data.ArrayDataViewBase._getProps(q[0])||[],p=this._propDescriptorsToFieldsInfo(o),k=[];this._wijgrid._prepareColumnOptions(n,"merge",p,true,true);b.grid.traverse(n,function(r){if(b.grid.getDataType(r)!=="string"&&b.grid.validDataKey(r.dataKey)){k.push(r)}});if(k.length&&m){g.each(q,function(s,r){b.grid.dataViewWrapper._parseDataItem(l._wijgrid,r,(m&&m.rows[s]),k)})}}return q};j._parseDataItem=function i(m,k,l,n){g.each(n,function(p,o){var q=k[o.dataKey],r=m.parse(o,q);if(isNaN(r)){var s=null;if(l){s=l.cells[o.dataKey]}r=m.parseFailed(o,q,k,s)}k[o.dataKey]=r});return k};j.prototype._getDataViewInst=function(){return this._wijgrid._wijDataView};j.prototype._needToLoad=function(k){var l=this._getDataViewInst();if(this._isDynamicWijdatasource||(this._isWijdatasource&&!l.isLoaded())){return true}if(this._isOwnDataView&&!this._isWijdatasource&&this.isDataLoaded()){return true}if(this.isDataLoaded()||l.isLoading()){return !k.compareSettings()}return true};j.prototype._validateSettings=function(k){if(!this._isOwnDataView&&this._wijgrid.options.allowPaging&&((k.DVPagingSettings()||{}).pageSize!==(k.WGPagingSettings()||{}).pageSize)){throw"The pageSize option of the external dataView can't be changed."}};j.prototype._onDataViewLoadingInternal=function(k){if(this._ignoreAllEvents){return}if(k){if(!this._userData){this._onDataViewLoading()}}};j.prototype._onDataViewLoadedInternal=function(k){if(this._ignoreAllEvents){return}if(k){this._onDataViewLoaded()}};j.prototype._onDataViewChangeInternal=function(l){var k=this;if(this._ignoreAllEvents||this._ignoreChangeEvent){return}if(l.changes){if(l.length&&l[0].entityState()==="detached"){return}g.each(l.changes,function(m,n){switch(n.changeType){case"remove":k._propChangeListener.remove(n.index);break;case"add":k._propChangeListener.insert(n.index,n.element);break}})}this._onDataViewChange.apply(this,arguments)};j.prototype._onDataViewCurrentChangedInternal=function(){if(this._ignoreAllEvents||this._ignoreCurrentChangedEvent){return}this._onDataViewCurrentChanged.apply(this,arguments)};j.prototype._onDataViewReset=function(){try{this.ignoreCurrentChangedEvent(false);this.makeDirty();this._wijgrid._onDataViewReset(this._userData,this._isKODataView)}finally{this._userData=null}};j.prototype._onPropertyChanged=function(l){var k=this;if(this._changeTimer>0){window.clearTimeout(this._changeTimer);this._changeTimer=0}if(this._changeTimer!=-1){this._changeTimer=window.setTimeout(function(){k._changeTimer=-1;if(!k._wijgrid._destroyed){k._onDataViewChange()}k._changeTimer=0},100)}};j.prototype._onDataViewChange=function(k){this._onDataViewReset()};j.prototype._onDataViewCurrentChanged=function(l,k){this._wijgrid._onDataViewCurrentPositionChanged(l,k)};j.prototype._onDataViewLoading=function(){this._wijgrid._onDataViewLoading()};j.prototype._onDataViewLoaded=function(){this._wijgrid._onDataViewLoaded()};j.prototype._getSharedDataItems=function(){if(!this._sharedDataItems){var o=this._getDataViewInst(),k=o.count();this._sharedDataItems=[];var n=true;for(var m=0;m<k;m++){var l=o.item(m);if(n){if(!this._propChangeListener.insert(m,l)&&m===0){n=false}}this._sharedDataItems.push(this._wrapDataItem(l,m))}}if(!this._sharedDataItems){this._sharedDataItems=[]}return this._sharedDataItems};j.prototype._getTotals=function(){if(!this._totals){var k=this._getDataViewInst();this._totals=this._prepareTotals(k,this._wijgrid._prepareTotalsRequest(true))}if(!this._totals){this._totals={}}return this._totals};j.prototype._prepareTotals=function(r,q){if(!q||q.length===0){return{}}var p,l,o,m,n=[],k={};for(p=0,l=q.length;p<l;p++){n.push(new b.grid.tally())}for(p=0,l=r.count();p<l;p++){for(o=0,m=n.length;o<m;o++){n[o].add(this._wijgrid.parse(q[o].column,this.getValue(p,q[o].column.dataKey)))}}for(p=0,l=n.length;p<l;p++){k[q[p].column.dataKey]=n[p].getValueString(q[p].column)}return k};j.prototype._processDOM=function(m,l){var k={items:[],emptyData:[],header:b.grid.readTableSection(m,b.grid.rowScope.head)};if(b.grid.getTableSectionLength(m,2)===1&&g(b.grid.getTableSectionRow(m,2,0)).hasClass(b.grid.wijgrid.CSS.emptyDataRow)){k.emptyData=b.grid.readTableSection(m,b.grid.rowScope.body)}else{k.items=b.grid.readTableSection(m,b.grid.rowScope.body,l)}return k};j.prototype._moveAttributesToExpando=function(k){g.each(k,function(l,m){var o=(b).data.Expando.getFrom(m,true),n;n=o[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:{}};if(m.rowAttributes){n.rowAttributes=m.rowAttributes;delete m.rowAttributes}g.each(m,function(q,p){if(g.isArray(p)){n.cellsAttributes[q]=p[1];m[q]=p[0]}})})};j.prototype._wrapDataItem=function(k,l){return{values:k,originalRowIndex:l}};j.prototype._refreshSilent=function(){var k=this._getDataViewInst();if(k){try{this._ignoreAllEvents=true;k.refresh()}finally{this._ignoreAllEvents=false}}};j.prototype._unsafeReplace=function(k,l){var m=this._getDataViewInst();if(!(m instanceof b.grid.GridDataView)){"operation is not supported"}m._unsafeReplace(k,l)};j.prototype._unsafeSplice=function(k,m,l){var n=this._getDataViewInst();if(!(n instanceof b.grid.GridDataView)){"operation is not supported"}if(arguments.length===2){n._unsafeSplice(k,m)}else{n._unsafeSplice(k,m,l)}};j.prototype._unsafePush=function(k){var l=this._getDataViewInst();if(!(l instanceof b.grid.GridDataView)){"operation is not supported"}l._unsafePush(k)};return j})();d.dataViewWrapper=f;function c(i){return i&&("pageCount" in i)?i:null}d.asPagedDataView=c;function e(i){return i&&("commitEdit" in i)?i:null}d.asEditableDataView=e;var h=(function(){function i(j){this._subscriptions=[];this._callback=j}i.prototype.insert=function(k,l){var m=null,j=this;g.each(l,function(n,o){if(j._isValidPropName(n)&&o&&g.isFunction(o.subscribe)){m=m||[];m.push(o.subscribe(j._callback))}});if(!m){return false}if(this._subscriptions.length<k){this._subscriptions.length=k}this._subscriptions.splice(k,0,m);return true};i.prototype.remove=function(k){var j=this._subscriptions[k];if(j){g.each(j,function(l,m){m.dispose();j[l]=null})}this._subscriptions[k]=null;this._subscriptions.splice(k,1)};i.prototype.removeAll=function(){var j,k;while(j=this._subscriptions.length){this.remove(j-1)}this._subscriptions=[]};i.prototype.dispose=function(){this.removeAll()};i.prototype._isValidPropName=function(j){if(j&&(typeof(j)==="string")){return j.match(/^entityState|jQuery/)===null}return true};return i})();d.propChangeListener=h})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var f=jQuery;var e=(function(){function g(j,i,k,h,l){this.cr=new b.grid.cellRange(-1,-1);this.isExpanded=false;this.position="none";this._sum=-1;this._hasHeaderOrFooter=true;if(j!==undefined){this.isExpanded=j}if(i!==undefined){this.cr=i}if(k!==undefined){this._sum=k}if(h!==undefined){this.position=h}if(l!==undefined){this._hasHeaderOrFooter=l}}g.prototype.isSubRange=function(h){return((this.cr.r1>=h.cr.r1)&&(this.cr.r2<=h.cr.r2))};g.prototype.toString=function(){return this.cr.r1+"-"+this.cr.r2};g.prototype.collapse=function(){var j,k,i,l,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){l=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(l,this.cr,j.level)){if((j.position!=="footer")&&(j.outlineMode!=="none")){h=b.grid.groupHelper.getGroupedColumnsCount(l);this._collapse(i,i._rows(),l,this,h,i._allowVirtualScrolling())}}}};g.prototype.expand=function(l){var j,k,i,m,h;if((j=this.owner)&&(k=j.owner)&&(i=k.owner)){m=i._field("leaves");if(b.grid.groupHelper.isParentExpanded(m,this.cr,j.level)){h=b.grid.groupHelper.getGroupedColumnsCount(m);this._expand(i,i._rows(),m,this,h,l,true,i._allowVirtualScrolling())}}};g.prototype._collapse=function(h,m,t,u,v,r){var k=u.owner,n=u.cr.r1,w=u.cr.r2,q,s,p,l,o;switch(k.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(h.sketchTable.row(u.cr.r1),undefined,false);if(!r){this._toggleRowVisibility(h,m.item(u.cr.r1),undefined,false)}n++;break}for(q=n;q<=w;q++){this._toggleSketchRowVisibility(h.sketchTable.row(q),false,undefined);if(!r){this._toggleRowVisibility(h,m.item(q),false,undefined)}}u.isExpanded=false;for(q=k.level+1;q<=v;q++){p=b.grid.groupHelper.getChildGroupRanges(t,u.cr,q-1);for(o=0,s=p.length;o<s;o++){l=p[o];l.isExpanded=false;switch(l.owner.position){case"header":case"headerAndFooter":this._toggleSketchRowVisibility(h.sketchTable.row(l.cr.r1),false,false);if(!r){this._toggleRowVisibility(h,m.item(l.cr.r1),false,false)}break}}}};g.prototype._expand=function(j,o,t,v,w,h,m,r){var k=v.owner,n=v.cr.r1,x=v.cr.r2,q,s,p,l,u;switch(k.position){case"header":this._toggleSketchRowVisibility(j.sketchTable.row(n),true,m||h);if(!r){this._toggleRowVisibility(j,o.item(n),true,m||h)}n++;break;case"footer":this._toggleSketchRowVisibility(j.sketchTable.row(x),true,undefined);if(!r){this._toggleRowVisibility(j,o.item(x),true,undefined)}x--;break;case"headerAndFooter":this._toggleSketchRowVisibility(j.sketchTable.row(n),true,m||h);if(!r){this._toggleRowVisibility(j,o.item(n),true,m||h)}if(m){this._toggleSketchRowVisibility(j.sketchTable.row(x),true,undefined);if(!r){this._toggleRowVisibility(j,o.item(x),true,undefined)}}n++;x--;break}if(m){v.isExpanded=true}else{return}if(v.owner.level===w){for(q=n;q<=x;q++){this._toggleSketchRowVisibility(j.sketchTable.row(q),true,undefined);if(!r){this._toggleRowVisibility(j,o.item(q),true,undefined)}}}else{p=b.grid.groupHelper.getChildGroupRanges(t,v.cr,v.owner.level);if(p.length&&(n!==p[0].cr.r1)){for(q=n;q<p[0].cr.r1;q++){this._toggleSketchRowVisibility(j.sketchTable.row(q),true,undefined);if(!r){this._toggleRowVisibility(j,o.item(q),true,undefined)}}}if(h){for(q=0,s=p.length;q<s;q++){l=p[q];this._expand(j,o,t,l,w,h,true,r)}}else{for(q=0,s=p.length;q<s;q++){l=p[q];u=(l.owner.position==="footer"||l.owner.outlineMode==="none")?true:false;this._expand(j,o,t,l,w,false,u,r)}}}};g.prototype._toggleRowVisibility=function(l,k,n,j){if(k){var i=b.grid.renderStateEx,h=l._view(),m=h._getRowInfo(k,false);if(n!==undefined){if(n){m._extInfo.state&=~i.hidden}else{m._extInfo.state|=i.hidden}}if(j!==undefined){if(j){m._extInfo.state&=~i.collapsed}else{m._extInfo.state|=i.collapsed}}h._setRowInfo(m.$rows,m);l.rowStyleFormatter._groupFormatter(m)}};g.prototype._toggleSketchRowVisibility=function(k,j,i){if(k){var h=b.grid.renderStateEx;if(j!==undefined){if(j){k.extInfo.state&=~h.hidden}else{k.extInfo.state|=h.hidden}}if(i!==undefined){if(i){k.extInfo.state&=~h.collapsed}else{k.extInfo.state|=h.collapsed}}}};return g})();d.groupRange=e;var c=(function(){function g(){this._groupRowIdx=0}g.prototype.group=function(h,i,j){this._grid=h;this._sketchTable=i;this._leaves=j;this._groupRowIdx=0;try{this._group()}finally{delete this._grid;delete this._sketchTable;delete this._leaves}};g.prototype._group=function(){var j=this;f.each(this._leaves,function(k,l){if(l.groupInfo){delete l.groupInfo.level;delete l.groupInfo.expandInfo}});var h=this._grid._groupedColumns(true),i=1;if(h.length==0){return}this._sketchTable.ensureNotLazy();f.each(h,function(k,l){j._groupRowIdx=0;if(l.groupInfo&&(l.groupInfo.position&&(l.groupInfo.position!=="none"))&&(l.dataIndex>=0)){l.groupInfo.level=i;l.groupInfo.expandInfo=[];j._processRowGroup(l,i++)}})};g.prototype._processRowGroup=function(r,k){var v=0,w=true,m=b.grid.renderStateEx;f.each(this._leaves,function(z,y){if(y.parentVis){v=z;return false}});for(var s=0;s<this._sketchTable.count();s++){var x=this._sketchTable.row(s);if(!x.isDataRow()){continue}var q=this._getGroupCellRange(s,r,k),h=true,p=(r.groupInfo.outlineMode==="startCollapsed"),o,u,t,l;if(p||b.grid.groupHelper.isParentCollapsed(this._leaves,q,k)){if((r.groupInfo.groupSingleRow===false)&&(q.r1===q.r2)){continue}h=false}if(k&&this._grid.options.groupIndent){for(var j=q.r1;j<=q.r2;j++){this._addIndent(this._sketchTable.row(j).cell(v),k)}}w=!(r.groupInfo.groupSingleRow===false&&(q.r1===q.r2));switch(r.groupInfo.position){case"header":t=this._addGroupRange(r.groupInfo,q,h,w);for(var n=q.r1;n<=q.r2;n++){x=this._sketchTable.row(n);x.extInfo.groupLevel=k+1;if(!h){x.extInfo.state|=m.hidden}}if(!w){break}this._updateByGroupRange(t,k);l=b.grid.groupHelper.isParentCollapsed(this._leaves,t.cr,k);o=this._buildGroupRow(t,q,true,l);this._sketchTable.insert(q.r1,o);o.extInfo.groupLevel=k;if(!h){o.extInfo.state|=m.collapsed}if(l){o.extInfo.state|=m.hidden}s=q.r2+1;break;case"footer":t=this._addGroupRange(r.groupInfo,q,true,w);if(!w){break}this._updateByGroupRange(t,k);u=this._buildGroupRow(t,q,false,false);u.extInfo.groupLevel=k;this._sketchTable.insert(q.r2+1,u);s=q.r2+1;l=b.grid.groupHelper.isParentCollapsed(this._leaves,t.cr,k);if(l){u.extInfo.state|=m.hidden}break;case"headerAndFooter":t=this._addGroupRange(r.groupInfo,q,h,w);for(n=q.r1;n<=q.r2;n++){x=this._sketchTable.row(n);x.extInfo.groupLevel=k+1;if(!h){x.extInfo.state|=m.hidden}}if(!w){break}this._updateByGroupRange(t,k);l=b.grid.groupHelper.isParentCollapsed(this._leaves,t.cr,k);o=this._buildGroupRow(t,q,true,l);u=this._buildGroupRow(t,q,false,false);this._sketchTable.insert(q.r2+1,u);u.extInfo.groupLevel=k;if(l||!h){u.extInfo.state|=m.hidden}this._sketchTable.insert(q.r1,o);o.extInfo.groupLevel=k;if(!h){o.extInfo.state|=m.collapsed}if(l){o.extInfo.state|=m.hidden}s=q.r2+2;break;default:throw b.grid.stringFormat('Unknown Position value: "{0}"',r.groupInfo.position)}this._groupRowIdx++}};g.prototype._buildGroupRow=function(p,t,j,y){var n=p.owner,x=n.owner,o=x.owner,u=new d.SketchGroupRow(j,null),v=undefined,m="",s="",h,A,h,z,i,w,k,r,q,l=b.grid.wijgrid.CSS;u.extInfo.groupIndex=this._groupRowIdx;if((x.dataIndex>=0)&&((v=this._sketchTable.valueAt(t.r1,x.dataIndex))!==null)){m=o.toStr(x,v)}u.groupByValue=v;if(this._grid._showRowHeader()){u.add(d.HtmlCell.nbsp())}h=new d.HtmlCell("",null);u.add(h);if(x.aggregate&&(x.aggregate!=="none")){s=this._getAggregate(t,x,x,j,m)}z=(j)?n.headerText:n.footerText;if(z==="custom"){i={data:this._sketchTable.getRawTable(),column:x,groupByColumn:n.owner,groupText:m,text:"",groupingStart:t.r1,groupingEnd:t.r2,isGroupHeader:j,aggregate:s};if(this._grid._trigger("groupText",null,i)){z=i.text}}else{if((z===undefined)||(z===null)){if(j){z="{1}: {0}"}if(s||(s===0)){z=z?z+" {2}":"{2}"}}z=b.grid.stringFormat(z,x&&x.encodeHtml?b.htmlEncode(m):m,x&&x.headerText?x.headerText:"",this._wrapAggregateValue(s))}if(!z){z="&nbsp;"}h.html+="<span>"+z+"</span>";this._addIndent(h,n.level-1);w=1;k=(this._grid._showRowHeader())?1:0;r=true;for(;k<this._leaves.length;k++){A=this._leaves[k];if(A.parentVis){if(r){r=false;continue}if((A.dynamic!==true)&&A.aggregate&&(A.aggregate!=="none")){break}w++}}for(;k<this._leaves.length;k++){A=this._leaves[k];if(A.parentVis){q=this._getAggregate(t,A,n.owner,j,m);if(!q&&(q!==0)){q="&nbsp;"}u.add(new d.HtmlCell(this._wrapAggregateValue(q),{groupInfo:{leafIndex:A.leavesIdx,purpose:b.grid.groupRowCellPurpose.aggregateCell}}))}}h.ensureAttr().colSpan=w;h.ensureAttr().groupInfo={leafIndex:x.leavesIdx,purpose:b.grid.groupRowCellPurpose.groupCell};return u};g.prototype._getAggregate=function(l,k,i,o,n){var h="",m,j,p;if(!k.aggregate||(k.aggregate==="none")){return h}if(k.aggregate==="custom"){m={data:this._sketchTable.getRawTable(),column:k,groupByColumn:i,groupText:n,text:"",groupingStart:l.r1,groupingEnd:l.r2,isGroupHeader:o};if(this._grid._trigger("groupAggregate",null,m)){h=m.text}}else{j=new b.grid.tally();for(p=l.r1;p<=l.r2;p++){j.add(this._sketchTable.valueAt(p,k.dataIndex))}h=j.getValueString(k)}return h};g.prototype._getGroupCellRange=function(n,l,h){var p=l.leavesIdx,q,j=new b.grid.cellRange(n,p),i=b.grid.groupHelper.getParentGroupRange(this._leaves,j,h),o,m,k;q=this._sketchTable.row(n);if(q.isDataRow()){o=q.valueCell(l.dataIndex).value;if(o instanceof Date){o=o.getTime()}for(j.r2=n,k=this._sketchTable.count()-1;j.r2<k;j.r2++){if(!this._sketchTable.row(j.r2+1).isDataRow()||(i&&(j.r2+1>i.cr.r2))){break}m=this._sketchTable.valueAt(j.r2+1,l.dataIndex);if(m instanceof Date){m=m.getTime()}if(o!==m){break}}}return j};g.prototype._addGroupRange=function(j,n,h,p){var q=null,o=b.grid.groupHelper.getChildGroupIndex(n,j.expandInfo),m,i,l,k;if(o>=0&&o<j.expandInfo.length){q=j.expandInfo[o]}else{m=new b.grid.cellRange(n.r1,n.r1,n.r2,n.r2);i=(j.position==="footer"||!p)?true:h&&(j.outlineMode!=="startCollapsed");q=new b.grid.groupRange(i,m,-1,j.position,p);q.owner=j;j.expandInfo.push(q)}if(q&&p){l=n.r1;k=n.r2;if(j.position==="headerAndFooter"){k+=2}if(j.position!=="headerAndFooter"){k++}q.cr.r2=k}return q};g.prototype._updateByGroupRange=function(p,h){var n,o,k,l,m,r,q;for(n=0,o=this._leaves.length;n<o;n++){k=this._leaves[n].groupInfo;if(k&&(k.level<h)){l=(k.expandInfo)?k.expandInfo.length:0;for(m=0;m<l;m++){r=k.expandInfo[m];q=(p.position==="headerAndFooter")?2:1;if(r.cr.r1>=p.cr.r1&&!((r.cr.r1===p.cr.r1)&&(r.position==="footer"))){r.cr.r1+=q}if(r.cr.r2>=p.cr.r1){r.cr.r2+=q}}}}};g.prototype._addIndent=function(i,j){var h;if(j>0&&(h=this._grid.options.groupIndent)){i.ensureStyle().paddingLeft=(h*j)+"px"}};g.prototype._wrapAggregateValue=function(h){return"<span class='"+b.grid.wijgrid.CSS.aggregateContainer+"'>"+h.toString()+"</span>"};return g})();d.grouper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(){}f._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$");f.getGroupInfo=function m(s){if(s){var r=b.grid.groupHelper._getGroupInfoRegExp.exec(s.id),t,p,q;if(r){t=parseInt(r[3],10);p=parseInt(r[2],10);q=(r[1]==="H");return{level:t,index:p,isHeader:q,toString:function(){return(q?"GH":"GF")+p+"-"+t}}}}return null};f.getColumnByGroupLevel=function j(t,s){var r,p,q;for(r=0,p=t.length;r<p;r++){q=t[r];if(q.groupInfo&&(q.groupInfo.level===s)){return q}}return null};f.getGroupedColumnsCount=function l(t){var q=0,s,p,r;for(s=0,p=t.length;s<p;s++){r=t[s].groupInfo;if(r&&(r.position==="header"||r.position==="headerAndFooter"||r.position==="footer")){q++}}return q};f.getChildGroupIndex=function n(q,p){var u=0,r=p.length-1,s,t;while(u<=r){s=((r-u)>>1)+u;t=p[s].cr.r1-q.r1;if(t===0){return s}if(t<0){u=s+1}else{r=s-1}}return u};f.getParentGroupIndex=function h(q,r){var p=b.grid.groupHelper.getChildGroupIndex(q,r);if(p>0){p--}return(p<r.length)?p:-1};f.getChildGroupRanges=function k(u,v,p){var y=[],x=b.grid.groupHelper.getColumnByGroupLevel(u,p+1);if(x){var r=x.groupInfo.expandInfo,w=b.grid.groupHelper.getChildGroupIndex(v,r);for(var s=w,t=r.length;s<t;s++){var q=r[s];if(q.cr.r2<=v.r2){y.push(q)}else{break}}}return y};f.getParentGroupRange=function g(u,q,t){if(t===undefined){t=65535}if(q&&(t-2>=0)){for(var s=u.length-1;s>=0;s--){var r=u[s].groupInfo;if(!r||!r.expandInfo||(r.level<0)||(r.level!==t-1)){continue}var p=b.grid.groupHelper.getParentGroupIndex(q,r.expandInfo);if(p>=0){return r.expandInfo[p]}}}return null};f.isParentCollapsed=function i(t,p,s){if(s===1){return false}for(var q=s;q>1;q--){var r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(!r){return false}if(!r.isExpanded){return true}p=r.cr}return false};f.isParentExpanded=function o(t,p,s){if(s===1){return true}for(var q=s;q>1;q--){var r=b.grid.groupHelper.getParentGroupRange(t,p,q);if(!r||(r&&r.isExpanded)){return true}p=r.cr}return false};return f})();c.groupHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(j,k,h,i){switch(arguments.length){case 2:this.r1=this.r2=j;this.c1=this.c2=k;break;case 4:this.r1=j;this.r2=h;this.c1=k;this.c2=i;break;default:this.r1=0;this.r2=0;this.c1=0;this.c2=0}}g.prototype.isSingleCell=function(){return((this.r1===this.r2)&&(this.c1===this.c2))};return g})();d.cellRange=c;var f=(function(){function g(){}g.prototype.merge=function(i,h){this._leaves=h;this._data=i;try{this._merge()}finally{delete this._data;delete this._leaves}};g.prototype._merge=function(){var l,h,j,k=true;for(l=0,h=this._leaves.length;l<h;l++){j=this._leaves[l];if((j.dataIndex>=0)&&!j.isBand&&(j.rowMerge==="free"||j.rowMerge==="restricted")){if(k){this._data.ensureNotLazy();k=false}this._mergeColumn(j)}}};g.prototype._mergeColumn=function(n){var m=n.dataIndex,o,k,h,j,l,p;for(k=0,h=this._data.count();k<h;k++){o=this._data.row(k);if(!o.isDataRow()){continue}j=this._getCellRange(k,n);if(j.r1!==j.r2){l=j.r2-j.r1+1;this._data.row(j.r1).cell(m).ensureAttr().rowSpan=l;for(p=j.r1+1;p<=j.r2;p++){this._data.row(p).cell(m).visible(false)}}k=j.r2}};g.prototype._getCellRange=function(h,k){var j=k.dataIndex,q,m=new b.grid.cellRange(h,j),o=(this._data.valueAt(h,j)||"").toString(),i=this._data.count(),n,l,p;for(m.r2=h;m.r2<i-1;m.r2++){q=this._data.row(m.r2+1);if(!q.isDataRow()||((q.valueCell(j).value||"").toString()!==o)){break}}n=k.leavesIdx;if(n>0&&k.rowMerge==="restricted"){l=this._leaves[n-1];if(l.dataIndex>=0){p=this._getCellRange(h,l);m.r1=Math.max(m.r1,p.r1);m.r2=Math.min(m.r2,p.r2)}}return m};return g})();d.merger=f})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(H){var w=jQuery;H.EXPANDO="__wijgrid";(function(P){P._map=[];P.header=1;P.data=2;P.dataAlt=4;P.filter=8;P.groupHeader=16;P.groupFooter=32;P.footer=64;P.emptyDataRow=128})(H.rowType||(H.rowType={}));var I=H.rowType;(function(P){P._map=[];P.none=0;P.rendering=1;P.current=2;P.hovered=4;P.selected=8;P.editing=16})(H.renderState||(H.renderState={}));var l=H.renderState;(function(P){P._map=[];P.none=0;P.hidden=1;P.collapsed=2})(H.renderStateEx||(H.renderStateEx={}));var E=H.renderStateEx;(function(P){P._map=[];P.table=0;P.head=1;P.body=2;P.foot=3})(H.rowScope||(H.rowScope={}));var d=H.rowScope;(function(P){P._map=[];P.none=0;P.column=1;P.row=2})(H.cellRangeExtendMode||(H.cellRangeExtendMode={}));var g=H.cellRangeExtendMode;(function(P){P._map=[];P.createIfNull=0;P.createAlways=1;P.dispose=2})(H.objectMode||(H.objectMode={}));var G=H.objectMode;(function(P){P._map=[];P.groupCell=0;P.aggregateCell=1})(H.groupRowCellPurpose||(H.groupRowCellPurpose={}));var h=H.groupRowCellPurpose;(function(P){P._map=[];P.sketch=0;P.rendered=1;P.renderable=2})(H.dataRowsRangeMode||(H.dataRowsRangeMode={}));var j=H.dataRowsRangeMode;(function(P){P._map=[];P.none=0;P.overlapTop=1;P.overlapBottom=2;P.reset=3})(H.intersectionMode||(H.intersectionMode={}));var N=H.intersectionMode;function D(S,Q){var T,P,R;if(w.isArray(S)&&w.isArray(Q)){if(S.length===Q.length){R=true;for(T=0,P=S.length;T<P&&R;T++){R=b.grid.compareObj(S[T],Q[T])}return R}}else{if(w.isPlainObject(S)&&w.isPlainObject(Q)){for(T in S){if(S.hasOwnProperty(T)){if(!b.grid.compareObj(S[T],Q[T])){return false}}}for(T in Q){if(Q.hasOwnProperty(T)){if(!b.grid.compareObj(S[T],Q[T])){return false}}}return true}else{if(S instanceof Date){S=S.getTime()}if(Q instanceof Date){Q=Q.getTime()}}}return S===Q}H.compareObj=D;function M(S){var T=[];for(var R=0;R<(arguments.length-1);R++){T[R]=arguments[R+1]}var Q,P;if(!S){return""}for(Q=0,P=T.length;Q<P;Q++){S=S.replace(new RegExp("\\{"+Q+"\\}","gm"),T[Q])}return S}H.stringFormat=M;function m(P){return(P&&!(P<0))||(P===0)}H.validDataKey=m;function A(P){if(P&&(P instanceof Date)){return !isNaN(P.getTime())}return false}H.validDate=A;function e(P){return P.dataType||P._underlyingDataType||"string"}H.getDataType=e;function q(P,Q){if(P&&Q){P.find(".ui-widget").each(function(R,S){w.each(w(S).data(),function(U,T){if(T.widgetName){Q(R,T)}});return true})}}H.iterateChildrenWidgets=q;function O(P,Q){var R=[];w.each(P.data(),function(S){if(S.indexOf(Q)===0){R.push(S)}});w.each(R,function(S,T){P.removeData(T)})}H.remove$dataByPrefix=O;var x=(function(){function P(Q){this._dom=Q}P.prototype.getSelection=function(){var S=0,Q=0,R;if(this._dom.selectionStart!==undefined){S=this._dom.selectionStart;Q=this._dom.selectionEnd}else{if(document.selection){R=document.selection.createRange().duplicate();Q=R.text.length;S=Math.abs(R.moveStart("character",-this._dom.value.length));Q+=S}}return{start:S,end:Q,length:Q-S}};P.prototype.setSelection=function(Q){if(this._dom.selectionStart!==undefined){this._dom.setSelectionRange(Q.start,Q.end)}else{var R=this._dom.createTextRange();R.collapse(true);R.moveStart("character",Q.start);R.moveEnd("character",Q.end);R.select()}};P.prototype.toggleSelection=function(S){var Q=w(this._dom),R="onselectstart" in this._dom;if(S){if(R){Q.unbind(".wijgrid-disableSelection")}else{Q.css({MozUserSelect:"",WebkitUserSelect:""})}}else{if(R){Q.bind("selectstart.wijgrid-disableSelection",function(T){T.preventDefault()})}else{Q.css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})}}};return P})();H.domSelection=x;function t(P){return w.extend(true,{},H.c1basefield.prototype.options,H.c1field.prototype.options,{dynamic:true,isLeaf:true,isBand:false,parentIdx:-1},P)}H.createDynamicField=t;function y(R,Q){if(R){var P=R.nodeType?w(R):R,S=P.offset();if(S){if(Q){return{top:S.top,left:S.left,width:P[0].clientWidth||0,height:P[0].clientHeight||0}}return{top:S.top,left:S.left,width:P.outerWidth(),height:P.outerHeight()}}}return null}H.bounds=y;function r(Q,P){if(Q){if(Q.start<0){Q.start=0}if(Q.end<0){Q.end=0}Q.start=Math.min(Q.start,P);Q.end=Math.min(Q.end,P)}return Q}H.ensureBounds=r;function k(S,U,R){if(U===undefined){U=3}if(S&&U!==0){if(!R&&S.nodeType===3){return S.nodeValue}if(S.nodeType===1){switch((S).type){case"button":case"text":case"textarea":case"select-one":return(S).value;case"checkbox":return(S).checked.toString()}var P="",Q=0,T;while(T=S.childNodes[Q++]){P+=b.grid._getDOMText(T,U-1)}return P}}return""}H._getDOMText=k;function v(R,V,P,X){var U=(R.jquery||w.isArray(R)),S,W,T,Q=V+P;if(arguments.length===3){if(U){return w.data(R[0],Q)}return w.data(R,Q)}else{if(U){for(S=0,W=R.length;S<W;S++){T=w.data(R[S],Q,X)}return T}return w.data(R,Q,X)}}H.dataPrefix=v;function i(S,T){if(T&&S){var P,R,Q;for(P in T){if(T.hasOwnProperty(P)){R=T[P];Q=typeof(R);if((Q==="string"||Q==="boolean"||Q==="number")&&(S[P]===undefined)){S[P]=R}}}}}H.shallowMerge=i;function J(P){return(P&&(typeof(P)==="object")&&!(P instanceof Date))}H.isCustomObject=J;function L(R,T){var P,S,Q=w.isFunction(T);for(P in R){if(R.hasOwnProperty(P)){S=Q?T(R[P]):(R[P]===T);if(S===true){return{at:P,found:R[P]}}}}return{at:null,found:null}}H.search=L;function p(W,R){if(W){var U,Q,T=0,P={},V,S;for(U=0,Q=W.attributes.length;U<Q;U++){S=W.attributes[U].name;if(S&&(!R||!R(S))){V=W.getAttribute(S);if(S==="style"){V=(typeof(V)==="object")?V.cssText:V}if(!V&&S==="class"){V=W.getAttribute("className")}if(V&&(typeof(V)!=="function")){P[S]=V;T++}}}if(T){return P}}return null}H.getAttributes=p;function C(R,S){var Q,T,V,P,U;if(R){if(typeof(S)!=="object"&&!w.isFunction(S)){S={}}for(Q in R){T=R[Q];V=S[V];if(T===S){continue}if(T&&(w.isPlainObject(T)||(P=w.isArray(T)))){if(P){P=false;U=V&&w.isArray(V)?V:[]}else{U=V&&w.isPlainObject(V)?V:{}}S[Q]=b.grid.deepExtend(T,U)}else{S[Q]=T}}}return S}H.deepExtend=C;function c(Q,P){if(Q&&Q.jquery){Q=Q[0]}if(Q){return(arguments.length===1)?w.data(Q,"wijgridwidgetName"):w.data(Q,"wijgridwidgetName",P)}return undefined}H.widgetName=c;var o=(function(){function Q(){}Q._requiresExtendedSupport={date:"",datetime:"","datetime-local":"",month:"",time:""};Q._supportedInputTypesCache={};Q.isExtendSupportRequired=function P(W){W=(W||"").toLowerCase();return(W in b.grid.HTML5InputSupport._requiresExtendedSupport)};Q.getDefaultInputType=function U(Y,X){var W=(X.inputType||"").toLowerCase();if(!W&&Y){switch(b.grid.getDataType(X)){case"number":case"currency":W="number";break;case"datetime":W="datetime";break}}if(!W||((W!=="text")&&!Q._isSupportedByBrowser(W))){W="text"}return W};Q.toStr=function R(Y,X){var W=Y;X=(X||"").toLowerCase();if(b.grid.HTML5InputSupport.isExtendSupportRequired(X)){switch(X){case"datetime":W=(Y)?W=Globalize.format(Y,"yyyy-MM-ddTHH:mm:ssZ"):"";break;case"datetime-local":W=(Y)?W=Globalize.format(Y,"yyyy-MM-ddTHH:mm:ss"):"";break;case"date":W=(Y)?W=Globalize.format(Y,"yyyy-MM-dd"):"";break;case"month":W=(Y)?W=Globalize.format(Y,"yyyy-MM"):"";break;case"time":W=(Y)?W=Globalize.format(Y,"HH:mm:ss"):"";break}}else{W=Y+""}return W};Q.parse=function T(Y,X){var W,Z=function(aa){aa=new Date(aa);if(!b.grid.validDate(aa)){aa=null}return aa};X=(X||"").toLowerCase();if(b.grid.HTML5InputSupport.isExtendSupportRequired(X)){switch(X){case"datetime":W=Globalize.parseDate(Y,"yyyy-MM-ddTHH:mm:ssZ")||Globalize.parseDate(Y,"yyyy-MM-ddTHH:mmZ")||Z(Y);break;case"datetime-local":W=Globalize.parseDate(Y,"yyyy-MM-ddTHH:mm:ss")||Globalize.parseDate(Y,"yyyy-MM-ddTHH:mm")||Z(Y);break;case"date":W=Globalize.parseDate(Y,"yyyy-MM-dd")||Z(Y);break;case"month":W=Globalize.parseDate(Y,"yyyy-MM");break;case"time":W=Globalize.parseDate(Y,"HH:mm:ss")||Globalize.parseDate(Y,"HH:mm");break;case"number":W=parseFloat(Y)}}else{W=Y}return W};Q.extend=function V(Y,X,W){if(!Y){Y=X}else{W=(W||"").toLowerCase();switch(W){case"date":Y.setFullYear(X.getFullYear(),X.getMonth(),X.getDate());break;case"month":Y.setFullYear(X.getFullYear(),X.getMonth());break;case"time":Y.setHours(X.getHours());Y.setMinutes(X.getMinutes());Y.setSeconds(X.getSeconds());break;default:Y=X}}return Y};Q._isSupportedByBrowser=function S(X){if(X){if(this._supportedInputTypesCache[X]===undefined){var Z;try{var W=w("<input type='"+X+"' style='display:none' />");Z=true}catch(Y){Z=false}this._supportedInputTypesCache[X]=Z&&((W[0]).type===X)}return this._supportedInputTypesCache[X]}return false};return Q})();H.HTML5InputSupport=o;function K(P,Q){if(typeof Q==="undefined"){Q=99}var R=0;if(P&&w.ui&&w.fn.zIndex){R=P.zIndex();if(R){R++}}return Math.max(R,Q)}H.getZIndex=K;function s(Q,P,R){return(Q>P)&&(Q<(P+R))}H.isOverAxis=s;function n(U,Q,T,S,P,R){return b.grid.isOverAxis(U,T,P)&&b.grid.isOverAxis(Q,S,R)}H.isOver=n;var f=0;function F(){return"uid"+f++}H.getUID=F;function u(){return !!(navigator&&navigator.userAgent&&(navigator.userAgent.match(/Mobile.*Safari/))!==null)}H.isMobileSafari=u;var z=0;function B(){if(!(z>0)){if(document&&document.body&&w.support.isTouchEnabled&&w.support.isTouchEnabled()){var P;try{P=w("<div></div>").css({overflow:"scroll",width:30,height:30,position:"absolute",visibility:"hidden"}).append(w("<div></div>").css({width:100,height:100})).appendTo(document.body);z=P[0].offsetWidth-P[0].clientWidth}catch(Q){}finally{if(P){P.remove()}}}if(!(z>0)){z=18}}return z}H.getSuperPanelScrollBarSize=B;w.extend(w.wijmo.wijgrid,{rowType:b.grid.rowType,renderState:b.grid.renderState,bounds:b.grid.bounds})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(wijmo){(function(grid){(function(TimeUnit){TimeUnit._map=[];TimeUnit.Millisecond=1;TimeUnit.Second=2;TimeUnit.Minute=4;TimeUnit.Hour=8;TimeUnit.Day=16;TimeUnit.Month=32;TimeUnit.Year=64;TimeUnit.DATE=TimeUnit.Year|TimeUnit.Month|TimeUnit.Day;TimeUnit.TIME=TimeUnit.Hour|TimeUnit.Minute|TimeUnit.Second|TimeUnit.Millisecond;TimeUnit.ALL=TimeUnit.DATE|TimeUnit.TIME})(grid.TimeUnit||(grid.TimeUnit={}));var TimeUnit=grid.TimeUnit;var TimeUnitConverter=(function(){function TimeUnitConverter(){}TimeUnitConverter.convertInputType=function convertInputType(inputType){var formatString=wijmo.grid.TimeUnitConverter.convertInputTypeToFormatString(inputType),result=wijmo.grid.TimeUnitConverter.convertFormatString(formatString);return result};TimeUnitConverter.convertInputTypeToFormatString=function convertInputTypeToFormatString(inputType){switch((inputType||"").toLowerCase()){case"datetime":case"datetime-local":return"f";case"date":return"d";case"month":return"Y";case"time":return"t"}return""};TimeUnitConverter.convertFormatString=function convertFormatString(dateFormatString){var result=0;if(dateFormatString){if(dateFormatString.length===1){switch(dateFormatString[0]){case"t":return TimeUnit.Hour|TimeUnit.Minute;case"T":return TimeUnit.TIME;case"d":case"D":return TimeUnit.DATE;case"Y":return TimeUnit.Month|TimeUnit.Year;case"M":return TimeUnit.Month|TimeUnit.Day;case"f","F","S":return TimeUnit.ALL}}var quoteFirst,quoteLast;if(((quoteFirst=dateFormatString.indexOf("'"))>=0)&&((quoteLast=dateFormatString.lastIndexOf("'"))>=0)&&(quoteFirst!==quoteLast)){dateFormatString=dateFormatString.substr(0,quoteFirst)+dateFormatString.substring(quoteLast+1,dateFormatString.length-1)}for(var i=0,len=dateFormatString.length;i<len;i++){switch(dateFormatString[i]){case"d":result|=TimeUnit.Day;break;case"M":result|=TimeUnit.Month;break;case"y":result|=TimeUnit.Year;break;case"m":result|=TimeUnit.Minute;break;case"h":case"H":result|=TimeUnit.Hour;break;case"s":result|=TimeUnit.Second;break;case"f":result|=TimeUnit.Millisecond;break}}}return result||TimeUnit.ALL};TimeUnitConverter.cutDate=function cutDate(date,timeUnit){if(date){timeUnit=~timeUnit;if(timeUnit&TimeUnit.Millisecond){date.setMilliseconds(0)}if(timeUnit&TimeUnit.Second){date.setSeconds(0)}if(timeUnit&TimeUnit.Minute){date.setMinutes(0)}if(timeUnit&TimeUnit.Hour){date.setHours(0)}if(timeUnit&TimeUnit.Day){date.setDate(1)}if(timeUnit&TimeUnit.Month){date.setMonth(0)}if(timeUnit&TimeUnit.Year){date.setFullYear(0)}}return date};return TimeUnitConverter})();grid.TimeUnitConverter=TimeUnitConverter;function lazy(eval,context){var hasValue=false,value;return function(){if(!hasValue){value=context?eval.call(context):eval();hasValue=true}return value}}grid.lazy=lazy})(wijmo.grid||(wijmo.grid={}));var grid=wijmo.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var f=(function(){function h(){}h.NoFilterOp={applicableTo:null,name:"NoFilter",displayName:"No filter",arity:1,operator:function(){return true}};return h})();var c=(function(){function h(j){this._cache={};var i=this;this._wijgrid=j;this._addOperator(null,f.NoFilterOp);e.each(b.data.filtering.ops,function(k,l){i._addOperator(k,l)});e.each(j.options.customFilterOperators,function(k,l){i._addOperator(null,l,true)})}h.prototype.getByName=function(i){var j=this.getByNameInt(i);return(j)?j.op:null};h.prototype.getByNameInt=function(i){return this._cache[(i||"").toLowerCase()]};h.prototype.getByDataType=function(j){var k=[],i;e.each(this._cache,function(l,n){var m=n.op;if(!m.applicableTo||e.inArray(j,m.applicableTo)>=0){k.push(n)}});switch(this._wijgrid.options.filterOperatorsSortMode.toLowerCase()){case"alphabetical":k.sort(this._sortAlpha);break;case"alphabeticalcustomfirst":k.sort(this._sortAlphaCustomFirst);break;case"alphabeticalembeddedFirst":k.sort(this._sortAlphaEmbeddedFirst);break;case"none":break;default:break}i=e.map(k,function(m,l){return m.op});return i};h.prototype._addOperator=function(i,k,j){if(typeof j==="undefined"){j=false}if(i&&!k.name){k.name=i}i=(i||k.name).toLowerCase();if(!this._cache[i]){this._cache[i]={op:k,isCustom:(j===true)}}};h.prototype._sortAlpha=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(l===k){return 0}return(l<k)?-1:1};h.prototype._sortAlphaEmbeddedFirst=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(j.isCustom!==i.isCustom){if(j.isCustom){return 1}if(i.isCustom){return -1}}if(l===k){return 0}return(l<k)?-1:1};h.prototype._sortAlphaCustomFirst=function(j,i){var l=j.op.name.toLowerCase(),k=i.op.name.toLowerCase();if(l!==k){if(l==="nofilter"){return -1}if(k==="nofilter"){return 1}}if(j.isCustom!==i.isCustom){if(j.isCustom){return -1}if(i.isCustom){return 1}}if(l===k){return 0}return(l<k)?-1:1};return h})();d.filterOperatorsCache=c;var g=(function(){function l(){}l.marker="_wijgrid";l.getSingleValue=function i(m){if(e.isArray(m)){m=m[0];if(e.isArray(m)){m=m[0]}}return m};l.getSingleOperatorName=function h(m){if(e.isArray(m)){m=m[0]}return m.name||m||""};l.verify=function k(o,t,q,p){if(o){if(e.isArray(o)){var r,n,s=[],m=[];if(!e.isArray(t)){t=[t]}for(r=0,n=o.length;r<n;r++){if(b.grid.filterHelper._verifySingleOp(o[r],t[r],q,p)){s.push({name:o[r].name||o[r],condition:o[r].condition||"or"});m.push(t?t[r]:undefined)}}if(s.length){return{filterOperator:s,filterValue:m}}}else{if(b.grid.filterHelper._verifySingleOp(o,t,q,p)){return{filterOperator:o,filterValue:t}}}}return null};l._verifySingleOp=function j(m,q,o,n){if(m&&(m=(m.name||m))){var p;m=(m||"").toLowerCase();if((m!=="nofilter"||q!==undefined)&&(p=n.getByName(m))){if(p.applicableTo===null||e.inArray(o||"string",p.applicableTo)>=0){if(p.arity===1||(p.arity>1&&b.grid.filterHelper.getSingleValue(q)!==undefined)){return true}}}}return false};return l})();d.filterHelper=g})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(e){var g=jQuery;function f(l,k){if(l&&!l.nodeType){l=l[0]}if(l){switch(k){case b.grid.rowScope.head:return l.tHead;case b.grid.rowScope.body:if(l.tBodies){return l.tBodies[0]||null}break;case b.grid.rowScope.foot:return l.tFoot;default:return l}}return null}e.getTableSection=f;function j(l,k){var m;if(l&&!l.nodeType){l=l[0]}return(l&&(m=this.getTableSection(l,k)))?m.rows.length:0}e.getTableSectionLength=j;function i(l,k,n){var m;if(l&&!l.nodeType){l=l[0]}return(l&&(m=this.getTableSection(l,k)))?(m.rows[n]||null):null}e.getTableSectionRow=i;function c(u,v,o){var p,s,y,k,l,x,t,m,w=[],n=function(z){z=z.toLowerCase();return z==="rowspan"||z==="colspan"},r;if(u&&!u.nodeType){u=u[0]}if(u&&(r=this.getTableSection(u,v))){for(p=0,s=r.rows.length;p<s;p++){l=r.rows[p];x=[];if(o){t=(b).data.Expando.getFrom(x,true);m=t[b.grid.EXPANDO]={cellsAttributes:{},rowAttributes:b.grid.getAttributes(l)||{}}}for(y=0,k=l.cells.length;y<k;y++){var q=g.trim((l.cells[y]).innerHTML);if(q=="&nbsp;"){q=""}x[y]=q;if(o){m.cellsAttributes[y]=b.grid.getAttributes(l.cells[y],n)||{}}}w[p]=x}}return w}e.readTableSection=c;function d(k){var l=k.parentNode.parentNode;switch(l.tagName.toLowerCase()){case"thead":return b.grid.rowScope.head;case"tbody":return b.grid.rowScope.body;case"tfoot":return b.grid.rowScope.foot}return null}e.determineSection=d;var h=(function(){function k(m,n,l,o){this._width=0;this._table=m;this._offsets=[];if(o){this.ensureColGroup()}if(l){this.ensureTBody()}if(!n){this._buildOffsets()}}k.prototype.element=function(){return this._table};k.prototype.width=function(){return this._width};k.prototype.getCellIdx=function(m,l){return(m<this._width&&l>=0&&l<this._offsets.length)?this._offsets[l][m].cellIdx:-1};k.prototype.getColumnIdx=function(m,l){if(typeof(m)!=="number"){var n=m;m=n.cellIndex;l=n.parentNode.rowIndex}return(m<this._width)?this._offsets[l][m].colIdx:-1};k.prototype.clearSection=function(m){var o,l,n=b.grid.getTableSection(this._table,m);switch(m){case b.grid.rowScope.body:o=this.getSectionLength(b.grid.rowScope.table);l=o+this.getSectionLength(m)-1;break;case b.grid.rowScope.foot:o=this.getSectionLength(b.grid.rowScope.table)+this.getSectionLength(b.grid.rowScope.head);l=o+this.getSectionLength(m)-1;break;default:o=0;l=this.getSectionLength(m)-1}while(n.rows.length){n.deleteRow(0)}this._offsets.splice(o,l-o+1)};k.prototype.getSectionLength=function(l){return b.grid.getTableSectionLength(this._table,l)};k.prototype.getSectionRow=function(m,l){return b.grid.getTableSectionRow(this._table,l,m)};k.prototype.forEachColumnCellNatural=function(o,r,q){var m,n,p,l;for(m=0,n=this._table.rows.length;m<n;m++){p=this._table.rows[m];if(o<p.cells.length){l=r(p.cells[o],m,q);if(l!==true){return l}}}return true};k.prototype.forEachColumnCell=function(p,s,r){var m,o,q,n,l;for(m=0,o=this._offsets.length;m<o;m++){q=this._table.rows[m];n=this.getCellIdx(p,m);if(n>=0){l=s(q.cells[n],m,r);if(l!==true){return l}}}return true};k.prototype.forEachRowCell=function(r,q,p){var o=this._table.rows[r],m,n,l;for(m=0,n=o.cells.length;m<n;m++){l=q(o.cells[m],m,p);if(l!==true){return l}}return true};k.prototype.colGroupTag=function(){var l=this._table.getElementsByTagName("colgroup");return((l&&l[0]))||null};k.prototype.colTags=function(){var l=this.colGroupTag();return(l&&l.getElementsByTagName("col"))||[]};k.prototype.ensureTBody=function(){return((this._table.tBodies&&this._table.tBodies[0])||this._table.appendChild(document.createElement("tbody")))};k.prototype.ensureTHead=function(){return(this._table.tHead&&this._table.tHead[0])||this._table.createTHead()};k.prototype.ensureTFoot=function(){return(this._table.tFoot&&this._table.tFoot[0])||this._table.createTFoot()};k.prototype.ensureColGroup=function(){var l=this._table.getElementsByTagName("colgroup");return((l&&l[0])||this._table.appendChild(document.createElement("colgroup")))};k.prototype.appendCol=function(m){var l=this.ensureColGroup();return((m&&l.appendChild(m))||l.appendChild(document.createElement("col")))};k.prototype.removeOffset=function(l){if(l>=0&&l<this._offsets.length){if(l<0||(!l&&l!==0)){l=this._offsets.length-1}this._offsets.splice(l,1)}};k.prototype.insertOffset=function(l){var n,m;if(this._width>0){n=[];for(m=0;m<this._width;m++){n.push({cellIdx:m,colIdx:m})}if(l<0||(!l&&l!==0)){l=this._offsets.length}this._offsets.splice(l,0,n)}};k.prototype.rebuildOffsets=function(){this._offsets=[];this._width=0;this._buildOffsets()};k.prototype._buildOffsets=function(){var r=[],m,p,t,v,o,u,l,s,q,n;for(p=0,t=this._table.rows.length;p<t;p++){m=[];this._offsets[p]=m;v=this._table.rows[p];for(o=0,u=0,l=v.cells.length;o<l;o++,u++){s=v.cells[o];for(;r[u]>1;u++){r[u]--;m[u]={cellIdx:-1,colIdx:-1}}if(!(r[u]>1)){r[u]=s.rowSpan}m[u]={cellIdx:o,colIdx:-1};m[o].colIdx=u;q=s.colSpan;for(;q>1;q--){m[++u]={cellIdx:-1,colIdx:-1}}}n=r.length;for(;u<n;u++){r[u]--;m[u]={cellIdx:-1,colIdx:-1}}this._width=Math.max(this._width,n)}};return k})();e.htmlTableAccessor=h})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function g(h,l,i,k,j){if(typeof i==="undefined"){i=null}if(typeof k==="undefined"){k=false}if(typeof j==="undefined"){j=true}this.__isEdit=false;this._wijgrid=i;this._virtualize=j;if(k){this._ci=h-this._wijgrid._getDataToAbsOffset().x;this._ri=l-this._wijgrid._getDataToAbsOffset().y;if(this._virtualize){this._ri=this._wijgrid._renderableBoundsCollection().getAbsIndex(this._ri+this._wijgrid._viewPortBounds().start)}}else{this._ci=h;this._ri=l}}g.outsideValue=new g(-1,-1,null);g.prototype.cellIndexAbs=function(){return this._ci+this._wijgrid._getDataToAbsOffset().x};g.prototype.rowIndexAbs=function(){var h=this._virtualize?this._wijgrid._renderableBoundsCollection().getRenderedIndex(this._ri)-this._wijgrid._viewPortBounds().start:this._ri;h+=this._wijgrid._getDataToAbsOffset().y;return h};g.prototype.cellIndex=function(h){if(!arguments.length){return this._ci}this._ci=h};g.prototype.column=function(){if(this._wijgrid&&this._isValid()){return this._wijgrid._field("visibleLeaves")[this.cellIndexAbs()]}return null};g.prototype.container=function(){var i=this.tableCell(),h;if(i){h=e(i).children("div."+b.grid.wijgrid.CSS.cellContainer);if(h){return h}}return null};g.prototype.isEqual=function(h){return(h&&(h.rowIndex()===this.rowIndex())&&(h.cellIndex()===this.cellIndex()))};g.prototype.row=function(){var i=null,h=null;if(this._wijgrid){if(this._virtualize){h=this._wijgrid._view()._getRowInfoBySketchRowIndex(this.rowIndex())}else{i=this._wijgrid._view().rows().item(this.rowIndexAbs());if(i&&i.length){h=this._wijgrid._view()._getRowInfo(i)}}}return h};g.prototype.rowIndex=function(h){if(!arguments.length){return this._ri}this._ri=h};g.prototype.tableCell=function(){if(this._wijgrid&&this._isValid()){if(!this._virtualize||this._isRendered()){return this._wijgrid._view().getCell(this.cellIndexAbs(),this.rowIndexAbs())}}return null};g.prototype.value=function(i){var h,k,j;if(this._wijgrid&&this._isValid()){k=this.row();if(k.type&b.grid.rowType.data){h=this.column();if(arguments.length===0){j=this._wijgrid._dataViewWrapper.getValue(k.data,h.dataKey);return this._wijgrid.parse(h,j)}else{i=this._wijgrid.parse(h,i);if((i===null&&h.valueRequired)||((b.grid.getDataType(h)!=="string")&&isNaN(i))){throw"invalid value"}this._wijgrid._dataViewWrapper.setValue(k.dataItemIndex,h.dataKey,i);var m=this._wijgrid.sketchTable.row(this.rowIndex());var l=m.cell(h.dataIndex);l.value=i}}}};g.prototype.toString=function(){return this.cellIndex()+":"+this.rowIndex()};g.prototype._clip=function(i,k){if(typeof k==="undefined"){k=false}var h=false,j;if(k){if(this.cellIndexAbs()<(j=i.topLeft().cellIndexAbs())){h=true;this._ci=i.topLeft().cellIndex()}if(this.cellIndexAbs()>(j=i.bottomRight().cellIndexAbs())){h=true;this._ci=i.bottomRight().cellIndex()}if(this.rowIndexAbs()<(j=i.topLeft().rowIndexAbs())){h=true;this._ri=i.topLeft().rowIndex()}if(this.rowIndexAbs()>(j=i.bottomRight().rowIndexAbs())){h=true;this._ri=i.bottomRight().rowIndex()}}else{if(this.cellIndex()<(j=i.topLeft().cellIndex())){h=true;this._ci=j}if(this.cellIndex()>(j=i.bottomRight().cellIndex())){h=true;this._ci=j}if(this.rowIndex()<(j=i.topLeft().rowIndex())){h=true;this._ri=j}if(this.rowIndex()>(j=i.bottomRight().rowIndex())){h=true;this._ri=j}}return h};g.prototype._clone=function(){return new b.grid.cellInfo(this.cellIndex(),this.rowIndex(),this._wijgrid,false,this._virtualize)};g.prototype._isValid=function(){return this.cellIndex()>=0&&this.rowIndex()>=0};g.prototype._isRendered=function(){var h;if(this._wijgrid&&(h=this._wijgrid._view())&&this._isValid()){var i=h._isRowRendered(this.rowIndex());return i>=0}return false};g.prototype._isEdit=function(i){var k=null,h=b.grid.wijgrid.CSS.editedCellMarker;if(this._isValid()){try{k=this.tableCell()}catch(j){}}if(!arguments.length){if(k){return e(k).hasClass(h)}return this.__isEdit}else{if(k){e(k)[i?"addClass":"removeClass"](h)}this.__isEdit=i}};g.prototype._setGridView=function(h){this._wijgrid=h};return g})();d.cellInfo=c;var f=(function(){function g(i,h){if(!i||!h){throw"invalid arguments"}this._topLeft=i._clone();this._bottomRight=h._clone()}g.prototype.bottomRight=function(){return this._bottomRight};g.prototype.isEqual=function(h){return(h&&this._topLeft.isEqual(h.topLeft())&&this._bottomRight.isEqual(h.bottomRight()))};g.prototype.topLeft=function(){return this._topLeft};g.prototype.toString=function(){return this._topLeft.toString()+" - "+this._bottomRight.toString()};g.prototype._isIntersect=function(j){var i,h,l,k;if(j){i=j.bottomRight().rowIndex()-j.topLeft().rowIndex()+1;h=this._bottomRight.rowIndex()-this._topLeft.rowIndex()+1;if((j.topLeft().rowIndex()+i)-this._topLeft.rowIndex()<i+h){l=j.bottomRight().cellIndex()-j.topLeft().cellIndex()+1;k=this._bottomRight.cellIndex()-this._topLeft.cellIndex()+1;return((j.topLeft().cellIndex()+l)-this._topLeft.cellIndex()<l+k)}}return false};g.prototype._isValid=function(){return this._topLeft._isValid()&&this._bottomRight._isValid()};g.prototype._clip=function(j,k){if(typeof k==="undefined"){k=false}var i=this._topLeft._clip(j,k);var h=this._bottomRight._clip(j,k);return i||h};g.prototype._clone=function(){return new g(this._topLeft._clone(),this._bottomRight._clone())};g.prototype._containsCellInfo=function(h){return(h&&h.cellIndex()>=this._topLeft.cellIndex()&&h.cellIndex()<=this._bottomRight.cellIndex()&&h.rowIndex()>=this._topLeft.rowIndex()&&h.rowIndex()<=this._bottomRight.rowIndex())};g.prototype._containsCellRange=function(h){return(h&&this._containsCellInfo(h.topLeft())&&this._containsCellInfo(h.bottomRight()))};g.prototype._extend=function(i,h){if(i===b.grid.cellRangeExtendMode.column){this._topLeft.rowIndex(h.topLeft().rowIndex());this._bottomRight.rowIndex(h.bottomRight().rowIndex())}else{if(i===b.grid.cellRangeExtendMode.row){this._topLeft.cellIndex(h.topLeft().cellIndex());this._bottomRight.cellIndex(h.bottomRight().cellIndex())}}return this};g.prototype._normalize=function(){var i=this._topLeft.cellIndex(),k=this._topLeft.rowIndex(),h=this._bottomRight.cellIndex(),j=this._bottomRight.rowIndex();this._topLeft.cellIndex(Math.min(i,h));this._topLeft.rowIndex(Math.min(k,j));this._bottomRight.cellIndex(Math.max(i,h));this._bottomRight.rowIndex(Math.max(k,j))};g.prototype._height=function(){return this._bottomRight.rowIndex()-this._topLeft.rowIndex()};g.prototype._width=function(){return this._bottomRight.cellIndex()-this._topLeft.cellIndex()};return g})();d.cellInfoRange=f;e.extend(e.wijmo.wijgrid,{cellInfo:b.grid.cellInfo,cellInfoRange:b.grid.cellInfoRange})})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g,h){this._rowHeaderSize=22;this.mIsRendered=false;this._sizesAdjCache={th:0,col:0,subTable:0};if(!g){throw"'wijgrid' must be specified"}this._wijgrid=g;this._bounds=h;this._wijgrid.element.addClass(b.grid.wijgrid.CSS.table).addClass(this._wijgrid.options.wijCSS.wijgridTable)}f.prototype.dispose=function(){this.toggleDOMSelection(true);this._wijgrid.element.removeClass(b.grid.wijgrid.CSS.table).removeClass(this._wijgrid.options.wijCSS.wijgridTable)};f.prototype.ensureDisabledState=function(){var i="wijmo-wijgrid-disabled "+this._wijgrid.options.wijCSS.stateDisabled,h=this._wijgrid.options.disabled,g=this;e.each(this.subTables(),function(k,l){if(l){var j=e(l.element());if(h){j.addClass(i);g._wijgrid._setAttr(j,"aria-disabled",true)}else{j.removeClass(i);g._wijgrid._setAttr(j,"aria-disabled",false)}}})};f.prototype.ensureWidth=function(h,i,g){this._setColumnWidth(h,i)};f.prototype.ensureHeight=function(g){};f.prototype.getScrollValue=function(){return null};f.prototype.getVisibleAreaBounds=function(g){throw"not implemented"};f.prototype.getVisibleContentAreaBounds=function(){throw"not implemented"};f.prototype.getFixedAreaVisibleBounds=function(){throw"not implemented"};f.prototype.isRendered=function(){return this.mIsRendered};f.prototype.render=function(){this._ensureRenderBounds();this._preRender();this._renderContent();this._postRender()};f.prototype.toggleDOMSelection=function(g){e.each(this.subTables(),function(h,i){(new b.grid.domSelection(i.element())).toggleSelection(g)});(new b.grid.domSelection(this._wijgrid.outerDiv)).toggleSelection(g)};f.prototype.updateSplits=function(g){throw"not implemented"};f.prototype.getInlineTotalWidth=function(){throw"not implemented"};f.prototype.bodyRows=function(){if(!this._bodyRowsAccessor){if(!this.isRendered()){throw"not rendered yet"}this._bodyRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.body,0,0)}return this._bodyRowsAccessor};f.prototype.filterRow=function(){if(this._wijgrid.options.showFilter){if(!this.isRendered()){throw"not rendered yet"}var g=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,0);return g.item(g.length()-1)}return null};f.prototype.footerRow=function(){if(this._wijgrid.options.showFooter){if(!this.isRendered()){throw"not rendered yet"}var g=new b.grid.rowAccessor(this,b.grid.rowScope.foot,0,0);return g.item(0)}};f.prototype.headerRows=function(){var g;if(!this._headerRowsAccessor){if(!this.isRendered()){throw"not rendered yet"}g=this._wijgrid.options.showFilter?1:0;this._headerRowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.head,0,g)}return this._headerRowsAccessor};f.prototype.rows=function(){if(!this._rowsAccessor){if(!this.isRendered()){throw"not rendered yet"}this._rowsAccessor=new b.grid.rowAccessor(this,b.grid.rowScope.table,0,0)}return this._rowsAccessor};f.prototype.focusableElement=function(){return this._wijgrid.outerDiv};f.prototype.forEachColumnCell=function(g,i,h){throw"not implemented"};f.prototype.forEachRowCell=function(i,h,g){throw"not implemented"};f.prototype.getAbsoluteCellInfo=function(h,g){throw"not implemented"};f.prototype.getAbsoluteRowIndex=function(g){throw"not implemented"};f.prototype.getCell=function(h,g){throw"not implemented"};f.prototype.getColumnIndex=function(g){throw"not implemented"};f.prototype.getHeaderCell=function(g){throw"not implemented"};f.prototype.getJoinedCols=function(g){throw"not implemented"};f.prototype.getJoinedRows=function(h,g){throw"not implemented"};f.prototype.getJoinedTables=function(g,h){throw"not implemented"};f.prototype.subTables=function(){throw"not implemented"};f.prototype._getMappedScrollMode=function(){var i=this._wijgrid.options.scrollMode,g="auto",h="auto";switch(i){case"horizontal":g="hidden";h="visible";break;case"vertical":g="visible";h="hidden";break;case"both":g="visible";h="visible";break}return{vScrollBarVisibility:g,hScrollBarVisibility:h}};f.prototype._postRender=function(){this.toggleDOMSelection(this._wijgrid.options.selectionMode==="none");this.mIsRendered=true;this.ensureDisabledState();this._sizesAdjCache.col=0;this._sizesAdjCache.th=0;this._sizesAdjCache.subTable=0;var j=this._wijgrid._field("visibleLeaves");if(j.length>0){var h=this.getHeaderCell(0),i=this.getJoinedCols(0);if(h){this._sizesAdjCache.th=e(h).leftBorderWidth()+e(h).rightBorderWidth()}if(i&&i.length){this._sizesAdjCache.col=e(i[0]).leftBorderWidth()+e(i[0]).rightBorderWidth()}}var g=this.subTables()[0];this._sizesAdjCache.subTable=e(g.element()).leftBorderWidth()+e(g.element()).rightBorderWidth()};f.prototype._preRender=function(){this.mIsRendered=false};f.prototype._ensureRenderBounds=function(){var g=this._wijgrid._getDataCellsRange(d.dataRowsRangeMode.sketch);this._bounds.start=0;this._bounds.end=g.bottomRight().rowIndex()};f.prototype._renderContent=function(){this._renderCOLS();this._renderHeader();if(this._wijgrid.options.showFilter){this._renderFilter()}this._renderBody();if(this._wijgrid.options.showFooter){this._renderFooter()}};f.prototype._renderCOLS=function(){var h=this._wijgrid._field("visibleLeaves"),j,l,k,g;for(k=0,g=h.length;k<g;k++){j=h[k];l=this._createCol(j,k);this._appendCol(l,j,k)}};f.prototype._renderHeader=function(){var h=b.grid.rowType,j=b.grid.renderState,k=this._wijgrid._columnsHeadersTable(),l,g,m;if(k&&(g=k.length)){for(l=0;l<g;l++){m=this._insertEmptyRow(h.header,j.rendering,l,-1,-1,-1,undefined,{});this._renderRow(m,null,k[l])}}};f.prototype._renderFilter=function(){var g=this._insertEmptyRow(b.grid.rowType.filter,b.grid.renderState.rendering,-1,-1,-1,-1,undefined,{});this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._renderBody=function(){var k=b.grid.renderState,h=this._wijgrid._field("visibleLeaves"),n=this._wijgrid.sketchTable,l=-1,j=0,m=0,g=this._wijgrid._dataOffset;var i=this;if(this._bounds.start>=0&&this._bounds.end>=0){this._wijgrid._renderableBoundsCollection().forEachIndex(this._bounds.start,this._bounds.end-this._bounds.start+1,function(o){var s=n.row(o-g),q=s.isDataRow(),p=(s).groupByValue,r=i._insertEmptyRow(s.rowType,k.rendering,m++,q?++l:-1,s.dataItemIndex(),s.dataItemIndex(j),p,s.extInfo);i._renderRow(r,h,s)})}};f.prototype._renderFooter=function(){var g=this._insertEmptyRow(b.grid.rowType.footer,b.grid.renderState.rendering,-1,-1,-1,-1,undefined,{});this._renderRow(g,this._wijgrid._field("visibleLeaves"),null)};f.prototype._insertEmptyRow=function(l,p,j,h,g,n,o,i){var m=this._wijgrid._onViewInsertEmptyRow.apply(this._wijgrid,arguments),k=this._insertRow(l,j,m);if(p===undefined){p=b.grid.renderState.rendering}return this._createRowInfo(k,l,p,j,h,g,n,o,i)};f.prototype._createEmptyCell=function(j,g,i){var h=b.grid.rowType,k=this._wijgrid._onViewCreateEmptyCell.apply(this._wijgrid,arguments);return this._createCell(j.type,k)};f.prototype._insertRow=function(i,g,h){throw"not implemented"};f.prototype._createCell=function(i,j){var h=b.grid.rowType,g;if(!j){if(i===h.header){j=document.createElement("th")}else{j=document.createElement("td")}}if(i!==h.filter){g=document.createElement("div");g.className=b.grid.wijgrid.CSS.cellContainer+" "+this._wijgrid.options.wijCSS.wijgridCellContainer;if(j.firstChild){while(j.firstChild){g.appendChild(j.firstChild)}}j.appendChild(g)}return e(j)};f.prototype._appendCell=function(i,g,h){throw"not implemented"};f.prototype._createCol=function(h,g){throw"not implemented"};f.prototype._appendCol=function(i,h,g){throw"not implemented"};f.prototype._renderRow=function(l,i,k){var h=b.grid.rowType,g,j;switch(l.type){case h.filter:this._renderFilterRow(l,i);break;case h.footer:this._renderFooterRow(l,i);break;case h.header:this._renderHeaderRow(l,k);break;case h.data:case h.data|h.dataAlt:this._renderDataRow(l,i,k);g=k.attr();j=k.style();break;case h.emptyDataRow:case h.groupHeader:case h.groupFooter:this._renderSpannedRow(l,i,k);g=k.attr();j=k.style();break;default:throw"unknown rowType"}this._rowRendered(l,g,j)};f.prototype._renderCell=function(g,m,o,l,j,h,k,i){var n=this._createEmptyCell(g,j.dataIndex,j);var p=(g.type===b.grid.rowType.filter)?n:e(n[0].firstChild);this._appendCell(g,m,n);if(l){p.html(o)}else{this._wijgrid.cellFormatter.format(n,p,j,o,g)}this._cellRendered(g,n,m,j,h,k,i)};f.prototype._renderDataRow=function(g,q,k){var m,n,l,p,s,o,j,h;for(m=0,n=q.length;m<n;m++){l=q[m];p=l.dataIndex;if(p<0){o=null;j=null;s=null}else{var r=k.cell(p);if(!r||!r.visible()){continue}s=this._wijgrid.toStr(l,r.value);o=r.attr();j=r.style()}h=g.state;if(l.readOnly){h&=~b.grid.renderState.editing}this._renderCell(g,m,s,false,l,h,o,j)}};f.prototype._renderFilterRow=function(l,h){var k,g,j;for(k=0,g=h.length;k<g;k++){j=h[k];this._renderCell(l,k,b.grid.filterHelper.getSingleValue(j.filterValue),false,j,l.state)}};f.prototype._renderFooterRow=function(k,h){var j,g;for(j=0,g=h.length;j<g;j++){this._renderCell(k,j,"",false,h[j],k.state)}};f.prototype._renderHeaderRow=function(m,k){var j,g,l=0,h;for(j=0,g=k.length;j<g;j++){h=k[j];if(h.column&&h.column.parentVis){h.column.thX=l++;h.column.thY=m.sectionRowIndex;this._renderCell(m,j,h.column.headerText,false,h.column,m.state,{colSpan:h.colSpan,rowSpan:h.rowSpan})}}};f.prototype._renderSpannedRow=function(n,j,o){var l,k,h=Math.min(j.length,o.cellCount());for(l=0;l<h;l++){var m=n.type===b.grid.rowType.emptyDataRow;var g=o.cell(l);this._renderCell(n,l,g.html,m,j[l],n.state,g.attr(),g.style())}};f.prototype._cellRendered=function(m,l,i,h,k,g,j){this._wijgrid.cellStyleFormatter.format(l,i,h,m,k,g,j);this._changeCellRenderState(l,k,false);this._wijgrid._onViewCellRendered(m,l,i,h)};f.prototype._rowRendered=function(i,g,h){this._wijgrid.rowStyleFormatter.format(i,g,h);i.state&=~b.grid.renderState.rendering;this._setRowInfo(i.$rows,i);this._wijgrid._onViewRowRendered(i,g,h)};f.prototype._makeRowEditable=function(m){var n=this._wijgrid._field("visibleLeaves"),k=new b.grid.cellEditorHelper();if(n){for(var h=0;h<n.length;h++){var j=n[h];if(!j.readOnly&&b.grid.validDataKey(j.dataKey)){var l=m.$rows.children("td, th").eq(h);if(l.length){var g=this.getAbsoluteCellInfo(l[0],true);this._changeCellRenderState(l,b.grid.renderState.editing,k.cellEditStart(this._wijgrid,g,null))}}}}};f.prototype._isBodyRow=function(i){var g=b.grid.rowType,h=i.type;return((h&g.data)||(h===g.groupHeader)||(h===g.groupFooter)||(h===g.emptyDataRow))};f.prototype._changeRowRenderState=function(h,g,i){if(i){h.state|=g}else{h.state&=~g}this._setRowInfo(h.$rows,h)};f.prototype._changeCellRenderState=function(l,h,k){var j=b.grid.dataPrefix,g=this._wijgrid._data$prefix,i=j(l,g,"renderState");if(k){h=i|h;j(l,g,"renderState",h)}else{h=i&~h;j(l,g,"renderState",h)}return h};f.prototype._adjustWidthArray=function(i,q,o,k){var r=this._sumWidthArray(i),j=this._sumWidthArray(q),p=[],m,n=0,h,g,l=true;if(r<=o){e.extend(true,p,i);if(r===o||k){return p}else{m=o-r}}else{e.extend(true,p,q);if(j>=o){return p}else{m=o-j}}e.each(p,function(s,t){if(!t.real){n++}});if(n!==0){h=Math.floor(m/n);g=m-h*n;e.each(p,function(s,t){if(!t.real){t.width+=h;if(l){t.width+=g;l=false}}})}return p};f.prototype._getColumnWidth=function(m){var u,n=this._wijgrid._field("visibleLeaves")[m];if(n._realWidth!==undefined){u={width:n._realWidth,real:true}}else{if(n.isRowHeader){u={width:this._rowHeaderSize,real:true}}else{var g=0,o=this.getJoinedTables(true,m),q=o[2];for(var k=0;k<2;k++){var r=o[k];if(r!==null){var t=r.element().rows,s,l=t.length;if(l>0){for(var h=l-1,s=null;h>=0;h--){if((t[h]).cells.length===r.width()){s=t[h];if(s.style.display!=="none"){break}}}if(s){var p=s.cells[q];g=Math.max(g,e(p).outerWidth())}}}}u={width:g,real:false}}}return u};f.prototype._setColumnWidth=function(h,i){var j=this.getHeaderCell(h),l=this.getJoinedCols(h),k;if(i){var g=this;if(j){k=i-this._sizesAdjCache.th;if(k<0){k=0}j.style.width=k+"px"}e.each(l,function(n,m){if(m){k=i-g._sizesAdjCache.col;if(k<0){k=0}m.style.width=k+"px"}})}};f.prototype._setTableWidth=function(i,g,m,j){var l,k,h=this;e.each(i,function(n,o){o[0].style.tableLayout="fixed";o[0].style.width=(g-h._sizesAdjCache.subTable)+"px"});l=i[0].outerWidth();k=l-g;if(k!==0){this._setColumnWidth(j,m-k)}};f.prototype._sumWidthArray=function(j,i,h){var g=0;e.each(j,function(k,l){if(i!==undefined&&h!==undefined&&(k<i||k>h)){return true}g+=l.width});return g};f.prototype._clearBody=function(){e.each(this.subTables(),function(g,h){h.clearSection(2)})};f.prototype._rebuildOffsets=function(){e.each(this.subTables(),function(g,h){h.rebuildOffsets()})};f.prototype._removeBodyRow=function(k,p){if(typeof p==="undefined"){p=true}var j=b.grid.rowType,q=this._wijgrid._rows(),m,n,h,g;if((k>=0)&&(k<(n=q.length()))){h=this._getRowInfo(q.item(k),false);g=this.getAbsoluteRowIndex(h.$rows[0]);h.$rows.remove();if(p){var o=this.getJoinedTables(false,g),l;if(l=o[0]){l.removeOffset(o[2])}if(l=o[1]){l.removeOffset(o[2])}}}};f.prototype._insertBodyRow=function(l,m,h,s){var r=this._wijgrid._field("visibleLeaves"),k=b.grid.rowType,q=this._wijgrid._view(),t=this._wijgrid._rows(),o=t.length(),j=l.isDataRow(),i,g;if(m<0||m>=o||(!m&&m!==0)){m=o}i=this._insertEmptyRow(l.rowType,l.renderState,m,-1,h,s,(l).groupByValue,l.extInfo);this._renderRow(i,r,l);g=this.getAbsoluteRowIndex(i.$rows[0]);var p=this.getJoinedTables(false,g),n;if(n=p[0]){n.insertOffset(g)}if(n=p[1]){n.insertOffset(g)}return i};f.prototype._findRowInfo=function(l){var h=this.bodyRows(),j=0,g=h.length(),k;if(e.isFunction(l)){for(j=0;j<g;j++){k=this._getRowInfo(h.item(j));if(l(k)===true){return k}}}return null};f.prototype._setRowInfo=function(l,k){var h="$rows" in k,g="data" in k,j,i;if(h){j=k.$rows;delete k.$rows}if(g){i=k.data;delete k.data}b.grid.dataPrefix(l,this._wijgrid._data$prefix,"rowInfo",k);if(h){k.$rows=j}if(g){k.data=i}};f.prototype._getRowInfo=function(i,g){if(typeof g==="undefined"){g=true}var l=this._wijgrid,h=i[1]?e(i):e(i[0]),m=b.grid.dataPrefix(h,l._data$prefix,"rowInfo"),k;m.$rows=h;if(g&&(m.dataItemIndex>=0)&&(m.type&b.grid.rowType.data)){try{m.data=l._getDataItem(m.dataItemIndex)}catch(j){m.data=null}}return m};f.prototype._getRowInfoBySketchRowIndex=function(j,g){if(typeof g==="undefined"){g=true}if(j>=0){var k=this._isRowRendered(j);if(k>=0){var h=this.bodyRows().item(k);if(h){return this._getRowInfo(h,g)}}else{var m=this._wijgrid.sketchTable.row(j),l=null;if(m){l=m.getRowInfo();if(g&&(l.dataItemIndex>=0)&&m.isDataRow()){try{l.data=this._wijgrid._getDataItem(l.dataItemIndex)}catch(i){l.data=null}}}return l}}return null};f.prototype._createRowInfo=function(q,n,i,l,j,g,o,p,k){var m,h={type:n,state:i,sectionRowIndex:l,dataRowIndex:j,dataItemIndex:g,virtualDataItemIndex:o,$rows:q?e(q):null,_extInfo:k};if(p!==undefined){h.groupByValue=p}if((g>=0)&&(n&b.grid.rowType.data)){h.data=this._wijgrid._getDataItem(g)}return h};f.prototype._isRowRendered=function(h){var g=this._wijgrid._renderableBoundsCollection().getRenderedIndex(h);if(g>=0){if(g>=this._bounds.start&&g<=this._bounds.end){return g-this._bounds.start}}return -1};return f})();d.baseView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(f){__extends(g,f);function g(h,i){f.call(this,h,i);this._dataTable=null;this._contentArea=null}g.prototype.ensureWidth=function(k,l,j){var i=e(this._dataTable.element()),h=i.width()+l-j;f.prototype.ensureWidth.call(this,k,l,j);this._setTableWidth([i],h,l,k)};g.prototype.getVisibleAreaBounds=function(h){var i=b.grid.bounds(this._dataTable.element(),h);return i};g.prototype.getVisibleContentAreaBounds=function(){return this.getVisibleAreaBounds()};g.prototype.updateSplits=function(j){var t=this,n=this._wijgrid,i=n.options,l=n.element,h=[],q=[],k=[],p=n._field("visibleLeaves"),s=n.outerDiv,u,m;l.css({"table-layout":"",width:"auto"});e.each(p,function(x,v){var y,o=v.width;if(o||(o===0)){y=((typeof(o)==="string")&&(o.length>1)&&(o[o.length-1]==="%"));if(y){o=s.width()*parseFloat(o)/100}else{o=parseFloat(o)}if(v.ensurePxWidth||(v.ensurePxWidth===undefined&&i.ensureColumnsPxWidth)){v._realWidth=o}t._setColumnWidth(x,o)}});e.each(p,function(v,o){h.push(t._getColumnWidth(v))});l.css("width","1px");e.each(p,function(v,o){q.push(t._getColumnWidth(v))});u=s.width();k=this._adjustWidthArray(h,q,u,i.ensureColumnsPxWidth);e.each(k,function(v,w){var o=p[v];if(o._realWidth!==undefined){delete o._realWidth;return}t._setColumnWidth(v,w.width)});l.css("table-layout","fixed");m=k.length-1;if(m!==-1){var r=s.width()-u;k[m].width+=r;this._setTableWidth([l],this._sumWidthArray(k,0,m),k[m].width,m)}};g.prototype.getInlineTotalWidth=function(){var i=this._dataTable.element(),h=i.style.width;if(h&&(h!=="auto")){return h}return""};g.prototype.forEachColumnCell=function(h,j,i){return this._dataTable.forEachColumnCell(h,j,i)};g.prototype.forEachRowCell=function(j,i,h){return this._dataTable.forEachRowCell(j,i,h)};g.prototype.getAbsoluteCellInfo=function(i,h){return new b.grid.cellInfo(this.getColumnIndex(i),(i.parentNode).rowIndex,this._wijgrid,true,h)};g.prototype.getAbsoluteRowIndex=function(h){return h.rowIndex};g.prototype.getCell=function(k,j){var i=this._dataTable.getCellIdx(k,j),h;if(i>=0){h=this.getJoinedRows(j,0);if(h[0]){return h[0].cells[i]}}return null};g.prototype.getColumnIndex=function(h){return this._dataTable.getColumnIdx(h)};g.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};g.prototype.getJoinedCols=function(h){var i=e(this._dataTable.element()).find("> colgroup");if(i.length){if(h<i[0].childNodes.length){return[i[0].childNodes[h],null]}}return[null,null]};g.prototype.getJoinedRows=function(i,h){return[this._dataTable.getSectionRow(i,h),null]};g.prototype.getJoinedTables=function(h,i){return[this._dataTable,null,i]};g.prototype.subTables=function(){return[this._dataTable]};g.prototype._preRender=function(){f.prototype._preRender.call(this);this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0],true,true,true)};g.prototype._postRender=function(){this._wijgrid.element.find("> tbody").addClass(this._wijgrid.options.wijCSS.content);this._dataTable=new b.grid.htmlTableAccessor(this._wijgrid.element[0]);this._wijgrid._setAttr(this._wijgrid.element,{role:"grid",cellpadding:"0",border:"0",cellspacing:"0"});this._wijgrid.element.css("border-collapse","separate");f.prototype._postRender.call(this)};g.prototype._insertRow=function(l,i,j){var h=b.grid.rowType,k;switch(l){case h.header:case h.filter:k=this._dataTable.ensureTHead();break;case h.footer:k=this._dataTable.ensureTFoot();break;default:k=this._dataTable.ensureTBody()}if(j){return[k.appendChild(j)]}else{if(i>k.rows.length){i=-1}return[k.insertRow(i)]}};g.prototype._rowRendered=function(k,h,i){var j=k.$rows[0];if(!j.cells.length&&this._isBodyRow(k)){j.parentNode.removeChild(j)}else{f.prototype._rowRendered.call(this,k,h,i)}};g.prototype._appendCell=function(j,h,i){j.$rows[0].appendChild(i[0])};g.prototype._createCol=function(i,h){return[document.createElement("col")]};g.prototype._appendCol=function(j,i,h){this._dataTable.appendCol(j[0])};return g})(c.baseView);c.flatView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(g){__extends(f,g);function f(h,i){g.call(this,h,i);this._verScrollBarSize=b.grid.getSuperPanelScrollBarSize();this._viewTables={};this._splitAreas={};this._superPanelElementsCache={};this.element=h.element;this._staticDataRowIndex=h._getStaticIndex(true);this._staticRowIndex=h._getRealStaticRowIndex();this._staticColumnIndex=h._getRealStaticColumnIndex();this._staticAllColumnIndex=(this._staticColumnIndex===-1)?-1:h._field("visibleLeaves")[this._staticColumnIndex].leavesIdx;this._mouseWheelHandler=e.proxy(this._onMouseWheel,this)}f.DEFAULT_ROW_HEIGHT_VIRTUAL=19;f.prototype.dispose=function(){g.prototype.dispose.call(this);this._wijgrid.outerDiv.unbind("mousewheel",this._mouseWheelHandler)};f.prototype.ensureWidth=function(s,x,i){var q=this._wijgrid,k=q.options,l=this._staticColumnIndex,v=s<=l,r=e(this._viewTables.nw.element()),m=e(this._viewTables.ne.element()),w=e(this._viewTables.sw.element()),t=e(this._viewTables.se.element()),h=v?[r,w]:[m,t],p=(v?r.width():m.width())+x-i,j=this.getScrollValue();this._destroySuperPanel();g.prototype.ensureWidth.call(this,s,x,i);this._setTableWidth(h,p,x,s);try{if(l>=0){k.splitDistanceX=r[0].offsetWidth}else{k.splitDistanceX=0}}catch(u){}this._updateSplitAreaBounds(0);this._adjustRowsHeights();try{if(this._staticRowIndex>=0){k.splitDistanceY=Math.max(r[0].offsetHeight,m[0].offsetHeight)}else{k.splitDistanceY=0}}catch(u){}this._updateSplitAreaBounds(1);this.refreshPanel(j);var n=q._UIFrozener();if(n){n.refresh()}};f.prototype.ensureHeight=function(r){var l,m=this._wijgrid,i=m.options,n=e(this._viewTables.nw.element()),j=e(this._viewTables.ne.element()),s=e(this._viewTables.sw.element()),p=e(this._viewTables.se.element()),h=this.getScrollValue(),t;this._destroySuperPanel();if(arguments.length>0){l=this.getJoinedRows(r,2);this._setRowHeight(l,this._getRowHeight(l))}p.css("height","");s.css("height","");t=Math.max(p.height(),s.height());p.height(t);s.height(t);try{if(this._staticRowIndex>=0){i.splitDistanceY=Math.max(n[0].offsetHeight,j[0].offsetHeight)}else{i.splitDistanceY=0}}catch(q){}this._updateSplitAreaBounds(1);this.refreshPanel(h);var k=m._UIFrozener();if(k){k.refresh()}};f.prototype.getScrollValue=function(){var h=this._getSuperPanel();return h?{x:h.options.hScroller.scrollValue,y:h.options.vScroller.scrollValue}:null};f.prototype.getVisibleAreaBounds=function(h){var i=this._isNativeSuperPanel()?b.grid.bounds(this._getSuperPanelStateContainer(),h):b.grid.bounds(this._getSuperPanelContentWrapper(),h);if(!i){i=b.grid.bounds(this._wijgrid.outerDiv,h)}return i};f.prototype.getVisibleContentAreaBounds=function(){var k=this.getVisibleAreaBounds(true),j=b.grid.bounds(this._viewTables.nw.element())||{},i=b.grid.bounds(this._viewTables.ne.element())||{},m=b.grid.bounds(this._viewTables.sw.element())||{},l=b.grid.bounds(this._viewTables.se.element())||{},h={top:k.top,left:k.left,width:Math.max(j.width+i.width,m.width+l.width),height:Math.max(j.height+m.height,i.height+l.height)};h.width=Math.min(k.width,h.width);h.height=Math.min(k.height,h.height);return h};f.prototype.getRowAreaHeight=function(){var i=this._getSuperPanelContentWrapper();if(i.length==0){i=this._wijgrid.outerDiv}var h=i.height();var l=this._wijgrid.options.splitDistanceY;if(l){h-=l}if(this._wijgrid.options.showFooter){var k,j=(this.isRendered()&&(k=this.footerRow()))?e(k).height():this.getDefaultRowHeight();h-=j}return h};f.prototype.getVirtualPageSize=function(h){if(typeof h==="undefined"){h=true}var i=this._wijgrid.rowOuterHeight&&(this._wijgrid.rowOuterHeight>0)?this._wijgrid.rowOuterHeight:this.getDefaultRowHeight();var j=this.getRowAreaHeight()/i;return h?Math.ceil(j):Math.floor(j)};f.prototype.getFixedAreaVisibleBounds=function(){var k=this.getVisibleAreaBounds(),j=b.grid.bounds(this._splitAreas.ne),h=b.grid.bounds(this._splitAreas.nw),i=null,l=null;if(j.height||h.height){i={left:k.left,top:k.top,width:k.width,height:Math.min(j.height||h.height,k.height)}}if(h.width){l={left:h.left,top:k.top,width:Math.min(h.width,k.width),height:k.height}}return[i,l]};f.prototype.getDefaultRowHeight=function(){return(this._wijgrid.options.rowHeight>=0)?this._wijgrid.options.rowHeight:f.DEFAULT_ROW_HEIGHT_VIRTUAL};f.prototype.refreshPanel=function(m){var t=this,q=this._wijgrid,u=q.options,k=this._getMappedScrollMode(),r=m?m.x:null,i=m?m.y:null,o=q._rows().item(0),l=false;q.rowOuterHeight=o&&o[0]?e(o[0]).outerHeight():this.getDefaultRowHeight();if(!this._scroller.data("wijmo-wijsuperpanel")){l=true;if(this._wijgrid._allowVirtualScrolling()){this.vsUI=new b.grid.uiVirtualScroller(q,this._splitAreas.se,u.splitDistanceY,q.rowOuterHeight)}this._scroller.wijsuperpanel({disabled:q.options.disabled,scroll:e.proxy(this._onScroll,this),bubbleScrollingEvent:true,customScrolling:this._wijgrid._allowVirtualScrolling(),vScroller:{scrollBarVisibility:k.vScrollBarVisibility,scrollValue:m?m.y:null},hScroller:{scrollBarVisibility:k.hScrollBarVisibility,scrollValue:m?m.x:null},hScrollerActivating:e.proxy(this._onHScrollerActivating,this)});if(this._isNativeSuperPanel()){var j=this._getSuperPanelStateContainer();if(j.length&&(j[0].offsetHeight!==j[0].clientHeight)){this._onHScrollerActivating(null,{contentLength:j[0].clientHeight})}}if(!this._isNativeSuperPanel()){this._getSuperPanelContentWrapper().bind("scroll",function(v){(v.target).scrollLeft=0;(v.target).scrollTop=0;v.preventDefault()})}if(this._wijgrid._allowVirtualScrolling()){this.vsUI.attach(this._scroller)}}else{this._scroller.wijsuperpanel("paintPanel")}var p=this._testNeedVBar(q.outerDiv,q.element,e(this._viewTables.ne.element()),u.scrollMode,q._autoHeight),s=p&&!this._testAutohiddenScrollbars();var h=this.getVisibleContentAreaBounds().width;this._splitAreas.ne.width(h-u.splitDistanceX);if(l&&(m&&m.x)){var n=this._scroller.wijsuperpanel("scrollValueToPx",m.x,"h");this._setFixedAreaPosition(this._splitAreas.ne,"h",n,null,true)}if(u.staticColumnsAlignment==="right"){this._splitAreas.nw.css({left:"",right:s?this._verScrollBarSize:0});this._splitAreas.sw.css({left:"",right:s?this._verScrollBarSize:0})}this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5);if(this._wijgrid._allowVirtualScrolling()){this._wijgrid._handleVirtualScrolling(this._bounds.start)}};f.prototype.scrollTo=function(k,m,J){var j=this._wijgrid,z=null;if(j._allowVirtualScrolling()){var u=j._renderableBoundsCollection().getRenderedIndex(k.rowIndex());var l,r=j._rows().length(),G,I=(u-j._viewPortBounds().start>=r-1);if(!k._isRendered()||(I&&(l=this.getVisibleAreaBounds(true))&&(G=k.row().$rows)&&(G.offset().top+G.outerHeight()>l.top+l.height))){z=u;if(k.rowIndex()>J.changingEventArgs.oldRowIndex){z-=r-1;z+=1}}}var y=this._getSuperPanel();if(z!==null){J.setFocus=true;J.hasFocusedChild=false;if(y){(this).vsUI.scrollTo(z,function(){m()})}else{m()}}else{var E=j.options,i=e(k.tableCell()),q=null,x=null;if(y&&i.is(":visible")){var p=(y).getContentElement(),F=p.parent(),s=parseInt((p.css("left")+"").replace("px",""),10)*-1,v=parseInt((p.css("top")+"").replace("px",""),10)*-1,H=F.outerWidth()-E.splitDistanceX,A=F.outerHeight()-E.splitDistanceY,w=i.position(),D=w.left,h=w.top,K=i.outerWidth(),B=i.outerHeight(),n=j._getStaticIndex(true),C=j._getStaticIndex(false),L=k.rowIndex(),t=k.cellIndex();if(L<=n){if(t<=C){q=0;x=0}else{D+=s;if(D+K>s+H){s=q=D+K-H}if(D<s){q=D}x=0}}else{if(t<=C){h+=this._splitAreas.sw.scrollTop();if(h+B>v+A){v=x=h+B-A}if(h<v){x=h}q=0}else{D-=E.splitDistanceX;if(h+B>v+A){v=x=h+B-A}if(D+K>s+H){s=q=D+K-H}if(h<v){x=h}if(D<s){q=D}}}if(q!==null){(y).hScrollTo(q)}if(x!==null){(y).vScrollTo(x)}}m()}};f.prototype.updateSplits=function(t){var j=this._wijgrid,y=j.options,m,w=this,r=[],p=[],q=[],x=this._staticColumnIndex,v,u=y.scrollMode,k=j._field("visibleLeaves"),h=e(this._viewTables.se.element()),n=e(this._viewTables.ne.element()),z=e(this._viewTables.sw.element()),D=e(this._viewTables.nw.element()),l=j.outerDiv,C,A,s;this._destroySuperPanel();l.unbind("mousewheel",this._mouseWheelHandler);if((C=w._viewTables.se.element().tBodies)&&(C=C[0])){s=false;for(A=0;A<C.rows.length;A++){if(!e(C.rows[A]).hasClass(b.grid.wijgrid.CSS.groupHeaderRow)){s=true;break}}if(!s){j.element.css("width","100%")}}e.each([h,n,z,D],function(i,o){o.css({"table-layout":"",width:""})});e.each(k,function(E,o){var F,i=o.width;if(i||(i===0)){F=((typeof(i)==="string")&&(i.length>1)&&(i[i.length-1]==="%"));if(F){i=l.width()*parseFloat(i)/100}else{i=parseFloat(i)}if(o.ensurePxWidth||(o.ensurePxWidth===undefined&&y.ensureColumnsPxWidth)){o._realWidth=i}w._setColumnWidth(E,i)}});e.each(k,function(o,i){q.push(w._getColumnWidth(o))});e.each([D,n,z,h],function(i,o){o.css({width:"1px"})});e.each(k,function(o,i){p.push(w._getColumnWidth(o))});m=l.width();r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth);e.each(r,function(o,E){var i=k[o];if(i._realWidth!==undefined){delete i._realWidth;return}w._setColumnWidth(o,E.width)});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);if(!y.ensureColumnsPxWidth){n.parent().width(m-y.splitDistanceX)}v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1);if(!y.ensureColumnsPxWidth){if(this._testNeedVBar(j.outerDiv,h,n,u,j._autoHeight)){m-=this._verScrollBarSize;r=this._adjustWidthArray(q,p,m,y.ensureColumnsPxWidth);e.each(r,function(i,o){if(!o.real){w._setColumnWidth(i,o.width)}});if(x>=0){v=x;this._setTableWidth([D,z],this._sumWidthArray(r,0,v),r[v].width,v)}try{if(x>=0){y.splitDistanceX=D[0].offsetWidth}else{y.splitDistanceX=0}}catch(B){}this._updateSplitAreaBounds(0);n.parent().width(m-y.splitDistanceX);v=r.length-1;if(v!==-1){this._setTableWidth([n,h],this._sumWidthArray(r,x+1,v),r[v].width,v)}this._adjustRowsHeights();try{if(this._staticRowIndex>=0){y.splitDistanceY=Math.max(D[0].offsetHeight,n[0].offsetHeight)}else{y.splitDistanceY=0}}catch(B){}this._updateSplitAreaBounds(1)}}this.refreshPanel(t);l.bind("mousewheel",e.proxy(this._mouseWheelHandler,this))};f.prototype.getInlineTotalWidth=function(){if(this._scroller){var h=this._getSuperPanelStateContainer();if(h.length){var i=h[0].style.width;if(i&&(i!=="auto")){return i}}}return""};f.prototype._clearBody=function(){g.prototype._clearBody.call(this)};f.prototype.bodyRows=function(){var h=g.prototype.bodyRows.call(this);return h};f.prototype.forEachColumnCell=function(j,m,l){var k=this.getJoinedTables(true,j),i,h;if(k[0]!==null){i=k[2];h=k[0].forEachColumnCell(i,m,l);if(h!==true){return h}if(k[1]!==null){h=k[1].forEachColumnCell(i,m,l);if(h!==true){return h}}}return true};f.prototype.forEachRowCell=function(o,n,m){var l=this.getJoinedTables(false,o),k=l[0],j=l[1],h,i;if(k!==null){h=l[2];if(h<k.element().rows.length){i=k.forEachRowCell(h,n,m);if(i!==true){return i}}if((j!==null)&&(h<j.element().rows.length)){i=j.forEachRowCell(h,n,m);if(i!==true){return i}}}return true};f.prototype.getAbsoluteCellInfo=function(i,h){return new b.grid.cellInfo(this.getColumnIndex(i),this.getAbsoluteRowIndex(i.parentNode),this._wijgrid,true,h)};f.prototype.getAbsoluteRowIndex=function(i){var h=i.rowIndex,j=i.parentNode;while(j&&j.tagName&&j.tagName.toLowerCase()!=="table"){j=j.parentNode}return(j===this._viewTables.nw.element()||j===this._viewTables.ne.element())?h:h+this._staticRowIndex+1};f.prototype.getCell=function(o,m){var h=this.getJoinedTables(false,m),l,k,n,j,i;if(h[0]!==null){l=this.getJoinedTables(true,o);if(l[0]!==null){k=h[2];n=l[2];j=null;if(h[1]!==null){j=(o===n)?h[0]:h[1]}else{j=h[0]}i=j.getCellIdx(n,k);if(i>=0){return(j.element().rows[k]).cells[i]}}}return null};f.prototype.getColumnIndex=function(l){var h=null,j=null,i=false,k;for(h=l.parentNode;h.tagName.toLowerCase()!=="table";h=h.parentNode){}if(h!==null){if(h===this._viewTables.nw.element()){j=this._viewTables.nw}else{if(h===this._viewTables.ne.element()){j=this._viewTables.ne;i=true}else{if(h===this._viewTables.sw.element()){j=this._viewTables.sw}else{if(h===this._viewTables.se.element()){j=this._viewTables.se;i=true}}}}if(j!==null){k=j.getColumnIdx(l);if(i){k+=this._staticColumnIndex+1}return k}}return -1};f.prototype.getHeaderCell=function(j){var h=this._wijgrid._field("visibleLeaves")[j],i;if(h&&(i=this._wijgrid._headerRows())){return b.grid.rowAccessor.getCell(i.item(h.thY),h.thX)}return null};f.prototype.getJoinedCols=function(j){var h=[],k=this.getJoinedTables(true,j),i=k[2];k.splice(k.length-1,1);e.each(k,function(l,m){h.push(m?e(m.element()).find("col")[i]:null)});return h};f.prototype.getJoinedRows=function(o,j){var u=null,t=null,s=null,q=null,p=this._staticRowIndex,h=this._staticColumnIndex,i=this._wijgrid._field("visibleLeaves").length-1,r=this._rowsCountRaw()-1,l=(p===r),n=(p<0),k=!l&&!n,m=0;if(l||k){if(h>=0&&h<i){s=this._viewTables.nw;q=this._viewTables.ne}else{s=(h<0)?this._viewTables.ne:this._viewTables.nw}m=s.getSectionLength(j);if(o<m){u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}}if(n||(k&&(u===null))){if(!n){o-=m}if(h>=0&&h<i){s=this._viewTables.sw;q=this._viewTables.se}else{s=(h<0)?this._viewTables.se:this._viewTables.sw}u=s.getSectionRow(o,j);if(q!==null){t=q.getSectionRow(o,j)}}return(u===null&&t===null)?null:[u,t]};f.prototype.getJoinedTables=function(i,k){var n=null,m=null,h=k,l=this._wijgrid,o=this._staticRowIndex,j=this._staticColumnIndex;if(i){if(k<=j){n=this._viewTables.nw;m=this._viewTables.sw}else{n=this._viewTables.ne;m=this._viewTables.se;h=h-(j+1)}if(o<0){n=null}if(o===this._rowsCountRaw()-1){m=null}}else{if(k<=o){n=this._viewTables.nw;m=this._viewTables.ne}else{n=this._viewTables.sw;m=this._viewTables.se;h=h-(o+1)}if(j<0){n=null}if(j===l._field("leaves").length-1){m=null}}if(n===null){n=m;m=null}return[n,m,h]};f.prototype.subTables=function(){return[this._viewTables.nw,this._viewTables.ne,this._viewTables.sw,this._viewTables.se]};f.prototype._getSuperPanel=function(){return this._scroller?this._scroller.data("wijmo-wijsuperpanel"):null};f.prototype._ensureRenderBounds=function(){if(this._wijgrid._allowVirtualScrolling()){var i=this.getVirtualPageSize();this._wijgrid._ensureRenderableBounds(this._bounds);this._bounds.end=this._bounds.start+i-1;if(this._wijgrid._serverSideVirtualScrolling()){var j=(this._bounds.end-this._bounds.start+1)-this._wijgrid.sketchTable.count();if(j>0){this._bounds.end-=j}}this._wijgrid._ensureRenderableBounds(this._bounds);if((this._bounds.start>0)&&(this._bounds.end===this._wijgrid.sketchTable.count()-1)){i=this.getVirtualPageSize(false);var h=this._bounds.end-this._bounds.start+1;if(h<i){this._bounds.start=this._bounds.end-i+1}this._wijgrid._ensureRenderableBounds(this._bounds);if(this._bounds.start!==this._wijgrid._scrollingState.index){this._wijgrid._scrollingState.index=this._wijgrid._scrollingState.y=this._bounds.start}}}else{g.prototype._ensureRenderBounds.call(this)}};f.prototype._renderContent=function(){g.prototype._renderContent.call(this)};f.prototype._preRender=function(){g.prototype._preRender.call(this);var j=document.createDocumentFragment(),h=b.grid.htmlTableAccessor,i=b.grid.wijgrid.CSS,k=this._wijgrid.options.wijCSS;this._wijgrid.outerDiv.wrapInner('<div class="'+i.fixedView+" "+k.wijgridFixedView+'"><div class="'+i.scroller+" "+k.wijgridScroller+'"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>');this._scroller=this._wijgrid.outerDiv.find("."+i.scroller);this._scroller.css("padding",0);this._scroller.after(this._splitAreas.nw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.ne=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._scroller.after(this._splitAreas.sw=e('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>'));this._splitAreas.se=this._scroller.find(".wijmo-wijgrid-split-area-se:first");this._viewTables={nw:new h(j.appendChild(document.createElement("table")),true,true,true),ne:new h(j.appendChild(document.createElement("table")),true,true,true),sw:new h(j.appendChild(document.createElement("table")),true,true,true),se:new h(j.appendChild(this._wijgrid.element[0]),true,true,true)}};f.prototype._postRender=function(){var j,h,m,l,i=b.grid.htmlTableAccessor,k=this;this._viewTables={nw:new i(j=this._viewTables.nw.element()),ne:new i(h=this._viewTables.ne.element()),sw:new i(m=this._viewTables.sw.element()),se:new i(l=this._viewTables.se.element())};this._splitAreas.nw.empty().append(j);this._splitAreas.ne.empty().append(h);this._splitAreas.sw.empty().append(m);this._splitAreas.se.empty().append(l);e.each(this._viewTables,function(n,p){var o=e(p.element());k._wijgrid._setAttr(o,{role:"grid",border:"0",cellpadding:"0",cellspacing:"0"});o.addClass(b.grid.wijgrid.CSS.table).addClass(k._wijgrid.options.wijCSS.wijgridTable).css("border-collapse","separate").find("> tbody").addClass(k._wijgrid.options.wijCSS.content)});g.prototype._postRender.call(this)};f.prototype._rowsCountRaw=function(){var i=this._viewTables.nw.element(),h=this._viewTables.ne.element(),k=this._viewTables.sw.element(),j=this._viewTables.se.element(),l;l=Math.max(i.rows.length,h.rows.length)+Math.max(k.rows.length,j.rows.length);return l};f.prototype._createCol=function(i,h){return[document.createElement("col"),document.createElement("col")]};f.prototype._appendCol=function(j,i,h){if(h<=this._staticColumnIndex){this._viewTables.nw.appendCol(j[0]);this._viewTables.sw.appendCol(j[1])}else{this._viewTables.ne.appendCol(j[0]);this._viewTables.se.appendCol(j[1])}};f.prototype._insertRow=function(m,i,k){var h=b.grid.rowType,l,j,n=this._viewTables;switch(m){case h.header:case h.filter:l=n.nw.ensureTHead();j=n.ne.ensureTHead();break;case h.footer:l=n.sw.ensureTFoot();j=n.se.ensureTFoot();break;default:if(i<=this._staticDataRowIndex){l=n.nw.ensureTBody();j=n.ne.ensureTBody()}else{i-=this._staticDataRowIndex+1;l=n.sw.ensureTBody();j=n.se.ensureTBody()}}if(k){return[l.appendChild(k),j.appendChild(k.cloneNode(false))]}else{return[l.insertRow(i>l.rows.length?-1:i),j.insertRow(i>j.rows.length?-1:i)]}};f.prototype._rowRendered=function(l,h,i){var j=l.$rows[0],k=l.$rows[1];if(!j.cells.length&&this._isBodyRow(l)){j.parentNode.removeChild(j);j=null}if(!k.cells.length&&this._isBodyRow(l)){k.parentNode.removeChild(k);k=null}if(j||k){if(!j||!k){l.$rows=j?e(j):e(k)}g.prototype._rowRendered.call(this,l,h,i)}};f.prototype._appendCell=function(k,h,j){var i=(k.type!==b.grid.rowType.header)?this._staticColumnIndex:this._staticAllColumnIndex;if(h<=i){k.$rows[0].appendChild(j[0])}else{k.$rows[1].appendChild(j[0])}};f.prototype._getRowHeight=function(n,h){if(n[0]&&n[1]){var q=n[0],k=n[1],m=e(q),i=e(k),p,j,o,l=function(r){var t,s=r[0],u;for(t=0;t<s.cells.length;t++){u=s.cells[t];if(!u.rowSpan||u.rowSpan===1){return e(u).outerHeight()}}return r.height()};if(o=e.data(q,"customHeight")){p=j=parseInt(o)}else{m.css("height","");i.css("height","");if(h){p=l(m);j=l(i)}else{p=m.height();j=i.height()}}return Math.max(p,j)}return null};f.prototype._setRowHeight=function(h,k){if(h[0]&&h[1]){var j=[e(h[0]),e(h[1])],i;if(k===null){return}k+=1;e.each(j,function(l,m){m.height(k);i=k-m.height();if(i){m.height(k+i)}})}};f.prototype._adjustRowHeight=function(){var k=this._wijgrid,B=this._staticColumnIndex,A=k._field("visibleLeaves").length-1,p,o,q,C,n,t,x,u,m,l,w,s,z,y,v,h,r=[];if(B>-1&&B<A){p=this._staticRowIndex;o=this._rowsCountRaw()-1;q=this._viewTables;if(p>-1&&p<=o){C=q.ne.element();n=C.parentNode;t=q.nw.element();x=t.parentNode;v=t.rows;h=C.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]],true))}}if(p>=-1&&p<o){u=q.se.element();m=u.parentNode;l=q.sw.element();w=l.parentNode;v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){r.push(this._getRowHeight([v[z],h[z]]))}}if(p>-1&&p<=o){x.removeChild(t);n.removeChild(C)}if(p>=-1&&p<o){w.removeChild(l);m.removeChild(u)}if(p>-1&&p<=o){v=t.rows;h=C.rows;s=v.length;for(z=0,y=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>=-1&&p<o){v=l.rows;h=u.rows;s=v.length;for(z=0;z<s;z++){this._setRowHeight([v[z],h[z]],r[y++])}}if(p>-1&&p<=o){x.appendChild(t);n.appendChild(C)}if(p>=-1&&p<o){w.appendChild(l);m.appendChild(u)}}};f.prototype._adjustRowsHeights=function(){var i=e(this._viewTables.sw.element()),j=e(this._viewTables.se.element()),h;j.css("height","");i.css("height","");this._adjustRowHeight();h=Math.max(j.height(),i.height());i.height(h);j.height(h)};f.prototype._destroySuperPanel=function(){if(this._scroller.data("wijmo-wijsuperpanel")){if(this.vsUI){this.vsUI.dispose()}this._superPanelElementsCache={};this._scroller.wijsuperpanel("destroy")}};f.prototype._onScroll=function(j,i){var h=this._getSuperPanel();if(this._wijgrid._allowVirtualScrolling()){if(i.dir==="h"){this._setFixedAreaPosition((h).getContentElement(),i.dir,i.position,i.animationOptions,false);this._setFixedAreaPosition(this._splitAreas.ne,i.dir,i.position,i.animationOptions,true)}}else{this._setFixedAreaPosition(i.dir==="h"?this._splitAreas.ne:this._splitAreas.sw,i.dir,i.position,i.animationOptions,true)}this._wijgrid._trackScrollingPosition(h.options.hScroller.scrollValue,h.options.vScroller.scrollValue)};f.prototype._onHScrollerActivating=function(j,h){if(this._wijgrid._autoHeight){var i=this._wijgrid.element.height()+this._wijgrid.options.splitDistanceY-h.contentLength;if(i>0){this._scroller.height(this._scroller.height()+i);this._scroller.wijsuperpanel("paintPanel");return false}}this._splitAreas.sw.height(h.contentLength-this._wijgrid.options.splitDistanceY)};f.prototype._onMouseWheel=function(l,m){var k,i=(m>0)?"top":"bottom",h=false,j;if(this._wijgrid._canInteract()){k=this.getFixedAreaVisibleBounds();e.each(k,function(n,p){if(p&&b.grid.isOver(l.pageY,l.pageX,p.top,p.left,p.height,p.width)){h=true;return false}});if(h&&this._scroller.data("wijmo-wijsuperpanel")){j=this._scroller.wijsuperpanel("option","vScroller").scrollValue;this._scroller.wijsuperpanel("doScrolling",i);if(j!==this._scroller.wijsuperpanel("option","vScroller").scrollValue){l.stopPropagation();l.preventDefault()}}}};f.prototype._setFixedAreaPosition=function(j,m,h,k,l){var n={},i;if(m==="h"){i=l?"scrollLeft":"left"}else{i=l?"scrollTop":"top"}if(!l){h=-h}if(k){n[i]=h;j.animate(n,k)}else{if(l){j[0][i]=h}else{j.css(i,h)}}};f.prototype._testNeedVBar=function(r,i,s,j,t){var p=false,k=this._wijgrid,l=s.width()+k.options.splitDistanceX,h=i.height()+k.options.splitDistanceY,v=r.width(),q=r.height(),o,u=0,n=0;if(k.$superPanelHeader!==null){u=k.$superPanelHeader.outerHeight(true)}if(k.$bottomPagerDiv!==null){n=k.$bottomPagerDiv.outerHeight(true)}o=q-u-n;switch(j){case"both":case"vertical":p=true;break;case"auto":p=(h>o)||(!t&&l>v&&h>o-this._verScrollBarSize);if(!p&&this._wijgrid._allowVirtualScrolling()){var m=(k._view()).getVirtualPageSize();p=(m>0&&m<k._totalRowsCount())}break}return p};f.prototype._updateSplitAreaBounds=function(n){var h=this._wijgrid,m=h.options,l,j,i=0,k=0;if(n===0||n===2){this._splitAreas.nw.width(m.splitDistanceX);this._splitAreas.sw.width(m.splitDistanceX);if(h.options.staticColumnsAlignment==="right"){this._splitAreas.se.css("marginRight",m.splitDistanceX);this._splitAreas.ne.css("marginRight",m.splitDistanceX)}else{this._splitAreas.se.css("marginLeft",m.splitDistanceX);this._splitAreas.ne.css("marginLeft",m.splitDistanceX)}}if(n===1||n===2){this._scroller.css("height","");this._splitAreas.se.css("marginTop",0);l=h.outerDiv.height();if(!h._autoHeight){this._scroller.height(l)}else{this._scroller.height(l+m.splitDistanceY)}this._splitAreas.nw.height(m.splitDistanceY);this._splitAreas.ne.height(m.splitDistanceY);if(h.$superPanelHeader!==null){i=h.$superPanelHeader.outerHeight(true)}if(h.$bottomPagerDiv!==null){k=h.$bottomPagerDiv.outerHeight(true)}j=l-i-k;if(h.$superPanelHeader!==null){this._splitAreas.nw.css("top",i+"px");this._splitAreas.ne.css("top",i+"px")}if(!h._autoHeight){this._splitAreas.sw.height(j-m.splitDistanceY)}else{this._splitAreas.sw.height(j)}this._splitAreas.sw.css("top",m.splitDistanceY+i);this._splitAreas.se.css("marginTop",m.splitDistanceY)}};f.prototype._getSuperPanelContentWrapper=function(){if(!this._superPanelElementsCache.contentWrapper||!this._superPanelElementsCache.contentWrapper.length){this._superPanelElementsCache.contentWrapper=this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-contentwrapper:first")}return this._superPanelElementsCache.contentWrapper};f.prototype._getSuperPanelStateContainer=function(){if(!this._superPanelElementsCache.stateContainer||!this._superPanelElementsCache.stateContainer.length){this._superPanelElementsCache.stateContainer=this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-statecontainer:first")}return this._superPanelElementsCache.stateContainer};f.prototype._isNativeSuperPanel=function(){return this._wijgrid._isTouchEnv()};f.prototype._testAutohiddenScrollbars=function(){if(this._isNativeSuperPanel()){var h=this._getSuperPanelStateContainer();if(h.length){return h[0].offsetWidth===h[0].clientWidth}}return false};return f})(d.baseView);d.fixedView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var f=jQuery;var d=(function(){function g(h){this._updates=0;this._selectedColumns=null;this._selectedRows=null;this._extend_rules={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};if(!h){throw"invalid arguments"}this._wijgrid=h;this._addedCells=new e(h);this._removedCells=new e(h);this._selectedCells=new e(h);this._addedDuringCurTransactionCells=new e(h)}g.prototype.selectedCells=function(){return this._selectedCells};g.prototype.addColumns=function(i,h){if(!h&&h!==0){h=i}this.addRange(i,0,h,16777215)};g.prototype.addRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._selectRange(h,false,true,b.grid.cellRangeExtendMode.none,null);this.endUpdate()};g.prototype.addRows=function(i,h){if(!h&&h!==0){h=i}this.addRange(0,i,16777215,h)};g.prototype.removeRange=function(i,l,j,k){if(!i&&(arguments.length===1)){throw"invalid argument"}var h=(arguments.length===4)?new b.grid.cellInfoRange(new b.grid.cellInfo(i,l),new b.grid.cellInfo(j,k)):i._clone();h._normalize();if(!h._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(this._wijgrid._field("currentCell"));this._clearRange(h,b.grid.cellRangeExtendMode.none);this.endUpdate()};g.prototype.removeColumns=function(i,h){if(!h&&h!==0){h=i}this.removeRange(i,0,h,16777215)};g.prototype.removeRows=function(i,h){if(!h&&h!==0){h=i}this.removeRange(0,i,16777215,h)};g.prototype.clear=function(){this.beginUpdate();this._removedCells._clear();this._removedCells._addFrom(this._selectedCells);this.endUpdate()};g.prototype.selectAll=function(){this.beginUpdate();this._selectRange(this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch),false,false,b.grid.cellRangeExtendMode.none,null);this.endUpdate()};g.prototype.beginUpdate=function(){this._updates++};g.prototype.endUpdate=function(){if(this._updates>0){this._updates--;if(this._updates===0){this.doSelection();if(this._addedCells.length()||this._removedCells.length()){if(this._selectedColumns!==null){this._selectedColumns.UnderlyingDataChanged()}if(this._selectedRows!==null){this._selectedRows.UnderlyingDataChanged()}this._wijgrid._trigger("selectionChanged",null,{addedCells:this._addedCells,removedCells:this._removedCells})}this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._removedCells._clear()}}};g.prototype._multipleRangesAllowed=function(){var h=this._wijgrid.options.selectionMode;return(h&&((h=h.toLowerCase())==="multicolumn"||h==="multirow"||h==="multirange"))};g.prototype._anchorCell=function(){return this.__anchorCell};g.prototype._startNewTransaction=function(h){if(h){this.__anchorCell=h._clone();this._addedDuringCurTransactionCells=new b.grid.cellInfoOrderedCollection(this._wijgrid)}};g.prototype._clearRange=function(o,m){var t=this._wijgrid.options.selectionMode.toLowerCase(),h,j,l,q,u,s,n,p,k,r=this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch);if(o._isValid()&&(t!=="none")&&(this._selectedCells.length()>0)){h=o._clone();h._normalize();h._clip(r);if(!o._isValid()){return}h._extend(this._extend_rules[t][m],r);this.beginUpdate();for(n=0,p=this._selectedCells.length();n<p;n++){k=this._selectedCells.item(n);if(h._containsCellInfo(k)){this._removedCells._add(k)}}this.endUpdate()}};g.prototype._selectRange=function(i,o,m,l,k){var n=this._wijgrid.options.selectionMode.toLowerCase(),h,j=this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch);if((n!=="none")&&i._isValid()){h=i._clone();h._normalize();h._clip(j);if(!h._isValid()){return}this.beginUpdate();if(!this._multipleRangesAllowed()){this.clear()}else{if(o||m){if(m){this._removedCells._clear();this._removedCells._addFrom(this._addedDuringCurTransactionCells)}}else{this.clear()}}switch(n){case"singlecell":case"singlecolumn":case"singlerow":h=(k===null)?new b.grid.cellInfoRange(h.topLeft(),h.topLeft()):new b.grid.cellInfoRange(k,k);break}h._extend(this._extend_rules[n][l],j);this.doRange(h,true);this.endUpdate()}};g.prototype._ensureSelection=function(){var h=this._wijgrid._view(),l=-2,m;for(var k=0;k<this._selectedCells.length();k++){var j=this._selectedCells.item(k);if(j._isRendered()){if(l!==j.rowIndex()){m=j.row();l=j.rowIndex()}this.selectCell(j,m,h,true)}}};g.prototype._ensureSelectionInRow=function(j){var l=this;var i=this._wijgrid._view();if(i._isRowRendered(j)>=0){var k=i._getRowInfoBySketchRowIndex(j,false),h=this.selectedCells();if(k&&h&&(h.length()>0)){k.$rows.children("td, th").each(function(o,n){var m=h.indexOf(o,j);if(m>=0){l.selectCell(h.item(m),k,i,true)}})}}};g.prototype.doSelection=function(){var r=this._wijgrid._view(),n,p,m,s,q,o,l=b.grid.renderState,j,h,k=-1;for(n=0,p=this._removedCells.length();n<p;n++){m=this._removedCells.item(n);if(this._addedCells.indexOf(m)<0){if(k!==m.rowIndex()){j=m.row();k=m.rowIndex()}this.selectCell(m,j,r,false);this._selectedCells._remove(m);this._addedDuringCurTransactionCells._remove(m)}else{this._removedCells._removeAt(n);n--;p--}}k=-1;for(n=0,p=this._addedCells.length();n<p;n++){m=this._addedCells.item(n);o=this._selectedCells.indexOf(m);if(o<0){if(k!==m.rowIndex()){j=m.row();k=m.rowIndex()}this.selectCell(m,j,r,true);this._selectedCells._insertUnsafe(m,~o);this._addedDuringCurTransactionCells._add(m)}else{this._addedCells._removeAt(n);n--;p--}}};g.prototype.selectCell=function(k,o,j,i){if(k._isRendered()){var l=this._wijgrid._viewPortBounds();var h=j.getCell(k.cellIndexAbs(),k.rowIndexAbs());if(h){var n=f(h),m=j._changeCellRenderState(n,b.grid.renderState.selected,i===true);this._wijgrid.cellStyleFormatter.format(n,k.cellIndex(),k.column(),o,m)}}};g.prototype.doRange=function(m,s){var j=m.topLeft().cellIndex(),p=m.topLeft().rowIndex(),i=m.bottomRight().cellIndex(),o=m.bottomRight().rowIndex(),l,u,k,q,n=this._wijgrid._view(),h,t,r=this._wijgrid._viewPortBounds();if(s){l=this._addedCells.length();t=this._wijgrid._rows();for(u=p;u<=o;u++){h=n._getRowInfoBySketchRowIndex(u);if(h.type&b.grid.rowType.data){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,u);if(l===0){this._addedCells._appendUnsafe(q)}else{this._addedCells._add(q)}}}}}else{l=this._removedCells.length();for(u=p;u<=o;u++){for(k=j;k<=i;k++){q=new b.grid.cellInfo(k,u);if(l===0){this._removedCells._appendUnsafe(q)}else{this._removedCells._add(q)}}}}};return g})();c.selection=d;var e=(function(){function g(h){this._clear=function(){this._list.length=0};if(!h){throw"invalid arguments"}this._wijgrid=h;this._list=[]}g.prototype.item=function(h){return this._list[h]};g.prototype.length=function(){return this._list.length};g.prototype.indexOf=function(i,n){if(arguments.length===1){n=i.rowIndex();i=i.cellIndex()}var j=0,h=this._list.length-1,l,m,k;while(j<=h){l=j+((h-j)>>1);m=this._list[l];k=m.rowIndex()-n;if(k===0){k=m.cellIndex()-i}if(k<0){j=l+1}else{if(k>0){h=l-1}else{return l}}}return ~j};g.prototype.toString=function(){var k="",j,h;for(j=0,h=this._list.length;j<h;j++){k+=this._list[j].toString()+"\n"}return k};g.prototype._add=function(i){var h=this.indexOf(i);if(h<0){this._list.splice(~h,0,i);i._setGridView(this._wijgrid);return true}return false};g.prototype._addFrom=function(j){if(j){var l=j.length(),h=this._list.length,k;if(h===0){this._list.length=l;for(k=0;k<l;k++){this._list[k]=j.item(k);this._list[k]._setGridView(this._wijgrid)}}else{for(k=0;k<l;k++){this._add(j.item(k))}}}};g.prototype._appendUnsafe=function(h){this._list[this._list.length]=h;h._setGridView(this._wijgrid)};g.prototype._insertUnsafe=function(i,h){this._list.splice(h,0,i)};g.prototype._remove=function(i){var h=this.indexOf(i);if(h>=0){this._list.splice(h,1);return true}return false};g.prototype._removeAt=function(h){this._list.splice(h,1)};g.prototype._getColumnsIndicies=function(){var m=[],h=this._list.length,j,l,k;if(h){j=[];for(l=0;l<h;l++){j[this._list[l].cellIndex()]=1}h=j.length;k=0;for(l=0;l<h;l++){if(j[l]){m[k++]=l}}}return m};g.prototype._getSelectedRowsIndicies=function(){var m=[],h=this._list.length,l,k,j;if(h){l=[];for(k=0;k<h;k++){l[this._list[k].rowIndex()]=1}h=l.length;j=0;for(k=0;k<h;k++){if(l[k]){m[j++]=k}}}return m};g.prototype._rectangulate=function(){var h=this._list.length,m=4294967295,o=4294967295,k=0,n=0,l,j;if(h){for(l=0;l<h;l++){j=this._list[l];m=Math.min(m,j.cellIndex());o=Math.min(o,j.rowIndex());k=Math.max(k,j.cellIndex());n=Math.max(n,j.rowIndex())}return new b.grid.cellInfoRange(new b.grid.cellInfo(m,o),new b.grid.cellInfo(k,n))}return null};return g})();c.cellInfoOrderedCollection=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){this._gap_to_start=10;this._inProgress=false;this._additionalEventsAttached=false;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".selectionui";this._addedCells=new b.grid.cellInfoOrderedCollection(this._wijgrid);this._view=this._wijgrid._view();this._rootElement=this._view.focusableElement();this._visLeavesLen=this._wijgrid._field("visibleLeaves").length;this._rootElement.bind(this._eventKey("mousedown"),e.proxy(this._onGridMouseDown,this))}f.prototype.dispose=function(){this._rootElement.unbind(this._eventKey("mousedown"),this._onGridMouseDown);this._detachAdditionalEvents()};f.prototype._onGridMouseDown=function(j){if(!this._wijgrid._canInteract()||this._wijgrid.options.selectionMode.toLowerCase()==="none"){return}var l=this._view.getVisibleContentAreaBounds(),i={x:j.pageX,y:j.pageY},h=((j.target&&(j.target).tagName!==undefined)?(j.target).tagName.toLowerCase():undefined),g=e(j.target),k=b.grid.wijgrid.CSS;if((!h||g.is("td."+k.TD+", th."+k.TD+", div."+k.cellContainer))&&(i.x>l.left&&i.x<l.left+l.width)&&(i.y>l.top&&i.y<l.top+l.height)){this._attachAdditionalEvents();this._startPos=i;this._startCellInfo=this._coordToDataCellInfo(this._startPos)}};f.prototype._onDocumentMouseMove=function(h){if(!this._startCellInfo||!this._startCellInfo._isValid()){return}var u={x:h.pageX,y:h.pageY},z,q,w,m,r,v,p,g,x,y,o,n,j,k,t=this._wijgrid._view(),s=this._wijgrid._rows(),l=b.grid.renderState;if(!this._inProgress){this._inProgress=(Math.abs(this._startPos.x-u.x)>this._gap_to_start)||(Math.abs(this._startPos.y-u.y)>this._gap_to_start)}if(this._inProgress){z=this._coordToDataCellInfo(u);if(!z._isValid()){return}this._endCellInfo=z;w=new b.grid.cellInfoRange(this._startCellInfo,this._endCellInfo);w._normalize();w._clip(this._wijgrid._getDataCellsRange(c.dataRowsRangeMode.sketch));if(w._isValid()&&!w.isEqual(this._prevMouseMoveRange)){this._prevMouseMoveRange=w;m=new b.grid.cellInfoOrderedCollection(this._wijgrid);r=w.bottomRight().rowIndex();v=w.bottomRight().cellIndex();for(p=w.topLeft().rowIndex();p<=r;p++){n=t._getRowInfoBySketchRowIndex(p);if(n.type&b.grid.rowType.data){for(g=w.topLeft().cellIndex();g<=v;g++){m._appendUnsafe(new b.grid.cellInfo(g,p))}}}j=-1;for(x=0,y=this._addedCells.length();x<y;x++){q=this._addedCells.item(x);if(m.indexOf(q)<0){if(this._wijgrid.selection().selectedCells().indexOf(q)<0){g=this._view.getCell(q.cellIndexAbs(),q.rowIndexAbs());if(g){if(j!==q.rowIndex()){n=q.row();j=q.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,false);this._wijgrid.cellStyleFormatter.format(o,q.cellIndex(),q.column(),n,k)}}this._addedCells._removeAt(x);x--;y--}}j=-1;for(x=0,y=m.length();x<y;x++){q=m.item(x);if(this._addedCells.indexOf(q)<0&&this._wijgrid.selection().selectedCells().indexOf(q)<0){if(this._addedCells._add(q)){g=this._view.getCell(q.cellIndexAbs(),q.rowIndexAbs());if(g){if(j!==q.rowIndex()){n=q.row();j=q.rowIndex()}o=e(g);k=t._changeCellRenderState(o,l.selected,true);this._wijgrid.cellStyleFormatter.format(o,q.cellIndex(),q.column(),n,k)}}}}}}};f.prototype._onDocumentMouseUp=function(o){this._detachAdditionalEvents();if(this._inProgress){this._inProgress=false;if(this._prevMouseMoveRange&&this._prevMouseMoveRange._isValid()){this._wijgrid._changeCurrentCell(o,this._endCellInfo,{changeSelection:false,setFocus:false});if(!o.shiftKey||(!this._wijgrid.selection()._multipleRangesAllowed()&&this._wijgrid.options.selectionMode.toLowerCase()!=="singleRange")){this._wijgrid.selection()._startNewTransaction(this._startCellInfo)}this._wijgrid.selection().beginUpdate();this._wijgrid.selection()._selectRange(this._prevMouseMoveRange,o.shiftKey,o.ctrlKey,b.grid.cellRangeExtendMode.none,this._endCellInfo);this._wijgrid.selection().endUpdate();var q=this._wijgrid._view(),j=-1,h,k=b.grid.renderState;for(var m=0,n=this._addedCells.length();m<n;m++){var l=this._addedCells.item(m);if(this._wijgrid.selection().selectedCells().indexOf(l)<0){var r=q.getCell(l.cellIndexAbs(),l.rowIndexAbs());if(r!==null){if(j!==l.rowIndex()){h=l.row();j=l.rowIndex()}var p=e(r),g=q._changeCellRenderState(p,k.selected,false);this._wijgrid.cellStyleFormatter.format(p,l.cellIndex(),l.column(),h,g)}}}this._addedCells._clear();this._startCellInfo=this._endCellInfo=this._prevMouseMoveRange=null;return false}}};f.prototype._attachAdditionalEvents=function(){if(!this._additionalEventsAttached){try{this._view.toggleDOMSelection(false);e(document).bind(this._eventKey("mousemove"),e.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),e.proxy(this._onDocumentMouseUp,this))}finally{this._additionalEventsAttached=true}}};f.prototype._detachAdditionalEvents=function(){if(this._additionalEventsAttached){try{this._view.toggleDOMSelection(true);e(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp)}finally{this._additionalEventsAttached=false}}};f.prototype._eventKey=function(g){return b.grid.stringFormat(this._evntFormat,g)};f.prototype._coordToDataCellInfo=function(g){var k=0,o=this._visLeavesLen-1,n=0,h=-1,i,p=new b.grid.rowAccessor(this._view,2,0,0),j,m,l,q;while(k<=o){n=((o-k)>>1)+k;i=b.grid.bounds(this._view.getHeaderCell(n));if(!i){m=p.item(0);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,n))}if(!i){break}if(g.x<i.left){o=n-1}else{if(g.x>i.left+i.width){k=n+1}else{h=n;break}}}if(h===-1){return b.grid.cellInfo.outsideValue}p=new b.grid.rowAccessor(this._view,0,0,0);j=-1;k=0;o=p.length()-1;n=0;while(k<=o){n=((o-k)>>1)+k;m=p.item(n);i=b.grid.bounds(b.grid.rowAccessor.getCell(m,0));if(g.y<i.top){o=n-1}else{if(g.y>i.top+i.height){k=n+1}else{j=n;break}}}if(j===-1){return b.grid.cellInfo.outsideValue}q=new b.grid.cellInfo(h,j,this._wijgrid,true);return q};return f})();c.uiSelection=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function i(k,n,m,l){this._view=k;this._scope=n;this._offsetBottom=l;this._offsetTop=m}i.prototype.item=function(l){var k=this.length();return(l>=0&&l<k)?this._view.getJoinedRows(l+this._offsetTop,this._scope):null};i.prototype.length=function(){var m=this._view.getJoinedTables(true,0),k=0,l;if(l=m[0]){k=l.getSectionLength(this._scope)}if(l=m[1]){k+=l.getSectionLength(this._scope)}k-=this._offsetTop+this._offsetBottom;if(k<0){k=0}return k};i.iterateCells=function g(q,s,k){if(q&&s){var n=0,m,o,p,l,r,t;for(m=0,o=q.length;m<o;m++){p=q[m];if(p){for(l=0,r=p.cells.length;l<r;l++){t=s(p.cells[l],n++,k);if(t!==true){return}}}}}};i.getCell=function h(k,n){var l,m;if(k&&(l=k[0])){m=l.cells.length;if(n<m){return l.cells[n]}n-=m;if(l=k[1]){m=l.cells.length;if(n<m){return l.cells[n]}}}return null};i.getCell$=function f(l,k){var m=b.grid.rowAccessor.getCell(l,k);return(m)?e(m):e([])};i.cellsCount=function j(k){var m=0,l;if(k&&(l=k[0])){m=l.cells.length;if(l=k[1]){m+=l.cells.length}}return m};return i})();d.rowAccessor=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var g=jQuery;(function(h){h._map=[];h.error=0;h.continueEditing=1;h.success=2;h.cancel=4;h.notEdited=8})(d.updateCellResult||(d.updateCellResult={}));var c=d.updateCellResult;var f=(function(){function h(){this._timeout=25}h.prototype.cellEditStart=function(i,p,l){var q=false,o=i._view(),j,m,n,k;if(p._isValid()&&!p._isEdit()&&(p.column().dataIndex>=0)){j=p.row();if(j){k=j.type;if(k&b.grid.rowType.data){m={cell:p,event:l,handled:false};if(q=(i._trigger("beforeCellEdit",null,m)||(i.options.editingMode==="row"))){if(!m.handled){q=this._defaultBeforeCellEdit(i,m)}}if(q){p._isEdit(true);if(i._showRowHeader()){n=g((j.$rows[0]).cells[0]).children("div."+b.grid.wijgrid.CSS.cellContainer);if(n.length){n.empty();n.append(g("<div>&nbsp;</div>").addClass(i.options.wijCSS.icon+" "+i.options.wijCSS.iconPencil))}}}}}}return q};h.prototype.updateCell=function(i,r,m){var t;if(r&&!r._isEdit()){return c.success|c.notEdited}if(!r||!r._isValid()||!(t=r.row())||!(t.type&b.grid.rowType.data)){return c.error}if((m&&(m.which===b.getKeyCodeEnum().ESCAPE))||(!r._isRendered())){return c.success|c.cancel}var u=c.success,l=r.column();var k={cell:r,value:undefined};if(i._trigger("beforeCellUpdate",null,k)||(i.options.editingMode==="row")){if(k.value===undefined){k.value=this._getCellValue(i,r)}var p=k.value,o=r.value();try{var j=this._getHTMLInputElementType(r);if(b.grid.HTML5InputSupport.isExtendSupportRequired(j)){k.value=b.grid.HTML5InputSupport.parse(k.value,j);k.value=b.grid.HTML5InputSupport.extend(o,k.value,j)}else{k.value=i.parse(r.column(),k.value)}p=k.value}catch(n){k.value=p}if(b.grid.getDataType(l)==="datetime"){if(p instanceof Date){p=p.getTime()}if(o instanceof Date){o=o.getTime()}}if(p!==o){try{r.value(k.value)}catch(n){var s={cell:r,value:k.value};u=c.error;i._trigger("invalidCellValue",null,s)}if(u&c.success){var q={cell:r};i._trigger("afterCellUpdate",null,q)}}}else{return c.continueEditing}return u};h.prototype.cellEditEnd=function(k,i,m){var l=i.row(),j={cell:i,event:m,handled:false};i._isEdit(false);if(i._isRendered()){k._trigger("afterCellEdit",null,j);if(!j.handled){this._defaultAfterCellEdit(k,j)}if(k._showRowHeader()){g((l.$rows[0]).cells[0]).children("div."+b.grid.wijgrid.CSS.cellContainer).html("&nbsp;")}}};h.prototype._defaultBeforeCellEdit=function(i,q){var k=q.cell.column(),v=false,u,s;if(k.dataIndex>=0){var t=q.cell.value(),l=b.getKeyCodeEnum(),j=b.grid.HTML5InputSupport.getDefaultInputType(i._isMobileEnv(),k),n=i._allowCellEditing(),p=false;v=true;try{u=q.cell.container();if(b.grid.getDataType(k)==="boolean"){var r=u.children("span");if(p=!!(r.length&&r.prop("disabled"))){g.data(r[0],"serverSideCheckbox",true);r.prop("disabled",false)}s=u.find(":checkbox");if(p||!n){s.prop("disabled",false)}if(q.event&&q.event.type==="keypress"){s.one("keyup",function(w){if(w.which===l.SPACE){w.preventDefault();(s[0]).checked=!t}})}}else{s=g("<input type='"+j+"' />").css("ime-mode",k.imeMode||"auto").addClass(b.grid.wijgrid.CSS.inputMarker).addClass("wijmo-wijinput "+i.options.wijCSS.stateFocus).bind("keydown",i,g.proxy(this._checkBoxOrInputKeyDown,this));s.bind(((g.support).selectstart?"selectstart":"mousedown"),function(w){w.stopPropagation()});if(q.event&&(q.event.type==="keydown")&&(q.event.which!==113)){}else{switch(b.grid.getDataType(k)){case"currency":case"number":if(t!==null){s.val(t);break}case"datetime":if(b.grid.HTML5InputSupport.isExtendSupportRequired(j)){s.val(b.grid.HTML5InputSupport.toStr(t,j));break}default:s.val(i.toStr(k,t));break}}u.empty().append(s);if(n){var m=s.val().length;if(j==="text"){new b.grid.domSelection(s[0]).setSelection({start:m,end:m})}}}if(n){s.focus();setTimeout(function(){s.focus()},this._timeout*2)}}catch(o){alert(o.message);v=false}}return v};h.prototype._defaultAfterCellEdit=function(i,m){var q=m.cell.column(),t=false,r,s,p,j,o;if(q.dataIndex>=0){t=true;o=i._view();try{r=m.cell.container();s=i.toStr(q,m.cell.value());j=o._getRowInfoBySketchRowIndex(m.cell.rowIndex());if(b.grid.getDataType(q)==="boolean"){var n=r.children("span"),k=n.length&&g.data(n[0],"serverSideCheckbox");p=r.find(":checkbox");p.prop("checked",s==="true");if(k){n.prop("disabled",true);p.prop("disabled",true)}}else{i.cellFormatter.format(g(m.cell.tableCell()),r,q,s,j)}}catch(l){alert("defaultAfterCellEdit: "+l.message);t=false}}return t};h.prototype._checkBoxOrInputKeyDown=function(j){var i=b.getKeyCodeEnum();if(j.which===i.ENTER){var k=j.data;if(k){k._endEditInternal(j);return false}}};h.prototype._getCellValue=function(j,k){var l=k.container().find(":input:first"),i=null;if(l.length){i=(l.attr("type")==="checkbox")?(l[0]).checked:l.val()}return i};h.prototype._getHTMLInputElementType=function(i){return i.container().find(":input:first").attr("type")};return h})();d.cellEditorHelper=f;var e=(function(){function h(j,i){this.mGrid=j;this.mWrapper=g("<div />");if(this.mGrid._allowCellEditing()){this.mHiddenElement=g('<input type="text" />').keydown(g.proxy(this._onKeyDown,this))}else{this.mHiddenElement=g('<input type="button" />')}this.mHiddenElement.css({position:"relative",border:0,padding:0,margin:0,width:1,height:1,"font-size":b.grid.isMobileSafari()?"0em":"1px"});this.mFakeFocusable=g('<input type="button" />').css({position:"relative",width:1,height:1,border:0,padding:0,margin:0});this.mWrapper.append(this.mHiddenElement).append(this.mFakeFocusable).css({position:"absolute",width:"0px",height:"0px",overflow:"hidden","z-index":999999});i.append(this.mWrapper)}h.prototype.dispose=function(){if(this.mWrapper){try{this.mWrapper.remove()}catch(i){}finally{this.mWrapper=null;this.mHiddenElement=null;this.mGrid=null}}};h.prototype.focus=function(k,i){if(k&&k.length){var j=k.offset();this.mWrapper.offset({top:j.top,left:j.left});this.mFakeFocusable.focus();this.mHiddenElement.css("ime-mode",(i&&i.imeMode)||"auto").focus()}};h.prototype.isHiddenInput=function(i){return i&&((i[0]===this.mHiddenElement[0])||(i[0]===this.mFakeFocusable[0]))};h.prototype.canHandle=function(i){return(this.mGrid._allowCellEditing()&&this.isPrintableKeyCode(i))};h.prototype.isPrintableKeyCode=function(j){var i=j.keyCode;return !j.ctrlKey&&!j.altKey&&((i>=65&&i<=90)||((i>=48&&i<=57)||(i>=96&&i<=105))||(i>=186&&i<=192)||(i>=220&&i<=222||i===219)||(i>=106&&i<=111)||(i===32)||(i===61)||(i===173)||(i===229||j.keyCode===0))};h.prototype._onKeyDown=function(j){if(this.canHandle(j)){this.mGrid._beginEditInternal(j)}else{var i=b.getKeyCodeEnum();if(j.keyCode===i.ESCAPE){j.preventDefault()}}};return h})();d.keyDownEventListener=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){}f._div=document.createElement("div");f.prototype.format=function(m,t,j,o,l){var g=j.owner,n=b.grid.rowType,h=b.grid.renderStateEx;if(l.type&n.footer){if(j.aggregate&&(j.aggregate!=="none")){o=b.grid.stringFormat(j.footerText||"{0}",j._totalsValue||"")}else{o=j.footerText||j._footerTextDOM||""}}if((l.type&n.groupHeader)&&(j.visLeavesIdx==(g.options.showRowHeader?1:0))){var p=g._groupedColumns()[l._extInfo.groupLevel-1],v;if(p&&(v=p.groupInfo)&&(v.outlineMode!=="none")){var k=b.grid.wijgrid.CSS,u=g.options.wijCSS,w=(l._extInfo.state&h.collapsed)?v.collapsedImageClass||u.iconArrowRight:v.expandedImageClass||u.iconArrowRightDown;o='<div class="'+u.icon+" "+w+" "+k.groupToggleVisibilityButton+" "+u.wijgridGroupToggleVisibilityButton+'">&nbsp;</div>'+o}}var x=true,r=null,i={$cell:m,$container:t,column:j,formattedValue:o,row:l,afterDefaultCallback:null},q=true;if(((l.type&n.data)||(l.type===n.groupFooter||l.type===n.groupHeader))&&g._allowVirtualScrolling()){var s=(g._view()).getDefaultRowHeight();t.css({overflow:"hidden",height:s})}if(e.isFunction(j.cellFormatter)){x=!j.cellFormatter(i)}if(x){switch(l.type&~n.dataAlt){case n.filter:r=this._formatFilterRowCell;break;case n.data:r=this._formatDataRowCell;break;default:r=this._formatDefRowCell}if(r){q=r.call(this,i);if(e.isFunction(i.afterDefaultCallback)){i.afterDefaultCallback(i)}}}return(q===false)?false:true};f.prototype._formatFilterRowCell=function(g){var h=g.column.owner,i=b.grid.wijgrid.CSS,j=h.options.wijCSS;g.$container.addClass(j.widget+" "+j.stateDefault);if((g.column.dataIndex>=0)&&!g.column.isBand&&g.column.showFilter){g.$container.html('<table cellPadding="0" cellSpacing="0" class="'+i.filter+" "+j.wijgridFilter+" "+j.cornerAll+'"><tr><td style="width:100%"><input type="text" class="'+i.filterInput+" "+j.wijgridFilterInput+'" style="width:100%" /></td><td class="'+i.filterTrigger+" "+j.wijgridFilterTrigger+" "+j.cornerRight+" "+j.stateDefault+'"><span class="'+j.icon+" "+j.iconArrowDown+'"></span></td></tr></table>')}else{g.$container.html("&nbsp;")}};f.prototype._formatDataRowCell=function(i){var k=i.column,j=k.owner,h=b.grid.getDataType(k),g=true;if(k.clientType==="c1btnfield"){this._c1btnFieldCellFormatter(i)}else{if(k.clientType==="c1commandbtnfield"){this._c1commandBtnFieldCellFormatter(i)}else{this._defFieldCellFormatter(i)}}return g};f.prototype._formatDefRowCell=function(g){this._updateHTML(g)};f.prototype._defFieldCellFormatter=function(g){if(b.grid.getDataType(g.column)==="boolean"){this._boolCellFormatter(g)}else{this._dataCellFormatter(g)}};f.prototype._boolCellFormatter=function(j){var k=j.column.owner,l=k._allowCellEditing()&&(j.column.readOnly!==true),i,m,g=b.grid.rowType,h=b.getKeyCodeEnum(),n=e('<input class="'+b.grid.wijgrid.CSS.inputMarker+'" type="checkbox" />');if(!l){n.prop("disabled",true)}if(k.parse(j.column,k._dataViewWrapper.getValue(j.row.data,j.column.dataKey))===true){n.prop("checked","checked")}j.$container.empty().append(n);if(l){j.$container.children("input").bind("mousedown",function(o){i=j.$container.parent()[0],m=k.currentCell();if(m.tableCell()!==i){k._onClick({target:i})}if(!m._isEdit()){k.beginEdit()}}).bind("keydown",function(o){if(o.which===h.ENTER){k._endEditInternal(o);return false}})}};f.prototype._dataCellFormatter=function(g){this._updateHTML(g)};f.prototype._c1btnFieldCellFormatter=function(h){var i=h.column,g={column:h.column,row:h.row};this._buttonFactory(h.$container,i.command,g,null)};f.prototype._c1commandBtnFieldCellFormatter=function(i){var k=i.column,j=k.owner,h={column:i.column,row:i.row},g=this;if(i.row.state&b.grid.renderState.editing){if(k.showEditButton){this._buttonFactory(i.$container,k.updateCommand,h,function(m,l){j.updateRow()});i.$container.append(document.createTextNode("\u00A0"));this._buttonFactory(i.$container,k.cancelCommand,h,function(m,l){j.cancelRowEditing()})}}else{if(k.showEditButton){this._buttonFactory(i.$container,k.editCommand,h,function(m,l){j.editRow(h.row.dataItemIndex)})}if(k.showDeleteButton){if(k.showEditButton){i.$container.append(document.createTextNode("\u00A0"))}this._buttonFactory(i.$container,k.deleteCommand,h,function(m,l){j.deleteRow(h.row.dataItemIndex)})}}i.$container.addClass("wijmo-wijgrid-innercell-command")};f.prototype._updateHTML=function(h){var g=h.$container[0];if(g.firstChild){while(g.firstChild){g.removeChild(g.firstChild)}}if(h.column.encodeHtml){if(b.grid.cellFormatterHelper._div.textContent!=undefined){b.grid.cellFormatterHelper._div.textContent=h.formattedValue||""}else{b.grid.cellFormatterHelper._div.innerText=h.formattedValue||""}}else{b.grid.cellFormatterHelper._div.innerHTML=h.formattedValue||"&nbsp;"}while(b.grid.cellFormatterHelper._div.firstChild){g.appendChild(b.grid.cellFormatterHelper._div.firstChild)}};f.prototype._buttonFactory=function(h,l,j,k){var i=e.extend({},{text:l.text,iconClass:l.iconClass,disabled:j.column.owner.options.disabled,click:function(n){var o=true;if(e.isFunction(l.click)){var m=l.click.apply(this,[n,j]);o=(m!==false)&&!n.isDefaultPrevented()}if(o&&k){k.apply(this,[n,j])}n.preventDefault()}});var g=e("<div />");h.append(g);switch(j.column.buttonType){case"link":g.wijgridcommandlink(i);break;case"imageButton":g.wijgridcommandimagebutton(i);break;case"button":g.wijgridcommandbutton(i);break;case"image":g.wijgridcommandimage(i);break;default:throw"Unknown buttonType"}};return f})();d.cellFormatterHelper=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){this.MIN_WIDTH=5;this._elements=[];this._gap=10;this._step=1;this._inProgress=false;this._hoveredField=null;this._startLocation=null;this._lastLocation=null;this._proxy=null;this._wijgrid=g;this._evntFormat="{0}."+this._wijgrid.widgetName+".resizer"}f.prototype.addElement=function(g){if(g&&g.element){g.element.bind(this._eventKey("mousemove"),d.proxy(this._onMouseMove,this)).bind(this._eventKey("mousedown"),d.proxy(this._onMouseDown,this)).bind(this._eventKey("mouseout"),d.proxy(this._onMouseOut,this));this._elements.push(g)}};f.prototype.dispose=function(){var g=this;d.each(this._elements,function(h,i){i.element.unbind(g._eventKey("mousemove"),g._onMouseMove).unbind(g._eventKey("mousedown"),g._onMouseDown).unbind(g._eventKey("mouseout"),g._onMouseOut)});this._detachDocEvents()};f.prototype.inProgress=function(){return this._inProgress};f.prototype._onMouseMove=function(h){if(!this._inProgress){var g=this._getFieldByPos({x:h.pageX,y:h.pageY});if(g&&g._canSize()&&this._wijgrid._canInteract()){g.element.css("cursor","e-resize");this._hoveredField=g;h.stopPropagation()}else{this._onMouseOut(h)}}};f.prototype._onMouseOut=function(g){if(!this._inProgress){if(this._hoveredField){this._hoveredField.element.css("cursor","");this._hoveredField=null}}};f.prototype._onMouseDown=function(i){this._hoveredField=this._getFieldByPos({x:i.pageX,y:i.pageY});if(this._hoveredField&&(this._hoveredField)._canSize()&&this._wijgrid._canInteract()){try{var j=this._wijgrid.options.wijCSS,g=b.grid.wijgrid.CSS;this._hoveredField.element.css("cursor","");this._docCursor=document.body.style.cursor;document.body.style.cursor="e-resize";this._startLocation=this._lastLocation=b.grid.bounds(this._hoveredField.element);this._proxy=d('<div class="'+g.resizingHandle+" "+j.wijgridResizingHandle+" "+j.stateHighlight+'">&nbsp;</div>');var h=this._wijgrid._view().getVisibleAreaBounds(true);this._proxy.css({left:i.pageX,top:this._startLocation.top,height:h.height+h.top-this._startLocation.top});d(document.body).append(this._proxy)}finally{this._attachDocEvents();this._inProgress=true;i.stopPropagation()}}};f.prototype._onDocumentMouseMove=function(h){var g=this._step*Math.round((h.pageX-this._lastLocation.left)/this._step);this._lastLocation={left:this._lastLocation.left+g,top:h.pageY,width:undefined,height:undefined};this._proxy.css("left",this._lastLocation.left)};f.prototype._onDocumentMouseUp=function(g){try{document.body.style.cursor=this._docCursor;this._proxy.remove();if(this._startLocation!==this._lastLocation){this._wijgrid._fieldResized(this._hoveredField,this._startLocation.width,Math.max(this._lastLocation.left-this._startLocation.left,this.MIN_WIDTH))}}finally{this._hoveredField=null;this._proxy=null;this._detachDocEvents();this._inProgress=false}};f.prototype._onSelectStart=function(g){g.preventDefault()};f.prototype._attachDocEvents=function(){if(!this._inProgress){d(document).bind(this._eventKey("mousemove"),d.proxy(this._onDocumentMouseMove,this)).bind(this._eventKey("mouseup"),d.proxy(this._onDocumentMouseUp,this));if(d.fn.disableSelection){d(document.body).disableSelection()}if("onselectstart" in document){d(document.body).bind("selectstart",this._onSelectStart)}}};f.prototype._detachDocEvents=function(){if(this._inProgress){d(document).unbind(this._eventKey("mousemove"),this._onDocumentMouseMove).unbind(this._eventKey("mouseup"),this._onDocumentMouseUp);if(d.fn.enableSelection){d(document.body).enableSelection()}if("onselectstart" in document){d(document.body).unbind("selectstart",this._onSelectStart)}}};f.prototype._getFieldByPos=function(h){var l,g,k,m,j;for(l=0,g=this._elements.length;l<g;l++){k=this._elements[l];m=b.grid.bounds(k.element);j=b.grid.isOver(h.y,h.x,m.top,m.left+m.width-this._gap,m.height,this._gap);if(j){return k}}return null};f.prototype._eventKey=function(g){var h=(this._wijgrid._isTouchEnv())?"wij":"";return h+b.grid.stringFormat(this._evntFormat,g)};return f})();c.uiResizer=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._scope_guid="scope_"+b.grid.getUID();this._dragEnd=false;this.mZIndex=1000;var h=b.grid.wijgrid.CSS;this._wijgrid=g;this._wijCSS=this._wijgrid.options.wijCSS;this._wrapHtml='<div class="'+this._wijCSS.widget+" "+h.wijgrid+" "+this._wijCSS.wijgrid+" "+this._wijCSS.content+" "+this._wijCSS.cornerAll+'"><table class="'+h.root+" "+h.table+" "+this._wijCSS.wijgridTable+'"><tr class="'+h.headerRow+" "+this._wijCSS.wijgridHeaderRow+'"></tr></table></div>'}f.prototype.attachGroupArea=function(h){var i,g=this;if(!e.ui||!(e.ui).droppable||!(e.ui).draggable){return}h.droppable({scope:this._scope_guid,tolerance:"pointer",greedy:true,accept:function(j){if(g._wijgrid.options.allowColMoving){i=g._getWijFieldInstance(j);if(i){if((i instanceof e.wijmo.c1groupedfield)&&(i.options.groupedIndex===g._wijgrid._groupedColumns().length-1)){return false}return !i.options.isBand&&(i.options.groupedIndex===undefined||(i instanceof e.wijmo.c1groupedfield))}}return false},drop:function(k,j){if(!g._isInElement(k,j.draggable)&&(i=g._getWijFieldInstance(j.draggable))){g._dragEnd=true}},over:function(l,k){var j=g._wijgrid._field("groupedWidgets").length;g._dropTargetRedirected=(j>0);g._droppableWijField=(j>0)?g._wijgrid._field("groupedWidgets")[j-1]:h;h.data("thisDroppableWijField",g._droppableWijField)},out:function(k,j){if(g._droppableWijField===h.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.attach=function(k){var h,j,i=b.grid.wijgrid.CSS,g=this;if(!(e.ui).droppable||!(e.ui).draggable){return}if(!k||!(h=k.element)){return}h.draggable({helper:function(m){var l;if(k instanceof e.wijmo.c1groupedfield){l=h.clone()}else{l=h.clone().wrap(g._wrapHtml).width(h.width()).height(h.height()).closest("."+i.wijgrid)}l.addClass(i.dndHelper+" "+g._wijCSS.wijgridDndHelper).css("z-index",g.mZIndex=b.grid.getZIndex(g._wijgrid.outerDiv,1000));return l},appendTo:"body",scope:g._scope_guid,drag:function(n,m){g._hideArrows();if(g._droppableWijField&&!g._isInElement(n,h)){var l=g._droppableWijField.element;if(!l){l=(g._droppableWijField)}g._showArrows(l,g._getPosition(k,g._droppableWijField,n,m))}},start:function(q,p){if(g._wijgrid._canInteract()&&g._wijgrid.options.allowColMoving&&(g._wijgrid._UIResizer()==null||!g._wijgrid._UIResizer().inProgress())){var o=k.options,m=k.options.travIdx,n=(k instanceof e.wijmo.c1groupedfield),l=n?"groupArea":"columns";if(n){o=b.grid.search(g._wijgrid.columns(),function(r){return r.options.travIdx===m});o=(!o.found)?b.grid.getColumnByTravIdx(g._wijgrid.options.columns,m).found:o.found.options}if(k._canDrag()&&g._wijgrid._trigger("columnDragging",null,{drag:o,dragSource:l})){g._wijgrid._trigger("columnDragged",null,{drag:o,dragSource:l});return true}}return false},stop:function(m,l){g._hideArrows();try{if(g._dragEnd){if(!g._droppableWijField.element){g._wijgrid._handleDragnDrop(k.options.travIdx,-1,"left",k instanceof e.wijmo.c1groupedfield,true)}else{g._wijgrid._handleDragnDrop(k.options.travIdx,g._droppableWijField.options.travIdx,g._getPosition(k,g._droppableWijField,m,l),k instanceof e.wijmo.c1groupedfield,g._droppableWijField instanceof e.wijmo.c1groupedfield)}}}finally{g._droppableWijField=null;g._dragEnd=false}}}).droppable({hoverClass:g._wijCSS.stateHover,scope:g._scope_guid,tolerance:"pointer",greedy:true,accept:function(l){if(g._wijgrid.options.allowColMoving){if(h[0]!==l[0]){j=g._getWijFieldInstance(l);if(j){return j._canDropTo(k)}}}return false},drop:function(m,l){if(j=g._getWijFieldInstance(l.draggable)){g._dragEnd=true}},over:function(m,l){g._dropTargetRedirected=false;g._droppableWijField=k;h.data("thisDroppableWijField",g._droppableWijField)},out:function(m,l){if(g._droppableWijField===k.element.data("thisDroppableWijField")){g._droppableWijField=null}}})};f.prototype.detach=function(h){var g;if(h&&(g=h.element)){if(g.data("ui-draggable")){g.draggable("destroy")}if(g.data("ui-droppable")){g.droppable("destroy")}}};f.prototype.dispose=function(){if(this._$topArrow){this._$topArrow.remove();this._$topArrow=null}if(this._$bottomArrow){this._$bottomArrow.remove();this._$bottomArrow=null}};f.prototype._getWijFieldInstance=function(g){var h=b.grid.widgetName(g);if(!h){throw"widgetName is undedined"}return g.data(h)};f.prototype._showArrows=function(h,g){this._topArrow().css("z-index",this.mZIndex).show().position({my:"center",at:g+" top",of:h,collision:"none"});this._bottomArrow().css("z-index",this.mZIndex).show().position({my:"center",at:g+" bottom",of:h,collision:"none"})};f.prototype._hideArrows=function(){this._topArrow().hide();this._bottomArrow().hide()};f.prototype._topArrow=function(){if(!this._$topArrow){this._$topArrow=e("<div />").addClass(b.grid.wijgrid.CSS.dndArrowTopContainer+" "+this._wijCSS.wijgridDndArrowTopContainer).append(e("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickDown)).hide().appendTo(document.body)}return this._$topArrow};f.prototype._bottomArrow=function(){if(!this._$bottomArrow){this._$bottomArrow=e("<div />").addClass(b.grid.wijgrid.CSS.dndArrowBottomContainer+" "+this._wijCSS.wijgridDndArrowBottomContainer).append(e("<span />").addClass(this._wijCSS.icon+" "+this._wijCSS.iconArrowThickUp)).hide().appendTo(document.body)}return this._$bottomArrow};f.prototype._isInElement=function(i,g){var h=b.grid.bounds(g,false);return((i.pageX>h.left&&i.pageX<h.left+h.width)&&(i.pageY>h.top&&i.pageY<h.top+h.height))};f.prototype._getPosition=function(k,i,l,m){if(!i.element){return"left"}if(this._dropTargetRedirected){return"right"}var g=b.grid.bounds(i.element,false),n=g.width/6,j=g.left+(g.width/2),o="right",h;if(l.pageX<j){o="left"}if(i instanceof e.wijmo.c1groupedfield){if(k instanceof e.wijmo.c1groupedfield){h=i.options.groupedIndex-k.options.groupedIndex;if(Math.abs(h)===1){o=(h<0)?"left":"right"}}return o}h=i.options.linearIdx-k.options.linearIdx;if(i.options.isBand&&(k.options.parentIdx!==i.options.travIdx)&&(Math.abs(l.pageX-j)<n)){return"center"}if(k.options.parentIdx===i.options.parentIdx&&Math.abs(h)===1){o=(h<0)?"left":"right"}return o};return f})();d.uiDragndrop=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var e=jQuery;var d=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(r,q,l,g,h,p,k){var j=b.grid.renderState,i=b.grid.rowType,n=g.type,o,m=null;if(q===0&&this._wijgrid._showRowHeader()){l=null}if(n===i.groupHeader||n===i.groupFooter){l=null;if(p&&(m=p.groupInfo)){l=this._wijgrid._field("leaves")[m.leafIndex]}}o={$cell:r,state:h,row:g,column:l,_cellIndex:q,_purpose:m?m.purpose:undefined};if(h&j.rendering){this._renderingStateFormatter(o,p,k)}else{this._currentStateFormatter(o,h&j.current);this._selectedStateFormatter(o,h&j.selected);if(n!==i.header){if((h&j.current)||(h&j.selected)){o.$cell.addClass(this._wijgrid.options.wijCSS.stateDefault)}else{o.$cell.removeClass(this._wijgrid.options.wijCSS.stateDefault)}}}if(e.isFunction(this._wijgrid.options.cellStyleFormatter)){this._wijgrid.options.cellStyleFormatter(o)}};f.prototype._renderingStateFormatter=function(k,l,m){var g=b.grid.rowType,p,o,j=k.column,i=k.row.type,h=b.grid.wijgrid.CSS,n=this._wijgrid.options.wijCSS;switch(i){case g.header:k.$cell.addClass(h.TH+" "+n.wijgridTH);break;default:k.$cell.addClass(h.TD+" "+n.wijgridTD)}if((i&g.data)&&j&&j.textAlignment){switch(j.textAlignment.toLowerCase()){case"left":k.$cell.addClass(h.cellAlignLeft+" "+n.wijgridCellAlignLeft);break;case"right":k.$cell.addClass(h.cellAlignRight+" "+n.wijgridCellAlignRight);break;case"center":k.$cell.addClass(h.cellAlignCenter+" "+n.wijgridCellAlignCenter);break}}if(l){for(p in l){if(l.hasOwnProperty(p)){o=l[p];if((p==="groupInfo"||p==="colSpan"||p==="rowSpan")&&!(o>1)){continue}if(p==="class"){k.$cell.addClass(o)}else{k.$cell.attr(p,o)}}}}if(m){for(p in m){if(m.hasOwnProperty(p)){if(p==="paddingLeft"){k.$cell.children("."+h.cellContainer).css(p,m[p]);continue}k.$cell.css(p,m[p])}}}if(k._cellIndex===0&&this._wijgrid._showRowHeader()){k.$cell.attr({role:"rowheader",scope:"row"}).addClass(n.stateDefault+" "+n.content+" "+h.rowHeader+" "+n.wijgridRowHeader)}else{switch(i){case (g.header):k.$cell.attr({role:"columnheader",scope:"col"});break;case (g.footer):k.$cell.attr({role:"columnfooter",scope:"col"});break;default:k.$cell.attr("role","gridcell")}}if(i&g.data){if(k._cellIndex>=0&&j){k.$cell.attr("headers",(window).escape(j.headerText));if(j.readOnly){k.$cell.attr("aria-readonly",true)}if(j.dataIndex>=0){k.$cell.addClass("wijdata-type-"+b.grid.getDataType(j))}}}if(i===g.groupHeader||i===g.groupFooter){if(j&&k._purpose===b.grid.groupRowCellPurpose.aggregateCell){k.$cell.addClass("wijdata-type-"+b.grid.getDataType(j))}}};f.prototype._currentStateFormatter=function(h,j){var g=b.grid.rowType,i=b.grid.wijgrid.CSS,k=this._wijgrid.options.wijCSS;if(j){h.$cell.addClass(k.stateActive);if(h.row.type===g.header){h.$cell.addClass(i.currentHeaderCell+" "+k.wijgridCurrentHeaderCell)}else{h.$cell.addClass(i.currentCell+" "+k.wijgridCurrentCell)}}else{h.$cell.removeClass(k.stateActive);if(h.row.type===g.header){h.$cell.removeClass(i.currentHeaderCell+" "+k.wijgridCurrentHeaderCell)}else{h.$cell.removeClass(i.currentCell+" "+k.wijgridCurrentCell)}}};f.prototype._hoveredStateFormatter=function(g,h){if(h){}else{}};f.prototype._selectedStateFormatter=function(g,h){var i=this._wijgrid.options.wijCSS;if(h){g.$cell.addClass(i.stateHighlight).attr("aria-selected","true")}else{g.$cell.removeClass(i.stateHighlight).removeAttr("aria-selected")}};return f})();c.cellStyleFormatterHelper=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(g){if(!g){throw"invalid arguments"}this._wijgrid=g}f.prototype.format=function(m,h,j){var i=b.grid.renderState,g=b.grid.rowType,l=m.state,k=m;if(l&i.rendering){this._renderingStateFormatter(k,h,j)}else{this._currentStateFormatter(k,(l&i.current)!==0);this._hoveredStateFormatter(k,(l&i.hovered)!==0);this._selectedStateFormatter(k,(l&i.selected)!==0)}if(d.isFunction(this._wijgrid.options.rowStyleFormatter)){this._wijgrid.options.rowStyleFormatter(k)}};f.prototype._groupFormatter=function(g){var k=b.grid.renderStateEx,h=g._extInfo,j=b.grid.wijgrid.CSS,m=this._wijgrid.options.wijCSS;if(h.state&k.hidden){g.$rows.css("display","none")}else{g.$rows.css("display","")}if(g.type&b.grid.rowType.groupHeader){var l=this._wijgrid._groupedColumns()[g._extInfo.groupLevel-1].groupInfo,n=l.expandedImageClass||m.iconArrowRightDown,o=l.collapsedImageClass||m.iconArrowRight,i=b.grid.rowAccessor.getCell$(g.$rows,this._wijgrid.options.showRowHeader?1:0).find("."+j.groupToggleVisibilityButton);if(h.state&k.collapsed){g.$rows.attr("aria-expanded",false);g.$rows.removeClass(j.groupHeaderRowExpanded+" "+m.wijgridGroupHeaderRowExpanded).addClass(j.groupHeaderRowCollapsed+" "+m.wijgridGroupHeaderRowCollapsed);i.removeClass(n).addClass(o)}else{g.$rows.attr("aria-expanded",true);g.$rows.removeClass(j.groupHeaderRowCollapsed+" "+m.wijgridGroupHeaderRowCollapsed).addClass(j.groupHeaderRowExpanded+" "+m.wijgridGroupHeaderRowExpanded);i.removeClass(o).addClass(n)}}};f.prototype._renderingStateFormatter=function(n,l,i){var k=b.grid.wijgrid.CSS,o=this._wijgrid.options.wijCSS,m,h=k.row+" "+o.wijgridRow+" "+o.content,g=b.grid.rowType,j=b.grid.renderStateEx,p;n.$rows.attr("role","row");if(l){for(p in l){if(l.hasOwnProperty(p)){if(p==="class"){n.$rows.addClass(l[p])}else{n.$rows.attr(p,l[p]);if(n.$rows[0].style.height){n.$rows.each(function(){d.data(this,"customHeight",this.style.height);return true})}}}}}if(i){for(p in i){if(i.hasOwnProperty(p)){n.$rows.css(p,i[p])}}}if(n._extInfo.groupLevel){n.$rows.attr("aria-level",n._extInfo.groupLevel)}if(n._extInfo.state&j.hidden){n.$rows.css("display","none")}switch(n.type&~g.dataAlt){case (g.header):m=k.headerRow+" "+o.wijgridHeaderRow;break;case (g.data):m=h+" "+k.dataRow+" "+o.wijgridDataRow;if(n.type&g.dataAlt){m+=" "+k.altRow+" "+o.wijgridAltRow}break;case (g.emptyDataRow):m=h+" "+k.emptyDataRow+" "+o.wijgridEmptyDataRow;break;case (g.filter):m=k.filterRow+" "+o.wijgridFilterRow;break;case (g.groupHeader):n.$rows.attr({id:"GH"+n._extInfo.groupIndex+"-"+n._extInfo.groupLevel,"aria-expanded":((n._extInfo.state&j.collapsed)===0)});m=h+" "+k.groupHeaderRow+" "+o.wijgridGroupHeaderRow+" ";m+=(n._extInfo.state&j.collapsed)?k.groupHeaderRowCollapsed+" "+o.wijgridGroupHeaderRowCollapsed:k.groupHeaderRowExpanded+" "+o.wijgridGroupHeaderRowExpanded;break;case (g.groupFooter):n.$rows.attr("id","GF"+n._extInfo.groupIndex+"-"+n._extInfo.groupLevel);m=h+" "+k.groupFooterRow+" "+o.wijgridGroupFooterRow;break;case (g.footer):m=k.footerRow+" "+o.wijgridFooterRow+" "+o.stateDefault+" "+o.stateHighlight;break;default:throw b.grid.stringFormat("unknown rowType: {0}",n.type)}n.$rows.addClass(m)};f.prototype._currentStateFormatter=function(h,g){if(this._wijgrid._showRowHeader()){var j=this._wijgrid.options.wijCSS,i=b.grid.wijgrid.CSS;if(g){d((h.$rows[0]).cells[0]).addClass(j.stateActive+" "+i.currentRowHeaderCell+" "+j.wijgridCurrentRowHeaderCell)}else{d((h.$rows[0]).cells[0]).removeClass(j.stateActive+" "+i.currentRowHeaderCell+" "+j.wijgridCurrentRowHeaderCell)}}};f.prototype._hoveredStateFormatter=function(h,g){var i=this._wijgrid.options.wijCSS;if(g){h.$rows.addClass(i.stateDefault+" "+i.stateHover)}else{h.$rows.removeClass(i.stateDefault+" "+i.stateHover)}};f.prototype._selectedStateFormatter=function(h,g){if(g){}else{}};return f})();c.rowStyleFormatterHelper=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(){this._sum=0;this._sum2=0;this._cntNumbers=0;this._cntStrings=0;this._cntDates=0;this._max=0;this._min=0;this._minDate=0;this._maxDate=0}f.prototype.add=function(h){if(h===null||h===""){return}var i,g=(h instanceof Date)?"datetime":typeof(h);i=h.toString();if(this._cntStrings++===0){this._minString=this._maxString=i}if(i<this._minString){this._minString=i}if(i>this._maxString){this._maxString=i}if(g==="number"){if(this._cntNumbers++===0){this._min=this._max=h}this._sum+=h;this._sum2+=h*h;if(h<this._min){this._min=h}if(h>this._max){this._max=h}}else{if(g==="datetime"){i=h.getTime();if(this._cntDates++===0){this._minDate=this._maxDate=i}if(i<this._minDate){this._minDate=i}if(i>this._maxDate){this._maxDate=i}}}};f.prototype.getValueString=function(h){var g=h.owner;if(this._cntNumbers&&(h.dataType==="number"||h.dataType==="currency")){var i=this._getValue(h.aggregate);return g.toStr(h,i)}if(this._cntDates&&(h.dataType==="datetime")){switch(h.aggregate){case"max":return g.toStr(h,new Date(this._maxDate));case"min":return g.toStr(h,new Date(this._minDate));case"count":return this._cntStrings+""}}if(this._cntStrings){switch(h.aggregate){case"max":return this._maxString;case"min":return this._minString;case"count":return this._cntStrings+""}}return""};f.prototype._getValue=function(h){switch(h){case"average":return(this._cntNumbers===0)?0:this._sum/this._cntNumbers;case"count":return this._cntStrings;case"max":return this._max;case"min":return this._min;case"sum":return this._sum;case"std":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("var"));case"stdPop":if(this._cntNumbers<=1){return 0}return Math.sqrt(this._getValue("varPop"));case"var":if(this._cntNumbers<=1){return 0}return this._getValue("varPop")*this._cntNumbers/(this._cntNumbers-1);case"vapPop":if(this._cntNumbers<=1){return 0}var g=this._sum/this._cntNumbers;return this._sum2/this._cntNumbers-g*g}return 0};return f})();d.tally=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(d){var e=jQuery;var c=(function(){function f(g){this._docEventsUID="wijgridfrozener"+b.grid.getUID();this._docEventsAttached=false;this._newStaticIndex=-1;this._staticColumnIndex=-1;this._staticRowIndex=-1;this._staticOffsetH=0;this._staticOffsetV=0;this._inProgress=false;this._wijgrid=g;this.refresh()}f.prototype.inProgress=function(){return this._inProgress};f.prototype.refresh=function(){this.dispose();var i=this._wijgrid.options.freezingMode;if(i!=="none"){this._$outerDiv=this._wijgrid.outerDiv.find("."+b.grid.wijgrid.CSS.fixedView);this._superPanel=(this._wijgrid._view())._getSuperPanel();this._staticOffsetH=this._wijgrid._getStaticOffsetIndex(false);this._staticOffsetV=this._wijgrid._getStaticOffsetIndex(true);this._staticColumnIndex=this._wijgrid._getStaticIndex(false);this._staticRowIndex=this._wijgrid._getStaticIndex(true);this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds();var h=b.grid.bounds(this._$outerDiv.find(".wijmo-wijgrid-split-area-nw")),g=b.grid.bounds(this._$outerDiv);if((i==="both"||i==="columns")&&(this._wijgrid.options.staticColumnsAlignment!=="right"||this._staticColumnIndex>=0)){this._createVBar(this._visibleBounds,h,g)}if((i==="both"||i==="rows")&&!this._wijgrid._serverSideVirtualScrolling()){this._createHBar(this._visibleBounds,h,g)}}};f.prototype.dispose=function(){if(this._$hBar){this._$hBar.remove();this._$hBar=null}if(this._$vBar){this._$vBar.remove();this._$vBar=null}if(this._$proxy){this._$proxy.remove();this._$proxy=null}this._$outerDiv=null;this._superPanel=null;this._detachDocEvents()};f.prototype._createVBar=function(l,k,g){var n=(this._wijgrid.options.staticColumnsAlignment!=="right"),i=n?k.width+k.left:k.left-2,h=this,j=b.grid.wijgrid.CSS,m=this._wijgrid.options.wijCSS;if(i<=l.left+l.width){this._$vBar=e("<div><div></div></div>").addClass(j.freezingHandleV+" "+m.wijgridFreezingHandleV).addClass(n?"":"not-allowed").css({left:i-g.left,top:k.top-g.top,height:l.height+l.top-k.top}).bind("mousedown",function(o){o.data=true;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$vBar.find("div").addClass(j.freezingHandleContent+" "+m.header)}};f.prototype._createHBar=function(l,k,g){var i=k.top+k.height,n=(this._wijgrid.options.staticColumnsAlignment!=="right"),h=this,j=b.grid.wijgrid.CSS,m=this._wijgrid.options.wijCSS;if(i<=l.top+l.height){this._$hBar=e("<div><div></div></div>").addClass(j.freezingHandleH+" "+m.wijgridFreezingHandleH).css({left:n?k.left-g.left:0,top:i-g.top,width:n?l.width+l.left-k.left:l.width}).bind("mousedown",function(o){o.data=false;h._onBarMouseDown.apply(h,arguments)}).appendTo(this._$outerDiv);this._$hBar.find("div").addClass(j.freezingHandleContent+" "+m.header)}};f.prototype._onBarMouseDown=function(h){if(this._wijgrid.options.disabled||(this._wijgrid.options.staticColumnsAlignment==="right"&&h.data)){return false}var g=b.grid.wijgrid.CSS,i=this._wijgrid.options.wijCSS;this._visibleBounds=this._wijgrid._view().getVisibleContentAreaBounds();this._newStaticIndex=h.data?this._staticColumnIndex:this._staticRowIndex;this._$proxy=e('<div class="'+g.resizingHandle+" "+i.wijgridResizingHandle+" "+i.header+'"></div>').appendTo(document.body);this._attachDocEvents(h.data);this._inProgress=true;h.stopPropagation()};f.prototype._onDocumentMouseMove=function(g){if(g.data&&this._superPanel.options.hScroller.scrollValue){(this._superPanel).hScrollTo(0)}else{if(!g.data&&this._superPanel.options.vScroller.scrollValue){(this._superPanel).vScrollTo(0)}}this._showPosition(g)};f.prototype._onDocumentMouseUp=function(g){try{if(this._$proxy){this._$proxy.remove()}this._detachDocEvents();if(g.data){if(this._newStaticIndex!==this._staticColumnIndex){this._wijgrid.option("staticColumnIndex",this._newStaticIndex)}}else{if(this._newStaticIndex!==this._staticRowIndex){this._wijgrid.option("staticRowIndex",this._newStaticIndex)}}}finally{this._$proxy=null;this._inProgress=false}};f.prototype._attachDocEvents=function(g){if(!this._docEventsAttached){try{if(e.fn.disableSelection){e(document.body).disableSelection()}this._wijgrid._view().toggleDOMSelection(false);e(document).bind(this._docEventKey("mousemove"),g,e.proxy(this._onDocumentMouseMove,this)).bind(this._docEventKey("mouseup"),g,e.proxy(this._onDocumentMouseUp,this))}finally{this._docEventsAttached=true}}};f.prototype._detachDocEvents=function(){if(this._docEventsAttached){try{if(e.fn.enableSelection){e(document.body).enableSelection()}this._wijgrid._view().toggleDOMSelection(true);e(document).unbind("."+this._docEventsUID)}finally{this._docEventsAttached=false}}};f.prototype._docEventKey=function(g){return b.grid.stringFormat("{0}.{1}",g,this._docEventsUID)};f.prototype._showPosition=function(l){var i,o,h,n,p,m,j,g,k=(this._wijgrid.options.staticColumnsAlignment!=="right");if(l.data){g=b.grid.bounds(this._$vBar);if(Math.abs(l.pageX-(g.left+g.width/2))<g.width){this._$proxy.hide();return}if((i=this._getFieldByPos({x:l.pageX,y:l.pageY}))){o=b.grid.bounds(i.element);h=o.left+o.width/2;n=i.options.visLeavesIdx-this._staticOffsetV;p=Math.max(n-1,-1);m=l.pageX<h?(p!==this._staticColumnIndex):(n===this._staticColumnIndex);j=m?o.left:o.left+o.width;if(!b.grid.isOverAxis(j,this._visibleBounds.left-1,this._visibleBounds.width+2)){return}this._newStaticIndex=m?p:n;this._$proxy.show().css({left:j,top:o.top,width:3,height:this._visibleBounds.height+this._visibleBounds.top-o.top})}}else{g=b.grid.bounds(this._$hBar);if(Math.abs(l.pageY-(g.top+g.height/2))<g.height){this._$proxy.hide();return}if((i=this._getRowByPos({x:l.pageX,y:l.pageY}))){o=b.grid.bounds(i);h=o.top+o.height/2;n=this._wijgrid._view().getAbsoluteRowIndex(i)-this._staticOffsetH;p=Math.max(n-1,-1);m=l.pageY<h?(p!==this._staticRowIndex):(n===this._staticRowIndex);j=m?o.top:o.top+o.height;if(!b.grid.isOverAxis(j,this._visibleBounds.top-1,this._visibleBounds.height+2)){return}this._newStaticIndex=m?p:n;this._$proxy.show().css({left:k?o.left:this._visibleBounds.left,top:j,width:k?this._visibleBounds.width+this._visibleBounds.left-o.left:this._visibleBounds.width,height:3})}}};f.prototype._getFieldByPos=function(n){var k=this._wijgrid.columns(),j,g,h,m,l;for(j=0,g=k.length;j<g;j++){h=k[j];m=h.options;if(m.isLeaf){l=b.grid.bounds(h.element);if(b.grid.isOverAxis(n.x,l.left,l.width)){return h}}}return null};f.prototype._getRowByPos=function(m){var k=this._wijgrid._rows(),h,g,l,j;for(h=0,g=k.length();h<g;h++){l=k.item(h)[0];j=b.grid.bounds(e(l));if(b.grid.isOverAxis(m.y,j.top,j.height)){return l}}return null};return f})();d.uiFrozener=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function i(){}i.generate=function g(m,l,k){switch(m){case"append":i._processAppendMode(l,k);break;case"merge":i._processMergeMode(l,k);break;case"none":break;default:throw b.grid.stringFormat('Unsupported value: "{0}"',m)}};i._processAppendMode=function h(m,l){var k={};b.grid.traverse(l,function(n){if(n.dynamic&&b.grid.validDataKey(n.dataKey)){k[n.dataKey]=true}});d.each(m,function(p,o){if(("name" in o)&&!k[o.name]){var n=i._createAutoField(o);l.push(n)}})};i._processMergeMode=function f(m,l){var n=[],k;b.grid.traverse(l,function(o){if(o.isLeaf&&!o.isBand){var p=o.dataKey;if(b.grid.validDataKey(p)){if(m[p]!==undefined){delete m[p]}}else{if(p!==null){n.push(o)}}}});if(n.length){k=0;d.each(m,function(p,q){var o=n[k++];if(o){o.dataKey=q.name;delete m[p]}})}d.each(m,function(p,q){var o=i._createAutoField(q);l.push(o)})};i._createAutoField=function j(k){return b.grid.createDynamicField({dataKey:k.name})};return i})();c.columnsGenerator=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=jQuery;var e=(function(){function f(i,h,k,j){this._timer=0;this._timeout=50;this._ignoreScrollEvents=false;this._debounceScrolledEvent=true;this._wijgrid=i;this._$content=h;this._view=this._wijgrid._view();this._N=this._wijgrid._renderableRowsCount();this._rowOuterHeight=j;this._updateContentHeight();var g=this._wijgrid.outerDiv.height()+this._N*this._rowOuterHeight;this._view._splitAreas.sw.height(g)}f.prototype.scrollTo=function(h,g){this._debounceScrolledEvent=false;this._completeListener=g;(this._panelInst).vScrollTo(h*(this._panelInst).options.vScroller.scrollSmallChange,true)};f.prototype._updateContentHeight=function(){this._$content.height(this._rowOuterHeight*this._N)};f.prototype.attach=function(g){this._$scroller=g;this._panelInst=g.data("wijmo-wijsuperpanel");this._updateContentHeight();this._updateVerticalScroller();g.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelScrolled,this));g.bind("wijsuperpanelscrolling.wijgrid",d.proxy(this._onSuperpanelScrolling,this));g.bind("wijsuperpanelscrolled.wijgrid",d.proxy(this._onSuperpanelPostScrolled,this))};f.prototype._updateVerticalScroller=function(){var g=Math.max(0,this._N-(this._view.getVirtualPageSize()-1));this._setVerticalScrollerOptions(1,g)};f.prototype._setVerticalScrollerOptions=function(i,g){var l=this._panelInst.options.vScroller;l.scrollSmallChange=i;l.scrollLargeChange=i*4;g+=l.scrollLargeChange-1;l.scrollMax=g;this._panelInst.option("vScroller",l);if(!this._view._isNativeSuperPanel()&&((this._panelInst)._scrollDrag!=undefined)){var h=(this._panelInst)._fields(),j=h.vbarContainer,k=h.vbarDrag;(this._panelInst)._scrollDrag("v",j,k,false)}};f.prototype._changeVisibleRowsCount=function(g){this._N=g;this._updateContentHeight();this._updateVerticalScroller()};f.prototype.dispose=function(){this._$scroller.unbind(".wijgrid");this._clearTimer()};f.prototype._clearTimer=function(){window.clearTimeout(this._timer);this._timer=0};f.prototype._onSuperpanelScrolling=function(h,g){if(this._ignoreScrollEvents||(g.dir!=="v")){return}if(this._timer===-1){return false}};f.prototype._onSuperpanelScrolled=function(i,h){var g=this;if(this._ignoreScrollEvents||(h.dir!=="v")){return}if(this._timer>0){this._clearTimer()}if(this._timer!==-1){this._timer=window.setTimeout(function(){g._timer=-1;var k=Math.floor(h.newValue/g._panelInst.options.vScroller.scrollSmallChange),j=g._view._bounds.start;if(k<0){k=0}if(k>=g._N){k=g._N-1}if(k!==j){g._debounceScrolledEvent=true;g._wijgrid._handleVirtualScrolling(k,null,d.proxy(g._scrollingCompleted,g))}else{g._debounceScrolledEvent=true;g._log();g._clearTimer()}},this._debounceScrolledEvent?this._timeout:0)}};f.prototype._scrollingCompleted=function(g){this._wijgrid._trackScrollingIndex(g);this._log();if(this._completeListener){this._completeListener();this._completeListener=null}this._clearTimer()};f.prototype._onSuperpanelPostScrolled=function(){if(d.isFunction(this._postScrolled)){this._postScrolled.apply(this,arguments)}};f.prototype._log=function(){};return f})();c.uiVirtualScroller=e})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var d=(function(){function e(f){this._items=[];this._capacity=null;this._maxRowIndex=f}e.prototype.add=function(f){this._capacity=null;var k=this._items.length,n;if(!k||(n=this._items[k-1]).end<f.start){if(k&&(f.start-n.end===1)){n.end=f.end}else{this._items.push(f)}}else{var o=this._binSearchByStartVal(f.start),l=this._binSearchByEndVal(f.end),j=o<0?~o:o,h=l<0?~l:l,g=(o>=0)||(j>0&&f.start<=this._items[j-1].end),m=(l>=0)||(h<k&&f.end<=this._items[h].end&&f.end>=this._items[h].start),i;if(g){if(m){if(o>=0){this._items[h].start=this._items[j].start;if(i=(h-j)){this._items.splice(j,i)}}else{this._items[h].start=this._items[j-1].start;if(i=h-j+1){this._items.splice(j-1,i)}}}else{if(o>=0){this._items[j].end=f.end;if(i=(h-j-1)){this._items.splice(j,i)}}else{this._items[j-1].end=f.end;if(i=(h-j)){this._items.splice(j,i)}}}}else{if(m){this._items[h].start=f.start;if(i=(h-j)){this._items.splice(j,i)}}else{this._items.splice(j,h-j,f)}}}};e.prototype.remove=function(f){this._capacity=null;var l=this._items.length;if(l){var p=this._binSearchByStartVal(f.start),m=this._binSearchByEndVal(f.end),j=p<0?~p:p,h=m<0?~m:m,g=(p>=0)||(j>0&&f.start<=this._items[j-1].end),o=(m>=0)||(h<l&&f.end<=this._items[h].end&&f.end>=this._items[h].start);if(g){if(o){var n=(p>=0)?p:j-1,k=(m>=0)?m:h;if(p>=0&&m>=0){this._items.splice(j,h-j+1)}else{if(p>=0){this._items[h].start=f.end+1;this._items.splice(j,h-j)}else{if(m>=0){if(n===k){this._items[j-1].end=f.start-1}else{this._items[j].end=f.start-1;this._items.splice(j,h-j+1)}}else{if(n===k){var i=this._items[j-1].end;this._items[j-1].end=f.start-1;this._items.splice(j,0,{start:f.end+1,end:i})}else{this._items[j-1].end=f.start-1;this._items[h].start=f.end+1;this._items.splice(j,h-j)}}}}}else{if(p>=0){this._items.splice(j,h-j)}else{this._items[j].end=f.start-1;this._items.splice(j,h-j-1)}}}else{if(o){if(m>=0){this._items.splice(j,h-j+1)}else{this._items[h].start=f.end+1;this._items.splice(j,h-j)}}else{this._items.splice(j,h-j)}}}};e.prototype.clear=function(){this._capacity=0;this._items=[]};e.prototype.item=function(f){return this._items[f]};e.prototype.forEachIndex=function(g,n,q){if(g<0){return}var o=this._items.length,f=this._getIteratorStateFor(g),h=0,p=true,m=false;if(f){var k=f.j;for(var l=f.i;l<o&&!m;l++){var r=this._items[l];if(!p){k=r.start}for(k;k<=r.end&&!m;k++){if((++h>n)&&(n!==-1)){return}m=(q(k)===false)}p=false}}};e.prototype.forEachIndexBackward=function(g,n,q){if(g<0){return}var o=this._items.length,f=this._getIteratorStateFor(g),h=0,p=true,m=false;if(f){var k=f.j;for(var l=f.i;l>=0&&!m;l--){var r=this._items[l];if(!p){k=r.end}for(k;k>=r.start&&!m;k--){if((++h>n)&&(n!==-1)){return}m=(q(k)===false)}p=false}}};e.prototype._getIteratorStateFor=function(j){var f=this._items.length,h=0;for(var g=0;g<f;g++){var k=this._items[g];h+=k.end-k.start+1;var l=h-j;if(l>=0){return{i:g,j:k.end-l+1}}}return null};e.prototype.getAbsIndex=function(k){for(var h=0,f=this._items.length;h<f;h++){var j=this._items[h],g=j.end-j.start;if(k<=g){return j.start+k}else{k-=g+1}}return -1};e.prototype.getRenderedIndex=function(h){var k=this.hasAbsIndex(h);if(k>=0){var f=0;for(var g=0;g<k;g++){var j=this._items[g];f+=j.end-j.start+1}return f+(h-this._items[k].start)}return -1};e.prototype.hasAbsIndex=function(g){if(this._items.length){var f=this._binSearchByStartVal(g);if(f>=0){return f}else{f=~f;if(f>0&&g<=this._items[f-1].end){return f-1}}}return -1};e.prototype.length=function(){return this._items.length};e.prototype.capacity=function(){if(this._capacity===null){var g=0;for(var h=0,f=this._items.length;h<f;h++){var j=this._items[h];g+=(j.end-j.start)+1}this._capacity=g}return this._capacity};e.prototype.truncate=function(g,f){this.truncateByStart(g);this.truncateByStart(f)};e.prototype.truncateByCount=function(k){var j=0;if(k===0){this._items=[]}else{for(var g=0,f=this._items.length;g<f;g++){var h=this._items[g];j+=(h.end-h.start)+1;if(j>=k){if(j>k){h.end-=j-k}this._items.splice(g+1,this._items.length-(g+1));break}}}};e.prototype.truncateByStart=function(h,i){var g=this._binSearchByStartVal(h),f=this._items.length;if(g<0){g=~g;if(g<f){if(g>0&&this._items[g-1].end>=h){this._items[g-1].start=h;this._items.splice(0,g-1)}else{if(i){this._items[g].start=h}this._items.splice(0,g)}}else{this._items=[]}}else{this._items.splice(0,g)}};e.prototype.truncateByEnd=function(i,h){var g=this._binSearchByEndVal(i),f=this._items.length;if(g<0){g=~g;if(g<f){this._items[g].end=i;this._items.splice(g+1,this._items.length-g+1)}else{this._items=[]}}else{this._items.splice(g+1,this._items.length-g+1)}};e.prototype.deleteFromTop=function(j){var g=0,f=0;for(g=0;g<this._items.length;g++){var h=this._items[g];f+=h.end-h.start+1;if(f>=j){break}}if(f>=j){this._items[g].start=f-j+1}this._items.splice(0,g)};e.prototype.deleteFromBottom=function(j){var g=0,f=0;for(g=this._items.length-1;g>=0;g--){var h=this._items[g];f+=h.end-h.start+1;if(f>=j){break}}if(f>=j){this._items[g].start=f-j+1}this._items.splice(g,this._items.length-g)};e.prototype._binSearchByStartVal=function(j){var g=0,h=this._items.length-1;while(g<=h){var f=(h+g)>>1,i=this._items[f].start-j;if(i===0){return f}if(i<0){g=f+1}else{h=f-1}}return ~g};e.prototype._binSearchByEndVal=function(j){var g=0,h=this._items.length-1;while(g<=h){var f=(h+g)>>1,i=this._items[f].end-j;if(i<0){g=f+1}else{if(i){h=f-1}else{return f}}}return ~g};return e})();c.renderBoundsCollection=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var wijmo;(function(a){(function(e){var d=jQuery,g=Globalize;function f(m,k,j,i){var h=m;i=d.extend({nullString:"",format:""},i);function l(n){i.parser=i.parser||e.defaultParsers[n];if(!i.parser&&m!=null){e.errors.noParser(n)}return i.parser}k=k||m!=null&&typeof m;j=j||k;if(!j){return m}if(j=="string"){l(k);if(!i.parser){return m}return i.parser.toStr(m,i.culture,i.format,i.nullString,true)}l(j);if(!i.parser){return m}m=i.parser.parse(m,i.culture,i.format,i.nullString,true);if(isNaN(m)&&m!=null&&e.util.isNumeric(m)){if(i.ignoreError){return h}e.errors.cantConvert(j,h)}return m}e.convert=f;e.defaultParsers={string:{parse:function(k,j,l,i,h){switch(k){case null:return null;case i:if(h){return null}case undefined:case"&nbsp":return"";default:return""+k}},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return""+k}},number:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"n",j.name)}},currency:{parse:function(l,j,m,i,h){var k=typeof(l);if(k==="number"){return isNaN(l)?NaN:l}if((!l&&l!==0)||(l==="&nbsp;")||(l===i&&h)){return null}if(k==="string"){l=l.replace(j.numberFormat.currency.symbol,"")}return g.parseFloat(l,10,j.name)},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"c",j.name)}},datetime:{parse:function(m,j,n,i,h){var l;if(m instanceof Date){return m}if(!m||(m==="&nbsp;")||(m===i&&h)){return null}l=/^\/Date\((\d+)\)\/$/.exec(m);if(l){return new Date(parseInt(l[1],10))}var k=g.parseDate(m,n,j.name);if(k==null||isNaN(k)){k=Date.parse(m);k=isNaN(k)?NaN:new Date(k)}return k},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return g.format(k,l||"d",j.name)}},"boolean":{parse:function(k,j,l,i,h){var m=typeof(k);if(m==="number"){return k!=0}if(m==="boolean"){return k}if(m==="string"){k=d.trim(k)}if(!k||(k==="&nbsp;")||(k===i&&h)){return null}switch(k.toLowerCase()){case"true":return true;case"false":return false}return NaN},toStr:function(k,j,l,i,h){if(k===null&&h){return i}return(k)?"true":"false"}}};function c(h){return function(){if(!g){e.util.logError(e.errors.noGlobalize.create().message)}return h.apply(this,arguments)}}d.each(e.defaultParsers,function(h,i){i.parse=i.parse&&c(i.parse);i.toStr=i.toStr&&c(i.toStr)})})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(a){(function(c){(function(f){(function(g){g.Connective={AND:"and",OR:"or"};function i(l){function k(o){var m=[];if(o.length===0){return m}var n=g.Connective.AND;c.util.each(o,function(q,r){if(q==0&&c.util.isString(r)){var s=r.toLowerCase();if(s==g.Connective.AND||s==g.Connective.OR){n=s;return}}if($.isArray(r)){r=k(r);if(!r){return}if(r[0]===n||r.length==2){r.shift();m=m.concat(r);return}}else{var p=f.normalizeCondition(r);if(!p){return}p.property=r.property;r=p}m.push(r)});if(m.length==0){return null}else{m.unshift(n);return m}}return k(l)}function j(l){if(!$.isArray(l)){return null}var k={isEmpty:true,original:l,normalized:i(l),func:null};if(k.normalized==null){k.func=function(m){return true}}else{k.isEmpty=false;k.func=function(m){function n(q){var o=q[0]===g.Connective.AND,p=o?c.util.every:c.util.some;return p(q,function(s,r){if(r===0){return o}if($.isArray(s)){return n(s)}else{var t=c.util.getProperty(m,s.property);return s.op.apply(t,s.value)}})}return n(k.normalized)}}return k}function h(k){return j(k)||c.filtering.compile(k)}g.compile=h})(f.extended||(f.extended={}));var e=f.extended})(c.filtering||(c.filtering={}));var d=c.filtering})(a.data||(a.data={}));var b=a.data})(wijmo||(wijmo={}));var wijmo;(function(b){(function(c){var g=jQuery;var f=b.data;var e=f.filtering.extended;var d=(function(){function i(j){this.real=j;this._updatingFilter=false;this._overrideFilter();this._makeMemberProxies()}i.prototype._overrideFilter=function(){var j=this;this.filter=f.observable(this.real.filter());this.filter.subscribe(function(k){if(j.real.filter()!==k&&!j._updatingFilter){j.refresh({filter:k})}});this.real.filter.subscribe(function(k){if(k!==j._lastSetFilter){j.filter(k)}})};i.prototype.refresh=function(j,l){if(typeof l==="undefined"){l=false}j=g.extend({},j);var k=j.filter;j.filter=this._coerceFilter(j.filter);this._lastSetFilter=j.filter;this._updatingFilter=true;try{if(g.isFunction(j.filter)&&!g.isFunction(k)){this.filter(k)}else{this.filter(j.filter)}}finally{this._updatingFilter=false}return this.real.refresh(j,l)};i.prototype._makeMemberProxies=function(){var j=this;f.util.each(this.real,function(k,l){if(!g.isFunction(l)||j[k]||k.charAt(0)==="_"){return}j[k]=g.isFunction(l.subscribe)?l:function(){return l.apply(j.real,arguments)}})};i.create=function h(j){return new i(j)};i.prototype._convertComplexPropertyFilterToExtendedFilterFormat=function(k){var j=[];g.each(k,function(o,l){if(!g.isArray(l)){l=[l]}else{var m=f.util.isString(l[0])&&l[0].toLowerCase();if(m===e.Connective.AND||m===e.Connective.OR){j.push(l);return}}var n=[];g.each(l,function(q,r){var p=f.filtering.normalizeCondition(r);if(p){p.property=o;n.push(p)}});if(n.length>0){j.push(n)}});return j.length>0?j:null};i.prototype._coerceFilter=function(j){if(g.isArray(j)){return e.compile(j).func}else{if(!g.isPlainObject(j)){return j}}j=g.extend(true,{},j);var l={};g.each(j,function(o,m){if(!g.isArray(m)){m=[m]}if(l){var n=f.util.isString(m[0])&&m[0].toLowerCase();if(m.length==1||m.length==2&&(n==="and"||n==="or")){l[o]=m[m.length-1];return}}j[o]=m;l=null});if(l){return l}var k=this._convertComplexPropertyFilterToExtendedFilterFormat(j);return e.compile(k).func};i.prototype._unsafeReplace=function(j,k){(this.real).sourceArray[j]=k;(this.real).local[j]=k};i.prototype._unsafeSplice=function(j,l,k){if(arguments.length===2){(this.real).sourceArray.splice(j,l);(this.real).local.splice(j,l)}else{(this.real).sourceArray.splice(j,l,k);(this.real).local.splice(j,l,k)}};i.prototype._unsafePush=function(j){(this.real).sourceArray.push(j);(this.real).local.push(j)};return i})();c.GridDataView=d})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(d){var c=(function(f){__extends(e,f);function e(i){this.mObservableArray=i;var h=ko.utils.unwrapObservable(this.mObservableArray);f.call(this,h,null)}e.validSource=function g(h){return !!(ko&&ko.isObservable(h)&&$.isFunction(h.slice))};e.prototype.refresh=function(j,l){if(typeof l==="undefined"){l=false}this.sourceArray=ko.utils.unwrapObservable(this.mObservableArray);this.mPlainArray=ko.toJS(this.sourceArray);var i=j&&j.pageSize!==undefined?j.pageSize:this.pageSize();var h=j&&j.pageIndex!==undefined?j.pageIndex:this.pageIndex();if(i>0&&h>0){var k=b.data.util.pageCount(this.sourceArray.length,i);if(h>=k){h=Math.max(0,k-1);if(!j){j={}}j.pageIndex=h}}return f.prototype.refresh.apply(this,[j,l])};e.prototype.getPlainSource=function(){return this.mPlainArray};e.prototype.dispose=function(){this.mObservableArray=null;this.mPlainArray=null;f.prototype.dispose.apply(this,arguments)};return e})(b.data.ArrayDataView);d.koDataView=c})(b.grid||(b.grid={}));var a=b.grid})(wijmo||(wijmo={}));