var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijmenu",i=function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r._itemWidgetName="wijmenuitem",r.prototype._preventEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},r.prototype._initState=function(){var e=this;e.options.items||(e.options.items=[])},r.prototype._create=function(){var e=this,t=e.options,r=e.element,i=t.disabled;e._initState(),r.is(":hidden")&&r.wijAddVisibilityObserver&&r.wijAddVisibilityObserver(function(){e.refresh(),r.wijRemoveVisibilityObserver&&r.wijRemoveVisibilityObserver()},"wijmenu"),r.data("wijmomenu",n.camelCase(e.widgetFullName)),e.clickNameSpace="click.wijmenudoc"+e._newId(),r.hide(),e.cssPre="wijmo-wijmenu",e.nowIndex=9999,e.activeItem=null,e.refresh(),r.attr("tabIndex",0),e._getDisabled()&&(e.disable(),t.disabledState===!0&&(t.disabled=i)),e._bindKeyDownEvent()},r.prototype._bindKeyDownEvent=function(){var t=this,n=t.options,i=n.direction,s=n.mode,o=e.getKeyCodeEnum(),u,a;t.element.on("keydown.wijmenuEvent",function(e){if(t._getDisabled())return;s==="sliding"&&t._getSublist().stop(!0,!0);var f=t.activeItem,l,c,h=n.orientation;f?(l=f._isRoot(),u=f._getSublist()):l=!0;switch(e.keyCode){case o.PAGE_UP:t.previousPage(e),t._preventEvent(e);break;case o.PAGE_DOWN:t.nextPage(e),t._preventEvent(e);break;case o.UP:if(h==="vertical"||s==="sliding"||!l)t.previous(e),t._preventEvent(e);break;case o.DOWN:h==="vertical"||s==="sliding"||!l?(t.next(e),t._preventEvent(e)):f&&s==="flyout"&&r._hasVisibleSubMenus(f)&&u.is(":hidden")&&f._showFlyoutSubmenu(e,function(){t.activate(e,f._getFirstSelectableSubItem())});break;case o.RIGHT:h==="horizontal"&&l&&s==="flyout"?(i==="rtl"?t.previous(e):t.next(e),t._preventEvent(e)):f&&(a=f.getParent(),i==="rtl"?t._keyDownToCloseSubmenu(s,e,a):t._keyDownToOpenSubmenu(f,s,e,u));break;case o.LEFT:h==="horizontal"&&l&&s==="flyout"?(i==="rtl"?t.next(e):t.previous(e),t._preventEvent(e)):(f&&(a=f.getParent()),i==="rtl"?t._keyDownToOpenSubmenu(f,s,e,u):t._keyDownToCloseSubmenu(s,e,a));break;case o.ENTER:if(!f)return;c=f._getLink();if(s==="flyout")break;t.select(),c.is("a")&&c.attr("href")==="#"&&t._preventEvent(e);break;case o.TAB:t.next(e),t._preventEvent(e)}})},r.prototype._keyDownToOpenSubmenu=function(e,t,n,i){var s=this;t==="flyout"&&r._hasVisibleSubMenus(e)?i.is(":hidden")&&e._showFlyoutSubmenu(n,function(){s.activate(n,e._getFirstSelectableSubItem())}):t==="sliding"&&i.length>0&&e._getLink().trigger("click",e._getFirstSelectableSubItem())},r.prototype._keyDownToCloseSubmenu=function(e,t,r){var i=this,s=i.options,o;e==="flyout"?r&&(r._hideCurrentSubmenu(t),i.activate(t,r)):(s.backLink&&i._backLink&&i._backLink.is(":visible")&&i._backLink.trigger("click",function(){r&&i.activate(t,r)}),o=n("."+s.wijCSS.wijmenuBreadcrumb,i.domObject.menucontainer).find("li a"),o.length>0&&o.eq(o.length-2).trigger("click",function(){r&&i.activate(t,r)}))},r.prototype._createMenuItems=function(){var e=this,t=[],i=e.options,s=e.options.items.length,o=e._getSublist().children("li").length,u,a,f;for(u=0;u<s-o;u++)e._getSublist().append("<li>");return i.ensureSubmenuOnBody&&i.mode==="flyout"&&(e._submenuContainer=n("<div>").addClass(i.wijCSS.helperReset).addClass(i.wijCSS.widget).addClass(i.wijCSS.header).addClass(i.wijCSS.wijmenu).addClass(i.wijCSS.wijmenuSubmenuContainer),i.orientation==="horizontal"&&i.mode==="flyout"&&e._submenuContainer.addClass(i.wijCSS.wijmenuHorizontal),f=n("<ul>").addClass(i.wijCSS.wijmenuList).addClass(i.wijCSS.helperReset).data(n.camelCase(e.widgetFullName),e).data("wijmomenu",n.camelCase(e.widgetFullName))),n(">li",e._getSublist()).each(function(s,o){var u=n(this),l=r._getMenuItemOptions(i,s),c,h;return a=e._createItemWidget(u,l),t.push(a),i.items[s]=a.options,i.ensureSubmenuOnBody&&i.mode==="flyout"&&(h=a._getSublist(),e._bindMousehoverEvent(h),h.children().length>0&&(c=n("<li>").addClass(i.wijCSS.widget).addClass(i.wijCSS.wijmenuItem).addClass(i.wijCSS.stateDefault).addClass(i.wijCSS.cornerAll).addClass(i.wijCSS.wijmenuParent).addClass(i.wijCSS.header).append(h),n(c).appendTo(f))),i.ensureSubmenuOnBody&&i.mode==="flyout"&&n(e._submenuContainer).append(f).appendTo("body"),this}),t},r.prototype._createItemWidget=function(e,t){var i=r._itemWidgetName;return n.fn[i]&&e[i](t),r._getItemWidget(e)},r.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo(n.domObject.menucontainer)):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},r.prototype._getDisabled=function(){var e=this.options;return e.disabledState===!0||e.disabled===!0},r.prototype._createDisabledDiv=function(e){return n("<div></div>").css({"z-index":"99999",position:"absolute",width:"100%",height:"100%",left:0,top:0})},r.prototype._innerDestroy=function(){var e=this,t=e.options;e.destroying=!0,e[t.mode==="flyout"?"_killFlyout":"_killDrilldown"](),e._killMenuItems(),e._killtrigger(),e._killElement(),t.ensureSubmenuOnBody&&t.mode==="flyout"&&e._submenuContainer&&e._submenuContainer.remove(),e.destroying=!1},r.prototype.destroy=function(){var e=this;e._handleDisabledOption(!1,e.domObject.menucontainer),e._innerDestroy(),t.prototype.destroy.call(this)},r.prototype.activate=function(e,t){if(!t)return;var n=this,i=n.options,s=n.domObject.scrollcontainer,o,u,a=!1,f=!0;o=(t.jquery?t:t.element).eq(0);if(n.activeItem&&n.activeItem.element.get(0)===o.get(0))return;n.deactivate(e),n.activeItem=r._getItemWidget(o),u=o.children(":first"),n._trigger("focus",e,{item:n.activeItem}),n.options.mode==="sliding"&&(f=o.parent().is("."+i.wijCSS.wijmenuCurrent),a=f&&n._hasScroll()&&s.wijsuperpanel("needToScroll",o),a&&(n._linkContainer.link=u,n._linkContainer.needToFocus=!0,s.wijsuperpanel("scrollChildIntoView",o))),u.addClass(i.wijCSS.stateFocus).end(),u.attr("id")||(u.attr("id",this._newId()),u.data("generatedID",!0)),n.element.attr("aria-activedescendant",u.attr("id")),f&&!a&&u.is("a")&&u.focus()},r.prototype.deactivate=function(e){var t=this,n=t.options,r=t.activeItem;if(!r)return;t.element.removeAttr("aria-activedescendant"),setTimeout(function(){r._getLink().removeClass(n.wijCSS.stateFocus),r._getLink().data("generatedID")&&r._getLink().removeAttr("id"),t._trigger("blur")},0),t.activeItem=null},r.prototype.next=function(e){this._move("next",function(e){return e._getFirstSelectableSubItem()},e)},r.prototype.previous=function(e){this._move("previous",function(e){return e._getLastSelectableSubItem()},e)},r.prototype.first=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getFirstSelectableSubItem(),r&&t[0]===r.element[0]):!1},r.prototype.last=function(){var e=this,t,n,r;return e.activeItem?(t=e._getActiveItemElement(),n=e.activeItem._getParentOrMenu(),r=n._getLastSelectableSubItem(),r&&t[0]===r.element[0]):!1},r.prototype.nextPage=function(e){var t=this,i=t._getActiveItemElement(),s,o,u,a,f;i?a=t.activeItem._getParentOrMenu():(a=t,i=t._getFirstSelectableSubItem());if(t.options.mode==="sliding"&&t._hasScroll()){if(!i||t.last()){t.activate(e,a._getFirstSelectableSubItem());return}s=i.offset().top,o=t.options.maxHeight,u=r._getSelectableSubItems(a,function(e){var t=n(e.element),r=o-(t.offset().top-s+t.height()),i=t.height();return r<i&&r>-i}),u.length?u=u[u.length-1]:u=a._getLastSelectableSubItem(),t.activate(e,u)}else!i||t.last()?f=a._getFirstSelectableSubItem():f=a._getLastSelectableSubItem(),t.activate(e,f)},r.prototype.previousPage=function(e){var t=this,i=t._getActiveItemElement(),s,o,u,a,f;i?a=t.activeItem._getParentOrMenu():(a=t,i=t._getFirstSelectableSubItem());if(t.options.mode==="sliding"&&t._hasScroll()){if(!i||t.first()){t.activate(e,a._getLastSelectableSubItem());return}s=i.offset().top,o=t.options.maxHeight,u=r._getSelectableSubItems(a,function(e){var t=n(e.element),r=t.offset().top-s+o-t.height(),i=t.height();return r<i&&r>-i}),u.length?u=u[0]:u=a._getFirstSelectableSubItem(),t.activate(e,u)}else!i||t.first()?f=a._getLastSelectableSubItem():f=a._getFirstSelectableSubItem(),t.activate(e,f)},r.prototype.select=function(e){var t=this,n=t.activeItem,r;t._trigger("select",e,{item:n}),t.options.checkable&&(r=!n.options.selected,n._setOption("selected",r))},r.prototype._getActiveItemElement=function(){return this.activeItem?this.activeItem.element:null},r.prototype.setItemDisabled=function(e,t){var r=n(e,this.element),i=this.options;r.find("."+i.wijCSS.wijmenuItem+">a").attr("disabled",t),r.find(">a").toggleClass(i.wijCSS.stateDisabled,t)},r.prototype._setOption=function(e,t){var n=this;if(n.destroying)return;n["_set_"+e]&&n["_set_"+e](t),n.options[e]=t,e==="disabled"&&n._handleDisabledOption(t,n.domObject.menucontainer)},r.prototype._set_items=function(e){var t=this;t._getSublist().children().remove(),t.options.items=e,t.refresh()},r.prototype._set_mode=function(e){var t=this;t._innerDestroy(),t.options.mode=e,t.refresh()},r.prototype._set_backLink=function(e){var t=this,r=t.options,i;this.options.backLink=e,t.options.mode==="sliding"&&(t._killDrilldown(),t._drilldown(),i=n("."+r.wijCSS.wijmenuBreadcrumb,t.domObject.menucontainer),t._resetDrilldownMenu(i))},r.prototype._set_direction=function(e){var t=this;t._innerDestroy(),t.refresh()},r.prototype._set_orientation=function(e){var t=this,r=t.domObject.menucontainer,i=t.options.direction,s="ui-icon-triangle-1-",o=i==="rtl"?"w":"e",u=e==="horizontal"?o:"s",a=e==="horizontal"?"s":o;r.removeClass(t.cssPre+"-vertical "+t.cssPre+"-horizontal"),t.options.mode==="flyout"?(r.addClass(t.cssPre+"-"+e),n.each(t.getItems(),function(e,t){if(t.getItems().length===0)return;t._getLink().find("."+s+u).removeClass(s+u+" "+s+a).addClass(s+a)})):r.addClass(t.cssPre+"-vertical")},r.prototype._getTriggerEle=function(){return r._getOuterElement(this.options.trigger,"."+this.options.wijCSS.wijmenu)},r.prototype._set_triggerEvent=function(e){var t=this,n=t.options,r=t._getTriggerEle();t._killtrigger(),n.triggerEvent=e,r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},r.prototype._set_trigger=function(e){var t=this,n=t.options,r;t._killtrigger(),n.trigger=e,r=t._getTriggerEle(),r.length>0&&t._initTrigger(r),n.mode==="flyout"&&(t._killFlyout(),t._flyout())},r.prototype._initTrigger=function(e){var t=this,r=t.options,i=r.triggerEvent,s=t.domObject.menucontainer,o=".wijmenuEvent";e.is("iframe")&&(e=n(e.get(0).contentWindow.document));switch(i){case"click":e.on(i+o,function(e){r.mode!=="popup"&&t._displayMenu(e),e.stopPropagation()});break;case"mouseenter":e.on(i+o,function(e){t._displayMenu(e),e.stopPropagation()});break;case"dblclick":e.on(i+o,function(e){t._displayMenu(e),e.stopPropagation()});break;case"rtclick":e.on("contextmenu"+o,function(e){s.hide(),t._displayMenu(e),e.preventDefault(),e.stopPropagation()})}},r.prototype._killtrigger=function(){var e=this.options,t;e.trigger!==""&&(t=n(e.trigger),t.is("iframe")&&(t=n(t.get(0).contentWindow.document)),t&&t.length>0&&t.off(".wijmenuEvent").off("wijmenuEvent"))},r.prototype._move=function(e,t,n){var i=this,s=i._getActiveItemElement(),o,u,a;if(!s||!s.length){i.activate(n,t(i));return}a=r._getItemWidget(s),o=a[e](),u=a._getParentOrMenu(),o?i.activate(n,o):i.activate(n,t(u))},r.prototype._bindMousehoverEvent=function(e){var t=this,r=t.options;e.delegate("li>."+r.wijCSS.wijmenuLink,"mouseenter.wijmenuEvent",function(){var e=n(this),i=e.hasAllClasses(r.wijCSS.stateDisabled);if(t._getDisabled()||i)return;e.addClass(r.wijCSS.stateHover).addClass(r.wijCSS.stateDefault)}).delegate("li>."+r.wijCSS.wijmenuLink,"mouseleave.wijmenuEvent",function(){var e=n(this),i=e.hasAllClasses(r.wijCSS.stateDisabled);if(t._getDisabled()||i)return;e.removeClass(r.wijCSS.stateHover).removeClass(r.wijCSS.stateDefault),e.data("subMenuOpened")&&e.addClass(r.wijCSS.stateActive)})},r.prototype.refresh=function(){var e=this,t=e.element,r=e.options,i=r.direction,s,o,u,a;e.domObject&&e._innerDestroy();if(t.is("ul"))e._rootMenu=t,s=t.wrap("<div></div>").parent(),o=s.wrap("<div></div>").parent();else{if(!t.is("div"))return;e._rootMenu=n("ul:first",t),s=t,o=t.wrap("<div></div>").parent()}i==="rtl"&&e._rootMenu.addClass(r.wijCSS.wijmenuRtl),s.addClass("scrollcontainer checkablesupport"),o.addClass(r.wijCSS.widget).addClass(r.wijCSS.header).addClass(r.wijCSS.wijmenu).addClass(r.wijCSS.cornerAll).addClass(r.wijCSS.helperClearFix),r.orientation==="horizontal"&&r.mode==="flyout"&&o.addClass(r.wijCSS.wijmenuHorizontal),u={scrollcontainer:s,menucontainer:o},e.domObject=u,e._getSublist().data("topmenu",!0),e._getSublist().hasAllClasses(r.wijCSS.wijmenuList)||e._getSublist().addClass(r.wijCSS.wijmenuList).addClass(r.wijCSS.helperReset),e._items=e._createMenuItems(),t.show(),e._bindMousehoverEvent(t),this[r.mode==="flyout"?"_flyout":"_drilldown"](),r.trigger!==""&&(a=e._getTriggerEle(),a.length>0&&(o.hide(),e._initTrigger(a))),e._bindDocClick()},r.prototype._bindDocClick=function(){var e=this;n(document).on(e.clickNameSpace,function(t){var r=e.options,i=r.trigger,s=e.domObject.menucontainer,o=e._getTriggerEle(),u,a;if(n(t.target).parent().is("."+r.wijCSS.wijmenuAllLists))return;if(n(t.target).closest(i).is(i))return;a=n(t.target).closest("."+r.wijCSS.wijmenu);if(a.length>0)return;if(r.mode==="sliding"){u=n("."+r.wijCSS.wijmenuBreadcrumb,s);if(i==="")return;e._resetDrilldownMenu(u)}else if(r.mode==="flyout"&&r.triggerEvent!=="mouseenter"){e._hideAllMenus(t);return}o&&o.length>0&&e._hideMenu(t)})},r.prototype._flyout=function(){var e=this,t=e.domObject.menucontainer,r=e.options,i=e.getItems();t.attr("role","menu"),r.orientation==="horizontal"&&t.attr("role","menubar"),n.each(i,function(e,t){t._flyout()})},r.prototype._hideAllMenus=function(e){var t=this,r,i,s=function(t){t.getItems&&t.getItems().length>0&&(n.each(t.getItems(),function(e,t){s(t)}),t._hideSubmenu(!1,e))};n.each(t._items,function(e,t){s(t)});if(t.options.trigger!==""){r=t.domObject.menucontainer;if(r.data("isAnimated"))return;i=t._getTriggerEle();if(i.length===0)return;t._hideMenu(e)}},r.prototype.hideAllMenus=function(e){this._hideAllMenus(e)},r.prototype._killFlyout=function(){n.each(this.getItems(),function(){this._killFlyout()})},r.prototype._killElement=function(){var e=this,t=e.options,r=e._getSublist();r.removeClass(t.wijCSS.wijmenuList).removeClass(t.wijCSS.helperReset).removeClass(t.wijCSS.wijmenuContent).removeClass(t.wijCSS.helperClearFix),n(document).off(e.clickNameSpace),e.element.is("ul")?e.element.unwrap().unwrap():e.element.unwrap(),e.domObject=null,e.element.removeData("topmenu").removeData("firstLeftValue").removeData("domObject"),r.undelegate(".wijmenuEvent")},r.prototype._killMenuItems=function(){var e=this,t=e.getItems(),n;for(n=t.length-1;n>=0;n--)t[n].destroy(!0);e._items.length=0},r.prototype._sroll=function(){var e=this.domObject.scrollcontainer,t=n.extend({hScroller:{scrollBarVisibility:"hidden"}},this.options.superPanelOptions);e.height(this.options.maxHeight),e.wijsuperpanel(t)},r.prototype._initScrollCallback=function(){var e=this,t=e.domObject.scrollcontainer;e._linkContainer={link:null,needToFocus:!1},t.wijsuperpanel({scrolled:function(){var t=e._linkContainer.link;e._linkContainer.needToFocus&&t&&t.is("a")&&(t.focus(),e._linkContainer.needToFocus=!1)}})},r.prototype._resetScroll=function(e){var t=this,n=t._rootMenu.parent(),r=5,i=t.domObject.scrollcontainer,s=e._getSublist();n.height(s.height()),i.wijsuperpanel("option","hScroller",{scrollValue:0}),i.wijsuperpanel("option","vScroller",{scrollValue:0}),i.wijsuperpanel("paintPanel"),t._hasScroll()&&(s.prev().length>0&&(r=s.prev().css("padding-left").replace(/px/g,"")),s.width(i.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-r),n.height(s.height()),i.wijsuperpanel("paintPanel"))},r.prototype._hasScroll=function(){var e=this.domObject.scrollcontainer;return e.data("wijmo-wijsuperpanel").vNeedScrollBar},r.prototype._resetDrillChildMenu=function(e){var t=this.options.wijCSS;e.removeClass(t.wijmenuScroll).removeClass(t.wijmenuCurrent).height("auto")},r.prototype._resetDrilldownMenu=function(e,t){var r=this,i=r.options,s=r._getSublist(),o=r.domObject.menucontainer,u=n("<li>"+i.crumbDefaultText+"</li>").addClass(i.wijCSS.wijmenuBreadcrumbText),a=function(e){n.each(e,function(e,t){var n=t._getSublist(),i=t.getItems();n.hide(),r._resetDrillChildMenu(n),i.length>0&&a(i)})};n("."+i.wijCSS.wijmenuCurrent,o).removeClass(i.wijCSS.wijmenuCurrent),s.animate({left:0},i.showDuration,null,function(){a(r.getItems()),s.addClass(i.wijCSS.wijmenuCurrent),t&&t()}),n("."+i.wijCSS.wijmenuAllLists,o).find("span").remove(),e.empty().append(u),n("."+i.wijCSS.wijmenuFooter,o).empty().hide(),r._resetScroll(r)},r.prototype._drilldown=function(){var e=this,t=e._getSublist(),r=e.domObject.menucontainer.attr("role","menu"),i,s=e.options,o=n("<ul></ul>").addClass(s.wijCSS.wijmenuBreadcrumb).addClass(s.wijCSS.stateDefault).addClass(s.wijCSS.cornerAll).addClass(s.wijCSS.helperClearFix),u=n("<li>"+s.crumbDefaultText+"</li>").addClass(s.wijCSS.wijmenuBreadcrumbText);t.wrap("<div>").parent().css("position","relative"),r.addClass(s.wijCSS.wijmenuIpod).addClass(s.wijCSS.wijmenuContainer),s.backLink?o.addClass(s.wijCSS.wijmenuFooter).appendTo(r).hide():o.addClass(s.wijCSS.wijmenuHeader).prependTo(r),s.backLink||o.append(u),i=r.width(),t.addClass(s.wijCSS.wijmenuContent).addClass(s.wijCSS.wijmenuCurrent).addClass(s.wijCSS.content).addClass(s.wijCSS.helperClearFix).css({width:i}),n.each(e.getItems(),function(e,t){t._setDrilldownUlStyle()}),e._sroll(),e._initScrollCallback(),e._resetScroll(e),e.element.data("firstLeftValue",parseFloat(t.css("left"))),e._bindDrillDownClick(o)},r.prototype._bindDrillDownClick=function(e){var t=this,i=t.options,s="li>."+i.wijCSS.wijmenuLink,o=t._getSublist();o.delegate(s,"click",function(s,u){var a=n(this).parent(),f=a.attr("disabled"),l,c,h,p,d,v,m,g,y,b=r._getItemWidget(a),w,E,S=i.direction,x=t.domObject.menucontainer,T=n('<li><a href="#">'+i.topLinkText+"</a></li>").addClass(i.wijCSS.wijmenuAllLists);if(t._getDisabled()||f)return;if(t._isSliding)return;o.stop(!0,!0),y=r._hasVisibleSubMenus(b);if(!y){t._leafNodeClick(s,b,e);return}l=b._getSublist();if(l.hasAllClasses(i.wijCSS.wijmenuCurrent))return;if(!t._trigger("showing",s,b))return;t._isSliding=!0,c=b._getParentOrMenu()._getSublist(),h=c.data("topmenu")?0:parseFloat(o.css("left")),S==="rtl"?v=Math.round(h+parseFloat(x.width().toString())):v=Math.round(h-parseFloat(x.width().toString())),m=n("."+i.wijCSS.wijmenuFooter,x),g=function(e,s){var o=e,u=n("."+i.wijCSS.wijmenuCurrent,x),a,f;if(u.get(0)===t._getSublist().get(0))return;s?(a=s._getSublist(),f=s):(a=u.parent().closest("ul",x[0]),f=r._getItemWidget(u.parent())._getParentOrMenu()),u.hide().attr("aria-expanded","false"),t._resetDrillChildMenu(u),t._resetScroll(f),a.addClass(i.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),a.hasAllClasses(i.wijCSS.wijmenuContent)&&(o.remove(),m.hide())},t._resetDrillChildMenu(c),t._resetScroll(b),t._slidingAnimation(o,v,function(){t._trigger("shown",s,b),t.activate(s,u||b),t.select(s),t._isSliding=!1}),l.show().addClass(i.wijCSS.wijmenuCurrent).attr("aria-expanded","true"),i.backLink?m.find("a").length===0&&(m.show(),w=n("<span></span>").addClass(i.wijCSS.icon).addClass(i.wijCSS.iconArrowLeft),E=n("<span></span>").addClass(i.wijCSS.wijmenuBacklinktext),t._backLink=n('<a href="#"></a>').append(w).append(E).appendTo(m).click(function(e,r){if(t._getDisabled())return;var i=t._getCurrentItemInSliding(),s=n(this),u;if(!t._trigger("hidding",e,i))return;o.stop(!0,!0);if(S==="rtl")u=Math.round(o.css("left").replace("px",""))-Math.round(x.width());else{u=Math.round(o.css("left").replace("px",""))+Math.round(x.width());if(u>h)return}t._slidingAnimation(o,u,function(){t._trigger("hidden",e,i),g(s),r&&r()}),e.preventDefault()}),E.width(m.width()-w.width()),E.text(i.backLinkText)):(e.find("li").length===1&&(e.empty().append(T),T.find("a").click(function(r,i){var s=n(this).parent(),o=t._getCurrentItemInSliding();t._slidingMenu(r,s,o,null,function(n){n?(g(null,n),i&&i()):t._resetDrilldownMenu(e,i)}),r.preventDefault()})),n("."+i.wijCSS.wijmenuCurrentCrumb,x).removeClass(i.wijCSS.wijmenuCurrentCrumb),p=b._getLink().text(),d=n("<li></li>").addClass(i.wijCSS.wijmenuCurrentCrumb).append(n('<a href="#">'+p+"</a>").addClass(i.wijCSS.wijmenuCrumb)),d.appendTo(e).find("a").click(function(e,r){if(t._getDisabled())return;var s=n(this).parent(),o;s.is("."+i.wijCSS.wijmenuCurrentCrumb)||(o=t._getCurrentItemInSliding(),t._slidingMenu(e,s,o,b,function(e){g(null,e),r&&r()})),e.preventDefault()}),d.prev().append(n("<span></span>").addClass(i.wijCSS.icon).addClass(i.wijCSS.iconCaratRight))),n(this).attr("href")==="#"&&s.preventDefault()})},r.prototype._slidingMenu=function(e,t,n,r,i){var s=this,o=s._getSublist(),u=s.options.direction,a=s.domObject.menucontainer,f=a.width(),l=t.parent().children().length-1,c,h,p,d,v=function(e,t,n){c=(u==="rtl"?1:-1)*t*f,s._slidingAnimation(o,c,function(){n&&n(e)})},m=function(t,n){var r;if(t!==n){r=s._trigger("hidding",e,t);if(r)return l--,d&&d(),d=function(){s._trigger("hidden",e,t)},m(t.getParent(),n)}return t};h=m(n,r),h!==n&&(v(h,l,function(){d&&d(),i&&i(h)}),p=t.parent().children().eq(l),p.addClass("wijmo-wijmenu-current-crumb").find("span").remove(),p.nextAll().remove())},r.prototype._getCurrentItemInSliding=function(){var e=this,t=e.domObject.menucontainer,i=n(".wijmo-wijmenu-current",t),s=r._getItemWidget(i.parent());return s},r.prototype._leafNodeClick=function(e,t,n){var r=this,i=r.options,s;r.activate(e,t),r.select(e),i.trigger&&(s=r._getTriggerEle(),s.length&&(r._hideMenu(e),r._resetDrilldownMenu(n))),t._getLink().attr("href")==="#"&&e.preventDefault()},r.prototype._slidingAnimation=function(e,t,n){var r=this.options.slidingAnimation;r&&!r.disabled?e.stop(!0,!0).animate({left:t},r.duration,r.easing,n):(e.css("left",t),n.call(this))},r.prototype._killDrilldown=function(){var e=this._getSublist(),t=this.options,r=this.domObject,i={width:"",height:""};e.css(i).removeClass(t.wijCSS.content),r.scrollcontainer&&r.scrollcontainer.parent().length>0&&(r.scrollcontainer.css(i),r.scrollcontainer.wijsuperpanel("destroy"),r.scrollcontainer.removeClass("wijmo-wijsuperpanel").append(e)),e.prevAll().remove(),r.menucontainer.removeClass(t.wijCSS.wijmenuIpod).removeClass(t.wijCSS.wijmenuContainer),n("."+t.wijCSS.wijmenuCurrent,r.menucontainer).removeClass(t.wijCSS.wijmenuCurrent),n("."+t.wijCSS.wijmenuBreadcrumb,r.menucontainer).remove(),e.undelegate("li>."+t.wijCSS.wijmenuLink,"click"),n("ul",e).css({left:"",width:""}),e.css("left",""),r.scrollcontainer=r.menucontainer.children(":first")},r.prototype._displayMenu=function(e){var t=this,i=t.options,s,o,u,a=t.domObject.menucontainer,f=n(e.target),l=!r._hasVisibleSubMenus(t);if(a.is(":visible")||l)return;if(!t._trigger("showing",e,t))return;a.show(),t._setPosition(f),t.nowIndex++,t._setZindex(a,t.nowIndex),a.hide(),s={context:a,show:!0},o=i.direction==="rtl"?"right":"left",u=n.extend({},{option:{direction:o}},i.animation,i.showAnimation),r._animateFlyoutMenu(u,s,function(){t._trigger("shown",e,t)}),t._isClickToOpen=i.triggerEvent==="click",this.element.data("shown",!0)},r.prototype._hideMenu=function(e){var t=this,i=t.options,s=this.domObject.menucontainer,o=r.animations,u,a;if(!this.element.data("shown"))return;if(!t._trigger("hidding",e,t))return;this.element.data("shown",!1),n.fn.wijhide?(u={context:s,show:!1},a=n.extend({},i.animation,i.hideAnimation),s.wijhide(a,o,u,null,function(){t._setZindex(s,null),s.attr("aria-hidden",!0),t._trigger("hidden",e,t)})):(s.hide().attr("aria-hidden",!0),t._setZindex(s,null),t._trigger("hidden",e,t))},r.prototype._setZindex=function(e,t){var r=this.domObject,i;if(!r)return;i=r.menucontainer;if(e.get(0)===i.get(0)){t?i.css("z-index",t):i.css("z-index","");return}t?(e.parent().css("z-index",999),e.css("z-index",t),n.browser.msie&&parseInt(n.browser.version)<8&&i.css("z-index")===0&&i.css("z-index",9950)):(e.css("z-index",""),e.parent().css("z-index",""),n.browser.msie&&parseInt(n.browser.version)<8&&n("ul:visible",this._getSublist()).length===0&&i.css("z-index")===9950&&i.css("z-index",""))},r.prototype._setPosition=function(e){var t=this._getPosition(),r={of:e},i=this.domObject.menucontainer;i.css({left:"0",top:"0",position:"absolute"}),i.position(n.extend(r,t))},r.prototype._getPosition=function(){var e=this.options,t=e.direction,r=t==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"};return r=n.extend(r,e.position),r},r.prototype._getFirstSelectableSubItem=function(){return r._getFirstSelectableSubItem(this)},r.prototype._getLastSelectableSubItem=function(){return r._getLastSelectableSubItem(this)},r.prototype.add=function(e,t){r._add(this,e,t)},r.prototype._getSublist=function(){return this._rootMenu},r.prototype.getItems=function(){return this._items},r.prototype.remove=function(e){r._remove(this,e)},r.prototype._newId=function(){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",n;for(n=0;n<16;n++)t+=e[Math.round(Math.random()*25)];return t},r.animations={slide:function(e,t){e=n.extend({duration:400,easing:"swing"},e,t),e.show?e.context.stop(!0,!0).animate({height:"show"},e,function(){e.context.attr("aria-hidden",!1)}):e.context.stop(!0,!0).animate({height:"hide"},e,function(){e.context.attr("aria-hidden",!0)})}},r._animateFlyoutMenu=function(t,i,s){var o=i.context;n.fn.wijshow?(o.data("isAnimated",!0),o.wijshow(t,r.animations,i,null,function(){o.data("isAnimated",!1);var e=n.browser;e.msie&&e.version==="9.0"?(o.wrap("<div></div>"),o.unwrap()):e.msie&&e.version==="6.0"&&o.css("overflow",""),o.attr("aria-hidden",!1),s&&s()})):o.show().attr("aria-hidden",!1)},r._getMenuItemOptions=function(t,r){return t?!t.items||!n.isArray(t.items)?{}:r>=t.items.length?{}:t.items[r]:{}},r._getOuterElement=function(t,r){return n(t).filter(function(){return n(this).closest(r).length===0})},r._hasVisibleSubMenus=function(t){var n,r,i;t.jquery?t.data("wijmomenu")?n=t.data(t.data("wijmomenu")):t.data("wijmomenuitem")&&(n=t.data(t.data("wijmomenuitem"))):n=t;if(!n)throw"the arugment 'menuItem' must be an wijmenu or wijmenuitem";r=n.getItems();if(!r.length)return!1;for(i=0;i<r.length;i++)if(r[i].options.displayVisible)return!0;return!1},r._getFirstSelectableSubItem=function(t){var n,r,i=t.getItems();for(n=0;n<i.length;n++){r=i[n].options;if(r.displayVisible!==!1&&!r.header&&!r.separator)return i[n]}return null},r._getLastSelectableSubItem=function(t){var n,r=t.getItems(),i;for(n=r.length-1;n>=0;n--){i=r[n].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return r[n]}return null},r._getSelectableSubItems=function(t,r){return n.grep(t.getItems(),function(e,t){var n=e.options;return n.header||n.separator||n.displayVisible===!1?!1:r(e,t)},!1)},r._add=function(t,i,s){var o=null,u=n("<li></li>"),a=t._getSublist(),f=t.getItems(),l,c,h=!1;typeof i=="string"?/<(h[1-5]|a)[\s\S]*>[\s\S]*<\/\1>/.test(i)&&u.append(i):n.isPlainObject(i)&&(c=jQuery.extend(!0,{},i));if(!a||a.length<=0)a=n("<ul></ul>"),t.element.append(a),h=!0;(!s||isNaN(s)||s>f.length)&&s!==0&&(s=f.length),f.length>0&&f.length!==s?(l=f[s].element,u.insertBefore(l)):a.append(u),o=t._createItemWidget(u,c);if(o===null||o===undefined)return;r._changeCollection(s,t.getItems(),t.options.items,o),t._bindModeEvents?t._bindModeEvents(o,h):o._bindModeEvents(o,h),h&&t._initUlCssClass()},r._changeCollection=function(t,n,r,i){if(!i){n.splice(t,1),r.splice(t,1);return}n.splice(t,0,i),r.splice(t,0,i.options)},r._remove=function(t,n){var r=t.getItems()[n];r&&r.element&&r.element.remove()},r._getItemWidget=function(t){return t.data(t.data("wijmomenuitem"))},r}(e.wijmoWidget);t.wijmenu=i;var s=function(){function e(){this.initSelector=":jqmData(role='wijmenu')",this.wijCSS={wijmenu:"wijmo-wijmenu",wijmenuHorizontal:"wijmo-wijmenu-horizontal",wijmenuCurrent:"wijmo-wijmenu-current",wijmenuCurrentCrumb:"wijmo-wijmenu-current-crumb",wijmenuBreadcrumb:"wijmo-wijmenu-breadcrumb",wijmenuBreadcrumbText:"wijmo-wijmenu-breadcrumb-text",wijmenuItem:"wijmo-wijmenu-item",wijmenuLink:"wijmo-wijmenu-link",wijmenuList:"wijmo-wijmenu-list",wijmenuScroll:"wijmo-wijmenu-scroll",wijmenuContent:"wijmo-wijmenu-content",wijmenuFooter:"wijmo-wijmenu-footer",wijmenuHeader:"wijmo-wijmenu-header",wijmenuContainer:"wijmo-wijmenu-container",wijmenuIpod:"wijmo-wijmenu-ipod",wijmenuCrumb:"wijmo-wijmenu-crumb",wijmenuAllLists:"wijmo-wijmenu-all-lists",wijmenuPrevList:"wijmo-wijmenu-prev-list",wijmenuRtl:"wijmo-wijmenu-rtl",wijmenuBacklinktext:"wijmo-wijmenu-backlinktext",wijmenuSubmenuContainer:"wijmo-wijmenu-submenu-container",wijmenuParent:"wijmo-wijmenu-parent"},this.wijMobileCSS={header:"ui-header ui-bar-b",content:"ui-body ui-body-b",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.trigger="",this.triggerEvent="click",this.position={},this.animation={animated:"slide",duration:400,easing:null,option:null},this.showAnimation={},this.hideAnimation={animated:"fade",duration:400,easing:null,option:null},this.showDelay=400,this.hideDelay=400,this.slidingAnimation={duration:400,easing:null},this.mode="flyout",this.superPanelOptions=null,this.checkable=!1,this.orientation="horizontal",this.direction="ltr",this.maxHeight=200,this.backLink=!0,this.backLinkText="Back",this.topLinkText="All",this.crumbDefaultText="Choose an option",this.select=null,this.focus=null,this.blur=null,this.showing=null,this.shown=null,this.hidding=null,this.hidden=null,this.items=null,this.ensureSubmenuOnBody=!1}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),function(e){e._map=[],e.link=0,e.separator=1,e.header=2,e.other=3}(t.MarkupType||(t.MarkupType={}));var o=t.MarkupType,u=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._initState=function(){this._items=[],this._resetMarkupValue(),this.options.items||(this.options.items=[])},t.prototype._create=function(){var t=this;t._isMobile&&n.extend(!0,t.options.wijCSS,t.options.wijMobileCSS),t.element.data("wijmomenuitem",n.camelCase(t.widgetFullName)),t._initState(),t._getOrSetOptionsValues(),t._createChildMenuItems(),t._initCssClass(),e.prototype._create.call(this)},t.prototype._refresh=function(){var e=this,t=e.options;e._set_navigateUrl(t.navigateUrl),e._set_target(t.target),e._set_displayVisible(t.displayVisible),e._createChildMenuItems(),e._initCssClass()},t.prototype._setOption=function(t,r){var i=this,s=i.options,o;if(t==="items"){e.prototype._setOption.call(this,t,r),i._set_items(r);return}if(r===s[t])return;e.prototype._setOption.call(this,t,r);if(!n.isFunction(i["_set_"+t]))return;i["_set_"+t](r,!0);switch(t){case"header":case"separator":i._resetMarkupValue(),i._refresh();break;case"displayVisible":o=i.getParent(),o&&o._setSubmenuIcon();break;default:}},t.prototype.index=function(){return this.element.index()},t.prototype._set_selected=function(e){var t=this,n=t.options,r=t._getMenuItemType();r===o.link?t._getLink().toggleClass(n.wijCSS.stateActive,e):n.selected=!1},t.prototype._set_items=function(e){var t=this;t._getSublist().remove(),t._items=[],e.length>0&&(t._createChildMenuItems(),t._initUlCssClass()),t._setSubmenuIcon(e.length>0),t._bindModeEvents(t,!0),t._resetMarkupValue()},t.prototype._bindModeEvents=function(e,t){var n=this,r=e._getMenu(),i=r.options;t&&(n._initUlCssClass(),n._setSubmenuIcon(),n._resetMarkupValue()),i.mode==="flyout"?t?(n._killFlyout(),n._flyout()):e._flyout():(n._setDrilldownUlStyle(),e.element.parent().is(":visible")&&r._resetScroll(e._getParentOrMenu()))},t.prototype._set_text=function(e,t){var n=this,r=n.options;e||t?n._setText(e):r.text=n._getText()},t.prototype._set_navigateUrl=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(e||t?i.attr("href",e):r.navigateUrl=i.attr("href"))},t.prototype._set_target=function(e,t){var n=this,r=n.options,i=n._getLink();i.is("a")&&(r.target||t?i.attr("target",e):r.target=i.attr("target")||"")},t.prototype._createIconSpan=function(){var e=this,t=e.options,r=e._getLink(),i,s;return i=n("<span>"),s=r.children("."+t.wijCSS.wijmenuText).wrap("<span>").parent(),s.addClass(t.wijCSS.wijmenuText),s.prepend(i),i},t.prototype._set_iconClass=function(e,t){var n=this,r=n.options,i,s,u,a;if(r.header===!0||r.separator===!0)return;i=n._getLink(),s=i.find("span."+r.wijCSS.wijmenuitemIcon),e?(s.length===0&&(s=n._createIconSpan()),s.addClass(e).addClass(r.wijCSS.wijmenuIconLeft).addClass(r.wijCSS.wijmenuitemIcon),t&&n._set_imagePosition(r.imagePosition)):s.length!==0&&(s.remove(),u=i.children("."+r.wijCSS.wijmenuText),a=u.text(),u.html(""),u.text(a)),n._getMenuItemType()===o.other&&i.addClass(r.wijCSS.wijmenuLink).addClass(r.wijCSS.cornerAll)},t.prototype._set_imagePosition=function(e,t){var n=this,r=n.options,i=n._getLink(),s=i.find(">span>span."+r.wijCSS.wijmenuitemIcon),o=e==="right"?r.wijCSS.wijmenuIconRight:r.wijCSS.wijmenuIconLeft;if(s.length===0)return;s.removeClass(r.wijCSS.wijmenuIconRight).removeClass(r.wijCSS.wijmenuIconLeft).addClass(o)},t.prototype._set_separator=function(e,t){var n=this,r=n.element,i=n.options,s=n._getLink();t&&e===!1?(r.html("").removeClass(i.wijCSS.wijmenuSeparator).removeClass(i.wijCSS.widget).removeClass(i.wijCSS.wijmenuItem).removeClass(i.wijCSS.stateDefault).removeClass(i.wijCSS.cornerAll),n._createMenuItemMarkup(o.link).appendTo(r)):e===!0||s.length===0?(i.separator=!0,i.header=!1,r.html(n._createMenuItemMarkup(o.separator))):i.separator=!1},t.prototype._set_header=function(e,t){var n=this,r=n.element,i=n.options,s=n._getLink();t&&e===!1?(r.html("").removeClass(i.wijCSS.header).removeClass(i.wijCSS.cornerAll).removeClass(i.wijCSS.widget).removeClass(i.wijCSS.wijmenuItem).removeClass(i.wijCSS.stateDefault),n._createMenuItemMarkup(o.link).appendTo(r)):e===!0||s.is("h1,h2,h3,h4,h5")?(i.header=!0,i.separator=!1,s.is("h1,h2,h3,h4,h5")||(s.remove(),s=n._createMenuItemMarkup(o.header),r.append(s))):i.header=!1},t.prototype._set_displayVisible=function(e){var t=this,n=t.element;e?n.show():n.hide()},t.prototype._createMenuItemMarkup=function(e){var t=this,r=t.options,i;return e===o.separator?i=n('<span class="'+r.wijCSS.wijmenuSeparatorContent+'">&nbsp;</span>'):e===o.header?i=n("<h3></h3>").text(r.text):i=n("<a>").text(r.text),i},t.prototype._getMenuItemType=function(e){var t=this,r=t.options,i=t._getLink();return e&&(r=n.extend({},r,e)),r.separator===!0?o.separator:r.header===!0?o.header:i.length===0?r.text?o.link:o.separator:i.is("a")?o.link:i.is("h1,h2,h3,h4,h5")?o.header:o.other},t.prototype._getOrSetOptionsValues=function(){var e=this,t=e.element,n=e.options,r=e._getLink(),i=e._getMenuItemType();i===o.header?(e._set_header(n.header),e._set_text(n.text)):i===o.separator?e._set_separator(n.separator):(r.length===0?(r=e._createMenuItemMarkup(i),t.append(r)):e._set_text(n.text),e._resetMarkupValue(),e._set_navigateUrl(n.navigateUrl),e._set_target(n.target)),e._set_displayVisible(n.displayVisible),e._set_selected(n.selected)},t.prototype._getText=function(){return this._getLink().text()},t.prototype._setText=function(e){var t=this.element,n=this.options,r;r=t.find(":not(ul)a ."+n.wijCSS.wijmenuText+":first");if(r.length!==0){r.text(e);return}r=t.children("h1,h2,h3,h4,h5").filter(":first");if(r.length!==0){r.text(e);return}r=t.children("a:first");if(r.length!==0){r.text(e);return}},t.prototype._createChildMenuItems=function(){var e=this,t=e.element,r=e._items,s=e.options,o,u,a,f,l,c;if(s.header===!0||s.separator===!0)return;o=s.items.length,u=e._getSublist(),a=u.children("li").length;if(o>a){u.length===0&&(u=n("<ul>").appendTo(t),e._resetMarkupValue());for(f=0;f<o-a;f++)u.append("<li>")}n.each(e._getChildren(),function(t,s){var o=n(s),u=i._getMenuItemOptions(e.options,t);l=e._createItemWidget(o,u),r.push(l),e.options.items[t]=l.options})},t.prototype._createItemWidget=function(e,t){var r=this,i=r.widgetName;return e[i](t),e.data(n.camelCase(r.widgetFullName))},t.prototype._initCssClass=function(){var e=this,t=e.element,n=e.options,r=e._getLink(),i=e._getMenuItemType();i!==o.separator&&t.attr("role","menuitem"),i===o.separator?t.addClass(n.wijCSS.wijmenuSeparator).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll):i===o.header?t.addClass(n.wijCSS.header).addClass(n.wijCSS.cornerAll):(i===o.link?t.hasAllClasses(n.wijCSS.wijmenuItem)||(t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),r.addClass(n.wijCSS.wijmenuLink).addClass(n.wijCSS.cornerAll),r.wrapInner("<span>").children("span").addClass(n.wijCSS.wijmenuText)):t.addClass(n.wijCSS.widget).addClass(n.wijCSS.wijmenuItem).addClass(n.wijCSS.stateDefault).addClass(n.wijCSS.cornerAll),e._setSubmenuIcon()),e._set_iconClass(n.iconClass),e._set_imagePosition(n.imagePosition),e._initUlCssClass()},t.prototype._initUlCssClass=function(){var e=this.options.wijCSS;this._getSublist().addClass(e.wijmenuList).addClass(e.content).addClass(e.cornerAll).addClass(e.helperClearFix).addClass(e.wijmenuChild).addClass(e.helperReset).hide()},t.prototype._setSubmenuIcon=function(e){var t=this,r=t.options,s=t._getLink(),o=t._getMenu(),u=o.options.direction,a=u==="rtl"?s.children("span."+r.wijCSS.icon+":first"):s.children("span."+r.wijCSS.icon+":last");e===undefined&&(e=i._hasVisibleSubMenus(t)),e&&!s.is(":input")?(a.length===0&&(u==="rtl"?a=n("<span>").prependTo(s):a=n("<span>").appendTo(s)),t._isRoot()&&o.options.orientation==="horizontal"&&o.options.mode==="flyout"?a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowDown):u==="rtl"?a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowLeft):a.addClass(r.wijCSS.icon).addClass(r.wijCSS.iconArrowRight)):a.remove()},t.prototype._killFlyout=function(){var e=this.element.attr("role",""),t=this.options;e.removeClass(t.wijCSS.wijmenuParent).off(".wijmenuEvent").off(".wijmenuitem").children(":first").off(".wijmenuEvent").off(".wijmenuitem").attr("aria-haspopup",""),this._getSublist().off(".wijmenuEvent").off(".wijmenuitem"),n.each(this.getItems(),function(){this._killFlyout()})},t.prototype._getItemTriggerEvent=function(){var e=this,t=e.element,r=e._getMenu(),i=r.options,s="default";return i.trigger!==""&&(t.is(i.trigger)||r.element.is(i.trigger)?s=i.triggerEvent:(t.parents("."+i.wijCSS.wijmenuParent).each(function(e,t){if(n(t).is(i.trigger))return s=i.triggerEvent,!1}),s==="default"&&e._isOuterTirggerEle()&&(s=i.triggerEvent))),t.data("triggerEvent",s),s},t.prototype._isOuterTirggerEle=function(){var e=this._getMenu();return i._getOuterElement(e.options.trigger,"."+e.options.wijCSS.wijmenu).length>0},t.prototype._flyout=function(){var e=this,t=e._getMenu(),r=t.options,i=".wijmenuitem",s=n(e.element).attr("aria-haspopup",!0),o=e._getItemTriggerEvent(),u=s.children("a."+r.wijCSS.wijmenuLink),a=e._getSublist(),f,l,c;if(e.getItems().length>0){a.on("mouseleave"+i,function(t){if(r.disabled)return;c=setTimeout(function(){e._hideCurrentSubmenu(t)},r.hideDelay)}),s.addClass(e.options.wijCSS.wijmenuParent);if(o!=="default"&&r.triggerEvent!=="mouseenter"){switch(r.triggerEvent){case"click":u.on("click"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t)});break;case"dblclick":u.on("dblclick"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t)});break;case"rtclick":u.on("contextmenu"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;e._showFlyoutSubmenu(t),t.preventDefault()})}a.data("notClose",!0)}else u.on("mouseenter.wijmenuEvent",function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;clearTimeout(c),l=setTimeout(function(){e._displaySubmenu(t,null)},r.showDelay)}).on("mouseleave"+i,function(t){if(r.disabled||n(this).hasAllClasses(r.wijCSS.stateDisabled))return;clearTimeout(l),a.is("ul")||(a=a.children("ul:first")),c=setTimeout(function(){e._hideSubmenu(!1,t)},r.hideDelay)}),e.getItems().length>0&&e._getSublist().on("mouseenter"+i,function(e){if(r.disabled)return;clearTimeout(c)}),a.data("notClose",!1)}u.on("click.wijmenuEvent",function(n){f=u.hasAllClasses(r.wijCSS.stateDisabled);if(r.disabled||f)return!1;if(u.is("a")){if(e._getSublist().length===0)t._hideAllMenus(n);else if(r.trigger===""||s.data("triggerEvent")==="default"||r.triggerEvent==="mouseenter")t._hideAllMenus(n);else{var i=t._currentMenuList,o,a;if(i!==undefined){o=s;if(e._getSublist().length===0)for(a=i.length;a>0;a--){if(i[a-1]===e)break;i[a-1]._hideSubmenu(!1,n)}}}t.activate(n,e)}t.select(n),u.attr("href")==="#"&&n.preventDefault()}).on("focusin.wijmenuEvent",function(n){f=u.hasAllClasses(r.wijCSS.stateDisabled);if(r.disabled||f)return;u.is("a")&&t.activate(n,e)}),n.each(e.getItems(),function(){this._flyout()})},t.prototype._hideSubmenu=function(e,t){var r=this,s=r._getMenu(),o=s.options,u=i.animations,a,f,l,c=r._getSublist(),h=r._getLink(),p=n.browser.msie?r.element.children("iframe.bgiframe"):null,d;if(!h.data("subMenuOpened"))return;if(!s._trigger("hidding",t,r))return;h.is("."+o.wijCSS.wijmenuLink)&&(h.data("subMenuOpened",!1),h.removeClass(o.wijCSS.stateActive)),c.is(":animated")&&c.stop(!0,!0),n.fn.wijhide&&e!==!0?(a={context:c,show:!1},f=n.extend({},o.animation,o.hideAnimation),c.wijhide(f,u,a,null,function(){s._setZindex(c,null),c.attr("aria-hidden",!0),n.browser.msie&&p.remove(),s._trigger("hidden",t,r)})):(c.hide({complete:function(){n.browser.msie&&p.remove()}}).attr("aria-hidden",!0),s._setZindex(c,null),s._trigger("hidden",t,r)),l=s._currentMenuList,l&&(l=n.makeArray(n.map(l,function(e){return e&&e===r?null:e})),s._currentMenuList=n.makeArray(l))},t.prototype._displaySubmenu=function(e,t){var r=this,s=r._getMenu(),o=s.options,u,a,f,l=i.animations,c,h=r._getLink(),p=r._getSublist(),d,v;n.browser.msie&&(d=r.element.children("iframe.bgiframe"),d.length===0&&(d=n('<iframe class="bgiframe" frameborder="0" tabindex="-1" src="javascript: false;" style="display:none;position:absolute;z-index:-1;top:0px;left:0px;opacity:0;filter:alpha(opacity = 0);" />'),r.element.append(d))),c=!i._hasVisibleSubMenus(r);if(p.is(":visible")||c)return;if(!s._trigger("showing",e,r))return;h.is("a."+o.wijCSS.wijmenuLink)&&h.data("subMenuOpened",!0),p.show(),r._setMenuItemPosition(),n.browser.msie&&r._setIframeBounds(p,d),s.nowIndex++,s._setZindex(p,s.nowIndex),p.hide(),u={context:p,show:!0},a=o.direction==="rtl"?"right":"left",o.orientation==="horizontal"&&r._isRoot()&&(a="up"),n.browser.msie&&d.css("display",""),f=n.extend({},{option:{direction:a}},o.animation,o.showAnimation),i._animateFlyoutMenu(f,u,function(){p.is(":hidden")&&r._hideSubmenu(!0,e),s._trigger("shown",e,r),t&&t()}),s._isClickToOpen=o.triggerEvent==="click",s._currentMenuList===undefined&&(s._currentMenuList=[]),s._currentMenuList.push(r)},t.prototype._setMenuItemPosition=function(){var e=this,t=e._getSublist(),r=e._getMenuItemPosition(),i={of:this._getLink()};t.css({left:"0",top:"0",position:"absolute"}),t.position(n.extend(i,r))},t.prototype._getMenuItemPosition=function(){var e=this,t=this._getMenu(),r=t.options,i=r.direction,s=i==="rtl"?{my:"right top",at:"left top"}:{my:"left top",at:"right top"};return r.orientation==="horizontal"&&e._isRoot()&&(s=i==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"}),s=n.extend(s,r.position),s},t.prototype._getChildren=function(){return this._getSublist().children("li")},t.prototype._setDrilldownUlStyle=function(){var e=this,t=e.options,r=e._getSublist(),i=e._getMenu(),s=i.domObject.menucontainer.width();i.options.direction==="rtl"?r.css({width:s,left:-s}):r.css({width:s,left:s}),r.addClass(t.wijCSS.content),n.each(e.getItems(),function(e,t){t.getItems().length&&this._setDrilldownUlStyle()})},t.prototype._getMenu=function(){var e=this,t=e._menu,n,r;if(!t){n=e.element.parent();while(!n.is("body")&&n.length>0){r=n.data("wijmomenu");if(r)return t=n.data(r),e._menu=t,t;n=n.parent()}throw"An menuitem must be a child of menu"}return t},t.prototype.getParent=function(){var e=this,t=e.element,n=e._parent,r,s;if(n!==undefined)return n;r=e._getMenu(),s=t.parent().closest("li",r.element[0]);if(s.length>0){n=i._getItemWidget(s);if(n!==undefined)return e._parent=n,n}if(r._getSublist().get(0)===t.parent().get(0))return e._parent=null,null;throw"An menuitem must be a child of menu or another menuitem"},t.prototype._getParentOrMenu=function(){return this.getParent()||this._getMenu()},t.prototype._getField=function(e){return this.element.data(e)},t.prototype._setField=function(e,t){return this.element.data(e,t)},t.prototype._innerDestroy=function(e){var t=this,n=t.options,r=t.element,i,s=t.getItems(),o=s.length-1;r.removeClass(n.wijCSS.widget).removeClass(n.wijCSS.wijmenuItem).removeClass(n.wijCSS.stateDefault).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.wijmenuParent).removeClass(n.wijCSS.header).removeClass(n.wijCSS.wijmenuSeparator),i=r.children("."+n.wijCSS.wijmenuLink),i.removeClass(n.wijCSS.wijmenuLink).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.stateFocus).removeClass(n.wijCSS.stateHover).removeClass(n.wijCSS.stateActive).html(i.children("."+n.wijCSS.wijmenuText).html()).off(".wijmenuitem").off(".wijmenuEvent"),r.children("ul").removeClass(n.wijCSS.wijmenuList).removeClass(n.wijCSS.content).removeClass(n.wijCSS.cornerAll).removeClass(n.wijCSS.helperClearFix).removeClass(n.wijCSS.wijmenuChild).removeClass(n.wijCSS.helperReset).attr("role","").attr("aria-activedescendant","").show().css({left:"",top:"",position:""}).attr("hidden",""),r.removeAttr("role"),i.removeAttr("aria-haspopup"),e||t._removeFromParentCollection(),r.removeData("menu").removeData("parent"),r.children("iframe.bgiframe").length!==0&&r.children("iframe.bgiframe").remove();for(;o>=0;o--)s[o].destroy(!0);t._items.length=0,t._resetMarkupValue()},t.prototype.destroy=function(t){this._innerDestroy(t),e.prototype.destroy.call(this)},t.prototype._getFirstSelectableSubItem=function(){return i._getFirstSelectableSubItem(this)},t.prototype._getLastSelectableSubItem=function(){return i._getLastSelectableSubItem(this)},t.prototype.next=function(){var e=this,t=e._getParentOrMenu().getItems(),r,i,s=n.inArray(e,t);if(s===-1)throw"cannot find item from the parent collection";for(r=s+1;r<t.length;r++){i=t[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return t[r].element}return null},t.prototype.previous=function(){var e=this,t=e._getParentOrMenu().getItems(),r,i,s=n.inArray(e,t);if(s===-1)throw"cannot find item from the parent collection";for(r=s-1;r>=0;r--){i=t[r].options;if(i.displayVisible!==!1&&!i.header&&!i.separator)return t[r].element}return null},t.prototype._removeFromParentCollection=function(){var e=this,t,r=!1,s;t=e.getParent(),t===null&&(t=e._getMenu(),r=!0),s=n.inArray(e,t.getItems());if(s===-1)return;i._changeCollection(s,t.getItems(),t.options.items,null),t.getItems().length===0&&(r||(t._setSubmenuIcon(!1),t._resetMarkupValue()),t.element.children("ul").remove())},t.prototype._resetMarkupValue=function(){this._sublist=null,this._link=null},t.prototype._hideCurrentSubmenu=function(e){var t=this,r=t._getSublist();if(r.length===0)return;r.data("notClose")||t._hideSubmenu(!1,e),n.each(t.getItems(),function(){this._hideCurrentSubmenu(e)})},t.prototype._showFlyoutSubmenu=function(e,t){var n=this,r=n._getMenu(),i=r._currentMenuList,s;if(i!==undefined)for(s=i.length;s>0;s--){if(i[s-1]===n.getParent())break;i[s-1]._hideSubmenu(!1,e)}n._displaySubmenu(e,t)},t.prototype.getItems=function(){return this._items},t.prototype._getSublist=function(){var e=this;return e._sublist||(e._sublist=e.element.children("ul:first")),e._sublist},t.prototype._getLink=function(){var e=this;return e._link||(e._link=e.element.children(":first")),e._link},t.prototype._isRoot=function(){return this.getParent()===null},t.prototype.add=function(e,t){i._add(this,e,t)},t.prototype.remove=function(e){i._remove(this,e)},t.prototype._setIframeBounds=function(e,t){var r=this,i=0,s=0,o=0,u=0,a,f,l,c,h,p,d=n.browser;if(!d.msie)return;parseFloat(n.browser.version)>=9&&(a=e.css("box-shadow").split(" "),p=a.length,p>1&&(p<4?f=0:f=r._parsePxToNumber(a[3]),p<3?l=0:l=.3*r._parsePxToNumber(a[2]),c=r._parsePxToNumber(a[1]),h=r._parsePxToNumber(a[0]),i=l+f-h,i=i>=0?i:0,s=l+f+h,s=s>=0?s:0,o=l+f-c,o=o>=0?o:0,u=l+f+c,u=u>=0?u:0)),t.css({width:e.outerWidth(!0)+i+s+"px",height:e.outerHeight(!0)+o+u+"px",left:r._parsePxToNumber(e.css("left"))-i+"px",top:r._parsePxToNumber(e.css("top"))-o+"px"})},t.prototype._parsePxToNumber=function(e){var t=e.indexOf("px");return!t||t===-1?0:parseFloat(e.substr(0,t))},t}(e.wijmoWidget);t.wijmenuitem=u,u.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijmenuitem')",wijCSS:{wijmenuitemIcon:"wijmenuitem-icon",wijmenuParent:"wijmo-wijmenu-parent",wijmenuLink:"wijmo-wijmenu-link",wijmenuText:"wijmo-wijmenu-text",wijmenuList:"wijmo-wijmenu-list",wijmenuItem:"wijmo-wijmenu-item",wijmenuSeparator:"wijmo-wijmenu-separator",wijmenuIconLeft:"wijmo-wijmenu-icon-left",wijmenuIconRight:"wijmo-wijmenu-icon-right",wijmenuChild:"wijmo-wijmenu-child",wijmenuSeparatorContent:"wijmo-wijmenu-separator-content"},wijMobileCSS:{header:"ui-header ui-bar-c",content:"ui-body ui-body-c",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},header:!1,separator:!1,value:"",text:"",navigateUrl:"",target:"",iconClass:"",imagePosition:"",displayVisible:!0,selected:!1,items:null}),n.wijmo.registerWidget(r,i.prototype),n.widget("wijmo.wijmenuitem",n.wijmo.widget,u.prototype)})(e.menu||(e.menu={}));var t=e.menu})(wijmo||(wijmo={}));