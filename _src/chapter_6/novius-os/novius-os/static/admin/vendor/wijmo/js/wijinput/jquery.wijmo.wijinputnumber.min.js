var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=e.getKeyCodeEnum(),i=function(e){function i(){e.apply(this,arguments),this._initialValue=0}return __extends(i,e),i.prototype._init=function(){e.prototype._init.call(this),this._initUserCultureOptions(),this._updateCultureRelatedOptions(),this._updateText()},i.prototype._initUserCultureOptions=function(){this.options.negativePrefix!==null&&(this._userNegativePrefix=this.options.negativePrefix),this.options.negativeSuffix!==null&&(this._userNegativeSuffix=this.options.negativeSuffix),this.options.positivePrefix!==null&&(this._userPositivePrefix=this.options.positivePrefix),this.options.positiveSuffix!==null&&(this._userPositiveSuffix=this.options.positiveSuffix),this.options.currencySymbol!==null&&(this._userCurrencySymbol=this.options.currencySymbol)},i.prototype._updateCultureRelatedOptions=function(){var e=this._getCulture().numberFormat,t=e[this.options.type]||e,n=t.pattern[0],r=t.pattern[1]||"n",i=n.split("n"),s=r.split("n"),o=this._getPercentSymbol(),u=this._getCulture().numberFormat.currency.symbol;this._userNegativePrefix===undefined&&(this.options.negativePrefix=i[0].replace(/%/g,o).replace(/\$/g,u)),this._userNegativeSuffix===undefined&&(this.options.negativeSuffix=i[1].replace(/%/g,o).replace(/\$/g,u)),this._userPositivePrefix===undefined&&(this.options.positivePrefix=s[0].replace(/%/g,o).replace(/\$/g,u)),this._userPositiveSuffix===undefined&&(this.options.positiveSuffix=s[1].replace(/%/g,o).replace(/\$/g,u)),this._userCurrencySymbol===undefined&&(this.options.currencySymbol=e.currency.symbol)},i.prototype._createTextProvider=function(){if(this._textProvider)return this._textProvider;this._textProvider=new o(this,this.options.type),this._textProvider.setNullValue(this.element.val()===""&&this.options.value===null)},i.prototype._beginUpdate=function(){this._initialValue=0;var e=this.options;this.element.addClass(e.wijCSS.wijinputnumber),this.element.data({defaultValue:e.value,preValue:e.value}).attr({"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":e.value||this._initialValue})},i.prototype.focus=function(){this._doFocus()},i.prototype._setOption=function(t,n){e.prototype._setOption.call(this,t,n);switch(t){case"minValue":this.element.attr("aria-valuemin",n),this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",n),this._updateText();break;case"value":this.setValue(n),this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._updateCultureRelatedOptions(),this._updateText();break;case"positivePrefix":this._userPositivePrefix=n,this._updateText();break;case"negativePrefix":this._userNegativePrefix=n,this._updateText();break;case"positiveSuffix":this._userPositiveSuffix=n,this._updateText();break;case"negativeSuffix":this._userNegativeSuffix=n,this._updateText();break;case"currencySymbol":this._userCurrencySymbol=n,this._updateCultureRelatedOptions(),this._updateText();break;case"type":this._updateCultureRelatedOptions(),this._updateText()}},i.prototype._setData=function(e){this.setValue(e)},i.prototype._resetData=function(){var e=this.element.data("defaultValue");if(e===0){var t=this.element.data("elementValue");t!==undefined&&t!==null&&t!==""&&(e=t)}(e!==this._textProvider.getValue()||this._textProvider._nullvalue&&e===0)&&this.setValue(e)},i.prototype._validateData=function(){!this._textProvider.checkAndRepairBounds(!0,!1)&&this.options.value!==null&&this._updateText()},i.prototype._raiseDataChanged=function(){var e=this.options.value,t=this.element.data("preValue");this.element.data("preValue",e),t!==e&&(this.element.attr("aria-valuenow",e),this._trigger("valueChanged",null,{value:e}))},i.prototype._onChange=function(){},i.prototype._getPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix:this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix},i.prototype._getInvertPrefix=function(){return this._textProvider._stringFormat.isNegative()?this._userPositivePrefix!==undefined?this._userPositivePrefix:this.options.positivePrefix:this._userNegativePrefix!==undefined?this._userNegativePrefix:this.options.negativePrefix},i.prototype._getSuffix=function(){return this._textProvider._stringFormat.isNegative()?this._userNegativeSuffix!==undefined?this._userNegativeSuffix:this.options.negativeSuffix:this._userPositiveSuffix!==undefined?this._userPositiveSuffix:this.options.positiveSuffix},i.prototype._getCurrencySymbol=function(){return this._userCurrencySymbol!==undefined?this._userCurrencySymbol:this._getCulture().numberFormat.currency.symbol},i.prototype._getPercentSymbol=function(){return this._getCulture().numberFormat.percent.symbol},i.prototype.getValue=function(){if(this._textProvider._nullvalue)return null;var e=this._textProvider.getValue();if(e===undefined||e===null)e=this.getText();return e},i.prototype.setValue=function(e,t){typeof t=="undefined"&&(t=!1);try{t=!!t,e===null||typeof e=="undefined"||isNaN(e)?e=null:typeof e=="boolean"?e=e?1:0:typeof e=="string"&&(e=this._textProvider.tryParseValue(e));if(this._textProvider.setValue(e))this._updateText();else if(t){var n=this.getText();this.setText(e);var r=this.getText().trim();e=e.trim(),r!==e&&this.setText(n)}else this.setText(e);return!0}catch(i){return!1}},i.prototype._isLastValueNull=function(){return e.prototype._isLastValueNull.call(this)&&!this._textProvider._nullvalue},i.prototype.isValueNull=function(){try{return this._textProvider.isValueNull()}catch(e){return!0}},i.prototype.getPostValue=function(){if(!this._isInitialized())return this.element.val();if(e.prototype._showNullText.call(this)&&this.isValueNull())return"0";var t=this.options.value?this.options.value:0;return this.options.type==="percent"&&(t=(t/100).toFixed(10)),t.toString()},i.prototype._updateText=function(t){typeof t=="undefined"&&(t=!1);if(!this._isInitialized())return;this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),this._textProvider._nullvalue?this.options.value=null:this.options.value=this._textProvider.getValue(),e.prototype._updateText.call(this,t),this._textProvider.checkAndRepairBounds(!0,!1)||(this._trigger("valueBoundsExceeded"),this.isFocused()||(this._textProvider.setNullValue(!1),this.options.value=this._textProvider.getValue(),this._textProvider._stringFormat.isNegative()?this.element.addClass(this.options.negativeClass):this.element.removeClass(this.options.negativeClass),e.prototype._updateText.call(this,t)))},i.prototype._doSpin=function(e,r,i){if(!this._allowEdit())return!1;if(r&&this.element.data("breakSpinner"))return!1;var s=this.element.wijtextselection(),o=new t.wijInputResult;this.element.data("focusNotCalledFirstTime")!==-9&&(new Date).getTime()-this.element.data("focusNotCalledFirstTime")<600&&(this.element.data("focusNotCalledFirstTime",-9),this.element.data("prevSelection",{start:0,end:0})),this.element.data("prevSelection")===null?this.element.data("prevSelection",{start:s.start,end:s.start}):s.start=this.element.data("prevSelection").start,o.testPosition=s.start;if(this.options.increment<0){var u=this.options.increment;this.options.increment*=-1,this._textProvider.spinEnumPart(s.start,o,this.options.increment,!e),this.options.increment=u}else this._textProvider.spinEnumPart(s.start,o,this.options.increment,e);e?this._trigger("spinUp",null):this._trigger("spinDown",null),this._updateText(),this.element.data("prevSelection",{start:o.testPosition,end:o.testPosition}),i||this.selectText(o.testPosition,o.testPosition);if(r&&!this.element.data("breakSpinner")){var a=window.setTimeout(n.proxy(function(){this._doSpin(e,!0)},this),this._calcSpinInterval());this.element.data("spintimer",a)}return!0},i.prototype._deleteSelText=function(t){typeof t=="undefined"&&(t=!1);var n=this.element.wijtextselection(),r=n.start===0&&n.end===this.element.val().length,i;if(n.start===n.end&&!t){i=this._textProvider._stringFormat._currentText;if(i.charAt(n.end)===this._textProvider.getGroupSeparator()||i.charAt(n.end)===this._textProvider.getDecimalSeparator()){n.start++,n.end++,this.element.wijtextselection(n);return}}var s=this._textProvider.getEditingValue();e.prototype._deleteSelText.call(this,t),s===0&&(r||this._textProvider.getEditingValue()===0)&&(this._textProvider.setNullValue(!0),this._updateText(!0),this.options.value=null)},i.prototype._processClearButton=function(){this._setOption("value",null)},i.prototype._processLeftRightKey=function(e){if(e){if(this.element.wijtextselection().start===0&&(this.options.blurOnLeftRightKey.toLowerCase()==="left"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.Utility.MoveFocus(this.element.get(0),!1),!0}else if(this.element.wijtextselection().start===this.element.val().length&&(this.options.blurOnLeftRightKey.toLowerCase()==="right"||this.options.blurOnLeftRightKey.toLowerCase()==="both"))return t.Utility.MoveFocus(this.element.get(0),!0),!0;return!1},i.prototype._processTabKey=function(e){var t=e.keyCode||e.which;switch(t){case r.TAB:if(this.options.tabAction!=="field"){this._trigger("keyExit");break}var n=this.element.val().indexOf(".");n===-1&&(n=this.element.val().length);var i=this.element.wijtextselection();return e.shiftKey?i.start>n&&this._toPrevField():i.start<n&&this._toNextField(),!0}return!1},i.prototype._toPrevField=function(){var e=this._getPrefix();this.element.wijtextselection(e.length,e.length)},i.prototype._toNextField=function(){var e=this.element.val().indexOf(".");e===-1?this._toPrevField():this.element.wijtextselection(e+1,e+1)},i.prototype.spinUp=function(){this._doSpin(!0,!1,!0)},i.prototype.spinDown=function(){this._doSpin(!1,!1,!0)},i.prototype._getRealNegativePrefix=function(){return this._userNegativePrefix!==undefined?this._userNegativePrefix.replace(/\$/g,this.options.currencySymbol):this.options.negativePrefix===null?"":this.options.negativePrefix.replace(/\$/g,this.options.currencySymbol)},i.prototype._getRealPositivePrefix=function(){return this._userPositivePrefix!==undefined?this._userPositivePrefix.replace(/\$/g,this.options.currencySymbol):this.options.positivePrefix===null?"":this.options.positivePrefix.replace(/\$/g,this.options.currencySymbol)},i.prototype._getRealNegativeSuffix=function(){return this._userNegativeSuffix!==undefined?this._userNegativeSuffix.replace(/\$/g,this.options.currencySymbol):this.options.negativeSuffix===null?"":this.options.negativeSuffix.replace(/\$/g,this.options.currencySymbol)},i.prototype._getRealPositiveSuffix=function(){return this._userPositiveSuffix!==undefined?this._userPositiveSuffix.replace(/\$/g,this.options.currencySymbol):this.options.positiveSuffix===null?"":this.options.positiveSuffix.replace(/\$/g,this.options.currencySymbol)},i.prototype._afterFocused=function(){this._isNullText()?e.prototype._doFocus.call(this):this._doFocus()},i.prototype._doFocus=function(){e.prototype.focus.call(this);if(this.options.highlightText)this.element.wijtextselection(0,this.element.val().length);else{var t=this.element.data("prevSelection");t&&this.element.wijtextselection(t.start,t.end)}this.element.data("isFocusSelecting",!0)},i}(t.wijinputcore);t.wijinputnumber=i;var s=function(){function e(){this.wijCSS={wijinputnumber:t.wijinputcore.prototype.options.wijCSS.wijinput+"-numeric",wijinputnumberNegative:"ui-state-negative"},this.type="numeric",this.value=0,this.minValue=-1e9,this.maxValue=1e9,this.showGroup=!1,this.decimalPlaces=2,this.increment=1,this.currencySymbol=null,this.negativePrefix=null,this.negativeSuffix=null,this.positivePrefix=null,this.positiveSuffix=null,this.imeMode="",this.highlightText=!1,this.valueChanged=null,this.spinUp=null,this.spinDown=null,this.valueBoundsExceeded=null,this.negativeClass=this.wijCSS.wijinputnumberNegative}return e}();i.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new s),n.wijmo.registerWidget("wijinputnumber",i.prototype);var o=function(){function e(e,n){this._type="numeric",this._stringFormat=null,this._nullvalue=!1,this.inputWidget=e,this._type=n,this._stringFormat=new t.wijNumberFormat,this._stringFormat.setValueFromJSFloat(this.getValue(),this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options)}return e.prototype.getEditingValue=function(){return this._stringFormat.tryParseValue(this._stringFormat._strippedText,this.inputWidget._getCulture(),this.inputWidget.options)},e.prototype._getCulture=function(){return this.inputWidget._getCulture()},e.prototype.getDecimalSeparator=function(){return this._getCulture().numberFormat["."]},e.prototype.getGroupSeparator=function(){return this._getCulture().numberFormat[","]},e.prototype.tryParseValue=function(e){return this._stringFormat.tryParseValue(e,this.inputWidget._getCulture(),this.inputWidget.options)},e.prototype.toString=function(){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this.isValueNull()?"":this._stringFormat.getFormattedValue(this.inputWidget._initialValue,this.isValueNull(),this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options)},e.prototype.isValueNull=function(){var e=this.inputWidget.options;return null===e.value||undefined===e.value||this._nullvalue},e.prototype.setText=function(e,t){return this.clear(),this.insertAt(e,0,t),!0},e.prototype.clear=function(){this._stringFormat.clear()},e.prototype.checkAndRepairBounds=function(e,t,n){typeof n=="undefined"&&(n=!1);if(this._nullvalue)return!0;var r=!0,i,s;typeof e=="undefined"&&(e=!1),i=this.inputWidget.options.minValue,s=this.inputWidget.options.maxValue;if(typeof t!="undefined"&&t)return this._stringFormat.checkMinValue(i,!1,!0);var o=!0;return this._stringFormat.checkMinValue(i,e,!1)||(r=!1,n&&(o=!1,this._stringFormat._currentValueInString=s.toString())),o&&!this._stringFormat.checkMaxValue(s,e)&&(r=!1,n&&(this._stringFormat._currentValueInString=i.toString())),this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces),r},e.prototype._countSubstring=function(e,t){var n=0,r=e.indexOf(t);while(r!==-1)n++,r=e.indexOf(t,r+1);return n},e.prototype._getAdjustedPositionFromLeft=function(e){var t=this._stringFormat._strippedText,r,i;for(r=0;r<t.length;r++){i=t.charAt(r);if(!(!n.wij.charValidator.isDigit(i)&&i!==this.getGroupSeparator()&&i!==this.getDecimalSeparator()||i==="0"))break;this._stringFormat.isZero()?e<r&&e++:e<=r&&e++}return e},e.prototype._getDecimalSeparatorPos=function(){var e=this._stringFormat._strippedText;return e.indexOf(this.getDecimalSeparator())},e.prototype._removeLeadingZero=function(e){var t=0;(e.charAt(t)===" "||e.charAt(t)===this.inputWidget.options.currencySymbol)&&t++;var n=Globalize.findClosestCulture(this.inputWidget.options.culture),r=n.numberFormat,i=r[this.inputWidget.options.type]||r;while(e.charAt(t)==="0"&&e.charAt(t+1)!==i["."])e=e.substr(0,t)+e.substr(t+1);return e},e.prototype.insertAt=function(e,r,i){var s=this._getCulture().numberFormat,o,u,a,f,l,c,h,p,d,v=this._stringFormat._strippedText,m=this.inputWidget._getPrefix(),g=this.inputWidget._getInvertPrefix();r<m.length?r=m.length:r>m.length+v.length&&(r=m.length+v.length),r-=m.length,i||(i=new t.wijInputResult);var y=this._nullvalue;this.setNullValue(!1);if(e.length===1){if(e==="+"){var b=this._stringFormat.isNegative();this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1);var w=b!==this._stringFormat.isNegative();return w?i.testPosition=g.length+r-1:i.testPosition=m.length+r-1,!0}if(e==="-"||e===")"||e==="("){var E=this._stringFormat.isNegative();return this._stringFormat.invertSign(this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1),this._stringFormat.isNegative()===E?(i.testPosition=m.length+r-1,!0):(i.testPosition=g.length+r-1,!0)}if(!n.wij.charValidator.isDigit(e)){if(e===this.getDecimalSeparator()){o=this._getDecimalSeparatorPos()+m.length;if(o>=0)return i.testPosition=o,!0}if(e!==this.getGroupSeparator()&&e!==this.getDecimalSeparator()&&e!==")"&&e!=="+"&&e!=="-"&&e!=="("&&e!==this.getDecimalSeparator())return this._type==="percent"&&e===s.percent.symbol?(i.testPosition=r,!0):this._type==="currency"&&e===this.inputWidget.options.currencySymbol?(i.testPosition=r,!0):(this.setNullValue(y),!1)}}r=this._getAdjustedPositionFromLeft(r),u=r,u>v.length&&(u=v.length-1),a=this._removeLeadingZero(v.substring(0,u)),f=v.substring(u,v.length),this._stringFormat.isZero()&&(f=f.replace(/0/,""));var S=e,x="";while(S.charAt(0)==="+"||S.charAt(0)==="-"||S.charAt(0)===")"||S.charAt(0)==="(")x=S.charAt(0),S=S.substring(1);S=S.replace(/[^0-9\.]/gi,"");var T=S.indexOf(".");if(T!==-1){var N=S.split("."),C,k;C=N.shift();var L=N;k=L.join(""),S=C+"."+k}else S=S;x==="+"&&(this._stringFormat.setPositiveSign(),this.checkAndRepairBounds(!0,!1));if(x==="-"||x===")"||x==="(")this._stringFormat.invertSign(this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1);i.testPosition=m.length+a.length+S.length-1,this._stringFormat.deFormatValue((this._stringFormat.isNegative()?"-":"")+a+S+f,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),l=this._stringFormat._strippedText;try{this.inputWidget.options.showGroup?(c=this._countSubstring(a,this._stringFormat._groupSeparator),h=this._countSubstring(l.substring(0,a.length+S.length),this._stringFormat._groupSeparator),i.testPosition+=h-c):S.length===1&&(p=a.charAt(a.length-1),d=l.charAt(a.length-1),d!==p&&i.testPosition--)}catch(A){}return!0},e.prototype.removeAt=function(e,n,r,i){typeof r=="undefined"&&(r=new t.wijInputResult),typeof i=="undefined"&&(i=!1);var s=this._getCulture().numberFormat,o,u,a,f,l,c;r.testPosition=e;try{o=this._stringFormat._currentText;if(e===n&&o.substring(e,n+1)===this.getDecimalSeparator())return!1;u=o.slice(0,e),a=u,f=o.slice(e,n+1).indexOf(this.getDecimalSeparator())>=0,f&&(a+=this.getDecimalSeparator()),a+=o.slice(n+1),a=a||"0",this._stringFormat.deFormatValue(a,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),a=this._stringFormat._currentText,this.setNullValue(!1);if(this.inputWidget.options.showGroup)if(f)r.testPosition=a.indexOf(this.getDecimalSeparator());else try{l=this._countSubstring(u,this._stringFormat._groupSeparator),c=this._countSubstring(a.substring(0,Math.max(0,e-1)),this._stringFormat._groupSeparator),r.testPosition-=l-c,(o.indexOf(this.inputWidget.options.currencySymbol)===r.testPosition||o.indexOf(s.percent.symbol)===r.testPosition)&&r.testPosition++}catch(h){}return!0}catch(p){}return!0},e.prototype.replaceWith=function(e,n){if(n==="."&&this.inputWidget.options.decimalPlaces<=0){var r=new t.wijInputResult;return r.testPosition=e.start-1,r}var i=!1;this._stringFormat.isNegative()&&n==="-"&&e.text.length===this._stringFormat._currentText.length&&(i=!0);var s=this.superReplaceWith(e,n);return i&&this.insertAt("-",this.inputWidget.element.wijtextselection().start,s),s},e.prototype.superReplaceWith=function(e,n){var r=e.start,i=new t.wijInputResult;return e.start<e.end&&(this.removeAt(e.start,e.end-1,i,!0),r=i.testPosition),this.insertAt(n,r,i)?i:null},e.prototype._parseNumber=function(e){typeof e=="undefined"&&(e=this._stringFormat._currentValueInString);var t=e.split(".",2),n={integer:parseInt(t[0],10)||0,fraction:(t.length>1?parseInt(t[1],10):0)||0,isNegative:t[0].indexOf("-")!==-1};return n.integer===0&&n.fraction===0&&(n.isNegative=!1),n},e.prototype._doSpin=function(e,t){var n=this._parseNumber(),r=e>=0?1:-1,i=Math.abs(e)>=1?"integer":"decimal",s=this.inputWidget.options.increment;s>=Math.pow(10,this.inputWidget.options.decimalPlaces)&&(i==="integer"?s=Math.abs(e):s=Math.abs(e)*Math.pow(10,this.inputWidget.options.decimalPlaces));var o=r*s,u="",a,f,l=n.integer,c=n.fraction;if(i==="integer")l=n.integer+o,l<0&&(u="-",l=-l);else if(i==="decimal"){var h=n.isNegative?-n.fraction:n.fraction;l=n.integer,h<0?(c=-Math.abs(h+o),h*(h+o)<0&&(l=Math.abs(l),u="-")):c=h+o,h===0&&n.isNegative&&(c=-Math.abs(c),u="-",r===1&&(l=Math.abs(l))),c<=0&&(l>0?(l-=1,c=Math.pow(10,this.inputWidget.options.decimalPlaces)+c):(l=Math.abs(n.integer),c=Math.abs(c),u="-"))}a=l.toString(),f=c.toString(),parseInt(this.inputWidget.options.decimalPlaces)>0&&f.length>parseInt(this.inputWidget.options.decimalPlaces)&&(l++,f=f.substring(1),a=l.toString());while(f.length<this.inputWidget.options.decimalPlaces)f="0"+f;a.indexOf("-")!==-1&&(u=""),parseInt(a)===0&&parseInt(f)===0&&(u=""),t?e>=0?this._stringFormat._currentValueInString=this.inputWidget.options.minValue.toString():this._stringFormat._currentValueInString=this.inputWidget.options.maxValue.toString():this._stringFormat._currentValueInString=u+a+"."+f},e.prototype.spinUp=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(e,t)},e.prototype.spinDown=function(e,t){if(e===null||e===undefined)e=1;this._doSpin(-e,t)},e.prototype.spinEnumPart=function(e,n,r,i){n||(n=new t.wijInputResult),r=parseInt(r.toString());var s=this.inputWidget._getPrefix(),o=this._stringFormat._currentText.indexOf(this._getCulture().numberFormat["."]),u=this._stringFormat._currentValueInString.replace("-",""),a=u.indexOf("."),f=!0;o===-1&&(f=!1,o=this._stringFormat._currentText.length),a===0?a=1:a===-1&&(a=o);var l=Math.pow(10,this.inputWidget.options.decimalPlaces);if(n.testPosition>o&&f){var c=r;r/=l,Math.abs(r)>=1&&(i?this.spinUp(parseInt(r),this._nullvalue):this.spinDown(parseInt(r),this._nullvalue),r=(c-parseInt(r)*l)/l)}i?this.spinUp(r,this._nullvalue):this.spinDown(r,this._nullvalue),this.setNullValue(!1);var h=this.inputWidget.options.allowSpinLoop;this.checkAndRepairBounds(!0,!1,h);var p=this._stringFormat._currentValueInString.replace("-",""),d=p.indexOf(".");d===-1&&(f=!1,d=p.length);var v=this.inputWidget._getPrefix();d!==a&&f?n.testPosition=n.testPosition-s.length+v.length+d-a:n.testPosition=n.testPosition-s.length+v.length},e.prototype.getValue=function(){return this._stringFormat.getJSFloatValue()},e.prototype.setValue=function(e){try{return e===null?(this.setNullValue(!0),e=this.inputWidget._initialValue):this.setNullValue(!1),this._stringFormat.setValueFromJSFloat(e,this.inputWidget._getCulture(),this.inputWidget._getRealPositivePrefix(),this.inputWidget._getRealPositiveSuffix(),this.inputWidget._getRealNegativePrefix(),this.inputWidget._getRealNegativeSuffix(),this.inputWidget.options),this.checkAndRepairBounds(!0,!1),!0}catch(t){return!1}},e.prototype.setNullValue=function(e){this._nullvalue=e},e}();t.wijNumberTextProvider=o})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));