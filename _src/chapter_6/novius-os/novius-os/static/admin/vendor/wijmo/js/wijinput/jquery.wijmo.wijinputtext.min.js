var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijinputtext",i=function(){function e(){}return e.None="none",e.EllipsisEnd="ellipsisEnd",e.EllipsisPath="ellipsisPath",e}(),s;(function(e){e._map=[],e._map[0]="Append",e.Append=0,e._map[1]="Replace",e.Replace=1})(s||(s={}));var o=function(){function e(){}return e.Auto="auto",e.Active="active",e.Disabled="disabled",e.Inactive="inactive",e}(),u=function(n){function r(){n.apply(this,arguments)}return __extends(r,n),r.prototype._getIMTextBox=function(){return this.imtextbox===undefined&&(this.imtextbox=new l(this.element[0],this.outerDiv)),this.imtextbox},r.prototype._create=function(){n.prototype._create.call(this);var e=this;e.imtextbox=e._getIMTextBox()},r.prototype._init=function(){n.prototype._init.call(this),this.options.disableUserInput&&this.imtextbox.SetReadOnly(!0),this.imtextbox.placeHolder=this.options.nullText?this.options.nullText:"";var e=this;this.imtextbox.readingImeStringOutputEvent=function(t,n){e._trigger("readingImeStringOutput",null,n)},this.imtextbox.InvalidInputEvent=function(t,n){e._fireIvalidInputEvent(n)},this.imtextbox.SetAutoConvert(this.options.autoConvert),this.imtextbox.SetExitOnLastChar(this.options.blurOnLastChar),this.imtextbox.SetExitOnLeftRightKey(this.options.blurOnLeftRightKey),this.imtextbox.SetFormat(this.options.format),this.imtextbox.SetMaxLength(this.options.maxLength),this.imtextbox.SetHighlightText(this.options.highlightText),this.imtextbox.SetOverflowTip(this.options.showOverflowTip),this.imtextbox.SetMaxLineCount(this.options.maxLineCount),this.imtextbox.SetCountWrappedLine(this.options.countWrappedLine),this.options.invalidInput!==null&&this.imtextbox.OnInvalidInput(this.options.invalidInput),this.options.keyExit!==null&&this.imtextbox.OnKeyExit(this.options.keyExit),this.imtextbox.TextChangedEvent=function(t,n){e.options.text=n,e._trigger("textChanged",null,{text:n})};var t=this.element,r=this.options.wijCSS,i={input:!0,textarea:!0},s={text:!0,password:!0,email:!0,url:!0},o=t.get(0).nodeName.toLowerCase();if(!i.hasOwnProperty(o))return;if(o==="input"&&this.element.attr("type")&&!s.hasOwnProperty(this.element.attr("type").toLowerCase()))return;if(o==="input"){this.imtextbox.SetMultiLine(!1);if(this.element.attr("type")==="password"){var u;this.options.passwordChar?u=this.options.passwordChar:u=this.imtextbox.SystemPasswordChar(),this.imtextbox.SetPasswordChar(u)}}else o==="textarea"&&this.imtextbox.SetMultiLine(!0);this.imtextbox.SetLengthAsByte(this.options.lengthAsByte),this.options.text===null&&(this.options.text=this.getText()),(this.options.text!==this.imtextbox.placeHolder||!this.imtextbox.isNullText)&&this.setText(this.options.text),this.imtextbox.SetEllipsisString(this.options.ellipsisString),this.imtextbox.SetEllipsis(this.options.ellipsis),t.is(":disabled")?(this._setOption("disabled",!0),t.addClass(r.stateDisabled)):(this._setOption("disabled",!1),t.removeClass(r.stateDisabled)),this.options.passwordChar&&this.imtextbox.SetPasswordChar(this.options.passwordChar)},r.prototype.destroy=function(){var e=this,t=e.options.wijCSS;e.element.removeClass(t.widget).removeClass(t.stateDefault).removeClass(t.cornerAll).removeClass(t.stateHover).removeClass(t.stateActive).off("."+e.widgetName),e.element.off(".imtextbox"),n.prototype.destroy.call(this)},r.prototype.getSelectedText=function(){return this.imtextbox.GetSelectedText()},r.prototype._setOption=function(e,t){switch(e){case"nullText":case"placeholder":this.imtextbox.placeHolder=t}n.prototype._setOption.call(this,e,t);switch(e){case"autoConvert":this.imtextbox.SetAutoConvert(t);break;case"blurOnLastChar":this.imtextbox.SetExitOnLastChar(t);break;case"blurOnLeftRightKey":this.imtextbox.SetExitOnLeftRightKey(t);break;case"showDropDownButton":var r=this.imtextbox.GetEllipsis();this.imtextbox.SetEllipsis(r);break;case"ellipsis":this.imtextbox.SetEllipsis(t);break;case"ellipsisString":this.imtextbox.SetEllipsisString(t);break;case"highlightText":this.imtextbox.SetHighlightText(t);break;case"showOverflowTip":this.imtextbox.SetOverflowTip(t);break;case"format":this.imtextbox.SetFormat(t);break;case"maxLineCount":this.imtextbox.SetMaxLineCount(t);break;case"countWrappedLine":this.imtextbox.SetCountWrappedLine(t);break;case"lengthAsByte":this.imtextbox.SetLengthAsByte(t);break;case"maxLength":this.imtextbox.SetMaxLength(t);break;case"readonly":case"disableUserInput":this.imtextbox.SetReadOnly(t);break;case"passwordChar":this.imtextbox.SetPasswordChar(t);break;case"text":this.setText(t);break;case"invalidInput":this.imtextbox.OnInvalidInput(t);break;case"keyExit":this.imtextbox.OnKeyExit(t);break;case"":}},r.prototype._updateTextOnLostFocus=function(){if(this.imtextbox.PasswordMode)return;n.prototype._updateTextOnLostFocus.call(this)},r.prototype._onMouseUp=function(e){},r.prototype._onCompositionStart=function(){},r.prototype._onCompositionEnd=function(){},r.prototype._onChange=function(){},r.prototype._onPaste=function(e){},r.prototype._onDrop=function(e){},r.prototype._onKeyDown=function(t){var n=this._getKeyCode(t),r=e.getKeyCodeEnum();if(this.options.disableUserInput){n===r.TAB?this._processTabKey(t)&&this._stopEvent(t):this._stopEvent(t);return}if(this._processKeyForDropDownList(t))return;n===r.ENTER&&this._onEnterDown(t)},r.prototype._onKeyPress=function(t){if(this.options.disableUserInput)return;var n=this._getKeyCode(t),r=e.getKeyCodeEnum();n===r.ENTER&&this._onEnterDown(t)},r.prototype._onKeyUp=function(e){if(this.options.disableUserInput){this._raiseTextChanged(),this._raiseDataChanged();return}},r.prototype._createTextProvider=function(){this._textProvider=new f(this)},r.prototype.selectText=function(e,n){typeof e=="undefined"&&(e=0),typeof n=="undefined"&&(n=this.getText().length),isNaN(e)&&(e=0),isNaN(n)&&(n=0);if(this.element.is(":disabled"))return;t.Utility.IsFireFox4OrLater()&&this.focus(),this.imtextbox.SetSelection(e,n)},r.prototype._updateText=function(){this.element.data("initialized")&&n.prototype._updateText.call(this)},r}(t.wijinputcore);t.wijinputtext=u;var a=function(){function e(){this.initSelector=":jqmData(role='wijinput')",this.wijCSS={},this.autoConvert=!0,this.blurOnLastChar=!1,this.blurOnLeftRightKey="none",this.ellipsis=i.None,this.ellipsisString=String.fromCharCode(8230),this.showOverflowTip=!1,this.highlightText=!1,this.format="",this.imeMode="auto",this.lengthAsByte=!1,this.maxLength=0,this.maxLineCount=0,this.countWrappedLine=!1,this.passwordChar="",this.text=null,this.allowSpinLoop=!1,this.spinnerAlign="verticalRight",this.showSpinner=!1,this.culture="",this.readingImeStringOutput=null}return e}();u.prototype.options=n.extend(!0,{},t.wijinputcore.prototype.options,new a),n.wijmo.registerWidget(r,u.prototype);var f=function(){function e(e){this.inputWidget=e}return e.prototype.toString=function(e){return this.inputWidget._showNullText()&&!this.inputWidget.isFocused()&&this.isValueNull()?(this.inputWidget.element.data("isShowNullText",!0),this.inputWidget.options.nullText):(!this.inputWidget._showNullText()||this.inputWidget.isFocused())&&this.inputWidget.element.data("isShowNullText")?(this.inputWidget.element.data("isShowNullText",!1),""):this.inputWidget.imtextbox&&this.inputWidget.imtextbox.GetPasswordChar()?e?this.inputWidget.options.text:this.inputWidget.imtextbox._getInputValueWithPlaceHolder():this.inputWidget.imtextbox?this.inputWidget.imtextbox._getInputValueWithPlaceHolder():this.inputWidget.options.text!==undefined?this.inputWidget.options.text:this.inputWidget.element.val()},e.prototype.isValueNull=function(){return this.inputWidget.imtextbox?this.inputWidget.imtextbox.isNullText:!0},e.prototype.setText=function(e){this.inputWidget.imtextbox.SetText(e)},e.prototype.replaceWith=function(e,n){var r=e.start,i=new t.wijInputResult;return e.start<e.end&&(this.removeAt(e.start,e.end-1,i,!0),r=i.testPosition),this.insertAt(n,r,i)?i:null},e.prototype.insertAt=function(e,t,n){},e.prototype.removeAt=function(e,t,n,r){},e}();t.wijInputTextProvider=f;var l=function(){function e(e,n){this.ToolTip=null,this.placeHolder="",this.Focused=!1,this.InputElement=e,this._container=n,this.InputElement.id===""&&(this.InputElement.id="wijmo_input_"+t.Utility.IdCounter++),this.ScrollBarMode=t.ScrollBarMode.Fixed,this.IsControlInPreview=null,this.AddressObj=null,this.KeyActionList=null,this.UseSystemPasswordChar=!1,this.Overwrite=!1,this.Format="",this.ShowHistory=!1,this.ReadOnly=!1,this.AutoConvert=!0,this.CausesValidation=!1,this.ValidationGroup="",this.LengthAsByte=!1,this.MaxLength=0,this.MaxHistoryCount=10,this.MultiLine=!1,this.AcceptsCrLf=t.CrLfMode.NoControl,this.AcceptReturn=!0,this.AcceptTab=!1,this.HighlightText=!1,this.Ellipsis=i.None,this.EllipsisString=String.fromCharCode(8230),this.ExitOnLastChar=!1,t.Utility.IPad?this.TouchDropDownScale=1:this.TouchDropDownScale=1.5,this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.None,this.EditMode=t.EditMode.Insert,this.__editModeInternal=t.EditMode.Insert,this.AutoPostBack=!1,this.PasswordMode=!1,this.PasswordChar="",this.OverflowTip=!1,this.MaxLineCount=0,this.CountWrappedLine=!1,this.IsInUpdatePanelAndAsyncPostBack=!1,this.UseClipboard=!0,this.ReadingImeStringOutput=new Object,this.ReadingImeStringOutput.OutputMode=s.Append,this.ReadingImeStringOutput.TargetControl=null,this.ScrollBars=t.ScrollBars.None,this.prevval="",this.RubyText="",this.FocusType=t.FocusType.None,this.SelectionStart=0,this.SelectionEnd=0,this.SelectionLength=0,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd;var r=this,u=r!=null;this.IsInUpdatePanelAndAsyncPostBack?u&&(this.OldText=r.GetOldValue()):this.OldText=this.Text,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,this.Text="",this.LastText=this.Text,this.BuffText="",this.IsUndoAfterDel=!1,this.MouseButton=t.MouseButton.Left,this.EnableOnSelectStartEvent=!0,this.isLeftMouseButtonPressed=!1,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.DragEdit=!1,this.DropEdit=!1,this.isFuncKeyPressed=!1,this.SystemChange=!0,this.ImeMode=!1,this.KeyDownAction=!1,this.FocusExit=!1,this.lastValue="",this.truePosition=-1,this.mouseupTimes=0,this.LastInputText="",this.BeforeDragSelectionStart=0,this.BeforeDragSelectionEnd=0,this.IsMouseDown=!1,this.Type="Edit",this.ToolTip=null;if(!this.MultiLine&&this.OverflowTip){var a=this;t.Utility.AttachEvent(document,"mousemove",function(e){t.GlobalEventHandler.OnMouseMove(a,e)},!1)}this.HasFocus=!1;var f={SelectionStart:this.SelectionStart,SelectionEnd:this.SelectionEnd,Text:this.Text,OldSelectionStart:this.OldSelectionStart,OldSelectionEnd:this.OldSelectionEnd,OldText:this.OldText,LastStart:this.LastStart,LastEnd:this.LastEnd,LastText:this.LastText,BuffText:this.BuffText};this.DropDownEditData=f,this.IsChangedByDropDownEdit=!1,this.DropText="",this.isTextEllipsis=!1,this.TextHeadLength=0,this.IsJapanConvertKeyPress=!1,this.NeedReCalCursorPos=!0,t.Utility.IsIE()||(this.IsActive=!1),this.HasValidatedImeInput=!0,this.IsFocusToDropDownEdit=!1,this.IsCausedByClickingDropDownBt=!1,this.IsCausedByImplementingDrop=!1,t.Utility.IsIE()||(this.MaxLineCount=0,this.Ellipsis=i.None,this.OverflowTip=!1,this.IsImplementImeInput=!1),this.Create(),this.AddAllEventsHandler(),this.EditStatusChangedEvent=null,this.InvalidInputEvent=null,this.KeyExitEvent=null,this.TextChangedEvent=null,this.DropDownCloseEvent=null,this.DropDownOpenEvent=null,this.readingImeStringOutputEvent=null,this.IsjQueryControl=!0,this.UIProcess=new c(this.AutoConvert,this.Format,this.PasswordMode,this.PasswordChar,this.IsjQueryControl,this),this.Text="",this.isPasting=!1,this.WordWrap=!0,this.Enabled=!0,this.AutoCompleteType="None",this.InputElement.style.imeMode===""&&this.SetImeMode(o.Auto),this._autoComplete=new h(this),this.IsFromServer=!1,this._historyList=[],this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled,this._lines=[],this.tempIMEMode="auto",this.HeightChangedBySet=!1,this.Width="",this.Height="",this.LastPassWordChar="",t.Utility.AttachFocusEventOfDocument(),this.ShouldShowClearButton=!0,this.switchPasswordChar=!1,this.InputElement.value===""?this.isNullText=!0:this.isNullText=!1}return e.prototype.GetId=function(){return this.InputElement.id},e.prototype.GetContainer=function(){return this._container},e.prototype.GetJQueryInputElement=function(){return n(this.InputElement)},e.prototype.GetInputElement=function(){return this.InputElement},e.prototype.Create=function(){t.Utility.IsIE10OrLater()&&this.CreateHideMSClearButtonForIE10Class()},e.prototype.CreateHideMSClearButtonForIE10Class=function(){if(e.HideMSClearButtonForIE10ClassName===undefined){e.HideMSClearButtonForIE10ClassName="gcsh_HideMSClearButtonForIE10";var n=t.Utility.CreateClassStyle(e.HideMSClearButtonForIE10ClassName+"::-ms-clear");n.style.display="none"}},e.prototype.IsNullFormat=function(){return!1},e.prototype.IsNeedFishEyeButton=function(){return t.Utility.IsIE10OrLater()&&!this.MultiLine&&this.PasswordMode},e.prototype.SetAddressObj=function(e){this.AddressObj=e},e.prototype.ShowClearButton=function(){this.InputElement.className=this.InputElement.className.replace(e.HideMSClearButtonForIE10ClassName,"")},e.prototype.HideClearButton=function(){this.InputElement.className!=null&&this.InputElement.className.indexOf(e.HideMSClearButtonForIE10ClassName)==-1&&(this.InputElement.className+=" "+e.HideMSClearButtonForIE10ClassName)},e.prototype.HandleClearButton=function(e){if(t.Utility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&e.target==this.InputElement&&!this.MultiLine){var n=document.activeElement==e.target,r=t.Utility.IsMouseDownOnClearButton(e);if(this.MouseUpHasValue&&n&&r){var i=this;setTimeout(function(e){i.Clear()},0)}}},e.prototype.GetAcceptsTab=function(){return this.AcceptTab},e.prototype.SetAcceptsTab=function(e){e=t.Utility.CheckBool(e),this.AcceptTab=e},e.prototype.GetAcceptsCrlf=function(){return this.AcceptsCrLf},e.prototype.SetAcceptsCrlf=function(e){e=t.Utility.CheckEnum(t.CrLfMode,e),this.AcceptsCrLf=e},e.prototype.GetAutoConvert=function(){return this.AutoConvert},e.prototype.SetAutoConvert=function(e){e=t.Utility.CheckBool(e),this.AutoConvert=e,this.UIProcess.Reset()},e.prototype.GetCountWrappedLine=function(){return this.CountWrappedLine},e.prototype.SetCountWrappedLine=function(e){e=t.Utility.CheckBool(e),this.CountWrappedLine=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetEditMode=function(){return this.EditMode},e.prototype.SetEditMode=function(e){var n=e;n=t.Utility.CheckEnum(t.EditMode,n),n===t.EditMode.Insert||n===t.EditMode.FixedInsert?this.Overwrite=!1:this.Overwrite=!0;if(n!==this.EditMode){var r=!1;this._isinsertGroup(n)&&this._isOverwriteGroup(this.EditMode)?r=!0:this._isinsertGroup(this.EditMode)&&this._isOverwriteGroup(n)&&(r=!0),this.EditMode=n,this.__editModeInternal=n,r&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},e.prototype._getEditModeInternal=function(){return this.__editModeInternal},e.prototype._setEditModeInternal=function(e){e=t.Utility.CheckEnum(t.EditMode,e),e===t.EditMode.Insert||e===t.EditMode.FixedInsert?this.Overwrite=!1:this.Overwrite=!0,e!==this.__editModeInternal&&(this.__editModeInternal=e)},e.prototype.GetEllipsis=function(){return this.Ellipsis},e.prototype.SetEllipsis=function(e){var n=e;n=t.Utility.CheckEnum(i,n),this.Ellipsis=n,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetEllipsisString=function(){return this.EllipsisString},e.prototype.SetEllipsisString=function(e){e=t.Utility.CheckString(e),this.EllipsisString=e,this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetExitOnLastChar=function(){return this.ExitOnLastChar},e.prototype.SetExitOnLastChar=function(e){e=t.Utility.CheckBool(e),this.ExitOnLastChar=e},e.prototype.GetExitOnLeftRightKey=function(){switch(this.ExitOnLeftRightKey){case t.ExitOnLeftRightKey.None:return"none";case t.ExitOnLeftRightKey.Both:return"both";case t.ExitOnLeftRightKey.Left:return"left";case t.ExitOnLeftRightKey.Right:return"right";default:}},e.prototype.SetExitOnLeftRightKey=function(e){t.Utility.CheckString(e);switch(e.toLowerCase()){case"none":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.None;break;case"both":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.Both;break;case"left":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.Left;break;case"right":this.ExitOnLeftRightKey=t.ExitOnLeftRightKey.Right;break;default:}},e.prototype.GetFormat=function(){return this.Format},e.prototype.SetFormat=function(e){e=t.Utility.CheckString(e),this.Format=e,this.UIProcess.Reset();var n=this.InternalSetText(this.GetText());this.Text=n,this.DropDownEditData.Text=n,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetHighlightText=function(){return this.HighlightText},e.prototype.SetHighlightText=function(e){e=t.Utility.CheckBool(e),this.HighlightText=e},e.prototype.GetHistoryList=function(){return this._historyList},e.prototype.SetHistoryList=function(e){if(e===null)return;var t;arguments[0]instanceof Array?t=arguments[0]:t=Array.prototype.slice.call(arguments);if(t.length===0||t.length===1&&t[0]==="")return;this.IsFromServer=!1,this._historyList=[];for(var n=0;n<t.length;n++)this._historyList.push(t[n])},e.prototype.GetImeMode=function(){return this.InputElement!==null?this.InputElement.style.imeMode||"auto":""},e.prototype.SetImeMode=function(e){t.Utility.CheckString(e),this.InputElement!==null&&(this.InputElement.style.imeMode=e)},e.prototype.GetLengthAsByte=function(){return this.LengthAsByte},e.prototype.SetLengthAsByte=function(e){e=t.Utility.CheckBool(e),this.LengthAsByte=e,this.SetText(this.UIProcess.Filter.CheckText(this.GetText()).CheckedText)},e.prototype.GetLines=function(){var e=new Array,n=this.GetText(),r="\r\n";if(!t.Utility.IsIE()||t.Utility.IsIE9OrLater())r="\n";var i=n.IndexOf(r),s=0;while(i!=-1)e[s++]=n.Substring(0,i),n=n.Substring(i+r.GetLength(),n.GetLength()),i=n.IndexOf(r);return e[s]=n,e},e.prototype.SetLines=function(e){if(e===null)return;var n;arguments[0]instanceof Array?n=arguments[0]:n=Array.prototype.slice.call(arguments);if(n.length===0||n.length===1&&n[0]==="")return;this._lines=[];for(var r=0;r<n.length;r++)this._lines.push(n[r]);var i="";if(this.MultiLine)for(var s=0;s<this._lines.length;s++)s>0&&(t.Utility.IsIE()?i+="\r\n":i+="\n"),i+=this._lines[s];else for(var s=0;s<this._lines.length;s++)i+=this._lines[s];this.SetText(i)},e.prototype.GetMaxHistoryCount=function(){return this.MaxHistoryCount},e.prototype.SetMaxHistoryCount=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxHistoryCount=e},e.prototype.GetMaxLength=function(){return this.MaxLength},e.prototype.SetMaxLength=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxLength=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText()},e.prototype.GetMaxLineCount=function(){return this.MaxLineCount},e.prototype.SetMaxLineCount=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";this.MaxLineCount=e,this.InternalSetText(this.GetText()),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetMultiLine=function(){return this.MultiLine},e.prototype.SetMultiLine=function(e){e=t.Utility.CheckBool(e);if(e===this.MultiLine)return;this.MultiLine=e,this.InternalDirectSetText(this.Text),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.DropDownEditData.Text=this.GetText()},e.prototype.GetOverflowTip=function(){return this.OverflowTip},e.prototype.SetOverflowTip=function(e){e=t.Utility.CheckBool(e),this.OverflowTip=e},e.prototype.GetOverwrite=function(){return this.Overwrite},e.prototype.GetPasswordChar=function(){return this.PasswordChar},e.prototype.SetPasswordChar=function(e){if(e!==""){e=t.Utility.CheckChar(e);if(this.PasswordChar===this.SystemPasswordChar()&&this.GetUseSystemPasswordChar()){this.LastPassWordChar=e;return}this.LastPassWordChar=this.PasswordChar,this.PasswordChar=e,this.PasswordMode=!0,this.isNullText||this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(o.Disabled)}else{this.UseSystemPasswordChar===!1&&(this.PasswordMode=!1,this.SetText(this.hideText),this.tempIMEMode!==""&&this.SetImeMode(this.tempIMEMode));if(this.PasswordChar===this.SystemPasswordChar()&&!this.GetUseSystemPasswordChar()&&this.LastPassWordChar!==""){this.PasswordChar=t.Utility.CheckChar(this.LastPassWordChar),this.PasswordMode=!0,this.InternalSetText(this.GetText()),this.tempIMEMode=this.GetImeMode(),this.SetImeMode(o.Disabled),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement);return}this.PasswordChar=e}this.switchPasswordChar=!0,this.UIProcess.Reset(),this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetReadingImeStringOutputMode=function(){return this.ReadingImeStringOutput.OutputMode},e.prototype.SetReadingImeStringOutputMode=function(e){e=t.Utility.CheckString(e),this.ReadingImeStringOutput.OutputMode=e},e.prototype.GetReadingImeStringOutputTargetControl=function(){return this.ReadingImeStringOutput.TargetControl},e.prototype.SetReadingImeStringOutputTargetControl=function(e){e=t.Utility.CheckString(e),this.ReadingImeStringOutput.TargetControl=e},e.prototype.GetReadOnly=function(){return this.ReadOnly},e.prototype.SetReadOnly=function(e){e=t.Utility.CheckBool(e),this.InputElement!=null&&(this.InputElement.readOnly=e),this.ReadOnly=e,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&e:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&e},e.prototype.GetScrollBarMode=function(){return this.ScrollBarMode},e.prototype.SetScrollBarMode=function(e){e=t.Utility.CheckEnum(t.ScrollBarMode,e),this.ScrollBarMode=e,this._CheckScrollBar(this.GetScrollBars(),e)},e.prototype.GetScrollBars=function(){return this.ScrollBars},e.prototype.SetScrollBars=function(e){e=t.Utility.CheckEnum(t.ScrollBars,e),this.ScrollBars=e,this._CheckScrollBar(e,this.GetScrollBarMode());var n=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var r=this;setTimeout(function(){r.InputElement.style.width=n},10)},e.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},e.prototype.SetSelectionStart=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";if(e==null)return;var n=e.toString(),r=parseInt(n);if(t.Utility.FilterText("0123456789",n)==n)if(r>this.GetText().GetLength())this.SelectionStart=this.GetText().GetLength(),this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionStart=this.DropDownEditData.Text.GetLength(),this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength());else{var i=this.GetSelectionLength();this.SelectionStart=r,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,r)),r-0+i<=this.GetText().GetLength()?(this.SelectionEnd=r-0+i,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,r+i))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}},e.prototype.GetSelectedText=function(){return this.GetText().Substring(Math.min(this.SelectionStart,this.SelectionEnd),Math.max(this.SelectionStart,this.SelectionEnd))},e.prototype.SetSelectedText=function(e){e=t.Utility.CheckString(e),this.OldText=this.GetText();var n=this.SelectionStart,r=this.SelectionEnd,s=this.GetText();this.MultiLine||(this.DropDownEditData.OldText=this.DropDownEditData.Text,n=this.DropDownEditData.SelectionStart,r=this.DropDownEditData.SelectionEnd,s=this.DropDownEditData.Text);var o=this.UIProcess.TextBoxPaste(n,r,s,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,e,!0);o==null,o.Text!=null&&(this.DirectSetText(o.Text),this.MultiLine||(this.DropDownEditData.Text=o.Text)),o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=o.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,o.SelectionStart))),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=o.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,o.SelectionEnd)));var u=this.OldText;this.OldText=this.GetText(),this.LastText=this.OldText,this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},e.prototype.SetSelectionLength=function(e){e=t.Utility.CheckInt(e);if(e<0)throw"ArgumentOutOfRangeException";e==null,e=e.toString();if(t.Utility.FilterText("0123456789",e)==e){var n=this.GetSelectionStart();this.SelectionStart=n,n+(e-0)<=this.GetText().GetLength()?(this.SelectionEnd=n+(e-0),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,n+parseInt(e)))):(this.SelectionEnd=this.GetText().GetLength(),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.DropDownEditData.Text.GetLength()))}},e.prototype.GetShowHistory=function(){return this.ShowHistory},e.prototype.SetShowHistory=function(e){e=t.Utility.CheckBool(e),this.ShowHistory=e,this.IsFromServer?this.EnableAutoComplete=this.ShowHistory&&this.AutoCompleteType!="Disabled"&&!this.ReadOnly&&this.Enabled:this.EnableAutoComplete=this.ShowHistory&&!this.ReadOnly&&this.Enabled},e.prototype.GetText=function(){var e=this._getInputValueWithPlaceHolder();this.isTextEllipsis&&!this.DragEdit&&(e=this.Text);if(this.PasswordMode){var n=this.hideText,r=n.LastIndexOf(":true"),i;return r==-1?i=n:i=n.Substring(0,r),i}return!t.Utility.IsIE()&&this.FFDragFlag&&(e=this.Text),e},e.prototype.SetText=function(e){e=t.Utility.CheckString(e),this.OldText=this.GetText(),this.switchPasswordChar=!1,this.InternalSetText(e,!1),this.GetText()!=this.OldText&&(this.OldText=this.GetText(),this.SetHideText(this.GetText())),this.LastText=this.GetText();var n=this.GetText().GetLength();this.SelectionStart=n,this.SelectionEnd=n,this.BuffText=this.LastText,this.DropDownEditData.Text=this.GetText(),this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=n,this.DropDownEditData.SelectionEnd=n,this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.Ellipsis!==i.None&&this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.GetTouchDropDownScale=function(){return this.TouchDropDownScale},e.prototype.SetTouchDropDownScale=function(e){e=t.Utility.CheckFloat(e,.25,4),this.TouchDropDownScale=e},e.prototype.GetUseClipboard=function(){return this.UseClipboard},e.prototype.SetUseClipboard=function(e){e=t.Utility.CheckBool(e),this.UseClipboard=e},e.prototype.GetUseSystemPasswordChar=function(){return this.UseSystemPasswordChar},e.prototype.SetUseSystemPasswordChar=function(e){e=t.Utility.CheckBool(e),this.UseSystemPasswordChar=e,e===!0?(this.PasswordMode=!0,this.SetPasswordChar(this.SystemPasswordChar())):this.SetPasswordChar(""),this.UIProcess.Reset()},e.prototype.GetWordWrap=function(){return this.WordWrap},e.prototype.SetWordWrap=function(e){e=t.Utility.CheckBool(e),this.WordWrap=e,e===!1?this.InputElement.style.wordWrap="normal":this.InputElement.style.wordWrap="break-word";var n=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-5+"px";var r=this;setTimeout(function(){r.InputElement.style.width=n},10),this._CheckScrollBar(this.GetScrollBars(),this.GetScrollBarMode())},e.prototype.Drop=function(){},e.prototype.Clear=function(){this.SetText("")},e.prototype.SetFocus=function(){},e.prototype.OnDropDownClose=function(e){e=t.Utility.CheckFunction(e),this.DropDownCloseEvent=e},e.prototype.OnDropDownOpen=function(e){e=t.Utility.CheckFunction(e),this.DropDownOpenEvent=e},e.prototype.OnEditStatusChanged=function(e){e=t.Utility.CheckFunction(e),this.EditStatusChangedEvent=e},e.prototype.OnInvalidInput=function(e){e=t.Utility.CheckFunction(e),this.InvalidInputEvent=e,this.UIProcess.InvalidInputEvent=e},e.prototype.OnKeyExit=function(e){e=t.Utility.CheckFunction(e),this.KeyExitEvent=e},e.prototype.OnTextChanged=function(e){e=t.Utility.CheckFunction(e),this.TextChangedEvent=e},e.prototype.Undo=function(){var e=this.GetText(),t=this.BuffText,n=this.LastText,r=this.LastSelectionStart,i=this.LastSelectionEnd;this.MultiLine||(e=this.DropDownEditData.Text,t=this.DropDownEditData.BuffText,n=this.DropDownEditData.LastText,r=this.DropDownEditData.LastSelectionStart,i=this.DropDownEditData.LastSelectionEnd);var s=this.UIProcess.TextBoxUndo(e,t,n,r,i);if(s==null)return!1;s.Text!=null&&(s.DelInclude?(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)):(this.LastText=this.Text,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text)),this.InternalSetText(s.Text,!0)),s.SelectionStart!=null&&(this.LastSelectionStart=this.SelectionStart,this.SelectionStart=s.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(s.Text,s.SelectionStart))),s.SelectionEnd!=null&&(this.LastSelectionEnd=this.SelectionEnd,this.SelectionEnd=s.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(s.Text,s.SelectionEnd))),s.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype.Cut=function(){var e=this.SelectionStart,t=this.SelectionEnd,n=this.GetText();this.MultiLine||(e=this.DropDownEditData.SelectionStart,t=this.DropDownEditData.SelectionEnd,n=this.DropDownEditData.Text);var r=this.UIProcess.Cut(n,e,t);if(r==null)return!1;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(r.Text,r.SelectionStart))),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(r.Text,r.SelectionEnd))),r.DelInclude&&(this.IsUndoAfterDel=!0,this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),r.Text!=null&&(this.DirectSetText(r.Text),this.MultiLine||(this.DropDownEditData.Text=r.Text)),r.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd),r.EventInfo!=null&&this.UIProcess.FireEvent(this,r.EventInfo.Name,r.EventInfo.Args,r.EventInfo.Type)},e.prototype.Copy=function(){this.PasswordMode||this.UIProcess.Copy(this.GetText(),this.SelectionStart,this.SelectionEnd)},e.prototype.Delete=function(){var e=this.SelectionStart,t=this.SelectionEnd,n=this.GetText();this.MultiLine||(e=this.DropDownEditData.SelectionStart,t=this.DropDownEditData.SelectionEnd,n=this.DropDownEditData.Text);var r=this.UIProcess.Delete(this.MultiLine,n,e,t);if(r==null)return!1;r.DelInclude&&(this.BuffText=this.Text,this.IsUndoAfterDel=!0,this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(r.Text,r.SelectionStart))),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(r.Text,r.SelectionEnd))),r.Text!=null&&(this.DirectSetText(r.Text),this.MultiLine||(this.DropDownEditData.Text=r.Text)),r.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype.Paste=function(e){var t=this.SelectionStart,n=this.SelectionEnd,r=this.GetText();this.MultiLine||(t=this.DropDownEditData.SelectionStart,n=this.DropDownEditData.SelectionEnd,r=this.DropDownEditData.Text);var i=this.UIProcess.TextBoxPaste(t,n,r,this.ExitOnLastChar,this.AcceptTab,this.AcceptReturn,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,e,!1);if(i==null)return!1;i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(i.Text,i.SelectionStart))),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(i.Text,i.SelectionEnd))),i.Text!=null&&(this.DirectSetText(i.Text),this.MultiLine||(this.DropDownEditData.Text=i.Text)),i.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd);if(i.EventInfo!=null)for(var s=0;s<i.EventInfo.length;s++)i.EventInfo[s]!=null&&this.UIProcess.FireEvent(this,i.EventInfo[s].Name,i.EventInfo[s].Args,i.EventInfo[s].Type)},e.prototype.SelectAll=function(){var e=this.GetText();this.MultiLine||(e=this.DropDownEditData.Text);var t=this.UIProcess.TextBoxSelectAll(e);if(t==null)return!1;t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(e,t.SelectionStart))),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(e,t.SelectionEnd))),t.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)},e.prototype._CheckScrollBar=function(e,n){switch(e){case t.ScrollBars.Both:n==t.ScrollBarMode.Automatic?(this.InputElement.style.overflowX="auto",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll",this.InputElement.style.overflowY="scroll");break;case t.ScrollBars.None:this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="hidden";break;case t.ScrollBars.Vertical:n==t.ScrollBarMode.Automatic?(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="auto"):(this.InputElement.style.overflowX="hidden",this.InputElement.style.overflowY="scroll");break;case t.ScrollBars.Horizontal:this.InputElement.style.overflowY="hidden",n==t.ScrollBarMode.Automatic?this.InputElement.style.overflowX="auto":this.InputElement.style.overflowX=this.GetWordWrap()?"auto":"scroll"}if(t.Utility.safari||t.Utility.chrome){var r=this.InputElement.style.width;this.InputElement.style.width=parseInt(this.InputElement.style.width)-1+"px";var i=this;setTimeout(function(){i.InputElement.style.width=r},0)}t.Utility.IPad&&(this.InputElement.style.webkitOverflowScrolling="touch"),this.InternalSetText(this.GetText())},e.prototype.Select=function(){if(this._isInnerKeyPressCall){delete this._isInnerKeyPressCall;return}this.SelectionStart=t.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+t.Utility.GetSelectionText(this.InputElement).GetLength(),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))},e.prototype._IMSetSelection=function(e,n,r,i){var s={start:n,end:r};if(n>r){var o=n;n=r,r=o}if(t.Utility.IsIE())try{var u=e.createTextRange();if(!i){var a=e.value.GetStandardPosition(n);r=e.value.GetStandardPosition(r,a-n),n=a,r=e.value.length-r,u.moveEnd("character",-1*parseInt(r)),u.moveStart("character",parseInt(n)),t.Utility.InnerSelect=!0,u.select(),t.Utility.InnerSelect=!1}else{var f=e.value,l=0,c=0,h=0,p=f.lastIndexOf("\r\n");while(p!=-1)l++,p>=n&&c++,p>=r&&h++,f=f.substring(0,p),p=f.lastIndexOf("\r\n");c=l-c;var a=n;r=r,n=a-c,r=e.value.length-r-h,u.moveEnd("character",-1*parseInt(r)),u.moveStart("character",parseInt(n)),t.Utility.InnerSelect=!0,u.select(),t.Utility.InnerSelect=!1}}catch(d){}else{var a=n;r=r,n=a;try{var v=parseInt(n),m=parseInt(r);(e.selectionStart!=v||e.selectionEnd!=m)&&e.setSelectionRange(v,m)}catch(d){}}var g=e.value.substring(0,v),y=t.Utility.MeasureText(g,e).Width,b=e.scrollHeight,w=e.clientWidth,E=e.currentStyle||window.getComputedStyle(e,null);w-=parseInt(E.paddingLeft)+parseInt(E.paddingRight);var S=e.clientHeight;return S-=parseInt(E.paddingTop)+parseInt(E.paddingBottom),t.Utility.IsIE10OrLater()&&(w-=S),e.scrollLeft>y?e.scrollLeft=y:y>e.scrollLeft+w&&(e.scrollLeft=y-w+parseInt(E.paddingLeft)),e.scrollTop>b?e.scrollTop=b:b>e.scrollTop+S&&(e.scrollTop=b-S+parseInt(E.paddingTop)),s},e.prototype.SetSelection=function(e,t){this.MultiLine?this._IMSetSelection(this.InputElement,e,t,!0):this._IMSetSelection(this.InputElement,e,t),this.SelectionStart=e,this.SelectionEnd=t,this.DropDownEditData.SelectionStart=e,this.DropDownEditData.SelectionEnd=t},e.prototype.InternalSetSelection=function(e,t){this.MultiLine?this._IMSetSelection(this.InputElement,e,t,!0):(this._IMSetSelection(this.InputElement,e,t),this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,e),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,t)),this.SelectionStart=e,this.SelectionEnd=t},e.prototype.SetInnerSelectionStart=function(e){this.SelectionStart=e,this.DropDownEditData.SelectionStart=e},e.prototype.SetInnerSelectionEnd=function(e){this.SelectionEnd=e,this.DropDownEditData.SelectionEnd=e},e.prototype.GetTrueSelection=function(e,t,n,r){var i=new Object;return i.SelectionStart=e,i.SelectionEnd=t,this.isTextEllipsis?(i.SelectionStart=this.GetTruePosition(e,n,r,this.TextHeadLength),e==t?i.SelectionEnd=i.SelectionStart:i.SelectionEnd=this.GetTruePosition(t,n,r,this.TextHeadLength),i):i},e.prototype.DropDownListValidate=function(e){var t=e,n=new Array;for(var r=0,i=0;r<t.length;r++){var s=t[r];if(this.UIProcess.ListValidateCheck(t[r])){this.MaxLength!=0&&(s=this.UIProcess.MaxLengthCheck(s,this.MaxLength,this.LengthAsByte));if(this.MaxLineCount!=0&&this.MultiLine)if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(s,this.PasswordChar,this.MultiLine);o=this.UIProcess.MaxLineCheck("","",o,this.MaxLineCount,this.CountWrappedLine),s=s.Substring(0,o.GetLength())}else s=this.UIProcess.MaxLineCheck("","",s,this.MaxLineCount,this.CountWrappedLine);s==t[r]&&(n[i]=t[r],i++)}}return n},e.prototype.SystemPasswordChar=function(){var e=t.Utility.GetClientOS();switch(e.toLowerCase()){case"win2000":return"*";case"win2003":case"winxp":case"vista":case"win7":case"win8":return"\u25cf";default:return"*"}},e.prototype.InternalSetText=function(e,n,r){var i=this.UIProcess.FormatCheck(e,this.AcceptTab,this.AcceptReturn),s=i;this.MaxLength!=0&&(s=this.UIProcess.MaxLengthCheck(i,this.MaxLength,this.LengthAsByte));if(this.MaxLineCount!=0&&this.MultiLine)if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(s,this.PasswordChar,this.MultiLine);o=this.UIProcess.MaxLineCheck("","",o,this.MaxLineCount,this.CountWrappedLine),s=s.Substring(0,o.GetLength())}else s=this.UIProcess.MaxLineCheck("","",s,this.MaxLineCount,this.CountWrappedLine);return r&&(t.Utility.firefox||t.Utility.chrome)?this.DirectSetText(s,!0):this.DirectSetText(s),!this.MultiLine&&n&&(this.DropDownEditData.Text=s),s},e.prototype.DirectSetText=function(e,n){this.SystemChange=!1;var r=e;this.PasswordMode&&(r=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),!this.MultiLine&&!t.Utility.IsIE()&&(r=r.replace(/\r\n/g,""),r=r.replace(/\n/g,""),r=r.replace(/\r/g,"")),this.Text!=e&&(this.Text=e,this.switchPasswordChar||(this.switchPasswordChar=!1)),n||this._setInputValueWithPlaceHolder(r),this.SetHideText(e)},e.prototype.InternalDirectSetText=function(e){var t=e;this.PasswordMode&&(t=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),this._setInputValueWithPlaceHolder(t)},e.prototype._setInputValueWithPlaceHolder=function(e){if(e==="")this.isNullText=!0,this.Focused===!1&&(e=this.placeHolder);else if(e!==this.placeHolder||!this.isNullText)this.isNullText=!1;this.InputElement.value=e},e.prototype._getInputValueWithPlaceHolder=function(){return this.isNullText?"":this.InputElement.value},e.prototype.SetHideText=function(e){this.hideText!==e&&this.TextChangedEvent!=""&&this.TextChangedEvent!=null&&this.UIProcess.FireEvent(this,this.TextChangedEvent,e,"textChanged"),this.hideText=e},e.prototype.GetSingleCurPosition=function(e,t){if(t<0)return-1;var n=t;t>=e.GetLength()&&(n=e.GetLength());var r=e.Substring(0,n);for(;;){var i=r.GetLength();r=r.replace(/\r/g,""),r=r.replace(/\n/g,"");if(i==r.GetLength())break}return r.GetLength()},e.prototype.GetSingleText=function(e){var t=e;for(;;){var n=t.GetLength();t=t.replace(/\r/g,""),t=t.replace(/\n/g,"");if(t.GetLength()==n)break}return t},e.prototype.GetMultiPosition=function(e,t){if(t<=0)return 0;if(t>=e.GetLength())return e.GetLength();var n=t;while(n<e.GetLength()){var r=e.Substring(0,n);r=this.GetSingleText(r);if(r.GetLength()==t)break;n+=1}return n},e.prototype.GetOldValue=function(){return this.OldText},e.prototype.GetValue=function(){return this.GetText()},e.prototype.SetInnerText=function(e){this.SetText(e)},e.prototype.GetDisPlayText=function(e){var t=e;return this.PasswordMode&&(t=this.UIProcess.GetPasswordText(e,this.PasswordChar,this.MultiLine)),t},e.prototype.Focus=function(){this._destoryOverflowTip(),this.oldTextValue=this._getInputValueWithPlaceHolder();var e=this.oldTextValue;t.Utility.IsIE()||(this.IsActive=!0),this.HasFocus=!0;if(!this._autoComplete.GetIsFocusOnList()){this._autoComplete.HideDropdown();var n;this.AutoCompleteType!="None"?n=this.GetItem(this.AutoCompleteType):n=this.GetItem(this.GetId(),"focus");var r=n!=null?n.sort():null;t.Utility.LoadComplete==1&&this._autoComplete.SetDataList(r)}else this._autoComplete.SetIsFocusOnList(!1);var i=this.UIProcess.TextBoxFocus(this.FocusType,this.InputElement,this.GetText(),this.MultiLine,this.HighlightText,!1);t.Utility.CurrentActiveControlId=this.GetId();if(i==null)return;this.isTextEllipsis&&this.InternalDirectSetText(this.Text),i.SelectionStart!=null&&(this.SelectionStart=i.SelectionStart),i.SelectionEnd!=null&&(this.SelectionEnd=i.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart));if(i.SelectionStart!=null&&i.SelectionEnd!=null){var s=this.GetTrueSelection(this.SelectionStart,this.SelectionEnd,this.Text,e);this.isTextEllipsis&&(this.SelectionStart=s.SelectionStart,this.SelectionEnd=s.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,s.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,s.SelectionEnd))}if(this.UIProcess.japInput==1)this.truePosition!=-1&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),this.UIProcess.japInput=!1;else if(this.FocusType!=t.FocusType.ContextMenu&&this.FocusType!=t.FocusType.ClientEvent&&this.FocusType!=t.FocusType.DropDown&&this.FocusType!=t.FocusType.DragDrop){this.OldText=this.GetText(),this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.LastSelectionStart=this.OldSelectionStart,this.LastSelectionEnd=this.OldSelectionEnd;if(!this.MultiLine){this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.OldSelectionStart=this.DropDownEditData.SelectionStart,this.DropDownEditData.OldSelectionEnd=this.DropDownEditData.SelectionEnd,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.OldSelectionStart,this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.OldSelectionEnd;var o=this;setTimeout(function(){o.DropDownEditData.SelectionStart=o.SelectionStart,o.DropDownEditData.SelectionEnd=o.SelectionEnd},0)}}this.ReadOnly==1&&this.FocusType==t.FocusType.None&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),(i.SetSelection==1||this.isTextEllipsis)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),this.IsCausedByImplementingDrop&&(this.IsCausedByImplementingDrop=!1),this.FocusExit&&(this.UIProcess.MoveControl(this.InputElement,!0),this.FocusExit=!1),this.isTextEllipsis&&(this.isTextEllipsis=!1)},e.prototype.SetInnerFocus=function(e){e!==null&&e!==undefined?this.FocusType=e:this.FocusType=t.FocusType.ClientEvent,this.InputElement.focus(),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart),this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))},e.prototype.LoseFocus=function(e){t.Utility.IsIE()||(this.IsActive=!1),this.FireKeyExit(),t.Utility.IsIE()&&this.ImeMode&&this.ReadingImeOperation();if(t.Utility.IsIE())this.ImeMode?(this.ImeInput("LoseFocusInput",undefined,e),this.ImeSelectTimes=0):this.Text!=this.GetText()&&this.InternalSetText(this.Text,!0);else{this.ImeMode&&this.ImeInput("ReInput",!0,e);if(this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){var n=this.Text;n=n.replace(/\\/g,"\\\\"),this.MultiLine?(n=n.replace(/\r/g,"\\r"),n=n.replace(/\n/g,"\\n")):(n=n.replace(/\r\n/g,""),n=n.replace(/\r/g,""),n=n.replace(/\n/g,"")),this.InternalSetText(n,!0)}}this.HasFocus=!1;if(this._autoComplete.IsVisible()){if(this._autoComplete.GetIsMouseOnList())return;this._autoComplete.HideDropdown()}this.FocusType!=t.FocusType.DropDown&&(this.FocusType=t.FocusType.None);var r;t.Utility.IsIE()?r=this.GetText():r=this.hideText;if(this.OldText!=r&&!this.UIProcess.japInput){this.OldText=this.Text,t.Utility.IsIE()&&(this.Text=this.GetText(),this.SetHideText(this.GetText())),this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement);if(!this.SystemChange||this.oldTextValue!=this.GetText())this.SystemChange=!0}else this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement),this.hideText!=this.GetText()&&t.Utility.IsIE()&&this.SetHideText(this.GetText())},e.prototype.FireKeyExit=function(){this.EventInfo!=null&&this.EventInfo.Type=="KeyExit"&&(this.UIProcess.FireEvent(this,this.EventInfo.Name,this.EventInfo.Args,this.EventInfo.Type),this.FocusType=t.FocusType.KeyExit,this.EventInfo=null)},e.prototype.GetTruePosition=function(e,t,n,r){var i=this.EllipsisString.GetLength();if(e<=r)return e;if(e>=r+i)return t.GetLength()-n.GetLength()+e;var s=t.GetLength()-n.GetLength()+i,o=Math.floor((e-r)*s/i)+r;return o},e.prototype.DealEllipsis=function(e,n,r,s){this.isTextEllipsis=!1;if(e||n==i.None)return;this.InternalDirectSetText(this.Text);var o=n,u=0,a=0,f=0,l=0,c=s.value,h=s.value,p="",d="",v=0,m=!0;s.value=c;if(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth){this.isTextEllipsis=!0,s.value=r;var g=r;if(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth)g="",c=r,h=r;else if(o==i.EllipsisPath){var y=h.LastIndexOf("\\");y!=-1&&(s.value=g+h.substr(y),t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)<=s.clientWidth&&(g=s.value,c=h.Substring(0,y),o=i.EllipsisEnd))}s.value=c+g;do u=s.value.GetLength(),a=Math.ceil(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)/u),f=t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)-s.clientWidth,l=Math.ceil(f/a),o==i.EllipsisEnd?(s.value=c.Substring(0,c.GetLength()-l)+g,c=c.Substring(0,c.GetLength()-l)):o==i.EllipsisPath&&(v=Math.ceil((c.GetLength()-l)/2),p=c.substr(0,v),d=c.substr(v+l),s.value=p+g+d,c=p+d);while(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)>s.clientWidth);var b=c.GetLength();do o==i.EllipsisEnd?(s.value=h.Substring(0,b+1)+g,b+=1):o==i.EllipsisPath&&(m?(d=h.substr(h.GetLength()-d.GetLength()-1),m=!1):(p=h.substr(0,p.GetLength()+1),m=!0),s.value=p+g+d);while(t.Utility.GetTextBoxScrollWidth(s,this.IsControlInPreview)==s.clientWidth);o==i.EllipsisEnd?(s.value=h.Substring(0,b-1)+g,this.TextHeadLength=b-1):o==i.EllipsisPath&&(m?p=h.substr(0,p.GetLength()-1):d=h.substr(h.GetLength()-d.GetLength()+1),s.value=p+g+d,this.TextHeadLength=p.GetLength())}},e.prototype.ImeInput=function(e,n,r,i){if(i)var s=this.Text,o=this.SelectionEnd,u=this.SelectionStart;var a;e=="DirectInput"&&!n?a=this.InputElement.value:e=="LoseFocusInput"&&this._getInputValueWithPlaceHolder()!=this.GetText()?a=this._getInputValueWithPlaceHolder():a=this.GetText();if(a==this.Text)return this.lastValue=this.Text,r!=null&&t.Utility.PreventDefault(r),this.ImeMode=!1,!1;if(t.Utility.IsIE()&&this.HasValidatedImeInput){this.InternalSetText(a,!0);if(i){var f=this.Text;if(s!==f){var l=u+f.length-(s.length-(o-u));this.SetSelection(l,l)}}return!1}var c;if(this.Text!=""){var h=Math.min(this.SelectionStart,this.SelectionEnd),p=Math.max(this.SelectionStart,this.SelectionEnd),d=this.Text;t.Utility.IsIE()||(d=this.GetDisPlayText(this.Text));if(p<d.GetLength()){var v=d.Substring(p,d.GetLength()),m=a.IndexOf(v);m!=-1?c=a.Substring(h,a.GetLength()-v.GetLength()):c=""}else c=a.Substring(h,a.GetLength())}else c=a;c!=""&&!this.MultiLine&&!this._autoComplete.IsDataListEmpty()&&this.EnableAutoComplete&&this._autoComplete.KeyUp(null,!0),e=="ReInput"&&(n?c=c.Substring(0,c.GetLength()):c=c.Substring(0,c.GetLength()-1));if(e=="Record")return c;var g=!1;if(e=="LoseFocusInput"){if(c==""){this.GetText()!=this.Text&&this._setInputValueWithPlaceHolder(this.Text);return}g=!0,this.UIProcess.japInput=!0}this.UIProcess.keypressResponse=!0,this.UIProcess.inputJap=!0,e=="ReInput"||!t.Utility.IsIE()&&e=="ClickInput"?this.InnerKeyPress(c,!0,g):this.InnerKeyPress(c,!1,g),this.HasValidatedImeInput=!0,this.UIProcess.inputJap=!1,this.UIProcess.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1;if(e=="ReInput"||e=="ClickInput")this.truePosition=this.SelectionStart,this.FocusType=t.FocusType.ImeInput},e.prototype.CanUndo=function(){return this.IsChangedByDropDownEdit?(this.IsUndoAfterDel?this.BuffText=this.GetText():this.LastText=this.GetText(),this.IsChangedByDropDownEdit=!1,!0):this.IsUndoAfterDel?this.GetText()!=this.BuffText:this.GetText()!=this.LastText},e.prototype.GetCookie=function(e){var t=document.cookie.split("; ");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(e==r[0]&&r[1]!=null)return window.unescape(r[1])}return null},e.prototype.SetCookie=function(e,t){var n=new Date(2020,8,20);if(document.cookie.IndexOf(e)==-1){if(t!="")while(t.IndexOf(",")!=-1)t=t.replace(",","@#GCD#@");document.cookie=e+"="+window.escape(t)+"; expires="+n.toGMTString()}else{var r=document.cookie.split("; "),i="";for(var s=0;s<r.length;s++){var o=r[s].split("=");if(e==o[0]){if(o[1]!=null){i=window.unescape(o[1]);break}document.cookie=e+"="+window.escape(t.replace(",","@#GCD#@"))+"; expires="+n.toGMTString();return}}if(t!=""){while(t.IndexOf(",")!=-1)t=t.replace(",","@#GCD#@");var u=i.split(","),a=!1;for(var f=0;f<u.length;f++)u[f]==t&&(a=!0);if(!a){i=t+","+i;var l=i.split(",");if(l.length>this.MaxHistoryCount){var c="";for(var h=0;h<this.MaxHistoryCount;h++)h!=this.MaxHistoryCount-1?c+=l[h]+",":c+=l[h];i=c}document.cookie=e+"="+window.escape(i)+"; expires="+n.toGMTString()}}}},e.prototype.DelCookie=function(e){document.cookie=e+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},e.prototype.DeleteItem=function(e){while(e.IndexOf("&nbsp;")!=-1)e=e.replace("&nbsp;"," ");var t=new Date(2020,8,20),n;this.AutoCompleteType!="None"?n=this.GetCookie(this.AutoCompleteType):n=this.GetCookie(this.GetId());if(n!=null)try{var r=n.split(","),i=n.split(",");if(r.length>0){var s;for(s=0;s<r.length;s++){while(r[s].IndexOf("@#GCD#@")!=-1)r[s]=r[s].replace("@#GCD#@",",");if(r[s].IndexOf("&")!=-1){var o=r[s],u="";while(o.IndexOf("&")!=-1){o=o.replace("&","&amp;");var a=o.IndexOf("&");u+=o.Substring(0,a+5),o=o.Substring(a+5,o.GetLength())}o.IndexOf("&")==-1&&o!=""&&(u+=o),r[s]=u}while(r[s].IndexOf("<")!=-1)r[s]=r[s].replace("<","&lt;");while(r[s].IndexOf(">")!=-1)r[s]=r[s].replace(">","&gt;");if(r[s]==e)break}if(s<i.length&&i.length>1){var f;for(f=s;f<i.length-1;f++)i[f]=i[f+1];i[r.length-1]=null;var l="";for(f=0;f<i.length-1;f++)f!=i.length-2?l+=i[f]+",":l+=i[f];if(this.AutoCompleteType!="None"){document.cookie=this.AutoCompleteType+"="+window.escape(l)+"; expires="+t.toGMTString();var c=this.GetItem(this.AutoCompleteType).sort();for(var s=0;s<c.length;s++)while(c[s].IndexOf("@#GCD#@")!=-1)c[s]=c[s].replace("@#GCD#@",",");this._autoComplete.SetDataList(c)}else{document.cookie=this.GetId()+"="+window.escape(l)+"; expires="+t.toGMTString();var c=this.GetItem(this.GetId()).sort();for(s=0;s<c.length;s++)while(c[s].IndexOf("@#GCD#@")!=-1)c[s]=c[s].replace("@#GCD#@",",");this._autoComplete.SetDataList(c)}}else this._autoComplete.SetDataList([]),this.AutoCompleteType!="None"?document.cookie=this.AutoCompleteType+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;":document.cookie=this.GetId()+"="+window.escape("")+"; expires=Fri, 31 Dec 1999 23:59:59 GMT;"}}catch(h){}},e.prototype.GetItem=function(e,t){if(this.IsFromServer){var n;this.AutoCompleteType!="None"&&(n=this.GetCookie(this.AutoCompleteType));if(n!=null)try{var r=n.split(","),i=r.length>this.MaxHistoryCount?this.MaxHistoryCount:r.length;for(var s=0;s<i;s++)while(r[s].IndexOf("@#GCD#@")!=-1)r[s]=r[s].replace("@#GCD#@",",");if(i!=r.length){var o=new Array;for(var u=0;u<i;u++)o[u]=r[u];while(u<r.length)this.DeleteItem(r[u]),u++;r=o}return r.length>0&&(r=this.DropDownListValidate(r)),r}catch(a){}return null}var r=this._historyList;r=r.sort();if(r!=null)try{var i=r.length>this.MaxHistoryCount?this.MaxHistoryCount:r.length;t!==undefined&&t==="focus"&&(i=r.length);if(i!=r.length){var o=new Array;for(var u=0;u<i;u++)o[u]=r[u];while(u<r.length)this.DeleteItem(r[u]),u++;r=o}return r.length>0&&(r=this.DropDownListValidate(r)),r}catch(a){}return null},e.prototype.ResetData=function(e){this.SetText(e.ResetData)},e.prototype.ReadingImeOperation=function(){if(this.RubyText=="")return;t.Utility.FireEvent(this,this.readingImeStringOutputEvent,{readingString:this.RubyText},"readingImeStringOutput"),this.prevval="",this.RubyText=""},e.prototype.ReadingImeKeyUpProcess=function(e,n,r){var i=this.ImeMode?this.InputElement.value:this._getInputValueWithPlaceHolder(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}var u=s.Substring(this.SelectionStart,s.GetLength()),a=u,f;for(f=this.prevval.length;f>=0;f--)if(u.substring(0,f)==this.prevval.substring(0,f)){a=u.substring(f);break}this.prevval=u;if(i==this.Text&&e!=13&&!r.altKey)this.prevval="",this.RubyText="";else if(e!=32&&e!=229&&!(e>=112&&e<=123)&&e!=37&&e!=39&&e!=38&&e!=40&&e!=27&&e!=28&&e!=29&&e!=8){var l=this.ConvertReadingIMEString(a,n);t.Utility.IsIE()&&(this.ImeMode?((e==192||e==219||e==221)&&a.length==1&&l.length==2&&this.RubyText.charAt(this.RubyText.length-1)==l.charAt(0)&&(l=l.charAt(1)),this.RubyText+=l):this.ReadingImeOperation())}},e.prototype.IsValidReadingString=function(e){if(e===undefined||e===null||e.length===0)return!1;for(var t=0;t<e.length;t++)if(!this.IsValidCharacter(e[t]))return!1;return!0},e.prototype.IsValidCharacter=function(e){var n=t.CharProcess.CharEx;if(n.IsSpace(e))return!0;var r=n.GetCharType(e),i=r&~n.Ctype.FullWidth;return i==n.Ctype.Hiragana||i==n.Ctype.Katakana||i==n.Ctype.UpperCase||i==n.Ctype.LowerCase||i==n.Ctype.Numeric||i==n.Ctype.Symbol||i==n.Ctype.MathSymbol||i==n.Ctype.Punctuation||n.CharCategory._jpnMixed.indexOf(e)!==-1?!0:!1},e.prototype.UpdateReadingIME=function(e){this.RubyText=this.ConvertReadingIMEString(e),this.ReadingImeOperation()},e.prototype.ConvertReadingIMEString=function(e,n){n===undefined&&(n=t.CharProcess.CharEx);var r="";for(var i=0;i<e.length;i++){var s=e.charAt(i),o=n.ToHalfKatakana(s);s=="\u309b"&&(o="\uff9e"),s=="\u309c"&&(o="\uff9f"),o=="\uff65"&&(o=""),r+=o}return r},e.prototype.AddAllEventsHandler=function(){var e=this;if(this.GetInputElement()!=null){var r=function(n){t.GlobalEventHandler.OnMouseDown(e,n)},i=function(n){t.GlobalEventHandler.OnMouseUp(e,n)},s=function(n){t.GlobalEventHandler.OnMouseOver(e,n)},o=function(n){t.GlobalEventHandler.OnSelectStart(e,n)},u=function(n){t.GlobalEventHandler.OnKeyDown(e,n)},a=function(n){t.GlobalEventHandler.OnKeyPress(e,n)},f=function(n){t.GlobalEventHandler.OnKeyUp(e,n)},l=function(n){t.GlobalEventHandler.OnDblClick(e,n)},c=function(n){t.GlobalEventHandler.OnHTML5BeforeCopy(e,n)},h=function(n){t.GlobalEventHandler.OnHTML5Cut(e,n)},p=function(n){t.GlobalEventHandler.OnHTML5Paste(e,n)},d=function(n){t.GlobalEventHandler.OnDragStart(e,n)},v=function(n){t.GlobalEventHandler.OnDragEnd(e,n)},m=function(n){t.GlobalEventHandler.OnMouseOut(e,n)},g=function(n){t.GlobalEventHandler.OnDrop(e,n)},y=function(n){t.GlobalEventHandler.OnTouchStart(e,n)},b=function(n){t.GlobalEventHandler.OnTouchEnd(e,n)},w=function(n){t.GlobalEventHandler.OnSelect(e,n)};if(t.Utility.safari){var E=function(t){e._safariDropText=getSelection().toString()},S=function(t){e._safariDropText=null};this.GetJQueryInputElement().on({"dragenter.imtextbox":E,"dragleave.imtextbox":S})}var x=function(n){t.GlobalEventHandler.OnDragEnter(e,n)},T=function(n){t.GlobalEventHandler.OnDragLeave(e,n)};if(t.Utility.IsIE7OrLater()&&!t.Utility.IsIE11OrLater()){var N=function(n){t.GlobalEventHandler.OnPropertyChanged(e,n)};this.GetJQueryInputElement().on({"onpropertychange.imtextbox":N})}else{var C=function(n){t.GlobalEventHandler.OnPropertyChanged(e,n)};this.GetJQueryInputElement().on({"propertychange.imtextbox":C})}var k=function(n){t.GlobalEventHandler.OnCompositionStart(e,n)},L=function(n){t.GlobalEventHandler.OnCompositionUpdate(e,n)},A=function(n){t.GlobalEventHandler.OnCompositionEnd(e,n)};if(t.Utility.IsIE10OrLater()){var O=function(n){t.GlobalEventHandler.OnMSPointerUp(e,n)},M=function(n){t.GlobalEventHandler.OnMSPointerDown(e,n)},_=function(n){t.GlobalEventHandler.OnMSGestureTap(e,n)};this.GetJQueryInputElement().on({"MSPointerUp.imtextbox":O,"MSPointerDown.imtextbox":M,"MSGestureTap.imtextbox":_})}var D=function(n){t.GlobalEventHandler.OnEditFieldLoseFocus(e,n)},P=function(n){t.GlobalEventHandler.OnFocusOut(e,n)},H=function(n){t.GlobalEventHandler.OnEditFieldFocus(e,n)},B=function(n){t.GlobalEventHandler.OnActivate(e,n)},j=function(n){t.GlobalEventHandler.OnDeActivate(e,n)};if(t.Utility.GetClientOS()==="Android"){var F=function(n){t.GlobalEventHandler.OnWebkitEditableContentChanged(e,n)};this.GetJQueryInputElement().on({"webkitEditableContentChanged.imtextbox":F})}this.GetJQueryInputElement().on({"mousedown.imtextbox":r,"mouseup.imtextbox":i,"selectstart.imtextbox":o,"keydown.imtextbox":u,"keypress.imtextbox":a,"keyup.imtextbox":f,"dblclick.imtextbox":l,"beforecopy.imtextbox":c,"cut.imtextbox":h,"paste.imtextbox":p,"dragstart.imtextbox":d,"dragend.imtextbox":v,"mouseout.imtextbox":m,"drop.imtextbox":g,"touchstart.imtextbox":y,"touchend.imtextbox":b,"select.imtextbox":w,"dragenter.imtextbox":x,"dragleave.imtextbox":T,"compositionstart.imtextbox":k,"compositionupdate.imtextbox":L,"compositionend.imtextbox":A,"blur.imtextbox":D,"focusout.imtextbox":P,"focus.imtextbox":H,"activate.imtextbox":B,"deactivate.imtextbox":j}),n(this.GetJQueryInputElement()[0].parentElement).on("mouseover",s)}},e.prototype.WebkitEditableContentChanged=function(e){var t=this,n=function(){try{t.ImeInput()}finally{t.ImeMode=!1}};setTimeout(n,0)},e.prototype.KeyDown=function(e){var n=this,r=e.keyCode,i=new Object;i.Shift=!1,i.Ctrl=!1,i.Alt=!1,e.shiftKey&&(i.Shift=!0),e.ctrlKey&&(i.Ctrl=!0),e.altKey&&(i.Alt=!0),this.LastInputText=this.GetText(),this.isFuncKeyPressed=!1;if(!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete){var s=this._autoComplete.KeyDown(e);if(s!=null&&s==0)return}this.KeyDownAction=!0;if(r==229&&!this.IsJapanConvertKeyPress||r==13&&this.GetText()!=this.Text)return this.ImeMode=!0,!0;if(this.ImeMode){var o=i.Shift||i.Ctrl||r==20||r>=112&&r<=123;o=o||r==8&&!t.Utility.IsIE(),o||(this.ImeInput("ReInput",!0,e),this.ImeSelectTimes=0,this.ImeMode=!1)}r==229&&this.IsJapanConvertKeyPress&&(this.IsJapanConvertKeyPress=!1);var u=new Object;i.Shift&&(r|=65536),i.Ctrl&&(r|=131072);if(i.Alt&&r===40)var a="DropDown";i.Alt&&(r|=262144);var f=!1,l;if(this.KeyActionList!=null)for(l=0;l<this.KeyActionList.length;l++)if(this.KeyActionList[l]==r.toString()){f=!0;break}if(a=="DropDown"||(r==262182||r==262184)&&!f)return!1;95<r&&r<106&&(r-=48);var c=this.SelectionStart,h=this.SelectionEnd,p=this.GetText(),d=this.BuffText,v=this.LastText,m=this.LastSelectionStart,g=this.LastSelectionEnd;this.MultiLine||(c=this.DropDownEditData.SelectionStart,h=this.DropDownEditData.SelectionEnd,p=this.DropDownEditData.Text,d=this.DropDownEditData.BuffText,v=this.DropDownEditData.LastText,m=this.DropDownEditData.LastSelectionStart,g=this.DropDownEditData.LastSelectionEnd),u=this.UIProcess.TextBoxKeyDown(r,i,this._getEditModeInternal(),this.Overwrite,c,h,this.ReadOnly,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.ExitOnLastChar,this.ExitOnLeftRightKey,this.MultiLine,this.PasswordMode,p,this.AcceptTab,this.AcceptReturn,d,v,m,g,a,e);if(u==null)return!1;if(u.inputChar!=null)return!0;u.InputTab==1&&(this.Text=this.GetText(),this.InnerKeyPress("	")),u.DelInclude&&(this.IsUndoAfterDel=!0,u.SerialDel||(this.BuffText=this.GetText(),this.LastSelectionStart=this.BuffText.GetLength(),this.LastSelectionEnd=this.BuffText.GetLength(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text,this.DropDownEditData.LastSelectionStart=this.DropDownEditData.BuffText.GetLength(),this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.BuffText.GetLength()))),u.Text!=null&&(u.Undo==1&&(this.LastText=this.Text,this.BuffText=this.LastText,this.MultiLine||(this.DropDownEditData.LastText=this.DropDownEditData.Text,this.DropDownEditData.BuffText=this.DropDownEditData.LastText)),this.DirectSetText(u.Text),this.MultiLine||(this.DropDownEditData.Text=u.Text));var y=this.GetSelectionLength();u.SelectionStart!=null&&(u.Undo==1&&(this.isFuncKeyPressed=!0,this.LastSelectionStart=this.SelectionStart,this.MultiLine||(this.DropDownEditData.LastSelectionStart=this.DropDownEditData.SelectionStart)),this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(this.DropDownEditData.Text,u.SelectionStart))),u.SelectionEnd!=null&&(u.Undo==1&&(this.LastSelectionEnd=this.SelectionEnd,this.MultiLine||(this.DropDownEditData.LastSelectionEnd=this.DropDownEditData.SelectionEnd)),this.SelectionEnd=u.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(this.DropDownEditData.Text,u.SelectionEnd)));var b=this.GetSelectionLength();if(u.KeyCode!=null){var w=new Object;return w.KeyCode=u.KeyCode,w}u.FocusType!=null&&(this.FocusType=u.FocusType),u.Overwrite!=null&&this.GetOverwrite()!=u.Overwrite&&(this._getEditModeInternal()==t.EditMode.Insert?this._setEditModeInternal(t.EditMode.Overwrite):this._getEditModeInternal()==t.EditMode.Overwrite&&this._setEditModeInternal(t.EditMode.Insert));if(u.EventInfo!=null)for(l=0;l<u.EventInfo.length;l++)u.EventInfo[l]!=null&&(u.EventInfo[l].Type=="KeyExit"?this.EventInfo=u.EventInfo[l]:this.UIProcess.FireEvent(this,u.EventInfo[l].Name,u.EventInfo[l].Args,u.EventInfo[l].Type));return u.System!=null?(setTimeout(function(){u.System&&n.InputElement.value===""&&n.Clear()},0),u.System):(u.SetSelection==1&&(y==0&&b!=0?t.Utility.ShouldFireOnSelectStart=!0:t.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),t.Utility.ShouldFireOnSelectStart=!1),!1)},e.prototype.KeyPress=function(e,n,r){var i=e;if(!t.Utility.IsIE()&&this.ImeMode){var s=n.keyCode==192&&n.altKey;if(s){this.ImeInput("ReInput",!0,n),this.ImeSelectTimes=0,this.ImeMode=!1;return}}if(!t.Utility.IsIE()&&n.charCode==0){var o=n.keyCode||n.charCode;if(o=!this.MultiLine||!this.AcceptReturn&&this.MultiLine&&!n.ctrlKey)return!0}return this.InnerKeyPress(i,r)},e.prototype.KeyUp=function(e){!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&(e.keyCode!=8&&e.keyCode!=46&&e.keyCode!=9||this.GetText()!=""?this.isFuncKeyPressed?this._autoComplete.HideDropdown():this.LastInputText!=this.GetText()&&this.GetText()!=""&&this._autoComplete.KeyUp(e):this._autoComplete.GetIsDeleteItem()||this._autoComplete.HideDropdown(),this._autoComplete.SetIsDeleteItem(!1)),this.KeyDownAction=!1;var n=e.keyCode,r=t.CharProcess.CharEx;n==13&&this._getInputValueWithPlaceHolder()!=this.Text&&(t.Utility.IsIE()&&this.ImeMode?this.HasValidatedImeInput=!1:t.Utility.IsIE()||(this.ImeMode=!0));if(this.ImeMode==1){var i=this._getInputValueWithPlaceHolder(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}s=s.Substring(s.GetLength()-1,s.GetLength()),n==13?(this.ImeInput("DirectInput",undefined,e),this.ImeSelectTimes=0):n>=48&&n<=57||n>=96&&n<=105?(n>=96&&(n-=48),s=r.ToHalfWidth(s),s!=String.fromCharCode(n)&&!this.ImeSelect?this.HasValidatedImeInput=!1:s==String.fromCharCode(n)&&this.ImeSelectTimes<1?this.HasValidatedImeInput=!1:this.ImeSelect||(this.ImeInput("ReInput",undefined,e),this.HasValidatedImeInput=!1,this.ImeMode=!0),this.ImeSelectTimes=0):n==32?this.ImeSelect==0&&(this.ImeSelectTimes==1?this.ImeSelect=!0:r.ToHalfWidth(s)!=String.fromCharCode(n)?this.ImeSelectTimes++:this.HasValidatedImeInput&&(this.UIProcess.inputJap=!0,t.Utility.IsIE()&&(this.HasValidatedImeInput=!1),this.ImeInput("DirectInput",undefined,e),this.ImeSelectTimes=0)):n>=65&&n<=90?(this.ImeSelectTimes=0,this.HasValidatedImeInput=!1):n==32||n==106||n==107||n==109||n==173&&t.Utility.IsFireFox4OrLater()||n==110||n==111||n==219||n==220||n==221||n==222||n>=186&&n<=192||n==226?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput",undefined,e),this.ImeSelectTimes=0,t.Utility.IsIE()&&(this.HasValidatedImeInput=!1)):n==40||n==38?this.ImeSelect==0&&this.ImeSelectTimes==1&&(this.ImeSelect=!0):n==8||n==46?this.ImeSelectTimes=0:n==27?this.ImeSelectTimes=0:n==244?this.IsJapanConvertKeyPress=!0:!t.Utility.IsIE()&&n==243?(this.ImeInput("ReInput",!0,e),this.ImeSelectTimes=0,this.ImeMode=!1):t.Utility.IsIE()&&n==229&&(this.HasValidatedImeInput=!1)}n==242&&this.ImeInput("ReInput",!0,e),this.ReadingImeKeyUpProcess(n,r,e);if(this.UIProcess.keyupResponse==1){this.UIProcess.keyupResponse=!1;var u=this.UIProcess.TextBoxKeyUp(this.InputElement,this.MultiLine,this.SelectionStart,this.SelectionEnd,this.GetText()),a=this.SelectionStart,f=this.SelectionEnd,l=!1,c=!1;this.MultiLine||(a=this.DropDownEditData.SelectionStart,f=this.DropDownEditData.SelectionEnd),u.SelectionStart!=null&&this.SelectionStart!=u.SelectionStart&&(l=!0,this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),u.SelectionEnd!=null&&this.SelectionEnd!=u.SelectionEnd&&(this.SelectionEnd=u.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),c=!0,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)));var h=this._getInputValueWithPlaceHolder(),p=this.MultiLine?this.Text:this.GetSingleText(this.Text),d=p.GetLength()-h.GetLength(),v;this.MultiLine?this.PasswordMode?d!=0&&(v=this.Text,l&&c?p=v.Substring(0,this.SelectionStart)+v.Substring(f,v.GetLength()):l||(f=this.SelectionStart+d,p=v.Substring(0,a)+v.Substring(f,v.GetLength()))):p=this.GetText():(d!=0&&(v=this.DropDownEditData.Text,l&&c?this.DropDownEditData.Text=v.Substring(0,this.DropDownEditData.SelectionStart)+v.Substring(f,v.GetLength()):l||(f=this.GetMultiPosition(v,this.SelectionStart+d),this.DropDownEditData.Text=v.Substring(0,a)+v.Substring(f,v.GetLength()))),p=this.GetSingleText(this.DropDownEditData.Text)),u.SystemEdit==1&&(this.Text=p,this.SetHideText(p)),u.Text!=null&&this.InternalSetText(u.Text,!0),u.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}},e.prototype.PropertyChange=function(e){e!=null&&t.Utility.IsIE10OrLater()&&e.propertyName=="value";if(this.DragEdit)this.DragEdit=!1,this.MultiLine||this.Text!=this.GetText()&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionEnd,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart),this.OldText=this.Text,this.Text=this.GetText(),this.SetHideText(this.GetText()),this.SystemChange=!0,this.LastText=this.OldText,this.SetSelectionLength(0);else if(this.DropEdit){this.DropEdit=!1,this.FocusType=t.FocusType.DragDrop,this.SelectionStart=t.Utility.GetSelectionStartPosition(this.InputElement),this.SelectionEnd=this.SelectionStart+t.Utility.GetSelectionText(this.InputElement).GetLength();var n=this._getInputValueWithPlaceHolder();if(!this.MultiLine){var r,i=this.GetSingleText(this.DropDownEditData.Text),s=n.GetLength()-i.GetLength();this.PasswordMode?r=this.DropText:r=n.Substring(this.SelectionEnd-s,this.SelectionEnd),s!=0&&(this.DropDownEditData.OldText=this.DropDownEditData.Text,this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd-s),this.DropDownEditData.Text=this.DropDownEditData.Text.Substring(0,this.DropDownEditData.SelectionStart)+r+this.DropDownEditData.Text.Substring(this.DropDownEditData.SelectionStart,this.DropDownEditData.Text.GetLength()),this.DropDownEditData.LastText=this.DropDownEditData.OldText,this.DropDownEditData.SelectionEnd=this.DropDownEditData.SelectionStart+s),this.PasswordMode&&(n=this.GetSingleText(this.DropDownEditData.Text))}else if(this.PasswordMode){var o=this.SelectionEnd-this.DropText.GetLength();n=this.Text.Substring(0,o)+this.DropText+this.Text.Substring(o,this.Text.GetLength())}this.OldText=this.Text,this.Text=n,this.SetHideText(n),this.SystemChange=!0,this.LastText=this.OldText}else!this.MultiLine&&!this.isTextEllipsis&&!this.PasswordMode&&this.SetHideText(this.GetText());return!1},e.prototype.MouseDown=function(e){this._isInnerKeyPressCall=!1;var n=t.Utility.GetMouseButton(e);this.FocusedWhenMouseDown=document.activeElement==e.target,this.MouseDownOnClearButton=t.Utility.IsMouseDownOnClearButton(e),t.Utility.IsIE()||(this.IsActive=!0,this.ImeMode&&n==t.MouseButton.Left&&(this.IsImplementImeInput=!0)),this.MouseButton=n,this.BeforeDragSelectionStart=this.SelectionStart,this.BeforeDragSelectionEnd=this.SelectionEnd;if(this.MouseButton==t.MouseButton.Right)this.FocusType!=t.FocusType.ClientEvent&&(this.FocusType=t.FocusType.Click);else{this.isLeftMouseButtonPressed=!0,this.FocusType!=t.FocusType.ClientEvent&&(this.FocusType=t.FocusType.Click);try{var r=t.Utility.GetSelectionText(this.InputElement);r!=""&&(this.IsMouseDown=!0,t.Utility.ClearSelection(this.InputElement))}catch(i){}}var s=this.UIProcess.TextBoxMouseDown(this.InputElement,n);if(s==null)return;s.SelectionStart!=null&&(this.SelectionStart=s.SelectionStart),s.SelectionEnd!=null&&(this.SelectionEnd=s.SelectionEnd)},e.prototype.MouseUp=function(e){var n=null;t.Utility.IsIE()&&this.ImeMode&&this.ReadingImeOperation(),this.IsMouseDown=!1;if(t.Utility.IsIE()&&(this.ImeMode||this.Text!=this.GetText()))this.ImeMode?(this.ImeInput("ClickInput",undefined,e),this.ImeSelectTimes=0):this.InternalSetText(this.Text,!0);else if(!t.Utility.IsIE()&&(this.ImeMode||this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder())){if(!this.IsImplementImeInput)return;this.ImeInput("ClickInput",undefined,e),this.ImeSelectTimes=0;if(this.GetDisPlayText(this.Text)!=this._getInputValueWithPlaceHolder()){this.IsImplementImeInput=!1;var r=this.Text;this.MultiLine?(r=r.replace(/\r/g,"\\r"),r=r.replace(/\n/g,"\\n")):(r=r.replace(/\r\n/g,""),r=r.replace(/\r/g,""),r=r.replace(/\n/g,""));var i=this;window.setTimeout(function(){i.InternalSetText(r,!0)},0),this.Select()}}else{this.isLeftMouseButtonPressed=!1,this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd;var s=this.SelectionStart,o=this.SelectionEnd,u=this.GetText(),a=null;n!=null&&n.Ctrl!=null&&(a=n.Ctrl);var f=this.UIProcess.TextBoxMouseUp(this.InputElement,s,o,this.MouseButton,this.MultiLine,u,a,this.HighlightText,e);if(f==null)return;f.SelectionStart!=null&&(this.SelectionStart=f.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),f.SelectionEnd!=null&&(this.SelectionEnd=f.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart),this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd))),f.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)}this.MouseButton=t.MouseButton.Left,this.MouseUpPointerType==undefined&&(this.MouseUpHasValue=e.target.value.length>0),this.HandleClearButton(e)},e.prototype.MouseWheel=function(e){},e.prototype.ShouldCancelMouseWheelDefaultBehavior=function(){return!1},e.prototype.MouseOut=function(){if(this.IsMouseDown!=1)return;if(this.MouseUpPointerType!==4&&this.MouseUpPointerType!=undefined&&this.MouseUpPointerType!=="mouse")return;var e=Math.min(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),n=Math.max(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),r=this.GetText().Substring(e,n);r!=""&&(this.SetSelection(this.BeforeDragSelectionStart,this.BeforeDragSelectionEnd),t.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1},e.prototype.DoubleClick=function(){!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly&&this._autoComplete.ShowDropdown();var e=this.UIProcess.TextBoxDoubleClick(this.InputElement,this.SelectionStart,this.GetText());return e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionStart))),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,this.SelectionEnd)),this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),e.SetSelection==1&&this.SetSelection(this.SelectionStart,this.SelectionEnd),!0},e.prototype.DragStart=function(e){this.PasswordMode?e.dataTransfer.effectAllowed="none":this.DragEdit=!0},e.prototype.DragEnd=function(){this.DragEdit=!0},e.prototype.DragEnter=function(){this.isTextEllipsis&&this.InternalDirectSetText(this.GetText())},e.prototype.DragLeave=function(){this.DealEllipsis(this.MultiLine,this.Ellipsis,this.EllipsisString,this.InputElement)},e.prototype.MouseMove=function(e){},e.prototype.MouseOver=function(){var e=!(this.HasFocus||this.MultiLine||!this.OverflowTip);if(e){var r=this.InputElement,i=this.GetText();this.isTextEllipsis&&(i=this.Text);if(this.PasswordMode){var s="";for(var o=0;o<i.GetLength();o++)s+=this.PasswordChar;i=s}var u=t.Utility.MeasureText(i,r).Width;u>r.clientWidth?(this.ToolTip=n(this.InputElement.parentElement).wijtooltip({content:i,position:{my:"left bottom",at:"left+1 top"}}),n(this.InputElement.parentElement).wijtooltip("show")):e=!1}e||this._destoryOverflowTip()},e.prototype._destoryOverflowTip=function(){this.ToolTip!=null&&(this.ToolTip=null,n(this.InputElement.parentElement).wijtooltip("destroy"))},e.prototype._isinsertGroup=function(e){return e==t.EditMode.Insert||e==t.EditMode.FixedInsert},e.prototype._isOverwriteGroup=function(e){return e==t.EditMode.Overwrite||e==t.EditMode.FixedOverwrite},e.prototype.InnerKeyPress=function(e,t,n){var r=e,i;this.ImeMode||this.isPasting?i=this.Text:(i=this._getInputValueWithPlaceHolder(),i!=""&&(i=this.GetText())),this.isPasting=!1;var s=this.SelectionStart,o=this.SelectionEnd;this.MultiLine||(s=this.DropDownEditData.SelectionStart,o=this.DropDownEditData.SelectionEnd);var u=this.UIProcess.TextBoxKeyPress(s,o,r,i,this.MaxLength,this.LengthAsByte,this.ExitOnLastChar,this.Overwrite,this.MultiLine,this.MaxLineCount,this.CountWrappedLine);u.Text!=null&&(u.DelInclude&&(this.BuffText=this.GetText(),this.MultiLine||(this.DropDownEditData.BuffText=this.DropDownEditData.Text)),this.DirectSetText(u.Text,t),this.MultiLine||(this.DropDownEditData.Text=u.Text)),u.SelectionStart!=null&&(this.SelectionStart=u.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.SelectionStart,this.SelectionStart=this.GetSingleCurPosition(u.Text,u.SelectionStart))),u.SelectionEnd!=null&&(this.SelectionEnd=u.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.SelectionEnd,this.SelectionEnd=this.GetSingleCurPosition(u.Text,u.SelectionEnd))),u.SetSelection==1&&!t&&!n&&(this._isInnerKeyPressCall=!0,this.SetSelection(this.SelectionStart,this.SelectionEnd));if(u.EventInfo!=null)for(var a=0;a<u.EventInfo.length;a++)u.EventInfo[a]!=null&&this.UIProcess.FireEvent(this,u.EventInfo[a].Name,u.EventInfo[a].Args,u.EventInfo[a].Type);return u.SystemEdit==1?!0:!1},e.prototype._isSupportClipBoard=function(){if(!this.GetUseClipboard())return!0;if(t.Utility.IsIE())return!0;if(t.Utility.IsFireFox4OrLater())try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var e=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!e)return;var n=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!n)return;n.addDataFlavor("text/unicode"),e.getData(n,e.kGlobalClipboard);var r=new Object,i=new Object;try{n.getTransferData("text/unicode",r,i)}catch(s){return null}r&&(Components.interfaces.nsISupportsWString?r=r.value.QueryInterface(Components.interfaces.nsISupportsWString):Components.interfaces.nsISupportsString?r=r.value.QueryInterface(Components.interfaces.nsISupportsString):r=null);if(r)return r.data.substring(0,i.value/2)}catch(o){return!1}return!1},e.prototype.MSPointerUp=function(e){e!=null&&(this.MouseUpPointerType=e.pointerType,this.MouseUpHasValue=(e.srcElement||e.target).value.length>0)},e.prototype.CompositionStart=function(e){this.ImeMode=!0,this._lastCompositionText="",this._lastCompositionOffset=0,this._convertedOnLastUpdate=!1,this._cachedReadingString="",this._readingString="",this._compositionUpdateFired=!1},e.prototype.CompositionUpdate=function(e){this._compositionUpdateFired=!0;if(e.originalEvent.data===undefined||e.originalEvent.data.length===0)return;var t=this.InputElement.selectionStart-e.originalEvent.data.length;if(t>this._lastCompositionOffset){if(!this._convertedOnLastUpdate){var n=this._lastCompositionText.substring(0,t-this._lastCompositionOffset);this.IsValidReadingString(n)?this._cachedReadingString+=n:this._cachedReadingString+=this._readingString,this._readingString="",this._convertedOnLastUpdate=!0}}else this._convertedOnLastUpdate&&(this._convertedOnLastUpdate=!1);if(!this.IsValidReadingString(e.originalEvent.data))return;this._readingString=e.originalEvent.data},e.prototype.CompositionEnd=function(e){var n=this.HasValidatedImeInput;this.ImeMode=!0,this.HasValidatedImeInput=!1;var r=this,i=function(){try{r.ImeInput("DirectInput",undefined,e)}finally{r.ImeMode=!1}};t.Utility.IsIE9OrLater()?i():setTimeout(i,0),this._compositionUpdateFired||this.CompositionUpdate(e),this._convertedOnLastUpdate=!1;var s=this._cachedReadingString+this._readingString;this._cachedReadingString="",this._readingString="";if(e.originalEvent.data.length===0||s.length===0)return;this.UpdateReadingIME(s);if(t.Utility.IPad&&t.Utility.safari||t.Utility.chrome&&t.Utility.GetClientOS()==="Android")this.HasValidatedImeInput=n,this.ImeMode=!1},e.prototype.SelectStart=function(e){if(this.ImeMode)return!1;if(this.isLeftMouseButtonPressed){var t=this.UIProcess.SelectStart(this.InputElement,e,this.MultiLine);t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart,this.MultiLine||(this.DropDownEditData.SelectionStart=this.GetMultiPosition(this.DropDownEditData.Text,t.SelectionStart))),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd,this.MultiLine||(this.DropDownEditData.SelectionEnd=this.GetMultiPosition(this.DropDownEditData.Text,t.SelectionEnd)))}},e.prototype.DragDrop=function(e){if(!p.Utility.IsIE()&&this.ReadOnly)return!1;this.FFDragFlag=!1,p.Utility.IsIE()||(this.FFDragFlag=!0),!p.Utility.IsIE()&&!p.Utility.safari&&this.SetInnerFocus();var t=p.Utility.GetSelectionStartPosition(this.InputElement),n=t,r=this.UIProcess.DragDrop(e,this.ExitOnLastChar,t,n,this.MaxLength,this.LengthAsByte,this.MaxLineCount,this.CountWrappedLine,this.MultiLine,this.GetText());if(r==null)return;if(r.DropText!=null){var i,s;if(this.PasswordMode){var o=this.UIProcess.GetPasswordText(r.DropText,this.PasswordChar,this.MultiLine);p.Utility.IsIE()?(window.event.dataTransfer.setData("Text",o),o!=window.event.dataTransfer.getData("Text")&&(i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0),p.Utility.PreventDefault(window.event))):(i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0,!0)),this.DropText=r.DropText}else if(p.Utility.IsIE()){event.dataTransfer.setData("Text",r.DropText);if(r.DropText!=event.dataTransfer.getData("Text"))i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0),p.Utility.PreventDefault(event);else{var u=this;setTimeout(function(){var e=u.GetText();u.InternalSetText(e,!0)},0)}}else i=this.GetText(),s=i+r.DropText,this.InternalSetText(s,!0,!0);this.DropEdit=!0}if(r.EventInfo!=null)for(var a=0;a<r.EventInfo.length;a++)r.EventInfo[a]!=null&&r.EventInfo[a].Name!=null&&(this.UIProcess.FireEvent(this,r.EventInfo[a].Name,r.EventInfo[a].Args,r.EventInfo[a].Type),r.EventInfo[a].Name==this.KeyExitEvent&&(this.FocusExit=!0));this.FFDragFlag=!1;var f=this,l=this.MultiLine,c=this.Ellipsis,h=this.EllipsisString,p=this.InputElement;return setTimeout(function(){f.InternalSetText(f.GetText()),f.DealEllipsis(l,c,h,p)},0),!0},e.prototype.MSGestureTap=function(e){if(this.Focused&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var t=this;setTimeout(function(){t.Focused&&t._autoComplete.ShowDropdown()},400)}},e.prototype.MSPointerDown=function(e){if(this.Focused&&(e.pointerType===e.MSPOINTER_TYPE_TOUCH||e.pointerType==="touch")&&!this.PasswordMode&&!this.MultiLine&&this.EnableAutoComplete&&!this.ReadOnly){var t=new MSGesture;t.target=e.target,t.addPointer(e.pointerId)}},e.prototype.GetShowLiterals=function(){return t.ShowLiterals.Always},e}();t.IMTextBox=l;var c=function(e){function r(n,r,i,s,o,u){e.call(this),this.isMulSelected=!1,this.isOverWrite=!1,this.ForwardSelection="None",this.isCtrlPress=!1,this.isCtrlClick=!1,this.isDblClick=!1,this.isTriClick=!1,this.isInputValid=!0,this.ctrlDelete=!1,this.ctrlBackspace=!1,this.IsDelInclude=!1,this.IsSerialDel=!1,this.StartPos=null,this.LastKey=null,this.keypressResponse=!1,this.systemEdit=!1,this.keyupResponse=!1,this.japInput=!1,this.inputJap=!1,this.IsKeyDown=!1,this.CurStart=0,this.CurEnd=0,this.control=u,this.Owner=u,this.Filter=new t.TextFilter(n,r),this.IsjQueryControl=o,this.PasswordMode=i,this.PasswordChar=s}return __extends(r,e),r.prototype.Reset=function(){this.Filter=new t.TextFilter(this.control.AutoConvert,this.control.Format),this.PasswordMode=this.control.PasswordMode,this.PasswordChar=this.control.GetPasswordChar()},r.prototype.TextBoxKeyDown=function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){n.Ctrl?this.isCtrlPress=!0:this.isCtrlPress=!1;var N=new Object;switch(r){case t.EditMode.Insert:this.isOverWrite=!1;break;case t.EditMode.Overwrite:this.isOverWrite=!0;break;case t.EditMode.FixedInsert:this.isOverWrite=!1;break;case t.EditMode.FixedOverwrite:this.isOverWrite=!0}s!=o?this.isMulSelected=!0:this.isMulSelected=!1;var C;switch(x){case"Clear":return u||(N.SelectionStart=0,N.SelectionEnd=0,N.Text="",N.DelInclude=!0,this.IsDelInclude=!0),N;case"NextControl":return C=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),N;case"PreviousControl":return C=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),N}if(u&&e!=131117&&e!=131139&&e!=9&&e!=65545&&e!=131081&&e!=196617&&e!=131137&&e!=37&&e!=39&&e!=38&&e!=40)return N;var k;switch(e){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 117:case 65657:case 116:case 121:case 123:N.System=!0;break;case 45:var L;if(r===t.EditMode.FixedInsert)L=!1;else if(r===t.EditMode.FixedOverwrite)L=!0;else{L=!i;if(this.EditStatusChangedEvent!=""&&this.EditStatusChangedEvent!=null){var A=new Object;A.Name=this.EditStatusChangedEvent,A.Args=null,A.Type="EditStatusChanged",N.EventInfo=new Array,N.EventInfo[0]=A}}N.Overwrite=L;break;case 13:d&&y?(this.keypressResponse=!0,this.keyupResponse=!0,N.System=!0):d&&!y?(N.System=!1,N.IsDoPostBack=!0):(this.keypressResponse=!0,this.keyupResponse=!1,N.System=!0);break;case 131085:d&&(this.systemEdit=!0,this.keypressResponse=!0,this.keyupResponse=!0,N.System=!0);break;case 9:case 65545:d&&g&&!u?(this.keypressResponse=!0,N.InputTab=!0):(N.System=!0,C=new Object,this.Owner.KeyExitEvent!=""&&this.Owner.KeyExitEvent!=null&&(C.Name=this.Owner.KeyExitEvent,C.Args={Key:e==9?t.ExitKeys.Tab:t.ExitKeys.ShiftTab},C.Type="KeyExit"),N.EventInfo=new Array,N.EventInfo[0]=C,d&&(N.SelectionStart=m.GetLength(),N.SelectionEnd=m.GetLength()));break;case 131081:C=this.MoveControl(this.control.InputElement,!0,!1,"NextControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0);break;case 196617:C=this.MoveControl(this.control.InputElement,!1,!1,"PreviousControl"),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0);break;case 8:case 65544:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(e,s,o),N.DelInclude=!0,N.SerialDel=this.IsSerialDel,N.System=!0;break;case 46:this.systemEdit=!0,this.keyupResponse=!0,this.DelOperation(e,s,o),N.DelInclude=!0,N.SerialDel=this.IsSerialDel,N.System=!0;break;case 131080:case 196616:this.isMulSelected?(this.keyupResponse=!0,this.ctrlBackspace=!0):(this.systemEdit=!0,this.keyupResponse=!0,N.System=!0),this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0;break;case 131118:this.keyupResponse=!0,N.System=!0,this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0,N.KeyCode=39,this.ctrlDelete=!0;break;case 131139:case 131117:if(!v){var O;this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?this.Copy(m,s,o):N.System=!0}else N.System=!1;break;case 65581:case 131158:this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?N=this.TextBoxPaste(s,o,m,h,g,y,a,f,l,c,d):N.System=!0;break;case 131160:v?N.System=!1:(this.Owner===undefined?O=this.control:O=this.Owner,O._isSupportClipBoard()?N=this.Cut(m,s,o):N.System=!0);break;case 65582:s!=o?N=this.Cut(m,s,o):(this.systemEdit=!0,this.keyupResponse=!0,N.KeyCode=8),this.DelOperation(e,s,o),N.SerialDel=this.IsSerialDel,N.DelInclude=!0;break;case 131137:N=this.TextBoxSelectAll(m);break;case 131162:N=this.TextBoxUndo(m,b,w,E,S,s,o);break;case 65573:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65575:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 65574:d?(this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0):(o>0&&(N.SelectionEnd=o-1),N.SetSelection=!0);break;case 65576:d?(this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0):(o<m.GetLength()&&(N.SelectionEnd=o+1),N.SetSelection=!0);break;case 65569:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65570:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 196645:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 196647:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 65572:case 196644:this.ForwardSelection="Left",N.System=!0,this.keyupResponse=!0;break;case 65571:case 196643:this.ForwardSelection="Right",N.System=!0,this.keyupResponse=!0;break;case 37:case 131109:k=!1,this.IsKeyDown?k=!0:(this.IsKeyDown=!0,this.CurStart=s,this.CurEnd=o);if(k&&this.CurStart===0&&this.CurEnd==0&&(p===t.ExitOnLeftRightKey.Both||p===t.ExitOnLeftRightKey.Left)){var M=e===37?"Left":"CtrlLeft";C=this.MoveControl(this.control.InputElement,!1,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),this.IsKeyDown=!1;break}this.CurStart-=1,this.CurEnd=this.CurStart;if(s!==0||o!==0||p!==t.ExitOnLeftRightKey.Both&&p!==t.ExitOnLeftRightKey.Left)u||(this.keyupResponse=!0),N.System=!0;else{var M=e===37?"Left":"CtrlLeft";C=this.MoveControl(this.control.InputElement,!1,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0)}break;case 39:case 131111:k=!1,this.IsKeyDown?k=!0:(this.IsKeyDown=!0,this.CurStart=s,this.CurEnd=o);if(k&&this.CurStart===m.GetLength()&&this.CurEnd===m.GetLength()&&(p===t.ExitOnLeftRightKey.Both||p===t.ExitOnLeftRightKey.Right)){var M=e==39?"Right":"CtrlRight";C=this.MoveControl(this.control.InputElement,!0,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0),this.IsKeyDown=!1;break}this.CurStart+=1,this.CurEnd=this.CurStart;if(s!==m.GetLength()||o!==m.GetLength()||p!==t.ExitOnLeftRightKey.Both&&p!==t.ExitOnLeftRightKey.Right)u||(this.keyupResponse=!0),N.System=!0;else{var M=e==39?"Right":"CtrlRight";C=this.MoveControl(this.control.InputElement,!0,!0,M),C!=null&&(N.EventInfo=new Array,N.EventInfo[0]=C.EventInfo,N.FocusType=C.FocusType,N.FocusExit=!0)}break;case 33:case 131105:this.keyupResponse=!0,d?N.System=!0:N.System=!1;break;case 34:case 131106:this.keyupResponse=!0,d?N.System=!0:N.System=!1;break;case 38:u||(this.keyupResponse=!0),this.Owner.GetMultiLine()?N.System=!0:N.System=!1;break;case 40:u||(this.keyupResponse=!0),this.Owner.GetMultiLine()?N.System=!0:N.System=!1;break;case 131108:case 36:this.keyupResponse=!0,N.System=!0;break;case 131107:case 35:this.keyupResponse=!0,N.System=!0;break;case 131112:case 131110:this.keyupResponse=!0,N.System=!0;break;case 27:this.control.Clear();break;case 393266:case 393267:case 393268:case 393269:case 393271:case 393272:case 393273:case 393264:case 393403:case 393285:case 393442:case 393293:case 393402:this.keypressResponse=!0,N.System=!0;break;default:}if(e!==undefined&&e!==null){if(e>=48&&e<=57||e>=65&&e<=90||e>=96&&e<=105||e==229||e==0||e==231)return this.keypressResponse=!0,N==null&&(N={}),N.System=!0,N.inputChar=!0,N;if(e==32||e==106||e==107||e==109||e==173&&t.Utility.IsFireFox4OrLater()||e==110||e==111||e==219||e==220||e==221||e==222||e>=186&&e<=192||e==226||e==231)return this.keypressResponse=!0,N.System=!0,N;if(!t.Utility.IsIE()&&(e===61||e===59))return this.keypressResponse=!0,N.System=!0,N;if(T.shiftKey)var _=e-65536;if(_>=48&&_<=57||_>=65&&_<=90||_>=96&&_<=105||_==229)return this.keypressResponse=!0,N.System=!0,N;if(_==32||_==106||_==107||_==109||e==173&&t.Utility.IsFireFox4OrLater()||_==110||_==111||_==219||_==220||_==221||_==222||_>=186&&_<=192||_==226||_==231)return this.keypressResponse=!0,N.System=!0,N;if(!t.Utility.IsIE()&&(_==61||_==59))return this.keypressResponse=!0,N.System=!0,N}return N},r.prototype.TextBoxKeyPress=function(e,r,i,s,o,u,a,f,l,c,h){if(this.keypressResponse==1){this.keypressResponse=!1,this.isInputValid=!0;var p=new Object,d=new Object,v="\r\n";if(!t.Utility.IsIE()||parseInt(n.browser.version)>=9)v="\n";var m="";if(i=="	")m=i;else if(i=="\r"||i=="\n"){if(!l)return p.SystemEdit=!0,p;m=v}else if(i.GetLength()==1)m=this.Filter.Check(i);else{var g=this.Filter.CheckText(i);m=g.CheckedText,this.isInputValid=g.IsInputValid}if(e==r){if(o!=0){var y=o-this.GetLength(s,u);if(m==v)y<v.GetLength()&&o!=0&&(m="");else if(!f||f&&e==s.GetLength())o>this.GetLength(s,u)?m=this.MaxLengthCheck(m,y,u):m="";else if(f){var b=s.Substring(0,e),w=s.Substring(e,s.GetLength()),E=w.IndexOf(v);E!=-1&&(b+=w.Substring(E,w.GetLength())),y=o-this.GetLength(b,u),m=this.MaxLengthCheck(m,y,u)}}}else{var S=s.Substring(Math.min(e,r),Math.max(e,r));if(o!=0){var y=o-this.GetLength(s,u)+this.GetLength(S,u);m==v?y<v.GetLength()&&(m=""):m=this.MaxLengthCheck(m,y,u)}}if(c!=0&&l)if(c>=this.GetLinesCount(s,h)){var x=s.Substring(0,e),T=s.Substring(r,s.GetLength());if(this.PasswordMode){x=this.GetPasswordText(x,this.PasswordChar,l),T=this.GetPasswordText(T,this.PasswordChar,l);var N=this.GetPasswordText(m,this.PasswordChar,l);N=this.MaxLineCheck(x,T,N,c,h),m=m.Substring(0,N.GetLength())}else m=this.MaxLineCheck(x,T,m,c,h)}else m="";i!=""&&m==""&&(this.isInputValid=!1);var C=s;if(!f||m==v||e!=r){if(e>r){var k=e;e=r,r=k}e!=r&&(p.DelInclude=!0,this.IsDelInclude=!0),m!=""&&(C=s.Substring(0,e)+m+s.Substring(r,s.GetLength()))}else if(m!="")if(e==s.GetLength())C=s+m;else if(e+v.GetLength()<=s.GetLength()&&s.Substring(e,e+v.GetLength())==v)C=s.Substring(0,e)+m+s.Substring(e,s.GetLength());else{var L;if(o==0||!u)L=s.Substring(e,e+m.GetLength());else{var A=m.GetLength(),O=s.Substring(e,e+A),M=this.GetLength(O,u),_=this.GetLength(m,u);while(_>M&&A<=s.GetLength())A+=1,O=s.Substring(e,e+A),M=this.GetLength(O,u);L=s.Substring(e,e+A)}var E=L.IndexOf(v);E!=-1?C=s.Substring(0,e)+m+s.Substring(e+E,s.GetLength()):C=s.Substring(0,e)+m+s.Substring(e+L.GetLength(),s.GetLength())}p.Text=C,p.SetSelection=!0;if(this.isInputValid!=0||m.GetLength()>0)p.SelectionStart=e+m.GetLength(),p.SelectionEnd=p.SelectionStart;p.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var g=new Object;g.Name=this.control.InvalidInputEvent,g.Args=i,g.Type="invalidInput",p.EventInfo[0]=g}if(p.Text!=null&&a&&o!=0){var D=this.GetLength(p.Text.Substring(0,p.SelectionStart),u);if(D==o&&m!=""){var g=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");g!=null&&(p.EventInfo[1]=g.EventInfo,p.FocusType=g.FocusType,p.FocusExit=!0,p.SetSelection=!1)}}return p}return!1},r.prototype.TextBoxKeyUp=function(e,n,r,i,s){var o=new Object;this.IsKeyDown=!1,o.SelectionStart=t.Utility.GetSelectionStartPosition(e),o.SelectionEnd=o.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),this.systemEdit==1&&(this.systemEdit=!1,o.SystemEdit=!0);if(this.ctrlDelete||this.ctrlBackspace){var u;this.ctrlDelete?(u=o.SelectionStart,this.ctrlDelete=!1):this.ctrlBackspace&&(u=i,this.ctrlBackspace=!1),o.Text=s.Substring(0,r)+s.Substring(u,s.GetLength()),o.SelectionStart=o.SelectionEnd=r,o.SetSelection=!0}return o},r.prototype.TextBoxMouseDown=function(e,t){return this.isFocusing=!1,new Object},r.prototype.TextBoxMouseUp=function(e,n,r,i,s,o,u,a,f){var l=new Object;if(this.isFocusing){this.isFocusing=!1;if(a)return l}if(i==t.MouseButton.Left){if(this.isDblClick&&!t.Utility.GrapeCityTimeout){this.isDblClick=!1,this.isTriClick=!0;if(s){var c=t.Utility.GetSelectionStartPosition(e),h=this.GetLineEnds(c,o);h.start!=null&&(l.SelectionStart=h.start),h.end!=null&&(l.SelectionEnd=h.end)}else l.SelectionStart=0,l.SelectionEnd=o.GetLength()}else t.Utility.GetSelectionText(this.control.InputElement)!=""||!s?(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),l.SelectionEnd=l.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()):t.Utility.GetSelectionText(this.control.InputElement)==""?(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),l.SelectionEnd=l.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()):(l.SelectionStart=t.Utility.GetSelectionStartPosition(e),document.selection&&f.y<document.selection.createRange().offsetTop&&(l.SelectionStart-=2),l.SelectionEnd=l.SelectionStart);if(!t.Utility.IsIE()&&t.Utility.FuncKeysPressed.Ctrl)if(s){var c=t.Utility.GetSelectionStartPosition(e),h=this.GetLineEnds(c,o);h.start!=null&&(l.SelectionStart=h.start),h.end!=null&&(l.SelectionEnd=h.end)}else l.SelectionStart=0,l.SelectionEnd=o.GetLength();l.SelectionStart!=l.SelectionEnd&&(l.SetSelection=!0)}return l},r.prototype.GetLineEnds=function(e,r){var i=r,s=0,o="\r\n";if(!t.Utility.IsIE()||parseInt(n.browser.version)>=9)o="\n";var u=i.IndexOf(o),a=new Object;while(u!=-1){if(e>=s&&e<s+u+o.GetLength())return a.start=s,a.end=s+u,a;s=s+u+o.GetLength(),i=i.Substring(u+o.GetLength(),i.GetLength()),u=i.IndexOf(o)}return a.start=s,a.end=r.GetLength(),a},r.prototype.ShowContextMenu=function(e,n){var r=new Object;return r.SelectionStart=t.Utility.GetSelectionStartPosition(e),r.SelectionEnd=r.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),r},r.prototype.TextBoxDoubleClick=function(e,n,r){this.isDblClick=!0,t.Utility.GrapeCityTimeout=!1,window.setTimeout(function(){t.Utility.GrapeCityTimeout=!0},500);var i=new Object;return i.SelectionStart=t.Utility.GetSelectionStartPosition(e),i.SelectionEnd=i.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength(),i},r.prototype.SelectStart=function(e,n,r){this.isTriClick&&(this.isTriClick=!1);var i=new Object;return i.SelectionStart=t.Utility.GetSelectionStartPosition(e),i.SelectionEnd=i.SelectionStart,i},r.prototype.Copy=function(e,n,r){if(n!=r){if(n>r){var i=n;n=r,r=i}var s=e.Substring(n,r),o=!0;this.Owner&&(this.Owner.MultiLine===!1&&(s=t.BaseUIProcess.UpdateCrLfString(s,this.Owner.AcceptsCrLf)),o=this.Owner.UseClipboard),t.Utility.IsIE()?t.Utility.SetCopy(s,o):t.Utility.SetCopy(s,!1)}},r.prototype.TextBoxPaste=function(e,n,r,i,s,o,u,a,f,l,c,h,p){this.isInputValid=!0;var d=new Object,v=this.Owner?this.Owner.UseClipboard:!0;t.Utility.IsIE()||(v=!1);var m=h==null?t.Utility.GetPasteData(v):h;t.Utility.chrome&&(m=m.replace(/\r\n/g,"\n")),!p&&this.Owner&&this.Owner.MultiLine===!1&&(m=t.BaseUIProcess.UpdateCrLfString(m,this.Owner.AcceptsCrLf)),t.Utility.IsIE9OrLater()&&this.Owner&&this.Owner.MultiLine===!0&&(m=t.BaseUIProcess.FilterReturnChar(m));if(m==null)return d;this.FireClientEvent("OnBeforePaste");var g=this.FormatCheck(m,s,o),y=g,b;if(u!=0){var w=this.GetLength(r.Substring(Math.min(e,n),Math.max(e,n)),a);b=u-this.GetLength(r,a)+w,y=this.MaxLengthCheck(g,b,a)}if(f!=0&&c)if(f>=this.GetLinesCount(r,l)){var E=r.Substring(0,e),S=r.Substring(n,r.GetLength());if(this.PasswordMode){E=this.GetPasswordText(E,this.PasswordChar,c),S=this.GetPasswordText(S,this.PasswordChar,c);var x=this.GetPasswordText(y,this.PasswordChar,c);x=this.MaxLineCheck(E,S,x,f,l),y=y.Substring(0,x.GetLength())}else y=this.MaxLineCheck(E,S,y,f,l)}else y="";var T=Math.min(e,n),N=Math.max(e,n);if(y!=""||p===!0)d.Text=r.Substring(0,T)+y+r.Substring(N,r.GetLength()),d.SelectionStart=T+y.GetLength(),d.SelectionEnd=d.SelectionStart;d.SetSelection=!0,e!=n&&(d.DelInclude=!0,this.IsDelInclude=!0),d.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var C=new Object;C.Name=this.control.InvalidInputEvent,C.Args=m,C.Type="invalidInput",d.EventInfo[0]=C}if(d.Text!=null)var k=this.GetLength(d.Text.Substring(0,d.SelectionStart),a);else var k=0;if(u!=0&&k==u&&i&&y!=""){var C=this.MoveControl(this.control.InputElement,!0,!1,"CharInput");C!=null&&(d.EventInfo[1]=C.EventInfo,d.FocusType=C.FocusType,d.FocusExit=!0,d.SetSelection=!1)}return this.FireClientEvent("OnPaste"),d},r.prototype.Cut=function(e,t,n){var r=new Object;return t!=n&&this.FireClientEvent("OnBeforeCut"),this.Copy(e,t,n),t<n?(r.SelectionStart=t,r.Text=e.Substring(0,t)+e.Substring(n,e.GetLength())):(r.SelectionStart=n,r.Text=e.Substring(0,n)+e.Substring(t,e.GetLength())),r.SelectionEnd=r.SelectionStart,r.SetSelection=!0,r.Text!=e&&(r.DelInclude=!0,this.IsDelInclude=!0),t!=n&&this.FireClientEvent("OnCut"),r},r.prototype.TextBoxUndo=function(e,t,n,r,i,s,o){var u=new Object;return this.IsDelInclude?e!=t&&(u.Text=t,u.SelectionStart=s,u.SelectionEnd=o,u.SetSelection=!0,u.DelInclude=!0,u.Undo=!0):e!=n&&(u.Text=n,u.SelectionStart=r,u.SelectionEnd=i,u.SetSelection=!0,u.Undo=!0),this.StartPos=null,this.LastKey=null,u},r.prototype.Delete=function(e,t,n,r){var i=new Object;return n<r?(i.SelectionStart=n,i.Text=t.Substring(0,n)+t.Substring(r,t.GetLength())):(i.SelectionStart=r,i.Text=t.Substring(0,r)+t.Substring(n,t.GetLength())),i.SelectionEnd=i.SelectionStart,i.SetSelection=!0,i.Text!=t&&(i.DelInclude=!0,this.IsDelInclude=!0),i},r.prototype.TextBoxSelectAll=function(e){var t=new Object;return t.SelectionStart=0,t.SelectionEnd=e.GetLength(),t.SetSelection=!0,t},r.prototype.DragDrop=function(e,t,n,r,i,s,o,u,a,f){this.isInputValid=!0;var l=new Object,c=this.FormatCheck(e),h=c,p=0;i!=0&&(p=i-this.GetLength(f,s),h=this.MaxLengthCheck(c,p,s));if(o!=0&&a)if(o>=this.GetLinesCount(f,u)){var d=f.Substring(0,n),v=f.Substring(r,f.GetLength());if(this.PasswordMode){d=this.GetPasswordText(d,this.PasswordChar,a),v=this.GetPasswordText(v,this.PasswordChar,a);var m=this.GetPasswordText(h,this.PasswordChar,a);m=this.MaxLineCheck(d,v,m,o,u),h=m.Substring(0,h.GetLength())}else h=this.MaxLineCheck(d,v,h,o,u)}else h="";l.DropText=h,l.EventInfo=new Array;if(!this.isInputValid){this.isInputValid=!0;var g=new Object;g.Name=this.control.InvalidInputEvent,g.Args=c,g.Type="invalidInput",l.EventInfo[0]=g}if(this.GetLength(c,s)>=p&&i!=0&&t&&h!=""){var g=new Object;this.Owner.KeyExitEvent!=""&&this.Owner.KeyExitEvent!=null&&(g.Name=this.Owner.KeyExitEvent,g.Args=new Object,g.Args.Key=9,g.Type="KeyExit"),l.EventInfo[1]=g}return l},r.prototype.TextBoxFocus=function(e,n,r,i,s,o){var u=new Object;this.isFocusing=!0,e===t.FocusType.Left?(u.SelectionStart=0,u.SelectionEnd=0):e===t.FocusType.Right&&(u.SelectionStart=r.GetLength(),u.SelectionEnd=r.GetLength());if(!s){if(e===t.FocusType.Click||e==t.FocusType.DragDrop)u.SelectionStart=t.Utility.GetSelectionStartPosition(n),u.SelectionEnd=u.SelectionStart+t.Utility.GetSelectionText(this.control.InputElement).GetLength()}else o||(u.SelectionStart=0,u.SelectionEnd=r.GetLength());if(e!==t.FocusType.Click||s)u.SetSelection=!0;return u},r.prototype.MaxLengthCheck=function(e,t,n){var r="",i=0;if(e=="\r\n")t>=2&&(r=e);else if(n)for(var s=0;s<e.GetLength();s++){var o=e.Substring(s,s+1);o.length>=2?i+=2*o.length:this.Filter.IsFullWidth(o)?i+=2:i++;if(!(i<=t))break;r+=e.Substring(s,s+1)}else e.GetLength()<=t?r=e:r=e.Substring(0,t);var u=r.GetLength();return u!=0&&r.Substring(u-1,u)=="\r"&&(r=r.Substring(0,u-1)),r!=e&&(this.isInputValid=!1),r},r.prototype.MaxLineCheck=function(e,t,n,r,i){var s="",o=e+n+t,u=this.GetLinesCount(o,i);if(u<=r)s=n;else{var a=0,f=n.GetLength();do{var l=Math.floor((a+f)/2),c=n.Substring(0,l);o=e+c+t,u=this.GetLinesCount(o,i);if(u>r)f=l;else if(u<r)a=l;else if(u==r&&f>a+1)a=l;else if(u==r&&f==a+1)break}while(a<f);s=n.Substring(0,a)}return s!=n&&(this.isInputValid=!1),s},r.prototype.GetLinesCount=function(e,t){var r=1,i=t;if(e=="")return r;var s=this._testTextArea;if(this._testTextArea===undefined||this._testTextArea===null)this._testTextArea=n("<textarea/>"),this._testTextArea.css("visibility","hidden"),this._testTextArea.css("position","absolute"),this._testTextArea.css("left","-100000000px"),this._testTextArea.css("top","-100000000px"),this._testTextArea.attr("rows",1),this._testTextArea.appendTo(n(document.body)),s=this._testTextArea,i=!1;if(!i){var o=e,u=o,a=o.IndexOf("\r\n");r=1;while(a!=-1)u=u.replace("\r\n",""),r+=1,o=o.Substring(a+2,o.GetLength()),a=o.IndexOf("\r\n");o=u,a=o.IndexOf("\r");while(a!=-1)u=u.replace("\r",""),r+=1,o=o.Substring(a+1,o.GetLength()),a=o.IndexOf("\r");o=u,a=o.IndexOf("\n");while(a!=-1)u=u.replace("\n",""),r+=1,o=o.Substring(a+1,o.GetLength()),a=o.IndexOf("\n");return r}var f=e;f=f.replace(/\r\n/g,"\r"),f=f.replace(/\n/g,"\r");var a=f.IndexOf("\r");if(a!=-1){r=0;var l=f.Substring(0,a);return r+=this.GetLinesCount(l,t),f=f.Substring(a+1,f.GetLength()),r+=this.GetLinesCount(f,t),r}var c=n(this.control.InputElement);s.css("fontSize",c.css("fontSize")),s.css("fontFamily",c.css("fontFamily")),s.css("width",c.css("width")),s.css("borderWidth",c.css("borderWidth")),s.css("padding",c.css("padding")),s.css("wordWrap",c.css("wordWrap")),s.css("overflowY",c.css("overflowY"));if(s!=null){s.val(e),s=s.get(0);while(s.scrollHeight-s.clientHeight>1)s.rows++;return s.scrollTop=0,r=s.rows,s.rows>1&&(s.rows=1),r}},r.prototype.FormatCheck=function(e,t,n){this.Owner&&!this.Owner.MultiLine&&e&&(typeof e!="string"&&(e=e.toString()),e=e.replace(/[\r\n]/g,""));var r=this.Filter.CheckText(e),i=r.CheckedText;return this.isInputValid=r.IsInputValid,i},r.prototype.ListValidateCheck=function(e){var t=this.Filter.autoConvert;this.Filter.autoConvert=!1;var n=this.Filter.CheckText(e);return this.Filter.autoConvert=t,n.IsInputValid},r.prototype.GetLength=function(e,t){var n=0;if(t)for(var r=0;r<e.GetLength();r++){var i=e.Substring(r,r+1);i.length>=2?n+=2*i.length:this.Filter.IsFullWidth(i)?n+=2:n++}else n=e.GetLength();return n},r.prototype.TextBoxProcessBackSpace=function(e,t,n,r){var i=new Object;return this.systemEdit=!0,this.keyupResponse=!0,i.System=!0,i},r.prototype.GetRightWordPosition=function(e,t){if(e<t.GetLength()){var n=e,r=t.Substring(e,e+1),i=r;while(!(this.Filter.IsFormatSpace(i)&&!this.Filter.IsFormatSpace(r)||(r=="\r"||i=="\n")&&e!=n||(r=="	"||i=="	")&&e!=n)){n+=1;if(!(n<t.GetLength()))break;i=r,r=t.Substring(n,n+1)}return n}return e},r.prototype.DelOperation=function(e,t,n){this.IsDelInclude=!0;var r=Math.abs(n-t);switch(e){case 8:var i=!1;this.IsKeyDown?i=!0:(this.IsKeyDown=!0,this.CurStart=t-1);if(i){this.IsSerialDel=!0;break}this.CurStart==this.StartPos&&(this.IsSerialDel=!0,this.CurStart-=1);if(t!=n){if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}}else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t-1;break}t-=1,this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 131080:case 196616:if(t==n)t-=1;else if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t-1;break}this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 65544:t!=n&&t<this.StartPos&&(this.StartPos-=r),this.StartPos==t?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 65582:if(t==n)t-=1;else if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}this.StartPos==t||this.StartPos==n?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t-1;break;case 46:var s=null;this.LastKey==8&&(s=t,t-=1);if(this.StartPos==t||this.StartPos!=null&&Math.abs(this.StartPos-t)==1||this.StartPos==n)this.IsSerialDel=!0;else{this.IsSerialDel=!1;if(s!=null){this.StartPos=s;break}}this.StartPos=t;break;case 131118:if(t!=n)if(t<this.StartPos)this.StartPos-=r;else if(t==this.StartPos){this.IsSerialDel=!0,this.StartPos=t;break}t-=1,this.StartPos==t||t-this.StartPos==1?this.IsSerialDel=!0:this.IsSerialDel=!1,this.StartPos=t}this.LastKey=e},r.prototype.GetPasswordText=function(e,t,n){var r="";for(var i=0;i<e.GetLength();i++){var s=e.Substring(i,i+1);s!="\r"&&s!="\n"?r+=t:n&&(r+=s)}return r},r}(t.BaseUIProcess);t.GcTextBoxUIProcess=c;var h=function(){function e(e){this._hightlightIndex=-1,this._dataList=[],this._isDeleteItem=!1,this._isFocusOnList=!1,this._isMouseOnList=!1,this._owner=e;var t=5;this._maxItems=t,this._firstItemShowing=0,this._lastItemShowing=t-1,this._refreshElement(),this._createDropdown()}return e.prototype._refreshElement=function(){this._controlContainer=this._owner.GetContainer(),this._inputElement=this._owner.GetJQueryInputElement(),this._maxItems=this._owner.GetMaxHistoryCount(),this._inputElement&&this._inputElement.attr("autocomplete","off")},e.prototype._createDropdown=function(){var e=n("<div>");e.css({position:"absolute",zIndex:"999999",display:"none",backgroundColor:"white",border:"solid 1px black",overflowX:"hidden",overflowY:"auto"});var r=this;e.bind("focus",function(){r._isFocusOnList=!0,e.blur(),r._owner.SetInnerFocus(t.FocusType.ContextMenu)}),e.bind("mouseover",function(){r._isMouseOnList=!0}),e.bind("mouseout",function(){r._isMouseOnList=!1}),e.bind("contextmenu",function(e){e.preventDefault()}),this._dropDownElement=e},e.prototype.GetIsDeleteItem=function(){return this._isDeleteItem},e.prototype.SetIsDeleteItem=function(e){this._isDeleteItem=e},e.prototype.GetIsFocusOnList=function(){return this._isFocusOnList},e.prototype.SetIsFocusOnList=function(e){this._isFocusOnList=e},e.prototype.GetIsMouseOnList=function(){return this._isMouseOnList},e.prototype.ShowDropdown=function(){this._refreshElement(),this.IsVisible()&&this.HideDropdown(),this._dropDownElement.empty();var e;e=this._addDisplayItems();if(e===0)return;var r=t.Utility.GetElementPosition(this._controlContainer.get(0)).Left,i=t.Utility.GetElementPosition(this._controlContainer.get(0)).Top+this._controlContainer.outerHeight(),s=this._controlContainer.outerWidth(),o="";if(e>this._maxItems){var u=t.Utility.MeasureText("WHQ",this._dropDownElement.get(0).firstChild).Height;o=this._maxItems*(u+2)+"px"}var a="";t.Utility.IsTouchMouseDown==1&&(a=this._owner.GetTouchDropDownScale()+""),s-=2,this._dropDownElement.css("left",r+"px"),this._dropDownElement.css("top",i+"px"),this._dropDownElement.css("width",s+"px"),this._dropDownElement.css("display",""),t.Utility.SetZoomStyle(this._dropDownElement,a),this._dropDownElement.css("height",o),n("body").append(this._dropDownElement);var f=this;this._docClickListerner=function(){f.HideDropdown()},n(document).bind("click",this._docClickListerner)},e.prototype._addDisplayItems=function(){var e=this._inputElement.val(),r=[];for(var i=0;i<this._dataList.length;++i)this._dataList[i].substr(0,e.GetLength())==e&&this._dataList[i].GetLength()>e.GetLength()&&r.push(this._dataList[i]);var s=this,o=r.length>this._maxItems?this._maxItems:r.length;for(i=0;i<o;++i){var u=n("<div>");u.attr("index",i),u.css({fontFamily:t.Utility.GetOSDefaultFontFamily(),fontSize:"10pt",whiteSpace:"nowrap",padding:"1px"}),u.bind("mouseover",function(e){var t=e.target||e.srcElement;s.HighlightItem(parseInt(t.getAttribute("index").toString()))}),u.bind("click",function(){s._isFocusOnList=!1,s.SetValue(),s.HideDropdown()}),u.html(t.Utility.EncodingToHTML(r[i])),this._dropDownElement.append(u)}return o},e.prototype.HideDropdown=function(){this.IsVisible()&&(this._dropDownElement.remove(),this._dropDownElement.css("display","none"),n("document").unbind("click",this._docClickListerner),this._dropDownElement.empty(),this._isMouseOnList=!1,this._hightlightIndex=-1)},e.prototype.SetDataList=function(e){if(e===null||e===undefined)e=[];this._dataList=e},e.prototype.IsDataListEmpty=function(){return this._dataList.length===0},e.prototype.HighlightItem=function(e){this.SetHighlighItem(e)},e.prototype.SetHighlighItem=function(e){this._hightlightIndex!==-1&&(this._dropDownElement.get(0).childNodes[this._hightlightIndex].style.backgroundColor="",this._dropDownElement.get(0).childNodes[this._hightlightIndex].style.color=""),this._hightlightIndex=e,this._hightlightIndex!==-1&&(this._dropDownElement.get(0).childNodes[this._hightlightIndex].style.color="white")},e.prototype.Highlight=function(e){var t=!1;e>0&&this._hightlightIndex==this._dropDownElement.get(0).childNodes.length-1?(this.SetHighlighItem(-1),t=!0):e<0&&this._hightlightIndex==0&&(this.SetHighlighItem(-1),t=!0);if(this._hightlightIndex===-1)t==0&&(e>0&&this.SetHighlighItem(0),e<0&&this.SetHighlighItem(this._dropDownElement.get(0).childNodes.length-1));else{var n;e>1&&this._firstItemShowing+this._maxItems-1!==this._hightlightIndex&&(e=this._firstItemShowing+this._maxItems-this._hightlightIndex),e<-1&&this._firstItemShowing!=this._hightlightIndex&&(e=this._firstItemShowing-this._hightlightIndex),e>0?n=this._hightlightIndex+e>=this._dropDownElement.get(0).childNodes.length?this._dropDownElement.get(0).childNodes.length-1:this._hightlightIndex+e:n=this._hightlightIndex+e<0?0:this._hightlightIndex+e,e>1&&(n-=1),this.SetHighlighItem(n)}},e.prototype.SetValue=function(){var e=this._dropDownElement.get(0).childNodes[this._hightlightIndex].innerHTML;e=t.Utility.DecodingFromHTML(e),this._owner.InternalSetText(e,!0),this._owner.SetInnerFocus(t.FocusType.ContextMenu);var n=this._inputElement.val().GetLength(),r=Math.abs(this._owner.SelectionEnd-this._owner.SelectionStart);r!=0?this._owner.InternalSetSelection(0,n):this._owner.InternalSetSelection(n,n)},e.prototype.ScrollCheck=function(){if(this._hightlightIndex!==-1){this._hightlightIndex>this._lastItemShowing&&(this._firstItemShowing=this._hightlightIndex-(this._maxItems-1),this._lastItemShowing=this._hightlightIndex),this._hightlightIndex<this._firstItemShowing&&(this._firstItemShowing=this._hightlightIndex,this._lastItemShowing=this._hightlightIndex+(this._maxItems-1));var e=t.Utility.MeasureText("WQH",this._dropDownElement.get(0).firstChild).Height+2;this._dropDownElement.get(0).scrollTop=this._firstItemShowing*e}},e.prototype.KeyDown=function(e){var n=e.keyCode,r={Shift:!1,Ctrl:!1,Alt:!1};e.shiftKey&&(r.Shift=!0),e.ctrlKey&&(r.Ctrl=!0),e.altKey&&(r.Alt=!0);var i=t.Key;switch(n){case i.Enter:if(this._hightlightIndex!==-1)return this.SetValue(),this.HideDropdown(),e.stopPropagation(),e.preventDefault(),!1;break;case i.Delete:if(this._hightlightIndex!==-1){var s=this._dropDownElement.get(0).childNodes[this._hightlightIndex].innerHTML;return this.HideDropdown(),this._owner.DeleteItem(s),this._isDeleteItem=!0,this._inputElement.focus(),this.IsVisible()||this.ShowDropdown(),e.stopPropagation(),e.preventDefault(),!1}break;case i.Escape:this.HideDropdown(),e.stopPropagation(),e.preventDefault();break;case i.Up:if(r.Alt)break;return this.IsVisible()?(this._hightlightIndex===-1&&this.ShowDropdown(),this.Highlight(-1),this.ScrollCheck()):this.ShowDropdown(),!1;case i.PageUp:return this.IsVisible()?(this._hightlightIndex===-1&&this.ShowDropdown(),this.Highlight(-1*this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1;case i.Tab:this.HideDropdown();break;case i.Down:if(r.Alt)break;return this.IsVisible()?(this.Highlight(1),this.ScrollCheck()):this.ShowDropdown(),!1;case i.PageDown:return this.IsVisible()?(this.Highlight(this._maxItems),this.ScrollCheck()):this.ShowDropdown(),!1}},e.prototype.KeyUp=function(e,n){if(n===!0){this.ShowDropdown();return}var r=e.keyCode,i=t.Key;switch(r){case i.Enter:break;case i.Escape:this.HideDropdown();break;case i.Up:case i.Down:break;default:this.ShowDropdown()}},e.prototype.IsVisible=function(){return this._dropDownElement.css("display")===""},e}();t.AutoComplete=h})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));