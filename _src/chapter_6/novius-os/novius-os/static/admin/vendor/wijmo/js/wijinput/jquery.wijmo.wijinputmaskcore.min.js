var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){"use strict";var t=jQuery,n=function(){function t(e,t,n){this.filterLabel=e,this._include=n,this._owner=t}return t.prototype.Check=function(e,t){var n={};n.success=!1,n.strValue="",n.index=t;var r=e.Substring(t,t+1),i=this.IsValid(r);if(i)return e=e.Substring(t,t+1),t++,n.strValue=e,n.index=t,n;if(this._owner.GetAutoConvert()&&(r.length===1||r.length===3)){n=this.Convert(e,t);if(n.success)return n}return n},t.prototype.IsValid=function(t){return t.length===2&&(t.charCodeAt(1)===65438||t.charCodeAt(1)===65439)&&!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?this.IsValidTwoByte(t):t.length>1?this.IsValidMoreByte(t):this.IsValidTwoByte(t)},t.prototype.IsValidTwoByte=function(e){return!1},t.prototype.IsValidMoreByte=function(e){return!1},t.prototype.Convert=function(t,n){var r={};r.success=!0,r.strValue="",r.index=n;var i=t.Substring(n,n+1),s,o=e.CharProcess.CharEx;if(o.IsAlphabet(i)){var u=o.IsLower(i)?i.toUpperCase():i.toLowerCase();return s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(u=o.IsFullWidth(u)?o.ToHalfWidth(u):o.ToFullWidth(u).text,s=this.IsValid(u),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=u,r):(r.success=!1,r)))}if(o.IsHiragana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}i=o.ToKatakana(i),s=this.IsValid(i);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=i,r;if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var l=o.ToHalfWidthEx(i);s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r;if(o.IsLowerKana(l)){l=o.ToUpperKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}else if(o.HasLowerKana(l)){l=o.ToLowerKana(l),s=this.IsValid(l);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=l,r}return r.success=!1,r}if(o.IsKatakana(i)){if(o.IsLowerKana(i)){var a=o.ToUpperKana(i);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(i)){var f=o.ToLowerKana(i);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}var u=i,c=!1;if(o.IsFullWidth(i)){var h=o.ToHalfWidthEx(i);if(h.GetLength()>0){s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}if(o.IsLowerKana(h)){h=o.ToUpperKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}else if(o.HasLowerKana(h)){h=o.ToLowerKana(h),s=this.IsValid(h);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=h,r}}else{if(n==null){u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=u,r}else{if(n+1<t.GetLength()){var p=o.ToFullWidth(t.Substring(n,n+2));u=p.text,c=p.processedAll}else u=o.ToFullWidth(i).text;if(!o.IsKatakana(u))return r;s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,r}if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}u=o.ToHiragana(u),s=this.IsValid(u);if(s&&this._include||!s&&!this._include)return n++,c&&n++,r.index=n,r.strValue=u,u==="\u3094"&&(c?r.strValue="\u3046\u309b":(n--,r.index=n,r.strValue="",r.success=!1)),r;if(o.IsLowerKana(u)){var a=o.ToUpperKana(u);s=this.IsValid(a);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=a,r}else if(o.HasLowerKana(u)){var f=o.ToLowerKana(u);s=this.IsValid(f);if(s&&this._include||!s&&!this._include)return n++,r.index=n,r.strValue=f,r}}return i=o.IsFullWidth(i)?o.ToHalfWidth(i):o.ToFullWidth(i).text,s=this.IsValid(i),s&&this._include||!s&&!this._include?(n++,r.index=n,r.strValue=i,r):(r.success=!1,r)},t}();e.CharacterFilter=n;var r=function(t){function n(e,n){t.call(this,"HalfWidthFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)?t==="\r"||t==="\n"?!0:!1:!0},n}(n),i=function(t){function n(e,n){t.call(this,"FullWidthFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),s=function(t){function n(e,n){t.call(this,"HiraganaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsHiragana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),o=function(t){function n(e,n){t.call(this,"ShiftJISFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsShiftJIS(t)},n}(n),u=function(t){function n(e,n){t.call(this,"JISX0208Filter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsJISX0208(t)},n}(n),a=function(t){function n(e,n){t.call(this,"DBCSHiraganaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsUpperKana(t)&&e.CharProcess.CharEx.IsHiragana(t)},n}(n),f=function(t){function n(e,n){t.call(this,"DBCSKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)&&!e.CharProcess.CharEx.IsLowerKana(t)},n}(n),l=function(t){function n(e,n){t.call(this,"SBCSKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)&&!e.CharProcess.CharEx.IsLowerKana(t)},n}(n),c=function(t){function n(e,n){t.call(this,"SurrogateFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsSurrogatePair(t)?!0:t==="\r"||t==="\n"?!0:!1},n.prototype.IsValidMoreByte=function(t){for(var n=0;n<t.length;n++)if(e.CharProcess.CharEx.IsSurrogate(t[n]))return!0;return!1},n}(n),h=function(t){function n(e,n){t.call(this,"HalfWidthKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),p=function(t){function n(e,n){t.call(this,"FullWidthKatakanaFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsKatakana(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),d=function(t){function n(e,n){t.call(this,"HalfWidthSymbolsFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return!e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsSymbol(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),v=function(t){function n(e,n){t.call(this,"FullWidthSymbolsFilter",e,n)}return __extends(n,t),n.prototype.IsValidTwoByte=function(t){return e.CharProcess.CharEx.IsFullWidth(t)&&e.CharProcess.CharEx.IsSymbol(t)?!0:t==="\r"||t==="\n"?!0:!1},n}(n),m=function(e){function t(t,n,r,i){e.call(this,"LimitedFilter",r,i),this._includeChars=t,this._excludeChars=n}return __extends(t,e),t.prototype.IsValidTwoByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},t.prototype.IsValidMoreByte=function(e){return this._includeChars!==""&&this._includeChars.IndexOf(e)>-1||this._excludeChars!==""&&this._excludeChars.IndexOf(e)===-1?!0:e==="\r"||e==="\n"?!0:!1},t}(n),g=function(e){function t(t,n,r,i){e.call(this,"RangeFilter",r,i),this._startChar=t,this._endChar=n}return __extends(t,e),t.prototype.IsValidTwoByte=function(e){return e>=this._startChar&&e<=this._endChar?!0:e==="\r"||e==="\n"?!0:!1},t}(n),y=function(e){function t(t,n){e.call(this,"UnionFilter",t,n),this.filterArray=[]}return __extends(t,e),t.prototype.Add=function(e){if(e==null)return;e.filterLabel==="HiraganaFilter"?this.hiranagaFilter=e:e.filterLabel==="FullWidthKatakanaFilter"&&(this.katakanaFilter=e),this.filterArray.push(e)},t.prototype.AddRange=function(e){for(var t=0;t<e.length;t++)this.Add(e[t])},t.prototype.IsValidTwoByte=function(e){if(this.filterArray.length===0)return e==="\r"||e==="\n"?!0:!1;var t=!1,n=!1;for(var r=0;r<this.filterArray.length;r++)this.filterArray[r]._include&&(n=!0);var i=e==="\u30fc";if(i)if(this.hiranagaFilter&&this.katakanaFilter){if(n)return!0}else{if(this.hiranagaFilter)return!0;if(this.katakanaFilter)return!0}for(var r=0;r<this.filterArray.length;r++)if(this.filterArray[r].IsValid(e)){if(!this.filterArray[r]._include)return!1;t=!0}else n||(t=!0);return t?!0:e==="\r"||e==="\n"?!0:!1},t.prototype.IsValidMoreByte=function(e){return this.IsValidTwoByte(e)},t}(n),b=function(){function e(e){this.minLength=-1,this.maxLength=-1,this.text="",this.oldText="",this.fieldLabel=e}return e.prototype.Snap=function(){var e={};return e.text=this.text,e.oldText=this.oldText,e},e.prototype.Revert=function(e){this.text=e.text,this.oldText=e.oldText},e.prototype.GetFieldText=function(){return this.oldText==null?null:this.oldText},e.prototype.GetText=function(){return this.text},e.prototype.SetText=function(e){this.text=e},e.prototype.GetFillingString=function(e){if(!e)return null;var t="";for(var n=0;n<this.minLength;n++)t+=e;return t},e.prototype.GetFieldStatus=function(){return 0},e.prototype.GetTextExcludeLiterals=function(e,t){var n=this.text.GetLength();n<t&&(t=n);var r=this.text.Substring(e,t);return r=r.replace(/[^\d]/g,""),r},e.prototype.SaveOldState=function(){},e.prototype.RollBack=function(){},e.prototype.PerformSpin=function(e,t,n){return 0},e.prototype.Insert=function(e,t,n,r){},e.prototype.Replace=function(e,t,n){},e.prototype.Delete=function(e,t){},e.prototype.SaveUndoState=function(){},e.prototype.Clear=function(){this.text=null},e.prototype.Undo=function(){},e.prototype.SetTextInternal=function(e,t,n,r){},e.prototype.GetLength=function(){return this.text.GetLength()>this.minLength?this.text.GetLength():this.minLength},e}();e.Field=b;var w=function(e){function t(t){e.call(this,"PromptField"),this.text=t,this.minLength=this.text.GetLength(),this.maxLength=this.text.GetLength()}return __extends(t,e),t.prototype.GetFillingString=function(){return this.text},t.prototype.SetText=function(e){var t={};return e===this.promptText?(t.existInvalid=!1,e=e.Substring(this.text.GetLength())):t.existInvalid=!0,t.text=e,t},t.prototype.GetLength=function(){return this.text.GetLength()},t}(b),E=function(t){function r(e){t.call(this,"FilterField"),this._minLength=0,this._maxLength=0,this._filter=new n,this._bitStates=null,this._oldBitState=null,this.undoText="",this.undoTempText="",this._undoBitState=null,this._trueLength=0,this._bitState=null,this._owner=e}return __extends(r,t),r.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},r.prototype.GetAutoConvert=function(){return this._owner.GetAutoConvert()},r.prototype.FilterField=function(e,t,n,r){if(e>t)return!1;if(!n)return!1;this._minLength=e,this._maxLength=t,this._filter=n,this._bitState=r,this._oldBitState=r,this._undoBitState=r,this._trueLength=0;if(this._bitState!=null){var i=0;while(this._bitState[i]!=null)i++;for(var s=i;s>=0;s--)if(this._bitState[s]!=null)this._bitState[s]===!1&&this._trueLength--;else{if(this._bitState[s]!=null)break;this._trueLength--}}return this.Clear(),!0},r.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!=-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!=-1)e=e.replace("@#GCM#@",'"');this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},r.prototype.GetFieldStatus=function(){return this._trueLength>=this._minLength&&this._trueLength>0?2:this._trueLength>0&&this._trueLength<this._minLength?1:0},r.prototype.GetFieldIsFull=function(){if(this._trueLength>=this._minLength&&this._trueLength>0){for(var e=0;e<this._trueLength;e++)if(this._bitState[e]===!1)return!1;return!0}return!1},r.prototype.SetTextInternal=function(t,n,r,i){var s={};s.offset=n,s.text=t,s.existInvalid=!1,s.exception=!1;var o=!1;if(n>this._maxLength||t===""||t.GetLength()===0)return s;var u="",a=0,f=[],l=n;for(var c=0;c<n;c++)f[c]=this._bitState[c];while(a<t.GetLength()){var h=this._filter.Check(t,a),p=h.strValue;a=h.index;if(p===""&&t.Substring(a,a+1)!==this.GetPromptChar()){if(!r&&n+u.GetLength()>=this._minLength&&n+u.GetLength()===this._trueLength+u.GetLength())break;o=!0,a++;break}p!==""?(i&&i!==""&&i.Substring(l,l+1)===e.Utility.MaskValChar?(u+=this.GetPromptChar(),f[l]=!1):p==="\r"||p==="\n"?(u+=this.GetPromptChar(),f[l]=!1):(u+=p,f[l]=!0),l++,p.GetLength()===2&&(f[l]=!0,l++)):(u+=this.GetPromptChar(),a++,f[l]=!1,l++);if(n+u.GetLength()===this._maxLength)break;if(n+u.GetLength()>this._maxLength){u=u.Substring(0,u.GetLength()-1);break}}n+u.GetLength()<this._minLength&&(t=t.Substring(a,t.GetLength()-a),s.existInvalid=o,s.exception=!0);var d=this.text.Substring(0,n)+u+this.text.Substring(n,this.text.GetLength());d.GetLength()>this._maxLength&&(d=d.Substring(0,this._maxLength));if(d.GetLength()>n+u.GetLength())for(var v=1;v<=d.GetLength()-n-u.GetLength();v++)this._bitState[n+v]!=null&&(f[l]=this._bitState[n+v],l++);this._bitState=new Array(l),this._bitState=f,this._trueLength=l;for(var v=l-1;v>=0;v--){if(this._bitState[v]!==!1)break;this._trueLength--}if(d.GetLength()<this._minLength)for(var v=0;v<this._minLength-d.GetLength();v--)d+=this.GetPromptChar();for(var v=d.GetLength();v>this._minLength;v--){if(!(d.Substring(v-1,v)===this.GetPromptChar()&&v>this._trueLength))break;d=d.Substring(0,v-1)}return this.text=d,a===t.GetLength()?t="":t=t.Substring(a,t.GetLength()),n+=u.GetLength(),s.offset=n,s.text=t,s},r.prototype.SaveOldState=function(){this.oldText=this.text,this._oldBitState=this._bitState},r.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoBitState=this._bitState},r.prototype.GetValue=function(){},r.prototype.GetText=function(){return this._text},r.prototype.UpdateState=function(e){},r.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this.oldText;this.text=e,this._bitState=this._oldBitState,this._trueLength=e.GetLength();for(var t=e.GetLength()-1;t>=0;t--){if(this._bitState[t]!=0)break;this._trueLength--}},r.prototype.Undo=function(){if(this.undoTempText===this.text)return!1;var e=this.undoTempText;this.undoTempText=this.text;var t=this._bitState;this.text=e,this._bitState=this._undoBitState,this._trueLength=e.GetLength();if(this._bitState.length===0)this._trueLength=0;else for(var n=e.GetLength()-1;n>=0;n--){if(this._bitState[n]!==!1)break;this._trueLength--}return this._undoBitState=t,!0},r.prototype.Clear=function(){this._trueLength=0;var e="",t=[];if(this._minLength>0){for(var n=0;n<this._minLength;n++)t[n]=!1;this._bitState=new Array(this._minLength),this._bitState=t;if(this.GetPromptChar()!=="")for(var n=0;n<this._minLength;n++)e+=this.GetPromptChar();else for(var n=0;n<this._minLength;n++)e+=" ";this.text=e}else this.text="",this._bitStates=null},r.prototype.Insert=function(e,t,n,r){r||(r=!0);var i={};i.offset=e,i.text=t,i.existInvalid=!1,i.exception=!1;var s=!1;if(e>this._maxLength||t===""||t.GetLength()===0)return i;var o=[],u=e;for(var a=0;a<e;a++)o[a]=this._bitState[a];var f="",l=0;while(l<t.GetLength()){var c=this._filter.Check(t,l),h=c.strValue;l=c.index;if(!(h!==""||!r&&t.CharAt(l)===" ")){if(!n&&e+f.GetLength()>=this._minLength&&e+f.GetLength()>=this._trueLength+f.GetLength())break;s=!0,l++;continue}h===""&&!r&&t.CharAt(l)===" "?(f+=this.GetPromptChar(),o[u]=!1,u++,l++):h==="\r"||h==="\n"?(f+=this.GetPromptChar(),o[u]=!1,u++):(f+=h,o[u]=!0,u++,h.GetLength()===2&&(o[u]=!0,u++));if(e+f.GetLength()===this._maxLength)break;if(e+f.GetLength()>this._maxLength){f=f.Substring(0,f.GetLength()-1);break}}if(f.GetLength()===0)return t=t.Substring(l,t.GetLength()-l),i.existInvalid=s,i.exception=!0,i;var p=this.text.Substring(0,e)+f+this.text.Substring(e,this.text.GetLength());p.GetLength()>this._maxLength&&(p=p.Substring(0,this._maxLength));if(p.GetLength()>e+f.GetLength())for(var d=0;d<p.GetLength()-e-f.GetLength();d++)this._bitState[e+d]!=null?o[u]=this._bitState[e+d]:o[u]=!1,u++;this._bitState=new Array(u),this._bitState=o,this._trueLength=u;for(var d=u-1;d>=0;d--){if(this._bitState[d]!==!1)break;this._trueLength--}if(p.GetLength()<this._minLength)for(var d=0;d<this._minLength-p.GetLength();d--)p+=this.GetPromptChar();for(var d=p.GetLength();d>this._minLength;d--){if(!(p.Substring(d-1,d)===this.GetPromptChar()&&d>this._trueLength))break;p=p.Substring(0,d-1)}return this.text=p,l===t.GetLength()?t="":t=t.Substring(l,t.GetLength()),e+=f.GetLength(),i.offset=e,i.text=t,i},r.prototype.Replace=function(t,n,r,i){var s={};s.offset=t,s.text=r;if(n===0)return s;var o=r.charCodeAt(0),u=[12364,12460,12366,12462,12376,12472];if(e.Utility.ArrayIndexOf(u,o)!==-1&&n===1){var a=this._filter.Check(r,0);a.strValue&&a.strValue.length===2&&(n=2)}return t=this.Delete(t,n),s=this.Insert(t,r,i),s},r.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e+t>this.text.GetLength()&&(t=this.text.GetLength()-e);var n=[],r=e;for(var i=0;i<e;i++)n[i]=this._bitState[i];var s=this.text.Substring(0,e)+this.text.Substring(e+t,this.text.GetLength());if(e+t<this.text.GetLength())for(var o=0;o<this.text.Substring(e+t,this.text.GetLength()).GetLength();o++)this._bitState[e+t+o]!=null?n[r]=this._bitState[e+t+o]:n[r]=!1,r++;if(r<this._minLength)for(var o=r;o<this._minLength;o++)n[o]=!1;this._bitState=new Array(r),this._bitState=n,this._trueLength=r;for(var o=r-1;o>=0;o--){if(this._bitState[o]!==!1)break;this._trueLength--}if(s.GetLength()<this._minLength){var u=this._minLength-s.GetLength();for(var o=0;o<u;o++)s+=this.GetPromptChar()}return this.text=s,e},r}(b),S=function(t){function n(e){t.call(this,"EnumField"),this._activeItem=-1,this._trueLength=0,this._lastActiveItem=-1,this.undoText="",this.undoTempText="",this._undoItem=-1,this._minLength=0,this._maxLength=0,this._itemCount=0,this._owner=e}return __extends(n,t),n.prototype.GetPromptChar=function(){return this._owner.GetPromptChar()},n.prototype.GetText=function(){var t="";return this._activeItem<0?t=e.Utility.ToString(this.GetPromptChar(),this._minLength):t+=this._items[this._activeItem],t},n.prototype.GetFieldStatus=function(){return this._activeItem===-1?0:2},n.prototype.GetFieldIsFull=function(){return this._activeItem===-1?!1:!0},n.prototype.IsOver=function(){return this._activeItem!==-1},n.prototype.Init=function(e){var t=Number.MAX_VALUE,n=Number.MIN_VALUE;for(var r=0;r<e.length;r++)t=Math.min(t,e[r].length),n=Math.max(n,e[r].length);this.EnumField(t,n,e,e.length,-1)},n.prototype.EnumField=function(e,t,n,r,i){this._minLength=e,this._maxLength=t;if(!n)return!1;this._itemCount=r,this._activeItem=i,this._lastActiveItem=i,this._undoItem=i,this.InitialItems(n),i!==-1?this._trueLength=n[i].toString().GetLength():this._trueLength=0,this.text=this.GetText()},n.prototype.InitialItems=function(e){this._items=new Array(e.length);for(var t=0;t<e.length;t++){var n=e[t];while(n.IndexOf("@#GCD#@")!==-1)n=n.replace("@#GCD#@","'");while(n.IndexOf("@#GCM#@")!==-1)n=n.replace("@#GCM#@",'"');n&&(n=n.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this._items[t]=n}},n.prototype.InitialText=function(e){while(e.IndexOf("@#GCD#@")!==-1)e=e.replace("@#GCD#@","'");while(e.IndexOf("@#GCM#@")!==-1)e=e.replace("@#GCM#@",'"');e&&(e=e.replace(/@#GCX0D#@/g,"\r").replace(/@#GCX0A#@/g,"\n")),this.text=e,this.oldText=e,this.undoText=e,this.undoTempText=e},n.prototype.Insert=function(e,t,n){var r={};r.offset=e,r.text=t,r.existInvalid=!1,r.exception=!1;var i=e,s="";this._activeItem===-1&&(i=0),i!==0&&(s=this._items[this._activeItem].toString().Substring(0,i));var o=new Array(this._itemCount),u=new Array(this._itemCount),a=new Array(this._itemCount),f=new Array(this._itemCount);for(var l=0;l<this._itemCount;l++)o[l]=i,u[l]=0,a[l]=99999,f[l]=new Array;for(var l=0;l<this._itemCount;l++){var c=this._items[l].toString();if(s.GetLength()>0&&c.Substring(0,s.GetLength())!==s)continue;while(u[l]<t.GetLength()){if(o[l]>=c.length)break;var h=this.JudgeIfValid(c,o[l],t,u[l]);o[l]=h.index1,u[l]=h.index2,h.isValid?a[l]===99999&&(a[l]=u[l]):u[l]++}}var p=0,d=0,v=!1,m=o[p];for(var g=0;g<this._itemCount;g++){var c=this._items[g].toString();if(o[g]===t.GetLength()+i&&t.GetLength()===c.length){p=g,m=o[p],v=!0;break}if(a[g]===99999)continue;if(a[p]>=a[g])if(a[p]===a[g]){var y=o[g];m<y?(p=g,m=y,d=1):m===y&&d++}else p=g,m=o[p],d=1}var b;if(v)return u[p]===0?(b=!0,r.existInvalid=!0,r):(t=t.Substring(u[p]+1,t.GetLength()),e=this._items[p].toString().GetLength(),b=f[p].Count===0?!1:!0,this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r.existInvalid=b,r);if(m===i)return n===!1&&this._activeItem!==-1&&e===this._items[this._activeItem].toString().GetLength()?(t=t.Substring(u[p],t.GetLength()),b=!1,r.offset=e,r.text=t,r):(b=!0,r.exception=!0,r.existInvalid=!0,r);var w=-1;for(var l=0;l<f[p].Count;l++)w=0;return d===1?e=this._items[p].toString().GetLength():e=m,w===-1?(t=t.Substring(u[p],t.GetLength()),b=!1):(t=t.Substring(u[p],t.GetLength()),b=!0),this._activeItem=p,this.text=this._items[p].toString(),this._trueLength=this._items[p].toString().GetLength(),r.offset=e,r.text=t,r},n.prototype.Replace=function(e,t,n,r){return this.Insert(e,n,r)},n.prototype.Delete=function(e,t){if(t===0||e>=this.text.GetLength())return e;e=0,this._activeItem=-1,this.text="";if(this._minLength>0)for(var n=0;n<this._minLength;n++)this.text+=this.GetPromptChar();return this._trueLength=0,e},n.prototype.SaveOldState=function(){this._lastActiveItem=this._activeItem,this.oldText=this.text},n.prototype.RollBack=function(){if(this.oldText===this.text)return;var e=this._lastActiveItem;this._activeItem=e;if(e>=0&&e<this._itemCount)this.text=this._items[e].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},n.prototype.SaveUndoState=function(){this.undoText=this.text,this.undoTempText=this.text,this._undoItem=this._activeItem},n.prototype.Undo=function(){if(this.undoTempText===this.text)return;this.undoTempText=this.text;var e=this._activeItem;this._activeItem=this._undoItem,this._undoItem=e;if(this._activeItem>=0&&this._activeItem<this._itemCount)this.text=this._items[this._activeItem].toString();else{this.text="";for(var t=0;t<this._minLength;t++)this.text+=this.GetPromptChar()}var n=0;for(var t=this.text.GetLength();t>0;t--){if(this.text.Substring(t-1,t)!==this.GetPromptChar())break;n++}this._trueLength=this.text.GetLength()-n},n.prototype.SetTextInternal=function(e,t,n,r){var i,s=new Array(this._itemCount),o=new Array(this._itemCount),u=new Array(this._itemCount);for(i=0;i<this._itemCount;i++)s[i]=0,o[i]=0,u[i]=!1;for(i=0;i<this._itemCount;i++){var a=this._items[i].toString();while(s[i]<e.GetLength()){var f=this.JudgeIfValid(a,o[i],e,s[i]);o[i]=f.index1,s[i]=f.index2;if(!f.isValid&&n===!0){u[i]=!0;break}if(!f.isValid&&a.GetLength()===s[i])break;if(!f.isValid&&a.GetLength()>s[i]){u[i]=!0;break}if(o[i].toString().GetLength()===a.GetLength()&&s[i].toString().GetLength()<e.GetLength()&&n===!0){u[i]=!0;break}if(s[i].toString().GetLength()===e.GetLength()&&o[i].toString().GetLength()<a.GetLength()){u[i]=!0;break}}}var l=this._itemCount;for(i=0;i<this._itemCount;i++)if(u[i]===!1){l===this._itemCount&&(l=i);var a=this._items[i].toString();if(a.GetLength()===this._maxLength&&e.GetLength()>=this._maxLength){l=i;break}}var c=l,h={};h.existInvalid=!1,h.exception=!1;if(c>=this._itemCount){var p="";h.exception=!0;for(i=0;i<this._minLength;i++)p+=this.GetPromptChar();return e.Substring(0,this._minLength)===p?(e=e.Substring(this._minLength,e.GetLength()),h.offset=this._minLength,h.text=e,h.existInvalid=!1,h.exception=!0,this.Clear(),h):(h.text=e,this.text=p,this._activeItem=-1,h.existInvalid=!0,h.exception=!0,h)}return this._activeItem=c,this.text=this._items[c].toString(),this._trueLength=this._items[c].toString().GetLength(),h.offset=this._trueLength,h.text=e.Substring(this._trueLength,e.GetLength()),h},n.prototype.PerformSpin=function(e,t,n){var r=this._itemCount;if(r<t)if(r>1)while(r<t)t-=r;else t=1;else if(r<-t)if(r>1)while(r<-t)t+=r;else t=-1;if(t===0)return e;var i;if(this._activeItem===-1)i=t>0?0:r-1;else{i=this._activeItem+t;if(i<0||i>=r)n?(i=t>0?i-r:i+r,t>0&&i<this._activeItem?this._activeItem<r-1?i=r-1:i=0:t<0&&i>this._activeItem&&(this._activeItem>0?i=0:i=r-1)):i=t>0?r-1:0}var s=this._items[i].toString().GetLength();return e=Math.min(e,s),this._activeItem=i,this.text=this._items[i].toString(),this._trueLength=this._activeItem===-1?0:this.text.GetLength(),e},n.prototype.Clear=function(){this._activeItem=-1},n.prototype.JudgeIfValid=function(t,n,r,i){var s=e.CharProcess.CharEx,o={};o.index1=n,o.index2=i,o.isValid=!1;if(n>=t.GetLength())return o;if(t.Substring(n,n+1)===r.Substring(i,i+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(this._owner.GetAutoConvert()===!1)return o;if(r.Substring(i,i+1).charCodeAt(0)>=65345&&r.Substring(i,i+1).charCodeAt(0)<=65370){var u=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(u===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(r.Substring(i,i+1));if(a===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(u);return f===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(r.Substring(i,i+1).charCodeAt(0)>=65313&&r.Substring(i,i+1).charCodeAt(0)<=65338){var l=String.fromCharCode(r.Substring(i,i+1).charCodeAt(0)-32);if(l===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var f=s.ToHalfWidth(r.Substring(i,i+1));if(f===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var a=s.ToHalfWidth(l);return a===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsUpper(r.Substring(i,i+1))){var a=r.Substring(i,i+1).toLowerCase();if(a===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(r.Substring(i,i+1)).text;if(u===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(a).text;return l===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsLower(r.Substring(i,i+1))){var f=r.Substring(i,i+1).toUpperCase();if(f===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var l=s.ToFullWidth(r.Substring(i,i+1)).text;if(l===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var u=s.ToFullWidth(l).text;return u===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsHiragana(r.Substring(i,i+1))){var c=s.ToKatakana(r.Substring(i,i+1));if(c===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var h=s.ToKatakana(c),p=s.ToHalfWidthEx(h);return p.length===1&&p===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):p.length===2&&p.Substring(0,1)===t.Substring(n,n+1)&&n+1<t.GetLength()&&p.Substring(1,2)===t.Substring(n+1,n+2)?(n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&s.IsFullWidth(r.Substring(i,i+1))){var h=s.ToKatakana(r.Substring(i,i+1)),p=s.ToHalfWidthEx(h);if(p.length===1&&p===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;if(p.length===2&&p.Substring(0,1)===t.Substring(n,n+1)&&n+1<t.GetLength()&&p.Substring(1,2)===t.Substring(n+1,n+2))return n+=2,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(r.Substring(i,i+1));return d==="\u3094"?o:d===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsKatakana(r.Substring(i,i+1))&&!s.IsFullWidth(r.Substring(i,i+1))){var v;i+1<r.GetLength()&&s.IsKatakana(r.Substring(i+1,i+2))&&!s.IsFullWidth(r.Substring(i+1,i+2))?v=r.Substring(i+1,i+2):v=" ";if(v===" "){var c=s.ToFullWidth(r.Substring(i,i+1)).text;if(c===t.Substring(n,n+1))return n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="\u3094"?o:d===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var m=s.ToFullWidth(r.Substring(i,i+2)),c=m.text,g=m.processedAll;if(c===t.Substring(n,n+1))return n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o;var d=s.ToHiragana(c);return d==="\u3094"?g?"\u3046\u309b"===t.Substring(n,n+2)?(n+=2,i+=2,o.index1=n,o.index2=i,o.isValid=!0,o):o:o:d===t.Substring(n,n+1)?(n++,g?i+=2:i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}if(s.IsFullWidth(r.Substring(i,i+1))){var y=s.ToHalfWidth(r.Substring(i,i+1));return y===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o}var b=s.ToFullWidth(r.Substring(i,i+1)).text;return b===t.Substring(n,n+1)?(n++,i++,o.index1=n,o.index2=i,o.isValid=!0,o):o},n}(b),x=function(){function e(e){this.fieldArray=[],this.fieldCount=0,this.fieldCount=e}return e.prototype.GetLength=function(){var e=0;for(var t=0;t<this.fieldCount;t++){var n=this.GetFieldByIndex(t);e+=n.GetLength()}return e},e.prototype.Add=function(e){e&&this.fieldArray.push(e)},e.prototype.AddRange=function(e){if(!e||e.length===0||this.fieldCount!==e.length)return;var t=new Array;for(var n=0;n<e.length;n++)t[n]=e[n];this.fieldArray=t},e.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},e.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++)e+=this.GetFieldByIndex(t).GetText();return e},e.prototype.GetFillingString=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField")t+=r.GetText();else for(var i=0;i<r._minLength;i++)t+=e}return t},e.prototype.SetText=function(e,t){},e.prototype.Insert=function(e,t,n){},e.prototype.Replace=function(e,t,n,r){},e.prototype.Delete=function(e,t){},e.prototype.PerformSpin=function(e,t,n){},e.prototype.GetFieldIndex=function(e,t){var n={},r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i],o=s.GetLength();if(e===r&&o===0||e>=r&&e<r+o)return n.index=i,n.offset=e-r,n;r+=o}if(e>=r){var s=this.fieldArray[this.fieldCount-1];return n.index=this.fieldCount-1,n.offset=s.GetLength(),n}},e.prototype.GetFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0;for(var r=0;r<e;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}var s=this.GetFieldByIndex(e);return s?(t.start=n,t.length=s.GetLength(),t):t},e}();e.FieldCollection=x;var T=function(){function n(){this.KeyActionList=null,this.Text="",this.Value=null,this.DroppedDown=!1,this.SelectionLength=0,this.SelectionStart=0,this.SelectionEnd=0,this.IsMouseDown=!1,this.OldSelectionStart=0,this.OldSelectionEnd=0,this._acceptCrlf=e.CrLfMode.NoControl,this._clipContent=e.ClipContent.IncludeLiterals,this._editMode=e.EditMode.Insert,this.__editModeInternal=e.EditMode.Insert,this._useClipboard=!0,this._readOnly=!1,this._autoPostBack=!1,this._highlightText=e.HighlightText.None,this._exitOnLeftRightKey=e.ExitOnLeftRightKey.None,this.FocusType=e.FocusType.None,this.IsInUpdatePanelAndAsyncPostBack=!1,this.NeedResetFocus=!1,this.NeedReCalCursorPos=!0,this.SpinBtnPressed=!1,this.DropDownBtnPressed=!1,this.OldValue="",this.ValueBeforeUndo="",this.FocusExit=!1,this.Delay=0,this.SpinOnKeys=!0,this.Wrap=!0,this.SpinEnabled=!0,this.Increment=1,this.Visible=!1,this.MouseButton=e.MouseButton.Default,this.TouchDropDownScale=1,this.UIUpdate=new e.InputUIUpdate(this),this.Format={Fields:null}}return n.prototype.Snap=function(){var e={Text:this.Text,Value:this.Value,SelectionStart:this.SelectionStart,SelectionEnd:this.SelectionEnd};return e},n.prototype.Revert=function(e){this.Text=e.Text,this.Value=e.Value,this.SelectionStart=e.SelectionStart,this.SelectionEnd=e.SelectionEnd},n.prototype.ReLoadData=function(){},n.prototype.GetOverwrite=function(){return this.GetEditMode()===e.EditMode.FixedInsert||this.GetEditMode()===e.EditMode.FixedOverwrite?this.GetEditMode()===e.EditMode.FixedOverwrite:this._getEditModeInternal()!==e.EditMode.Insert&&this._getEditModeInternal()!==e.EditMode.FixedInsert},n.prototype.GetImeMode=function(){return this.InputElement.style.imeMode||"auto"},n.prototype.SetImeMode=function(e){this.GetInputElement().style.imeMode=e},n.prototype.GetEnabled=function(){return this.GetInputElement().disabled},n.prototype.SetEnabled=function(e){e?t(this.GetInputElement()).removeAttr("diabled"):t(this.GetInputElement()).attr("diabled","true")},n.prototype.SetFocus=function(){t(this.GetInputElement()).focus()},n.prototype.GetDroppedDown=function(){return this.DroppedDown},n.prototype.GetSelectionStart=function(){return Math.min(this.SelectionStart,this.SelectionEnd)},n.prototype.SetSelectionStart=function(t){t=e.Utility.CheckInt(t,0,Math.pow(2,31)),t=Math.min(t,this.Text.GetLength()),this.SetInnerSelectionStart(t),this.SetInnerSelectionEnd(t+this.SelectionLength),this.NeedReCalCursorPos=!0},n.prototype.GetSelectionLength=function(){return Math.abs(this.SelectionEnd-this.SelectionStart)},n.prototype.SetSelectionLength=function(t){t=e.Utility.CheckInt(t,0,Math.pow(2,31)),this.SelectionStart+t>this.Text.GetLength()&&(t=this.Text.GetLength()-this.SelectionStart),this.SelectionLength=t,this.SetInnerSelectionEnd(this.SelectionStart+t),this.NeedReCalCursorPos=!0},n.prototype.SetInnerSelectionStart=function(e){this.SelectionStart=e},n.prototype.SetInnerSelectionEnd=function(e){this.SelectionEnd=e},n.prototype.SetDroppedDown=function(e){if(!this.Enabled)return;this.DroppedDown=e},n.prototype.DoSpinUp=function(e,t){t==null&&(t=this.Increment),this.DoSpin("up",this.SelectionEnd,t)},n.prototype.DoSpinDown=function(e,t){t==null&&(t=this.Increment),this.DoSpin("down",this.SelectionEnd,t)},n.prototype.DoSpin=function(e,t,n){e==="down"&&(n*=-1);if(typeof t=="number"&&isNaN(t)||typeof n=="number"&&isNaN(n))return;var r=this.UIProcess.PerformSpin(t,n,this.Wrap);if(!r)return;typeof r.SelectionStart=="number"&&!isNaN(r.SelectionStart)&&(this.SelectionStart=r.SelectionStart),typeof r.SelectionEnd=="number"&&!isNaN(r.SelectionEnd)&&(this.SelectionEnd=r.SelectionEnd);if(r.Text!=null&&!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),e==="up"?this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):e==="down"&&this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")},n.prototype.GetExitOnLeftRightKey=function(){return this._exitOnLeftRightKey},n.prototype.SetExitOnLeftRightKey=function(e){this._exitOnLeftRightKey=e},n.prototype.GetAcceptsCrlf=function(){return this._acceptCrlf},n.prototype.SetAcceptsCrlf=function(e){this._acceptCrlf=e},n.prototype.SetInnerFocus=function(){this.FocusType=e.FocusType.ClientEvent,this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},n.prototype.UpdateDisplayText=function(e){this.UIUpdate.SetText(e),this.SetHideValue()},n.prototype.SetHideText=function(e){},n.prototype.SetSelection=function(t,n,r){if(t==null||n==null||isNaN(t)||isNaN(n))return;if(r&&e.Utility.IsIE10OrLater()){var i=this;setTimeout(function(){e.Utility.SetSelection(i.InputElement,t,n)},0)}else e.Utility.SetSelection(this.InputElement,t,n);this.SelectionStart=t,this.SelectionEnd=n,t===n&&(this.UIProcess.isMulSelected=!1)},n.prototype._getAutoPostBack=function(){return this._autoPostBack},n.prototype._setAutoPostBack=function(t){t=e.Utility.CheckBool(t),this._autoPostBack=t},n.prototype.GetUseClipboard=function(){return this._useClipboard},n.prototype.SetUseClipboard=function(e){this._useClipboard=e},n.prototype.GetClipContent=function(){return this._clipContent},n.prototype.SetClipContent=function(e){this._clipContent=e},n.prototype.GetTextHAlign=function(){return this.UIUpdate.GetTextHAlign()},n.prototype.SetTextHAlign=function(e){this.UIUpdate.SetTextHAlign(e)},n.prototype.GetEditMode=function(){return this._editMode},n.prototype.SetEditMode=function(e){if(e!==this._editMode){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this._editMode)?t=!0:this._isinsertGroup(this._editMode)&&this._isOverwriteGroup(e)&&(t=!0),this._editMode=e,this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},n.prototype._getEditModeInternal=function(){return this.__editModeInternal},n.prototype._setEditModeInternal=function(e){if(e!==this.__editModeInternal){var t=!1;this._isinsertGroup(e)&&this._isOverwriteGroup(this.__editModeInternal)?t=!0:this._isinsertGroup(this.__editModeInternal)&&this._isOverwriteGroup(e)&&(t=!0),this.__editModeInternal=e,t&&this.UIProcess.FireEvent(this,this.EditStatusChangedEvent,null,"EditStatusChanged")}},n.prototype._isinsertGroup=function(t){return t===e.EditMode.Insert||t===e.EditMode.FixedInsert},n.prototype._isOverwriteGroup=function(t){return t===e.EditMode.Overwrite||t===e.EditMode.FixedOverwrite},n.prototype.GetHighlightText=function(){return this._highlightText},n.prototype.SetHighlightText=function(e){this._highlightText=e},n.prototype.GetReadOnly=function(){return this._readOnly},n.prototype.SetReadOnly=function(e){this._readOnly=e},n.prototype.GetTextboxValue=function(){return this.UIUpdate.GetText()},n.prototype.GetOldValue=function(){return this.OldValue},n.prototype.CanUndo=function(){return this.GetValue()===this.GetOldValue()?!1:!0},n.prototype.GetValue=function(){return""},n.prototype.DragStart=function(){this.DragStartElementID=this.ID},n.prototype.DragEnd=function(t){return this.DragStartElementID="",e.Utility.PreventDefault(t),!1},n.prototype.MouseOut=function(){if(this.IsMouseDown!==!0)return;if(this.MouseUpPointerType!==undefined&&this.MouseUpPointerType!==4&&this.MouseUpPointerType!=="mouse")return;var t=Math.min(this.OldSelectionStart,this.OldSelectionEnd),n=Math.max(this.OldSelectionStart,this.OldSelectionEnd),r=this.GetText().Substring(t,n);r!==""&&(this.SetSelection(this.OldSelectionStart,this.OldSelectionEnd),e.Utility.DragDrop(this.InputElement)),this.IsMouseDown=!1},n.prototype.GetText=function(){return""},n.prototype.Focus=function(t){t.SelectionStart=this.SelectionStart;var n=this.UIProcess.Focus(t);e.Utility.CurrentActiveControlId=this.ID;if(!n)return;return n.Text!=null&&(this.Text=n.Text),n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.GetReadOnly()&&this.FocusType===e.FocusType.None&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),n},n.prototype.LoseFocus=function(t){this.FireKeyExit();if((this.SpinBtnPressed||this.DropDownBtnPressed||this.DropDownObj&&this.DropDownObj.IsMouseOver)&&this.FocusType!==e.FocusType.KeyExit)return;return this.DroppedDown&&(this.DropDownBtnPressed=!1,this.CloseDropDown()),this.SetLastClientValues(),this.UIProcess.LoseFocus(t)},n.prototype.FireKeyExit=function(){},n.prototype.SetLastClientValues=function(){},n.prototype.MouseDown=function(t){var n=e.Utility.GetMouseButton(t);this.MouseButton=n,this.FocusType=e.FocusType.Click,this.OldSelectionStart=this.SelectionStart,this.OldSelectionEnd=this.SelectionEnd,this.IsMouseDown=!0,this.MouseDownX=t.x,this.MouseButton===e.MouseButton.Left&&(e.Utility.IsIE()||e.Utility.firefox)&&e.Utility.ClearSelection(this.GetInputElement()),this.DroppedDown&&this.CloseDropDown();if(this.IsNullFormat())return;var r=this.UIProcess.MouseDown(n);if(!r)return;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},n.prototype.GetInputElement=function(){return this.InputElement},n.prototype.MouseUp=function(t){this.IsMouseDown=!1,this.MouseUpX=t.x,this.IsNullFormat();var n=this.UIProcess.MouseUp(this.InputElement,this.SelectionStart,this.SelectionEnd,this.MouseButton);if(!n)return;n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd);if(e.Utility.GetMouseButton(t)===e.MouseButton.Left&&this.MouseDownX!=null&&this.MouseDownX>this.MouseUpX){var r=this.SelectionStart;this.SelectionStart=this.SelectionEnd,this.SelectionEnd=r}this.MouseDownX=null,this.MouseButton=e.MouseButton.Default},n.prototype.MouseWheel=function(t){if(this.ImeMode===!0)return!1;if(this.GetSpinEnabled()){var n=e.Utility.GetMouseWheelValue(0,t);return n>0?this.PerformSpin("up"):n<0&&this.PerformSpin("down"),e.Utility.PreventDefault(t),!1}},n.prototype.PreProcessContextMenu=function(e){return!1},n.prototype.ProcessReservedKey=function(e){switch(e){case 131138:case 131140:case 131141:case 131144:case 131145:case 131148:case 131150:case 131154:case 131159:case 131188:case 262181:case 262183:case 112:case 114:case 115:case 116:case 117:case 121:case 122:case 123:case 65657:case 131081:case 196617:case 131179:case 131181:case 131120:case 131259:case 131261:case 131146:case 196680:case 196681:case 196682:case 131153:case 131156:case 196689:case 262157:return!0}return!1},n.prototype.IsNullFormat=function(){return!1},n.prototype.SetHideValue=function(){var e="";this.GetValue()!=null&&(e=this.GetValue().toString()),this.SetHideText(e)},n.prototype.KeyDown=function(t){var n={},r=t.FuncKeysPressed,i=t.KeyCode;if(this.PreProcessContextMenu(i))return n.System=!1,n;if(i===229)return n.System=!0,n;r.Shift&&(i|=65536),r.Ctrl&&(i|=131072);if(r.Alt){if(this.AccessKey!=null&&this.AccessKey.toLowerCase()===String.fromCharCode(i).toLowerCase())return this.SelectionStart=0,this.SelectionEnd=this.Text.GetLength(),n.System=!0,n;i|=262144}if(this.ProcessReservedKey(i))return n.System=!0,n;var s=i|524288;if(i!==s){var o=this.UIProcess.GetKeyActionName(s,this.Shortcuts);if(o!=null){var u=!0,a=!1;if(u)return n.System=!1,n}}var f=this.UIProcess.GetKeyActionName(i,this.Shortcuts);switch(f){case"DropDown":return this.GetDropDownEnabled()&&(this.PerformDropDown(),n.System=!1),n;case"SpinUp":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("up"),n.System=!1),n;case"SpinDown":return this.GetSpinEnabled()&&this.SpinOnKeys&&(this.PerformSpin("down"),n.System=!1),n}var l=!1;if(this.KeyActionList)for(var c=0;c<this.KeyActionList.length;c++)if(this.KeyActionList[c]===i.toString()){l=!0;break}if(this.DroppedDown&&this.DropDownObj&&i!=262182&&i!=262184&&i!=27&&i!=118&&i!=9&&i!=65545){f!=null&&this.DropDownObj.IsShortcut(i)&&(f=null);if(!f){if(i===93)return this.CloseDropDown(),!0;n.System=!1;if(!l){var h={keyCode:0,shiftKey:!1,ctrlKey:!1,altKey:!1};return h.keyCode=t.KeyCode,h.shiftKey=r.Shift,h.ctrlKey=r.Ctrl,h.altKey=r.Alt,this.DropDownObj.KeyDown(h),n}}}t.KeyAction=f,t.KeyCode=i;var p=this.UIProcess.KeyDown(t);if(!p){switch(i){case 27:return this.DroppedDown&&(this.CloseDropDown(),this.SetInnerFocus()),n.System=!1,n;case 262182:case 262184:return l||(this.PerformDropDown(),n.System=!0),n;case 262152:return n.KeyCode=10,n;case 38:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("up"),n.System=!1),n;case 40:return l||(this.GetSpinEnabled()&&this.SpinOnKeys&&this.PerformSpin("down"),n.System=!1),n;case 13:return n.System=!0,n}if(this.IsNullFormat()||i===20||r&&(r.Ctrl||r.Alt)||i===91||i===144||i===145||i===93||i===92)return n.System=!0,n;if(r&&r.Shift&&i===65552)return n.System=!0,n;if(this.Type==="Number")return n.System=!0,n;if(i===120||i===123||i===113||i===118||i===119)return n;var d=this.UIProcess.FireEvent(this,this.InvalidInputEvent,null,"InvalidInput");return d!=null&&(this.FocusType=d),n}p.Overwrite!=null&&this.GetOverwrite()!==p.Overwrite&&(this._getEditModeInternal()===e.EditMode.Insert?this._setEditModeInternal(e.EditMode.Overwrite):this._getEditModeInternal()===e.EditMode.Overwrite&&this._setEditModeInternal(e.EditMode.Insert));if(p.Text!=null&&!this.UpdateText(p))return n.System=!1,n;var v=this.GetSelectionLength();p.SelectionStart!=null&&(this.SelectionStart=p.SelectionStart),p.SelectionEnd!=null&&(this.SelectionEnd=p.SelectionEnd);var m=this.GetSelectionLength();p.System||(p.FocusExit?(this.SetHideValue(),p.System=!1):(this.UpdateDisplayText(this.Text),v===0&&m!==0?e.Utility.ShouldFireOnSelectStart=!0:e.Utility.ShouldFireOnSelectStart=!1,this.SetSelection(this.SelectionStart,this.SelectionEnd),e.Utility.ShouldFireOnSelectStart=!1,p.HasSetSelection=!0));if(p.EventInfo)if(p.EventInfo.Type==="KeyExit")this.EventInfo=p.EventInfo;else{var d=this.UIProcess.FireEvent(this,p.EventInfo.Name,p.EventInfo.Args,p.EventInfo.Type);d!=null&&(this.FocusType=d)}return p.FocusType!=null&&(this.FocusType=p.FocusType),n=p,n.KeyAction=f,n},n.prototype.GetImeInputText=function(t){var n=this.GetTextboxValue();if(n===this.Text)return"";var r;if(this.Text!==""){var i=Math.min(this.SelectionStart,this.SelectionEnd),s=Math.max(this.SelectionStart,this.SelectionEnd);if(s<this.Text.GetLength()){var o=this.Text.Substring(s,this.GetText().GetLength()),u=n.IndexOf(o);u!==-1?r=n.Substring(i,n.GetLength()-o.GetLength()):r=""}else r=n.Substring(i,n.GetLength())}else r=n;t==="ReInput"&&(r=r.Substring(0,r.GetLength()));if(t==="Record")return r;if(t==="LoseFocusInput"&&r==="")return"";this.ImeMode=!1,this.ImeSelect=!1;if(t==="ReInput"||t==="ClickInput")this.FocusType=e.FocusType.ImeInput,this.InputElement.blur(),this.InputElement.focus();return r},n.prototype.KeyUp=function(e){},n.prototype.GetVisible=function(){return!0},n.prototype.PerformDropDown=function(){if(!this.Enabled||!this.GetDropDownEnabled())return;if(!this.GetVisible())return;if(!this.DroppedDown){if(this.DropDownObj&&this.DropDownObj.GetDropDownContainer!==undefined){var t=this.DropDownObj.GetDropDownContainer();e.Utility.IsTouchMouseDown?e.Utility.SetZoomStyle(t,this.TouchDropDownScale,this.DropDownObj.GetAlign()):e.Utility.SetZoomStyle(t,"")}this.ShowDropDown()}else this.CloseDropDown()},n.prototype.DropDownBtnMouseDown=function(t){this.DropDownBtnPressed=!0;if(t!==e.MouseButton.Left&&t!=null)return;this.PerformDropDown(),this.SetInnerFocus(),this.DroppedDown&&this.ResetLocation()},n.prototype.DropDownBtnMouseUp=function(){this.DropDownBtnPressed=!1,this.SetInnerFocus()},n.prototype.ResetLocation=function(){},n.prototype.DropDownBtnMouseOut=function(){this.DropDownBtnPressed&&(this.SetInnerFocus(),this.DropDownBtnPressed=!1)},n.prototype.ShowDropDown=function(e){e!=null&&this.UIUpdate.WriteCssStyle(e)},n.prototype.CloseDropDown=function(){this.DroppedDown=!1,this.DropDownObj.Close(),this.UIUpdate.ClearCssStyle();var e=this.UIProcess.FireEvent(this,this.DropDownCloseEvent,null,"DropDownClose");e!=null&&(this.FocusType=e)},n.prototype.PerformSpin=function(t){var n=this.Increment;if(this.IsNullFormat())this.SetSelection(this.SelectionStart,this.SelectionEnd);else if(!this.GetReadOnly()){t==="down"&&(n*=-1);var r=this.UIProcess.PerformSpin(this.SelectionEnd,n,this.Wrap);if(!r)return;if(r.Text!=null&&!this.UpdateText(r))return;r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart,this.SelectionEnd=r.SelectionStart),this.UpdateDisplayText(this.Text),this.SetInnerFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)}var i=e.FocusType.ClientEvent;t==="up"?i=this.UIProcess.FireEvent(this,this.SpinUpEvent,null,"SpinUp"):t==="down"&&(i=this.UIProcess.FireEvent(this,this.SpinDownEvent,null,"SpinDown")),i!=null&&(this.FocusType=i)},n.prototype.SpinBtnMouseDown=function(t,n){this.SpinBtnPressed=!0;if(this.DroppedDown){this.CloseDropDown(),this.SetInnerFocus();return}if(t!=e.MouseButton.Left&&t!=null)return;var r=n===!0?"up":"down";this.PerformSpin(r),this.SetInnerFocus();if(e.Utility.SpinTimer==null){var i=this;e.Utility.SpinTimer=setInterval(function(){i.PerformSpin(r)},this._getRealSpinDelay())}},n.prototype._getRealSpinDelay=function(){return this.Delay===0?150:this.Delay},n.prototype.SpinBtnMouseUp=function(){this.SpinBtnPressed&&(this.SetInnerFocus(),this.SpinBtnPressed=!1),e.Utility.SpinTimer!=null&&(clearInterval(e.Utility.SpinTimer),e.Utility.SpinTimer=null)},n.prototype.SelectStart=function(e){if(this.IsNullFormat())return!0;var t=this.UIProcess.SelectStart(this.InputElement,e,this.MouseButton);t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart);if(t.SetFalse!=null)return t.SetFalse},n.prototype.DoubleClick=function(){if(this.IsNullFormat())return!0;var e=this.UIProcess.DoubleClick(this.SelectionStart);e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd,this.SetSelection(this.SelectionStart,this.SelectionEnd))},n.prototype.Undo=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Undo();if(!e)return;if(e.Text!=null){if(!this.UpdateText(e))return;this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)}},n.prototype.Cut=function(){if(this.GetReadOnly())return;var e=this.UIProcess.Cut(this.GetClipContent(),this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),e.Color!==null&&this.UIUpdate.SetForeColor(e.Color)},n.prototype.Copy=function(){this.UIProcess.Copy(this.GetClipContent(),this.SelectionStart,this.SelectionEnd)},n.prototype.Paste=function(t){if(this.GetReadOnly())return!1;if(this.IsNullFormat())return!1;var n=e.Utility.GetPasteData(this.GetUseClipboard());t&&(n=t);var r=this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,n);return r?r.Text!=null&&!this.UpdateText(r)?!1:(r.SelectionStart!=null&&(this.SelectionStart=r.SelectionStart),r.SelectionEnd!=null&&(this.SelectionEnd=r.SelectionEnd),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),r.EventInfo!=null&&this.UIProcess.FireEvent(this,r.EventInfo.Name,r.EventInfo.Args,r.EventInfo.Type),r.FocusExit!=null&&(this.FocusExit=r.FocusExit),!0):!1},n.prototype.Delete=function(){if(this.GetReadOnly())return;var e=this.UIProcess.ProcessDelete(this.SelectionStart,this.SelectionEnd);if(!e)return;if(e.Text!=null&&!this.UpdateText(e))return;e.SelectionStart!=null&&(this.SelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.SelectionEnd=e.SelectionEnd),e.Text!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.DoDeleteExtraWork())},n.prototype.DoDeleteExtraWork=function(){},n.prototype.SelectAll=function(){var t=this.UIProcess.SelectAll();t.SelectionStart!=null&&(this.SelectionStart=t.SelectionStart),t.SelectionEnd!=null&&(this.SelectionEnd=t.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.FocusType=e.FocusType.ContextMenu},n.prototype.DragDrop=function(t){if(!e.Utility.IsIE()&&this.GetReadOnly())return!1;if(this.DragStartElementID===this.ID)return this.DragStartElementID="",!1;var n=this.UIProcess.Paste(0,0,t);if(!n)return;if(n.Text!=null){if(!this.UpdateText(n))return;e.Utility.IsIE()||this.SetInnerFocus()}n.SelectionStart!=null&&(this.SelectionStart=n.SelectionStart),n.SelectionEnd!=null&&(this.SelectionEnd=n.SelectionEnd),this.SetSelection(this.SelectionStart,this.SelectionEnd),n.EventInfo!=null&&this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type)},n.prototype.SetInnerText=function(e){this.SetText(e)},n.prototype.SetText=function(e){},n.prototype.GetInnerText=function(){return this.Text},n.prototype.UpdateText=function(e){return e!=null&&e.Text!=null&&(this.Text=e.Text),!0},n.prototype.RollBack=function(){},n.prototype.AddAllEventsHandler=function(){var n=this,r=this.GetInputElement();r!=null&&(t(r).bind("mousedown.wijinput",function(t){e.GlobalEventHandler.OnMouseDown(n,t)}),t(r).bind("mouseup.wijinput",function(t){e.GlobalEventHandler.OnMouseUp(n,t)}),t(r).bind("selectstart.wijinput",function(t){e.GlobalEventHandler.OnSelectStart(n,t)}),t(r).bind("keydown.wijinput",function(t){e.GlobalEventHandler.OnKeyDown(n,t)}),t(r).bind("keypress.wijinput",function(t){e.GlobalEventHandler.OnKeyPress(n,t)}),t(r).bind("keyup.wijinput",function(t){e.GlobalEventHandler.OnKeyUp(n,t)}),t(r).bind("dblclick.wijinput",function(t){e.GlobalEventHandler.OnDblClick(n,t)}),t(r).bind("beforecopy.wijinput",function(t){e.GlobalEventHandler.OnHTML5BeforeCopy(n,t)}),t(r).bind("cut.wijinput",function(t){e.GlobalEventHandler.OnHTML5Cut(n,t)}),t(r).bind("paste.wijinput",function(t){e.GlobalEventHandler.OnHTML5Paste(n,t)}),t(r).bind("focus.wijinput",function(t){e.GlobalEventHandler.OnFocus(n,t)}),t(r).bind("blur.wijinput",function(t){e.GlobalEventHandler.OnLostFocus(n,t)}),t(r).bind("mousewheel.wijinput",function(t){e.GlobalEventHandler.OnMouseWheel(n,t)}),t(r).bind("DOMMouseScroll.wijinput",function(t){e.GlobalEventHandler.OnMouseWheel(n,t)}),t(r).bind("dragstart.wijinput",function(t){e.GlobalEventHandler.OnDragStart(n,t)}),t(r).bind("dragend.wijinput",function(t){e.GlobalEventHandler.OnDragEnd(n,t)}),t(r).bind("mouseout.wijinput",function(t){e.GlobalEventHandler.OnMouseOut(n,t)}),t(r).bind("drop.wijinput",function(t){e.GlobalEventHandler.OnDrop(n,t)}),t(r).bind("touchstart.wijinput",function(t){e.GlobalEventHandler.OnTouchStart(n,t)}),t(r).bind("touchend.wijinput",function(t){e.GlobalEventHandler.OnTouchEnd(n,t)}),t(r).bind("select.wijinput",function(t){e.GlobalEventHandler.OnSelect(n,t)}),e.Utility.safari&&(t(r).bind("dragenter.wijinput",function(e){n._safariDropText=getSelection().toString()}),t(r).bind("dragleave.wijinput",function(e){n._safariDropText=null})),t(r).bind("compositionstart.wijinput",function(t){e.GlobalEventHandler.OnCompositionStart(n,t)}),t(r).bind("compositionupdate.wijinput",function(t){e.GlobalEventHandler.OnCompositionUpdate(n,t)}),t(r).bind("compositionend.wijinput",function(t){e.GlobalEventHandler.OnCompositionEnd(n,t)}),e.Utility.GetClientOS()==="Android"&&t(r).bind("webkitEditableContentChanged.wijinput",function(t){e.GlobalEventHandler.OnWebkitEditableContentChanged(n,t)}))},n.prototype.ResetData=function(e){this.SetText(e.ResetData)},n.prototype._createElementForNoSpinAndNoDropDown=function(e){return e},n.prototype._addControlEventHandler=function(){},n.prototype._reCreate=function(){},n.prototype._onSpinPropertyChanged=function(e){e=e.toLowerCase(),e==="alignment"||e==="position"?this._getRealSpinVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="spinupimage"||e==="spindownimage"||e==="pressedspinupimage"||e==="pressedspindownimage")},n.prototype._onDropDownPropertyChanged=function(e){e=e.toLowerCase(),e==="position"?this._getRealDropDownVisible()&&this._reCreate():e==="visible"?this._reCreate():e!=="enabled"&&(e==="buttonimage"||e==="pressedbuttonimage")},n.prototype._isSupportClipBoard=function(){return this.GetUseClipboard()?e.Utility.IsIE()?!0:!1:!0},n.prototype._onpropertyChanged=function(){},n.prototype.GetSpinDelay=function(){return this.Delay},n.prototype.SetSpinDelay=function(e){this.Delay=e},n.prototype.GetSpinEnabled=function(){return this.SpinEnabled&&this.Enabled},n.prototype.SetSpinEnabled=function(e){this.SpinEnabled=e},n.prototype.GetSpinIncrement=function(){return this.Increment},n.prototype.SetSpinIncrement=function(e){this.Increment=e},n.prototype.GetSpinOnKeys=function(){return this.SpinOnKeys},n.prototype.SetSpinOnKeys=function(e){this.SpinOnKeys=e},n.prototype.GetSpinVisible=function(){return this.Visible},n.prototype._getRealSpinVisible=function(){return this.GetSpinVisible()},n.prototype.SetSpinVisible=function(e){this.Visible=e},n.prototype.GetSpinWrap=function(){return this.Wrap},n.prototype.SetSpinWrap=function(e){this.Wrap=e},n.prototype.GetAutoDropDown=function(){return this._dropDown.AutoDropDown},n.prototype.SetAutoDropDown=function(e){this._dropDown.SetAutoDropDown(e)},n.prototype.GetDropDownButtonImageUrl=function(){return this._dropDown.GetButtonImage()},n.prototype.SetDropDownButtonImageUrl=function(e){this._dropDown.SetButtonImage(e)},n.prototype.GetDropDownClosingAnimation=function(){return this._dropDown.ClosingAnimation},n.prototype.SetDropDownClosingAnimation=function(e){this._dropDown.SetClosingAnimation(e)},n.prototype.GetDropDownShadow=function(){return this._dropDown.DropDownShadow},n.prototype.SetDropDownShadow=function(e){this._dropDown.SetDropDownShadow(e)},n.prototype.GetDropDownEnabled=function(){return this._dropDown.GetEnabled()&&this.Enabled},n.prototype.SetDropDownEnabled=function(e){this._dropDown.SetEnabled(e)},n.prototype.GetDropDownOpeningAnimation=function(){return this._dropDown.OpeningAnimation},n.prototype.SetDropDownOpeningAnimation=function(e){this._dropDown.SetOpeningAnimation(e)},n.prototype.GetDropDownPosition=function(){return this._dropDown.Position},n.prototype.SetDropDownPosition=function(e){this._dropDown.SetPosition(e)},n.prototype.GetPressedDropDownButtonImageUrl=function(){return this._dropDown.GetPressedButtonImage()},n.prototype.SetPressedDropDownButtonImageUrl=function(e){this._dropDown.SetPressedButtonImage(e)},n.prototype.GetDropDownVisible=function(){return this._dropDown.Visible},n.prototype._getRealDropDownVisible=function(){return this.GetDropDownVisible()},n.prototype.SetDropDownVisible=function(e){this._dropDown.SetVisible(e)},n}();e.BaseInputControl=T;var N;(function(e){e._map=[],e.OctalAscII=0,e.HexAscII=1,e.HexUnicode=2,e.DefinedCharBase=3,e.DefinedCharAddition=4,e.CharSubset=5,e.EnumGroup=6,e.Quantifier=7,e.PromptChar=8,e.Unknow=9})(N||(N={}));var C=function(){function t(){}return t.DBCS_A=e.CharProcess.CharEx.ToFullWidth("A").text,t.DBCS_a=e.CharProcess.CharEx.ToFullWidth("a").text,t.DBCS_B=e.CharProcess.CharEx.ToFullWidth("B").text,t.DBCS_D=e.CharProcess.CharEx.ToFullWidth("D").text,t.DBCS_J=e.CharProcess.CharEx.ToFullWidth("J").text,t.DBCS_K=e.CharProcess.CharEx.ToFullWidth("K").text,t.DBCS_W=e.CharProcess.CharEx.ToFullWidth("W").text,t.DBCS_X=e.CharProcess.CharEx.ToFullWidth("X").text,t.DBCS_Z=e.CharProcess.CharEx.ToFullWidth("Z").text,t.DBCS_T=e.CharProcess.CharEx.ToFullWidth("T").text,t.DBCS_M=e.CharProcess.CharEx.ToFullWidth("M").text,t.DBCS_I=e.CharProcess.CharEx.ToFullWidth("I").text,t.DBCS_N=e.CharProcess.CharEx.ToFullWidth("N").text,t.DBCS_G=e.CharProcess.CharEx.ToFullWidth("G").text,t.DBCS_E=e.CharProcess.CharEx.ToFullWidth("E").text,t.DBCS_V=e.CharProcess.CharEx.ToFullWidth("V").text,t.DBCS_z=e.CharProcess.CharEx.ToFullWidth("z").text,t.DBCS_0=e.CharProcess.CharEx.ToFullWidth("0").text,t.DBCS_1=e.CharProcess.CharEx.ToFullWidth("1").text,t.DBCS_9=e.CharProcess.CharEx.ToFullWidth("9").text,t.DBCS_F=e.CharProcess.CharEx.ToFullWidth("F").text,t.DBCS_f=e.CharProcess.CharEx.ToFullWidth("f").text,t.DBCS__=e.CharProcess.CharEx.ToFullWidth("_").text,t.ParseFormat=function(d,v){t.Owner=v;var m=new k(t.Owner,0,!1);if(d===null||d.length===0){var g=new E(t.Owner),b=new Array;g._bitState=b;var x=new y(t.Owner,!0),T=new i(t.Owner,!0);x.Add(T);var C=new r(t.Owner,!0);x.Add(C);var L=new c(t.Owner,!0);return x.Add(L),g.FilterField(0,2147483647,x,b),g.InitialText(""),g._trueLength=0,m.PushBack(g),m.formatIsNull=!0,m}var A=0,O="",M=N.PromptChar,_=N.CharSubset,D=t.GetKeyWord(d,A),P=D.KeyWord,H=D.KeyType,B=D.KeyLen,j;while(d.length>A){switch(H){case N.Unknow:throw"InvalidParameter";case N.CharSubset:var F=t.AnalyseCharSubset(P),x=F.uf;if(!F.Result)throw"Invalid parameter";j=x,M=N.CharSubset;break;case N.DefinedCharAddition:if(P==="\\K")j=new h(t.Owner,!0);else if(P==="\\H")j=new r(t.Owner,!0);else if(P==="\\N")j=new l(t.Owner,!0);else if(P==="\\"+t.DBCS_K)j=new p(t.Owner,!0);else if(P==="\\"+t.DBCS_J)j=new s(t.Owner,!0);else if(P==="\\"+t.DBCS_M)j=new o(t.Owner,!0);else if(P==="\\"+t.DBCS_I)j=new u(t.Owner,!0);else if(P==="\\"+t.DBCS_G)j=new a(t.Owner,!0);else if(P==="\\"+t.DBCS_N)j=new f(t.Owner,!0);else if(P==="\\"+t.DBCS_Z)j=new i(t.Owner,!0);else{if(P!=="\\"+t.DBCS_T)throw"argument null";j=new c(t.Owner,!0)}M=N.CharSubset;break;case N.EnumGroup:var I=[];if(t.AnalyseEnumGroup(P,I)){var q=new S(t.Owner);q.Init(I),m.PushBack(q),M=N.EnumGroup,A+=B;var R=t.GetKeyWord(d,A);P=R.KeyWord,H=R.KeyType,B=R.KeyLen;continue}throw"invalid parameter";case N.OctalAscII:try{var U=P.Substring(1);U=parseInt(U,8);if(U===0)throw"argument exception";var z=String.fromCharCode(U);M===N.PromptChar?O+=z:(O=z,M=N.PromptChar)}catch(W){throw"invalid parameter"}break;case N.HexAscII:case N.HexUnicode:try{var U=P.Substring(2);U=parseInt(U,16);if(U===0)throw"argument exception";var z=String.fromCharCode(U);M===N.PromptChar?O+=z:(O=z,M=N.PromptChar)}catch(W){throw"invalid parameter"}break;case N.PromptChar:M===N.PromptChar?O+=P:(O=P,M=N.PromptChar);break;case N.Quantifier:throw"invalid parameter";default:throw"invalid parameter"}A+=B;var X=1,V=1;if(A<d.length){D=t.GetKeyWord(d,A),P=D.KeyWord,H=D.KeyType,B=D.KeyLen;switch(H){case N.Unknow:throw"invalid parameter";case N.CharSubset:case N.DefinedCharAddition:case N.EnumGroup:_=N.CharSubset;break;case N.Quantifier:var $=t.AnalyseQuantifier(P);V=$.Min,X=$.Max;if(!$.Result)throw"invalid parameter";A+=B,D=t.GetKeyWord(d,A),P=D.KeyWord,H=D.KeyType,B=D.KeyLen,_=N.Quantifier;break;case N.OctalAscII:case N.HexUnicode:case N.HexAscII:case N.PromptChar:_=N.PromptChar}if(M===N.PromptChar){if(_!==N.PromptChar){if(_===N.Quantifier)throw"invalid parameter";m.PushBack(new w(O))}}else{var J=new E(t.Owner);J.FilterField(V,X,j,[!1,!1,!1]),J.InitialText(e.Utility.ToString(J.GetPromptChar(),V)),J._trueLength=0,m.PushBack(J)}}else if(M===N.PromptChar)m.PushBack(new w(O));else{var J=new E(t.Owner);J.FilterField(1,1,j,[]),m.PushBack(J)}}for(var K=0;K<m.fieldCount;K++)if(!(m.GetFieldByIndex(K)instanceof w))break;if(K===m.fieldCount)throw"invalid parameter";return m},t.ParseFillExpression=function(n,r){var i={};i.Expression="",i.Result=!0;if(n==="{}")return i.Expression="{}",i.Result=!0,i;if(n!==undefined&&n!==null&&n.length>0)try{var s=n,o="\0",u=t.ParseFillingString(s);s=u.Format,o=u.FillingChar;if(o!=="\0"){if(!t.NullParse(s))throw"argument exception";r!==undefined&&r!==null&&r.fieldCount>0?i.Expression=r.GetFillingString(o):i.Expression=n}else i.Expression=s}catch(a){throw"argument exception"}else i.Expression=null;return i},t.ParseFillingString=function(n){var r={};r.Format=n,r.FillingChar="\0",r.Result=!1;if(n===undefined||n===null||n.length===0)return r.Result=!1,r;var i=n.indexOf("{"),s=n.indexOf("}");if(i===-1&&s===-1)return n=t.RemoveEscapeChar(n),r.Format=n,r.Result=!1,r;while(i>0&&n.charAt(i-1)==="\\")i=n.indexOf("{",i+1);while(s>0&&n.charAt(s-1)==="\\")s=n.indexOf("}",s+1);if(i<s){if(i===-1)return n=t.RemoveEscapeChar(n),r.Format=n,r.Result=!1,r;if(s-i===1)r.Format="";else{if(n.charAt(i+1)==="{")throw"argument exception";if(n.charAt(i+1)==="\\"){if(!(i+2<s))throw"arugment exception";i++}r.FillingChar=n.charAt(i+1)}return r.Result=!0,r}return n=t.RemoveEscapeChar(n),r.Format=n,r.Result=!1,r},t.RemoveEscapeChar=function(t){if(t.indexOf("\\")!==-1){var n="",r=t.length;for(var i=0;i<r;i++){if(t.charAt(i)==="\\"){i+1<r&&(n+=t.charAt(++i));continue}n+=t.charAt(i)}return n}return t},t.NullParse=function(n){var r=t.FindSpecialCh(n,"{",0),i=t.FindSpecialCh(n,"}",0);if(r>-1&&i>-1&&i>r){if(t.FindSpecialCh(n,"{",r+1)>-1)return!1;if(t.FindSpecialCh(n,"}",i+1)>-1)return!1}return!0},t.FindSpecialCh=function(t,n,r){var i=0,s=r-1;do{s=t.indexOf(n,s+1);if(s===0||s===-1)return s;for(var o=s-1;o>0;o--){if(t.charAt(o)!=="\\")break;i++}}while(t.charAt(s-1)==="\\"&&i%2!==0);return s},t.GetKeyWord=function(n,r){var i={};i.KeyLen=0,i.KeyType=N.Unknow,i.KeyWord=null;if(r>=n.length)return i;var s=n.charAt(r);switch(s){case"\\":var o=t.GetEscapeCharLength(n.Substring(r),i.KeyType,i.KeyLen);if(o.Result)return i.KeyLen=o.KeyLen,i.KeyType=o.KeyType,i.KeyWord=n.substr(r,i.KeyLen),i;var u=n.charAt(r+1);return u==="A"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[A-Z]",i):u===t.DBCS_A?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_A+"-"+t.DBCS_Z+"]",i):u==="a"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[a-z]",i):u===t.DBCS_a?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_a+"-"+t.DBCS_z+"]",i):u==="D"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[0-9]",i):u===t.DBCS_D?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_0+"-"+t.DBCS_9+"]",i):u==="B"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[0-1]",i):u===t.DBCS_B?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_0+"-"+t.DBCS_1+"]",i):u==="X"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[0-9A-Fa-f]",i):u===t.DBCS_X?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_0+"-"+t.DBCS_9+t.DBCS_A+"-"+t.DBCS_F+t.DBCS_a+"-"+t.DBCS_f+"]",i):u==="W"?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="[a-zA-Z_0-9]",i):u===t.DBCS_W?(i.KeyLen=2,i.KeyType=N.CharSubset,i.KeyWord="["+t.DBCS_a+"-"+t.DBCS_z+t.DBCS_A+"-"+t.DBCS_Z+t.DBCS__+t.DBCS_0+"-"+t.DBCS_9+"]",i):u==="K"||u===t.DBCS_K||u===t.DBCS_J||u===t.DBCS_Z||u==="H"||u===t.DBCS_T||u===t.DBCS_M||u===t.DBCS_I||u===t.DBCS_G||u===t.DBCS_N||u==="N"||u===t.DBCS_E||u===t.DBCS_V?(i.KeyLen=2,i.KeyType=N.DefinedCharAddition,i.KeyWord=n.substr(r,2),i):t.IsSpecialChar(u)?(i.KeyLen=2,i.KeyType=N.PromptChar,i.KeyWord=n.substr(r+1,1),i):(i.KeyWord="",i);case"{":var a=n.indexOf("}",r+1);return a===-1?(i.KeyWord="",i):(i.KeyType=N.Quantifier,i.KeyLen=a+1-r,i.KeyWord=n.substr(r,i.KeyLen),i);case"[":var a=r,f=0;do{a=n.indexOf("]",a+1);if(a===-1)return"";for(var l=a-1;l>0;l--){if(n.charAt(l)!=="\\")break;f++}}while(n.charAt(a-1)==="\\"&&f%2!==0);return i.KeyType=N.CharSubset,i.KeyLen=a+1-r,i.KeyWord=n.substr(r,i.KeyLen),i;case"(":var a=r;do{a=n.indexOf(")",a+1);if(a===-1)return""}while(n.charAt(a-1)==="\\");return i.KeyType=N.EnumGroup,i.KeyLen=a+1-r,i.KeyWord=n.substr(r,i.KeyLen),i;case"*":return i.KeyLen=1,i.KeyType=N.Quantifier,i.KeyWord="{0,}",i;case"+":return i.KeyLen=1,i.KeyType=N.Quantifier,i.KeyWord="{1,}",i;case"?":return i.KeyLen=1,i.KeyType=N.Quantifier,i.KeyWord="{0,1}",i;default:var c=r+1;for(;c<n.length;c++)if(t.IsSpecialChar(n.charAt(c)))break;return i.KeyType=N.PromptChar,i.KeyLen=c-r,i.KeyWord=n.substr(r,i.KeyLen),i}},t.IsSpecialChar=function(t){return t==="\\"||t==="{"||t==="}"||t==="["||t==="]"||t==="("||t===")"||t==="."||t==="*"||t==="+"||t==="?"},t.GetEscapeCharLength=function(n,r,i){var s={};s.Result=!1,s.KeyType=r,s.Length=i;if(n.charAt(0)!=="\\")return s;var o=1,u=n.charAt(1);return u==="x"?n.length<o+3?s:(s.Length=4,s.KeyType=N.HexAscII,s.Result=!0,s):u==="u"?n.length<o+5?s:(s.Length=6,s.KeyType=N.HexUnicode,s.Result=!0,s):t.IsOctalChar(u)?n.length<o+3?s:(s.Length=4,s.KeyType=N.OctalAscII,s.Result=!0,s):s},t.IsOctalChar=function(t){return t>="0"&&t<="7"},t.AnalyseQuantifier=function(t){var n={};n.Min=-1,n.Max=-1,n.Result=!1;var r=t.indexOf(",",1);if(r===-1)try{return n.Min=parseInt(t.substr(1,t.length-2)),n.Max=n.Min,n.Result=n.Max>0,n}catch(i){return n.Result=!1,n}try{return n.Min=parseInt(t.substr(1,r-1)),r===t.length-2?n.Max=Math.pow(2,31):n.Max=parseInt(t.substr(r+1,t.length-r-2)),n.Min<0||n.Min>n.Max||n.Max===0?(n.Result=!1,n):(n.Result=!0,n)}catch(i){return n.Result=!1,n}},t.AnalyseCharSubset=function(n,d){var v={};v.uf=d,v.Result=!1;var b=[],w=1,E=!0,S="";if(n==="[]"){b.push(new i(t.Owner,!0)),b.push(new r(t.Owner,!0)),b.push(new c(t.Owner,!0));if(v.uf&&v.uf.filterArray.length>0)for(var x=0;x<d.filterArray.length;x++)b.push(d.filterArray[x]);return v.uf=new y(t.Owner,!0),v.uf.AddRange(b),v.Result=!0,v}if(n==="[^]"){b.push(new i(t.Owner,!1)),b.push(new r(t.Owner,!1)),b.push(new c(t.Owner,!1));if(v.uf&&v.uf.filterArray.length>0)for(var x=0;x<d.filterArray.length;x++)b.push(d.filterArray[x]);return v.uf=new y(t.Owner,!0),v.uf.AddRange(b),v.uf.filterArray[0]._include=!1,v.uf.filterArray[1]._include=!1,v.uf.filterArray[2]._include=!1,v.Result=!0,v}n.charAt(w)==="^"&&(E=!1,w++);while(w<n.length-1){var T=n.charAt(w),C=N.HexAscII,k=0;switch(T){case"-":return v.Result=!1,v;case"^":if(E===!1)throw"invalid fromat";if(S.length>0){var L=new m(S,"");L._include=E,b.push(L)}if(b.length>0){v.uf=new y(t.Owner,!0),v.uf.AddRange(b);for(var x=0;x<v.uf.filterArray.length;x++)if(!v.uf.filterArray[x]._include)return v.Result=!1,v;var A=t.AnalyseCharSubset("["+n.substr(w,n.length-w),v.uf);return v.uf=A.uf,v.Result=A.Result,v}return v.Result=!1,v;case"\\":var O=t.GetEscapeCharLength(n.substr(w),C,k);C=O.KeyType,k=O.Length;if(O.Result){var M=16,_=null;C===N.OctalAscII?(M=8,_=n.substr(w+1,k-1)):_=n.substr(w+2,k-2),n=n.substring(0,w)+n.substr(w+k);var D=String.fromCharCode(parseInt(_,M));n=n.substring(0,w)+D+n.substr(w);continue}var P=n.charAt(w+1);if(P==="A")b.push(new g("A","Z",t.Owner,!0)),w++;else if(P===t.DBCS_A)b.push(new g(t.DBCS_A,t.DBCS_Z,t.Owner,!0)),w++;else if(P==="a")b.push(new g("a","z",t.Owner,!0)),w++;else if(P===t.DBCS_a)b.push(new g(t.DBCS_a,t.DBCS_z,t.Owner,!0)),w++;else if(P==="D")b.push(new g("0","9",t.Owner,!0)),w++;else if(P===t.DBCS_D)b.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),w++;else if(P==="B")b.push(new g("0","1",t.Owner,!0)),w++;else if(P===t.DBCS_B)b.push(new g(t.DBCS_0,t.DBCS_1,t.Owner,!0)),w++;else if(P==="X")b.push(new g("0","9",t.Owner,!0)),b.push(new g("A","F",t.Owner,!0)),b.push(new g("a","f",t.Owner,!0)),w++;else if(P===t.DBCS_X)b.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),b.push(new g(t.DBCS_A,t.DBCS_F,t.Owner,!0)),b.push(new g(t.DBCS_a,t.DBCS_f,t.Owner,!0)),w++;else if(P==="W")b.push(new g("0","9",t.Owner,!0)),b.push(new g("A","Z",t.Owner,!0)),b.push(new g("a","z")),S+="_",w++;else if(P===t.DBCS_W)b.push(new g(t.DBCS_0,t.DBCS_9,t.Owner,!0)),b.push(new g(t.DBCS_A,t.DBCS_Z,t.Owner,!0)),b.push(new g(t.DBCS_a,t.DBCS_z,t.Owner,!0)),S+=t.DBCS__,w++;else if(P==="K")b.push(new h(t.Owner,!0)),w++;else if(P==="H")b.push(new r(t.Owner,E)),w++;else if(P===t.DBCS_K)b.push(new p(t.Owner,!0)),w++;else if(P===t.DBCS_J)b.push(new s(t.Owner,!0)),w++;else if(P===t.DBCS_M)b.push(new o(t.Owner,!0)),w++;else if(P===t.DBCS_I)b.push(new u(t.Owner,!0)),w++;else if(P==="N")b.push(new l(t.Owner,!0)),w++;else if(P===t.DBCS_N)b.push(new f(t.Owner,!0)),w++;else if(P===t.DBCS_G)b.push(new a(t.Owner,!0)),w++;else if(P===t.DBCS_Z)b.push(new i(t.Owner,!0)),w++;else if(P===t.DBCS_T)b.push(new c(t.Owner,!0)),w++;else{if(P!=="\\"&&P!=="]"&&P!=="["&&P!=="-"&&P!=="^")return!1;if(S.indexOf(P)!==-1){w++;continue}S+=P,w++}break;default:if(n.length>w+2&&n.charAt(w+1)==="-"){var H=t.GetEscapeCharLength(n.substr(w+2),C,k);C=H.KeyType,k=H.Length;if(H.Result){var _=null,M=16;C===N.OctalAscII?(M=8,_=n.substr(w+2+1,k-1)):_=n.substr(w+2+2,k-2);var B=w+2;n=n.substring(0,B)+n.substr(B+k);var D=String.fromCharCode(parseInt(_,M));n=n.substring(0,B)+D+n.substr(B)}var j,F;n.charAt(w)>n.charAt(w+2)?(j=n.charAt(w+2),F=n.charAt(w)):(j=n.charAt(w),F=n.charAt(w+2));var I=new g(j,F,t.Owner,!0);b.push(I),w+=2;break}if(S.indexOf(T)!==-1){w++;continue}S+=T}w++}S.length>0&&b.push(new m(S,"",t.Owner,!0));var q=b.length;if(v.uf&&v.uf.filterArray.length>0)for(var x=0;x<v.uf.filterArray.length;x++)b.push(d.filterArray[x]);v.uf=new y(t.Owner,!0),v.uf.AddRange(b);for(var x=0;x<q;x++)v.uf.filterArray[x]._include=E;return v.Result=!0,v},t.AnalyseEnumGroup=function(n,r){n=n.Substring(1,1+n.length-2);var i=0,s=0;while(i<n.length){var o=e.Utility.IndexOfAny(n,["|",")","\\","("],i);if(o===-1){var u=n.Substring(s);if(u.length===0)return!1;r.push(u),i=n.length;continue}if(n.charAt(o)==="\\"){var a=n.charAt(o+1);if(a==="\\"||a===")"||a==="|"||a==="("){n=n.Substring(0,o)+n.Substring(o+1,n.length),i=o+1;if(i===n.length){var u=n.Substring(s);if(u.length===0)return!1;r.push(u)}continue}return!1}if(n.charAt(o)==="|"){var u=n.Substring(s,o);if(u.length===0)return!1;r.push(u),i=o+1,s=i;continue}return!1}return!0},t}(),k=function(t){function n(e,n,r){t.call(this,n),this._focusNull="",this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this._owner=e,this.formatIsNull=r}return __extends(n,t),n.prototype.GetShowLiterals=function(){return this._owner.GetShowLiterals()},n.prototype.GetFieldByIndex=function(e){return this.fieldArray[e]},n.prototype.GetLength=function(){var e=this.ValueIsNull();if(e&&this._focusNull!==""&&!this.formatIsNull)return this._focusNull.GetLength();if(e===!0&&this._focusNull!=="")return 0;var t=this.GetLastVisibleFieldIndex(this.GetShowLiterals()),n=0;for(var r=0;r<=t;r++){var i=this.GetFieldByIndex(r);n+=i.GetLength()}return n},n.prototype.GetInputFieldIndexByPos=function(e){var t=null,n=0,r,i=this.GetFieldIndex(e,n);r=i.index,n=i.offset,r!==0&&n===0&&this.fieldArray[r-1].fieldLabel!=="PromptField"&&(r--,n=this.fieldArray[r].text.GetLength());var s=this.fieldArray[r];if(n===s.text.GetLength()){var o;if(n<s._maxLength){t=r;if(t!==this.fieldCount-1)for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField")break}else for(o=r+1;o<this.fieldCount;o++)if(this.fieldArray[o].fieldLabel!=="PromptField"){t=o;break}}else t=r;var u={},a={};if(t){var f=!1;while(f===!1){s=this.fieldArray[t];if(s.fieldLabel==="FilterField")a.fieldMark=s._filter.filterLabel,f=!0;else if(s.fieldLabel==="EnumField")a.fieldMark="Enum",f=!0;else{if(t===this.fieldCount-1){a=null;break}t++}a.fieldIndex=t}}else a=null;return a!=null?(u.currentField=a,u):null},n.prototype.GetCurrentField=function(e){var t={},n=0,r=0;for(var i=0;i<this.fieldCount;i++){var s=this.fieldArray[i];s.fieldLabel==="PromptField"&&r++;var o=s.GetLength();n+=o;if(e<=n)return s.fieldLabel==="PromptField"?e===n-o?t.index=i-r:e===n?t.index=i-r+1:t.index=-1:t.index=i-r,t}},n.prototype.GetText=function(){var e="";for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];e+=n.text}return e},n.prototype.GetTextSimpleMode=function(e){var t="";for(var n=0;n<this.fieldCount;n++){var r=this.fieldArray[n];if(r.fieldLabel==="PromptField"&&!e)continue;t+=r.text}return t},n.prototype.GetExistLength=function(){var e=this.fieldCount,t,n;for(t=this.fieldCount-1;t>=0;t--){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;e=t;break}var r=0;for(t=0;t<=e;t++)n=this.fieldArray[t],t===e?r>=21474e3?r=n._maxLength:r+=n._maxLength:r+=n.text.GetLength();return r},n.prototype.GetNonLiteralsText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?(n=f.text.Substring(r,o),n.GetLength()>f._trueLength&&(n=n.Substring(0,f._trueLength))):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text.Substring(0,f.text.GetLength()))}return n},n.prototype.GetNonPromptText=function(e,t){var n="",r=0,i,s=this.GetFieldIndex(e,r);i=s.index,r=s.offset;var o=0,u;s=this.GetFieldIndex(e+t,o),u=s.index,o=s.offset,u!==0&&o===0&&(u--,o=this.fieldArray[u].text.GetLength());for(var a=i;a<=u;a++){var f=this.fieldArray[a];f.fieldLabel!=="PromptField"&&(i===u?n=f.text.Substring(r,o):a===i?n+=f.text.Substring(r,f.text.GetLength()):a===u?n+=f.text.Substring(0,o):n+=f.text)}return n},n.prototype.ValueIsNull=function(){for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel==="PromptField")continue;if(t.GetFieldStatus()!==0)return!1}return!0},n.prototype.ValueIsFull=function(e){e=e?e:0;var t,n;if(e!=null&&e===1)for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(this.fieldCount===1&&n._minLength===0)return!0;if(n.fieldLabel==="PromptField")continue;if(!n.GetFieldIsFull())return!1}else for(t=0;t<this.fieldCount;t++){n=this.fieldArray[t];if(n.fieldLabel==="PromptField")continue;if(n.GetFieldStatus()!==2)return!1}return!0},n.prototype.GetShowText=function(t,n,r){if(!r){var i=this.ValueIsNull();if(i===!0&&this._focusNull!==""&&n=="")return this._focusNull;if(i===!0&&this._focusNull!==""&&n==null)return"";if(i===!0&&n==="LoseFocus")return this._owner._getDisplayNullExpression()!==null?this._owner._getDisplayNullExpression():this.GetText()}var s=this.GetLastVisibleFieldIndex(t);if(s<0)return"";var o="";for(var u=0;u<s;u++)o+=this.fieldArray[u].text;if(s<this.fieldCount){var a=this.fieldArray[s];a.fieldLabel==="PromptField"||t===e.ShowLiterals.Always?o+=this.fieldArray[s].text:o+=a.text.Substring(0,a._trueLength)}return o},n.prototype.GetLastVisibleFieldIndex=function(t){var n=this.fieldCount-1;if(t!==e.ShowLiterals.Always){var r=this.fieldCount-1,i=!0;for(n=r;n>=0;n--){var s=this.fieldArray[n];if(s.fieldLabel==="PromptField")continue;if(s._trueLength===0){i=!1;continue}if(s._trueLength>0&&s._trueLength<s._minLength)break;if(t===e.ShowLiterals.PostDisplay){i&&(n=r);break}while(n<r&&this.fieldArray[n+1].fieldLabel==="PromptField")n++;break}}return n},n.prototype.GetValue=function(){var e=this.fieldCount-1,t;for(;e>=0;e--){t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t._trueLength!==0)break}if(e<0)return"";var n="";for(var r=0;r<=e;r++){t=this.fieldArray[r];if(t.fieldLabel==="PromptField")continue;var i=t._trueLength,s=t.text,o=s;if(t.fieldLabel==="FilterField"){o=o.Substring(0,i);for(var u=0;u<i;u++)t._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));var a=s.GetLength(),f=o.GetLength();if(i===0&&a!==0){if(r!==e){var l="";for(var c=0;c<a;c++)l+=" ";o=l}}else if(a>f&&r!==e){var l="";for(var c=0;c<a-f;c++)l+=" ";o+=l}}else t._activeItem===-1&&(o=" ");n+=o}return n},n.prototype.GetOldValue=function(){var e="",t;for(var n=0;n<this.fieldCount;n++){t=this.fieldArray[n];if(t.fieldLabel==="PromptField")continue;var r;if(t.fieldLabel==="FilterField"){r=t.undoText;if(t._undoBitState&&t._undoBitState.length>0){var i=!0;for(var s=t._undoBitState.length-1;s>=0;s--)t._undoBitState[s]===!1?i?r=r.Substring(0,r.GetLength()-1):r=r.Substring(0,s)+" "+r.Substring(s+1,r.GetLength()):i=!1}else r=""}else t._undoItem!==-1?r=t.undoText:r="";e+=r}return e},n.prototype.SetValue=function(e,t){if(!e)return this.ClearContent(),!0;var n=!1;return t!=null&&(n=t),this.SetFieldCollectionValue(e,n)?!0:(this.RollBack(),!1)},n.prototype.SetFieldCollectionValue=function(e,t){this.ClearContent();var n=!1;return t!=null&&(n=t),e.GetLength()!==0&&this.Insert(0,e,n,!1),!0},n.prototype.ClearContent=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState();if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.oldText=t.text,t.Delete(0,t.text.GetLength())}},n.prototype.RollBack=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.RollBack()}},n.prototype.SaveOldState=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.SaveOldState()}},n.prototype.SaveUndoState=function(){if(this.formatIsNull){var e=this.fieldArray[0],t=-1;if(this.oldStart===-1)e.SaveUndoState(),t=this.newStart;else{var n=e.text.substr(this.newStart,this.newLength);t=e.undoText.IndexOf(n,this.oldStart),t!==this.oldStart+this.oldLength&&(t=this.newStart,t+this.newLength!==this.oldStart&&e.SaveUndoState())}this.oldStart>0?this.oldStart=Math.min(this.oldStart,t):this.oldStart=t,this.oldLength+=this.newLength}else if(this.fieldCount>0)for(var r=0;r<this.fieldCount;r++){var e=this.fieldArray[r];e.fieldLabel!=="PromptField"&&e.SaveUndoState()}},n.prototype.Undo=function(){this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0;if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];t.fieldLabel!=="PromptField"&&t.Undo()}},n.prototype.PerformSpin=function(e,t,n){var r,i=this.GetFieldIndex(e,r),s=i.index;r=i.offset,this.SaveOldState();if(r>0||this.fieldArray[s].fieldLabel==="EnumField"){r=this.fieldArray[s].PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}else{var a=s,f;for(;a<this.fieldCount;a++){f=this.fieldArray[a];if(f._minLength===0){if(f.text.GetLength()===0)continue;break}if(f.fieldLabel==="EnumField"){r=f.PerformSpin(r,t,n);var o=0;for(var u=0;u<s;u++)o+=this.fieldArray[u].text.GetLength();return e=o+r,e}break}if(s>0){f=this.fieldArray[s-1],r=f.text.GetLength(),r<f._minLength&&(r=f._minLength),r=f.PerformSpin(r,t,n);if(f.fieldLabel==="EnumField"){var o=0;for(var u=0;u<s-1;u++)o+=this.fieldArray[u].text.GetLength();e=o+r}}}return e},n.prototype.Delete=function(e,t){if(this.fieldCount===0)return e;var n=0;this.SaveOldState();var r=this.GetFieldIndex(e,n),i=r.index;n=r.offset,this.fieldArray[i].fieldLabel==="PromptField"&&t>this.fieldArray[i].text.GetLength()-n&&(e+=this.fieldArray[i].text.GetLength()-n,t-=this.fieldArray[i].text.GetLength()-n,i++,n=0),this.newStart=e,this.newLength=t,this.formatIsNull&&this.SaveUndoState();var s=0;r=this.GetFieldIndex(e+t,s);var o=r.index;s=r.offset;while(o!==0&&s===0){var u=this.fieldArray[o-1];if(u.fieldLabel==="PromptField")break;o--,s=this.fieldArray[o].text.GetLength()>this.fieldArray[o]._minLength?this.fieldArray[o].text.GetLength():this.fieldArray[o]._minLength}for(var a=i;a<=o;a++){var u=this.fieldArray[a],f=n;if(i===o)s>n?n=u.Delete(n,s-n):n-=n-s;else if(a===i){var l=u.text.GetLength()-n;l>0&&(n=u.Delete(n,u.text.GetLength()-n))}else a===o?n=u.Delete(n,s):n=u.Delete(n,u.text.GetLength());n!=null&&(e+=n-f),n=0}return e},n.prototype.Replace=function(e,t,n,r){var i={};i.cursorPos=e,i.text=n;var s=this.GetFieldIndex(e,o),o=0,s=0,u={};u=this.GetFieldIndex(e,o),s=u.index,o=u.offset,this.SaveOldState();var a;for(;s<this.fieldCount;s++){a=this.fieldArray[s];if(a._minLength>0||a.text.GetLength()>0)break}while(s!==0&&o===0){if(this.fieldArray[s].fieldLabel!=="PromptField")break;s--,a=this.fieldArray[s],o=a.text.GetLength(),o<a._minLength&&(o=a._minLength)}this.newStart=e,this.newLength=t;var f=0,l;u=this.GetFieldIndex(e+t,f),l=u.index,f=u.offset;var c=0;for(var h=s;h<l;h++)a=this.fieldArray[l-1],c+=a.text.GetLength();c+=f,-w;while(l!==0&&f===0){a=this.fieldArray[l-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;l--,f=this.fieldArray[l].text.GetLength()}var p=n,d=!1,v=e-o;for(var m=s;m<=this.fieldCount-1;m++){d=!1,a=this.fieldArray[m];var g=a.text.GetLength()>a._minLength?a.text.GetLength():a._minLength;if(a.fieldLabel==="PromptField"){g=a.GetLength();if(r){var y=a.text.Substring(o,a.text.GetLength()),b=n.GetLength();n.GetLength()>=y.GetLength()?(n.Substring(0,y.GetLength())!==y&&(d=!0),n=n.Substring(y.GetLength(),n.GetLength()),e+=y.GetLength()):(n.Substring(0,y.GetLength())!==y&&(d=!0),n="",e+=n.GetLength());if(d){T;if(b===n.GetLength())break}}else v+o===e&&(e+=g-o);v+=a.text.GetLength()-o}else{var w=o,E=m===this.fieldCount-1;if(m>l){var S={},E=m===this.fieldCount-1;S=a.Insert(o,n,E),o=S.offset,n=S.text,d=S.existInvalid}else if(s===l){var x={};x=a.Replace(o,f-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===s){var x={};x=a.Replace(o,g-o,n,E),o=x.offset,n=x.text,d=x.existInvalid}else if(m===l){var x={};f-o>0?x=a.Replace(o,f-o,n,E):t>0&&(x=a.Replace(o,t,n,E)),o=x.offset,n=x.text,d=x.existInvalid}else{var x={};x=a.Replace(o,g,n),o=x.offset,n=x.text,d=x.existInvalid}var T=a.GetFieldStatus()!==2;if(T&&d)break;e+=o-w,v+=a._minLength>a.text.GetLength()?a._minLength:a.text.GetLength()}o=0;if(n===""){if(m<l){m++;var h=m,N=0;for(;m<l;m++)this.fieldArray[m].fieldLabel!=="PromptField"&&this.fieldArray[m].Delete(o,this.fieldArray[m].text.GetLength());for(var C=0;C<h;C++){var a=this.fieldArray[C],g=a.GetLength();N+=g}if(e===N&&a._trueLength===a._maxLength)for(;h<=l;h++){if(this.fieldArray[h].fieldLabel!=="PromptField"||h===this.fieldCount-1)break;e+=this.fieldArray[h].text.GetLength()}if(f===0)break;this.fieldArray[l].fieldLabel!=="PromptField"&&this.fieldArray[l].Delete(o,f)}break}}return p===n?(this.RollBack(),i.success=!1):i.success=!0,i.cursorPos=e,i.text=n,i},n.prototype.SetText=function(e,t){var n=0,r={};r.cursorPos=n,r.text=e;if(this.fieldCount===0||!e||n<0)return r;var i=0,s=0,o={};o=this.GetFieldIndex(n,i),s=o.index,i=o.offset;if(i===this.fieldArray[s]._maxLength)return r;while(s!==0&&i===0){var u=this.fieldArray[s-1];if(!(u.fieldLabel!=="PromptField"&&u.text.GetLength()<u._maxLength))break;s--,i=this.fieldArray[s]._trueLength,i<this.fieldArray[s]._minLength&&(i=this.fieldArray[s]._minLength)}var a=!1,f=s,l=n-i;for(;f<this.fieldCount;f++){a=!1;var u=this.fieldArray[f];if(u.fieldLabel==="PromptField"){if(t){var c=u.text.Substring(i,u.text.GetLength()),h=e.GetLength();e.GetLength()>=c.GetLength()?e.Substring(0,c.GetLength())!==c?a=!0:(e=e.Substring(c.GetLength(),e.GetLength()),n+=c.GetLength()):(c.Substring(0,e.GetLength())!==e&&(a=!0),e="",n+=e.GetLength());if(a){m;if(e.GetLength()===h)return r.isValid=!1,r}}else l+i===n&&(n+=u.maxLength-i);l+=u.maxLength-i}else{var p=i,d={},v=f===this.fieldCount-1;d=u.SetTextInternal(e,i,v),this.oldStart=-1,this.oldLength=0,this.newStart=-1,this.newLength=0,this.formatIsNull&&this.SaveUndoState(),i=d.offset,e=d.text,a=d.existInvalid;var m=d.exception;if(a&&m)return r.isValid=!1,r;n+=i-p,l+=u._minLength<u._trueLength?u._trueLength:u._minLength}i=0;if(e.GetLength()===0&&(a||m)){if(!t)break;if(a)return r.isValid=!1,r}}if(f>=this.fieldCount&&e!==""&&e.GetLength()>0)return r.isValid=!1,r;var g=this.GetFieldIndex(n,i),y=g.index,b=g.offset;return f<this.fieldCount&&y===f+1&&b===0&&this.fieldArray[f].text.GetLength()===this.fieldArray[f]._maxLength&&this.fieldArray[f+1].fieldLabel==="PromptField"&&(n+=this.fieldArray[f+1].GetLength()),r.isValid=!0,r.cursorPos=n,r.text=e,r},n.prototype.Insert=function(e,t,n,r){var i={};i.cursorPos=e,i.text=t;if(this.fieldCount===0||!t||e<0)return i;var s=0,o=this.GetFieldIndex(e,s),u=o.index;s=o.offset;if(s===this.fieldArray[u]._maxLength)return i;while(u!==0&&s===0){var a=this.fieldArray[u-1];if(!(a.fieldLabel!=="PromptField"&&a.text.GetLength()<a._maxLength))break;u--,s=this.fieldArray[u]._trueLength;if(s<this.fieldArray[u]._minLength){s=this.fieldArray[u]._minLength,i=this.InsertProcess(u,s,e,t,n);if(i.text==="")return i;if(e===s){u++,s=0;break}}}return this.InsertProcess(u,s,e,t,n,r)},n.prototype.InsertProcess=function(t,n,r,i,s,o){var u={},a=!1,f=t,l=r-n;this.SaveOldState();for(;f<this.fieldCount;f++){a=!1;var c=this.fieldArray[f];if(c.fieldLabel==="PromptField"){if(s){var h=c.text.Substring(n,c.text.GetLength()),p=i.GetLength();i.GetLength()>=h.GetLength()?(i.Substring(0,h.GetLength())!==h&&(a=!0),i=i.Substring(h.GetLength(),i.GetLength()),r+=h.GetLength()):(h.Substring(0,i.GetLength())!==i&&(a=!0),i="",r+=i.GetLength());if(a){g;if(i.GetLength()===p)break}}else r+=c.maxLength-n;l+=c.maxLength-n}else{var d=n,v=f===this.fieldCount-1,m=c.Insert(n,i,v,o);n=m.offset,i=m.text,a=m.existInvalid;var g=m.exception;if(a&&g){if(i===u.text)return u;break}r+=n-d,l+=c._minLength<c._trueLength?c._trueLength:c._minLength}n=0;if(i.GetLength()===0)break}if(f>=this.fieldCount&&i!==""&&i.GetLength()>0&&i===u.text)return u;var y=this.GetFieldIndex(r,n),b=y.index,w=y.offset;return f<this.fieldCount&&b===f+1&&w===0&&this.fieldArray[f].text.GetLength()===this.fieldArray[f]._maxLength&&this.GetShowLiterals()!==e.ShowLiterals.PostDisplay&&this.fieldArray[f+1].fieldLabel==="PromptField"&&f+1!==this.fieldCount-1&&(r+=this.fieldArray[f+1].GetLength()),u.cursorPos=r,u.text=i,u},n.prototype.MoveField=function(e,t){var n=this.GetFieldIndex(e),r=n.index,i=n.offset;if(r===-1)return-1;if(t){if(r===this.fieldCount-1)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r<this.fieldCount)r++;if(r===this.fieldCount-1)return-1;r++;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===this.fieldCount-1)return-1;r++}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s}if(r===0||r===1&&i===0)return-1;while(this.GetFieldByIndex(r).text.GetLength()===0&&r>0)r--;if(r===0)return-1;r--;if(this.GetFieldByIndex(r).fieldLabel==="PromptField"){if(r===0)return-1;r--}var s=0;for(var o=0;o<r;o++)s+=this.GetFieldByIndex(o).GetLength();return s},n.prototype.GetPosByCurrentField=function(e){if(e==null)return null;var t=0,n=-1,r=!1;for(;t<this.fieldCount;t++){var i=this.fieldArray[t];i.fieldLabel!=="PromptField"&&n++;if(n===e){r=!0;break}}if(r)return this.GetFieldRange(t);if(n===-1)return null;t>=this.fieldCount&&(t=this.fieldCount-1);while(this.fieldArray[t].fieldLabel==="PromptField")t--;return this.GetFieldRange(t)},n.prototype.GetFirstInputPosition=function(){var e=this.ValueIsNull();return e&&this._focusNull!==""&&!this.formatIsNull?0:this.fieldArray[0].fieldLabel==="PromptField"?this.GetFieldRange(1).start:0},n.prototype.GetTotalInputFieldCount=function(){var e=0;if(this.fieldCount>0)for(var t=0;t<this.fieldCount;t++){var n=this.fieldArray[t];n.fieldLabel!=="PromptField"&&e++}return e},n.prototype.GetFieldIndexByPos=function(e){return this.GetFieldIndex(e)},n.prototype.CanUndo=function(){if(this.fieldCount>0)for(var e=0;e<this.fieldCount;e++){var t=this.fieldArray[e];if(t.fieldLabel!=="PromptField"&&t.undoTempText!==t.text)return!0}return!1},n.prototype.GetRealFieldRange=function(e){var t={};t.start=0,t.length=0;var n=0,r=-1,i=-1;for(var s=0;s<this.fieldCount;s++){this.fieldArray[s].fieldLabel!=="PromptField"&&r++;if(r===e){i=s;break}}for(var s=0;s<i;s++){var o=this.GetFieldByIndex(s);n+=o.GetLength()}var u=this.GetFieldByIndex(i);return u?(t.start=n,t.length=u.GetLength(),t):t},n.prototype.PushBack=function(e){this.Add(e),this.fieldCount++},n}(x);e.MaskFieldCollection=k;var L=function(t){function n(e){t.call(this),this.OldPosition=0,this.IsFocus=!1,this.isSelectionDeterminedByHighlightText=!1,this.Format=null,e.HelpID!=null&&(this.HelpID=e.HelpID),e.Owner&&(this.Owner=e.Owner)}return __extends(n,t),n.prototype.GetCurrentField=function(e){var t=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&t!=null&&(this.Format.Fields._focusNull!==""&&t===this.Format.Fields._focusNull||t!=null&&t=="")){var n={};return n.index=-1,n}return this.Format.Fields.GetCurrentField(e)},n.prototype.FocusInternal=function(t,n,r,i,s){var o={},u=this.GetShowText(this.GetShowLiterals());this.OldValue=this.Format.Fields.GetText(),this.isMulSelected=!1,this.isDblClick=!1,this.isTriClick=!1,o.SelectionStart=s,t===e.FocusType.Click&&(o.SelectionStart=e.Utility.GetCursorPosition(n),o.SelectionEnd=o.SelectionStart),o.Text=u,this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!==""&&o.Text===this.Format.Fields._focusNull&&(o.SelectionStart=0,o.SelectionEnd=0),this.Format.Fields.ValueIsNull()&&this.Format.Fields._owner._getDisplayNullExpression()!==null&&(o.SelectionStart=0,o.SelectionEnd=0);if(o.SelectionStart===-1||o.SelectionStart>o.Text.GetLength())o.SelectionStart=0,o.SelectionEnd=0;t===e.FocusType.Left?(o.SelectionStart=0,o.SelectionEnd=0):t===e.FocusType.Right&&(o.SelectionStart=o.Text.GetLength(),o.SelectionEnd=o.Text.GetLength());var a=o.SelectionStart;if(t!==e.FocusType.SpinButton&&t!==e.FocusType.ContextMenu&&t!==e.FocusType.ClientEvent&&t!==e.FocusType.ImeInput&&(r!==e.HighlightText.None||i!==-1))if(this.Format.Fields.ValueIsNull()&&o.Text!=null&&this.Format.Fields._focusNull!=""&&o.Text===this.Format.Fields._focusNull)o.SelectionEnd=o.Text.GetLength();else{var f=this.SetCursorPositionAndSelection(r,"",i,a);f!=null&&(o.SelectionStart=f.SelectionStart,o.SelectionEnd=f.SelectionEnd)}return o.SelectionStart!=null&&(this.OldPosition=o.SelectionStart),this.IsFocus=!0,o},n.prototype.SetCursorPositionAndSelection=function(t,n,r,i){var s;if(t===e.HighlightText.All)this.isSelectionDeterminedByHighlightText=!0,s=this.SelectAll();else if(t===e.HighlightText.Field){this.isSelectionDeterminedByHighlightText=!0;if(r<=-1)if(i>0){var o=this.Format.Fields.GetFieldIndex(i).index,u=this.Format.Fields.fieldArray[o];u.fieldLabel==="PromptField"&&(o===this.Format.Fields.fieldCount-1?o--:o++);var a=this.Format.Fields.GetFieldRange(o);s={},s.SelectionStart=a.start,s.SelectionEnd=a.length+a.start}else s=this.GetPosByCurrentField(i);else s=this.GetPosByCurrentField(r)}else s=this.GetPosByCurrentField(r),s!=null&&(s.SelectionStart=s.SelectionStart,s.SelectionEnd=s.SelectionStart);return s},n.prototype.GetPosByCurrentField=function(e){var t={},n=this.Format.Fields.GetPosByCurrentField(e);return n!=null&&n!=-1?(t.SelectionStart=n.start,t.SelectionEnd=n.start+n.length,t):null},n.prototype.LoseFocus=function(){var e={};return this.Owner._getFormatIsNull()!=1&&this.Format.Fields.SaveUndoState(),e.Text=this.GetShowText(this.GetShowLiterals(),"LoseFocus"),e.Value=this.Format.Fields.GetValue(),this.IsFocus=!1,e},n.prototype.GetSepText=function(){if(this.Owner._getFormatIsNull())return this.Format.Fields.GetText();var t="",n=this.Format.Fields.fieldCount-1;for(var r=0;r<=n;r++){var i=this.Format.Fields.fieldArray[r];if(i.fieldLabel==="PromptField")continue;var s=i._trueLength,o=i.text;if(i.fieldLabel==="FilterField")for(var u=0;u<s;u++)i._bitState[u]===!1&&(o=o.Substring(0,u)+" "+o.Substring(u+1,o.GetLength()));else i._activeItem===-1&&(o="");if(r!=n){var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+e.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=e.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}t+=a+e.Utility.Hold+";"}else{var a=o.Substring(0,s);a=a.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\");if(i.fieldLabel==="FilterField"&&!this.Owner._getFormatIsNull()){var f=o.Substring(0,s);for(var u=0;u<s;u++)i._bitState[u]===!1&&(f=f.Substring(0,u)+e.Utility.MaskValChar+f.Substring(u+1,f.GetLength()));a+=e.Utility.Hold+","+f.replace(/'/g,"@#GCD#@").replace(/"/g,"@#GCM#@").replace(/,/g,"@#GCC#@").replace(/@#GCF#@/g,"\\")}t+=a}}return t},n.prototype.SetSepText=function(t){if(!t){for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;r.Clear()}return!0}var i=e.Utility.Hold+";",s=t.split(i);for(var o=0;o<s.length;o++)s[o]=s[o].replace(/@#GCC#@/g,",").replace(/@#GCD#@/g,"'").replace(/@#GCM#@/g,'"');var u=!1,a=0;for(var n=0;n<this.Format.Fields.fieldCount;n++){var r=this.Format.Fields.fieldArray[n];if(r.fieldLabel==="PromptField")continue;if(a<s.length){var f=s[a].split(e.Utility.Hold+","),l=f[0],c="";if(f.length>1){c=f[1];if(c&&c!=""&&l!=c){var h=0,p=l.IndexOf(" ",h);while(p!=-1)c.Substring(p,p+1)===e.Utility.MaskValChar&&(l=l.Substring(0,p)+this.Owner.GetPromptChar()+l.Substring(p+1,l.GetLength())),h=p,p=l.IndexOf(" ",h)}}u=a===this.Format.Fields.fieldCount-1;var d=l.GetLength();if(d<r._minLength)for(var o=0;o<r._minLength-d;o++)l+=this.Owner.GetPromptChar(),c+=e.Utility.MaskValChar;var v;r.fieldLabel==="FilterField"?v=r.SetTextInternal(l,0,u,c):v=r.SetTextInternal(l,0,u);if(v.existInvalid&&v.exception)return!1;a++}else r.Clear()}return!0},n.prototype.ProcessShortcutKey=function(e,n,r){var i={};switch(e){case"Clear":return n||this.Format.Fields.ClearContent(),i.SelectionStart=this.Format.Fields.GetFirstInputPosition(),i.SelectionEnd=i.SelectionStart,i.Text=this.GetShowText(this.GetShowLiterals()),i;case"NextField":if(this.IsLastInputField(r,!0))return!0;break;case"PreviousField":if(this.IsLastInputField(r,!1))return!0}return i=t.prototype.ProcessShortcutKey.call(this,e,n,r),i},n.prototype.KeyDown=function(n){var r=n.KeyCode,i=t.prototype.KeyDown.call(this,n);r===27&&this.Owner.Clear();if(n.KeyAction!=null)return i;if(n.ReadOnly===!0)return i;if(r!=undefined&&r!=null){if(r>=48&&r<=57||r>=65&&r<=90||r>=96&&r<=105||r===0||r===229||r===231)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(r===32||r===106||r===107||r===109||r===110||r===111||r===219||r===220||r===221||r===222||r>=186&&r<=192||r===226)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!e.Utility.IsIE()&&(r===61||r===59))return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;var s=r;n.FuncKeysPressed.Shift&&r!=65552&&(s=r-65536),r>65600&&r<65627&&(s=r-65536);if(s>=48&&s<=57||s>=65&&s<=90||s>=96&&s<=105||s===229||s===0||s===231)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(s===32||s===106||s===107||s===109||s===110||s===111||s===219||s===220||s===221||s===222||s>=186&&s<=192||s===226)return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i;if(!e.Utility.IsIE()&&(s===61||s===59))return i||(i={}),A.Mask_ImeResponse=!0,i.inputChar=!0,i}return i},n.prototype.KeyPressInternal=function(e,t,n,r,i){if(A.Mask_ImeResponse===!0){A.Mask_ImeResponse=!1;var s={};this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&(t=0,n=0);var o=this.ProcessCharKey(t,n,i,r);if(o.success){s.SelectionStart=o.start,s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1;if(this.moveFocusExitOnLastChar){var u=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");u!=null&&(s.EventInfo=u.EventInfo,s.FocusType=u.FocusType,s.FocusExit=!0),this.moveFocusExitOnLastChar=!1}}else s.SelectionStart=o.start,s.SelectionEnd=Math.max(t,n),s.Text=this.GetShowText(this.GetShowLiterals()),s.EventInfo=o.EventInfo,s.exception=!0,this.moveFocusExitOnLastChar&&(s.FocusExit=!0,this.moveFocusExitOnLastChar=!1);return s}return!1},n.prototype.ProcessCharKey=function(e,n,r,i){var s=t.prototype.ProcessCharKey.call(this,e,n,r,i),o=Math.min(e,n);return s.success&&(o=s.start),i&&(this.moveFocusExitOnLastChar=!1,o===this.Format.Fields.GetExistLength()&&(this.moveFocusExitOnLastChar=!0)),s},n.prototype.ContextMenu=function(){},n.prototype.Click=function(){},n.prototype.Undo=function(e){var t={};return this.Format.Fields.Undo(),t.SelectionStart=this.OldPosition,t.SelectionEnd=this.OldPosition,this.OldPosition=e,t.Value=this.Format.Fields.GetText(),t.Text=this.GetShowText(this.GetShowLiterals()),t},n.prototype.Paste=function(t,n,r,i,s){var o={};o.SelectionStart=t,o.SelectionEnd=n;var u;s!=null&&s===!0?u=r:this.Owner?(u=e.Utility.GetPasteData(this.Owner.GetUseClipboard()),u=this.UpdateCrLfString(u,this.Owner.GetAcceptsCrlf())):u=e.Utility.GetPasteData(!0);var a=null;u!=null&&(u.IndexOf("\r")!=-1&&(u=u.Substring(0,u.IndexOf("\r"))),u.IndexOf("\n")!=-1&&(u=u.Substring(0,u.IndexOf("\n"))));if(!u)return o;this.FireClientEvent("OnBeforePaste");var f=Math.min(t,n),l=Math.max(t,n),c=l-f;if(f===l)o.SelectionStart=this.Format.Fields.Insert(f,u,!1).cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),o.SelectionEnd=o.SelectionStart;else{var h=this.GetShowText(this.GetShowLiterals());h!=null&&this.Format.Fields._focusNull!=""&&h===this.Format.Fields._focusNull&&this.Format.Fields.fieldArray[0].text!=h?a=this.Format.Fields.Insert(0,u,!1):a=this.Format.Fields.Replace(f,c,u,!1),o.SelectionStart=a.cursorPos,o.Text=this.GetShowText(this.GetShowLiterals()),h===o.Text&&a.success===!1?(o.SelectionStart=f,o.SelectionEnd=l):o.SelectionEnd=o.SelectionStart}if(o.Text.Substring(f,f+u.GetLength())!=u&&o.SelectionStart-f<u.GetLength()&&this.InvalidInput!=""){var p={};p.Name=this.InvalidInput,p.Args=null,p.Type="InvalidInput",o.EventInfo=p}if(i)if(o.SelectionStart===this.Format.Fields.GetExistLength())this.moveFocusExitOnLastChar=!0;else{var d=this.Format.Fields.GetFieldIndex(o.SelectionStart),v=d.index,m=d.offset;v===this.Format.Fields.fieldCount-1&&m===0&&this.Format.Fields.GetFieldByIndex(v).fieldLabel==="PromptField"&&(this.moveFocusExitOnLastChar=!0)}if(this.moveFocusExitOnLastChar){var g=this.MoveControl(this.GetElementId(),!0,!1,"CharInput");g!=null&&(o.EventInfo=g.EventInfo,o.FocusType=g.FocusType,o.FocusExit=!0),this.moveFocusExitOnLastChar=!1}return o.SelectionStart!=f&&this.FireClientEvent("OnPaste"),o},n.prototype.UpdateCrLfString=function(t,n){return n!==e.CrLfMode.NoControl?e.BaseUIProcess.UpdateCrLfString(t,n):e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Cut)},n.prototype.DragStart=function(){},n.prototype.DragEnd=function(){},n.prototype.DragOver=function(){},n.prototype.DragInit=function(){},n.prototype.SetValue=function(e){this.Format.Fields.SetValue(e)},n.prototype.GetShowText=function(e,t,n){var r="";return t?t==="LoseFocus"&&(r=this.Format.Fields.GetShowText(e,"LoseFocus",n)):r=this.Format.Fields.GetShowText(e,"",n),r},n.prototype.ProcessBackSpaceKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===0&&r===0)return i;var s,o,u=this.Format.Fields.GetFieldIndex(n);s=u.index,o=u.offset;if(s===-1)return i;if(r===0){var a=this.Format.Fields.GetFieldByIndex(s);if(s===0&&o===0)return i;while((o===0||a.fieldLabel==="PromptField")&&s>0)s--,r+=o,a=this.Format.Fields.GetFieldByIndex(s),o=a.GetLength(),a.fieldLabel==="PromptField"&&(r+=o,o=0);if(s===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;if(this.Format.Fields.GetFieldByIndex(s).GetLength()===0)return i}if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="FilterField")r+=1,n-=r,r=1;else{if(this.Format.Fields.GetFieldByIndex(s).fieldLabel!=="EnumField")return i;r+=this.Format.Fields.GetFieldByIndex(s).GetLength(),n-=r,n=n>0?n:0}n=this.Format.Fields.Delete(n,r),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var f;u=this.Format.Fields.GetFieldIndex(n+r),f=u.index;if(f===-1)return i;o===0&&s!=0&&s--;if(s===f&&this.Format.Fields.GetFieldByIndex(f).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},n.prototype.PerformSpinInternal=function(e,t,n,r,i){if(this.Format.Fields.fieldCount<=0)return null;var s={};s.SelectionStart=e,s.SelectionEnd=t,s.Text=this.GetShowText(this.GetShowLiterals());var o=this.Format.Fields.GetFieldIndex(t),u=o.index,a=o.offset;u!=0&&a===0&&(e===t?this.Format.Fields.fieldArray[u].fieldLabel!="EnumField"&&u--:e<t&&u--);if(this.Format.Fields.fieldArray[u].fieldLabel=="EnumField"||this.Format.Fields.fieldArray[u].text.GetLength()==0)i?s.SelectionStart=this.Format.Fields.PerformSpin(t,n,r):s.SelectionStart=this.Format.Fields.PerformSpin(t,-n,r),s.SelectionEnd=s.SelectionStart,s.Text=this.GetShowText(this.GetShowLiterals());if(i){if(this.SpinUp!=""){var f={};f.Name=this.SpinUp,f.Args=null,f.Type="SpinUp",s.EventInfo=f}}else if(this.SpinDown!=""){var f={};f.Name=this.SpinDown,f.Args=null,f.Type="SpinDown",s.EventInfo=f}return s},n.prototype.ProcessBackSpace=function(e,t){var n=this.ProcessBackSpaceKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},n.prototype.ProcessDeleteKey=function(e,t){var n=Math.min(e,t),r=Math.abs(e-t),i={};i.SelectionStart=n,i.SelectionEnd=n+r;if(n===this.Format.Fields.GetLength()&&r===0)return i;var s,o=this.Format.Fields.GetFieldIndex(n);s=o.index;if(s===-1)return i;if(r===0){if(this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;n=this.Format.Fields.Delete(n,1),i.SelectionStart=n,i.SelectionEnd=i.SelectionStart}else{var u,a;o=this.Format.Fields.GetFieldIndex(n+r),u=o.offset,a=o.index;if(a===-1)return i;u===0&&a--;if(s===a&&this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField")return i;i.SelectionStart=this.Format.Fields.Delete(n,r),i.SelectionEnd=i.SelectionStart}return i},n.prototype.ProcessDelete=function(e,t){var n=this.ProcessDeleteKey(e,t);return n.Text=this.GetShowText(this.GetShowLiterals()),this.isMulSelected=!1,n},n.prototype.GetNullCasePosition=function(e,t){var n=this.Format.Fields;switch(t){case 36:case 65572:case 131109:case 196645:case 196644:case 131108:e=0;break;case 35:case 65571:e=n.GetLength();break;case 65573:case 37:e!=0&&e--;break;case 39:case 65575:e!=n.GetLength()&&e++;break;case 131111:case 196647:case 196643:case 131107:e=n.GetLength();break;case 131118:case 131080:case 196616:return e}return e},n.prototype.GetCaretPosition=function(n,r){if(this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!="")return this.GetNullCasePosition(n,r);var i=this.Format.Fields,s=i.GetFieldIndex(n),o=s.index,u,a,f=0,l=0;for(l=0;l<i.fieldCount;l++)if(i.GetFieldByIndex(l).fieldLabel!="PromptField"){a=i.GetFieldRange(l).start;break}var c=i.GetLastVisibleFieldIndex(this.GetShowLiterals());if(this.ShowLiterals===e.ShowLiterals.PreDisplay)for(l=c;l>=0;l--)i.GetFieldByIndex(l).fieldLabel!="PromptField"&&(f+=i.GetFieldByIndex(l)._trueLength);else for(l=c;l>=0;l--)if(i.GetFieldByIndex(l).fieldLabel!="PromptField"){u=i.GetFieldRange(l),f=u.start+u.length;break}var h=n;n=t.prototype.GetCaretPosition.call(this,n,r,a,f,"PromptField");var s=i.GetFieldIndexByPos(h),o=s.index,u;if(r===196647&&n===h){for(;o<c;o++){u=i.GetFieldRange(o+1),n=u.start;if(n>a)break}o===c&&(n+=u.length)}if(r===131111&&i.GetFieldByIndex(o).fieldLabel!="PromptField"&&i.GetFieldRange(o).length===0){while(i.GetFieldRange(o).length===0&&o<i.fieldCount-1)o++;for(l=o+1;l<i.fieldCount;l++)if(i.GetFieldByIndex(l).fieldLabel!="PromptField")return u=i.GetFieldRange(l),u.start}return n},n.prototype.ProcessTabKey=function(n,r,i){var s;return i!==e.TabAction.Field||!!this.Format.Fields.ValueIsNull()&&this.Format.Fields._focusNull!=""&&this.GetShowText(this.GetShowLiterals())===this.Format.Fields._focusNull?s=t.prototype.ProcessTabKey.call(this,n,r,i):s=this.MoveFieldAndControl(n,r),s},n.prototype.ProcessLeftDirection=function(e,t,n){var r={};!this.isMulSelected||n===36||n===131108?(r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart):(r.SelectionStart=Math.min(e,t),r.SelectionEnd=r.SelectionStart);if(n===37||n===131109){if(!this.Format.Fields.ValueIsNull()||this.Format.Fields._focusNull=="")if(r.SelectionStart>0){var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&this.isMulSelected===!1&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return this.isMulSelected=!1,r}this.isMulSelected=!1;if(!this.isMulSelected||n===36||n===131108)r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart;else{r.SelectionStart=Math.min(e,t);var i=this.Format.Fields.GetFieldIndex(r.SelectionStart),s=i.index,o=i.offset;this.Format.Fields.GetFieldByIndex(s).fieldLabel==="PromptField"&&(r.SelectionStart-=o),r.SelectionEnd=r.SelectionStart}return r},n.prototype.ProcessRightDirection=function(e,t,n){var r={};if(!this.isMulSelected||n===35||n===131107)return r.SelectionStart=this.GetCaretPosition(t,n),r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;r.SelectionStart=Math.max(e,t);if(this.Format.Fields.ValueIsNull()===!0&&this.Format.Fields._focusNull!="")return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r;var i,s,o=this.Format.Fields.GetFieldIndex(r.SelectionStart);i=o.index,s=o.offset;if(this.Format.Fields.GetFieldByIndex(i).fieldLabel==="PromptField"&&this.isMulSelected===!1){var u=this.Format.Fields.fieldArray[i];r.SelectionStart+=u.text.GetLength()-s}return r.SelectionEnd=r.SelectionStart,this.isMulSelected=!1,r},n.prototype.IsLastInputField=function(e,t){var n=this.Format.Fields.GetFieldIndex(e,0),r=n.index;if(t){while(r<this.Format.Fields.fieldCount-1&&this.Format.Fields.fieldArray[r+1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r+1].text.GetLength()===0)r++;var i=this.Format.Fields.fieldCount-1;for(;i>r;i--)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1}while(r>0&&this.Format.Fields.fieldArray[r-1].fieldLabel!="PromptField"&&this.Format.Fields.fieldArray[r-1].text.GetLength()===0)r--;var i=0;for(;i<r;i++)if(this.Format.Fields.fieldArray[i].fieldLabel!="PromptField")break;return i===r?!0:!1},n.prototype.DoubleClick=function(e){var n={},r=this.GetShowText(this.GetShowLiterals());if(this.Format.Fields.ValueIsNull()&&r!=null&&(this.Format.Fields._focusNull!=""&&r===this.Format.Fields._focusNull||r!=null&&r=="")){var r=this.GetShowText(this.GetShowLiterals());n.SelectionStart=0,n.SelectionEnd=r.GetLength()}else n=t.prototype.DoubleClick.call(this,e);return n},n}(e.BaseUIProcess);e.MaskUIProcess=L;var A=function(n){function r(){n.call(this),this.IMControlType="Mask",this._promptChar="_",this._autoConvert=!0,this._displayNull=null,this._null="",this._formatPattern="",this._exitOnLastChar=!1,this._displayNullExpresson=null,this._showLiterals=e.ShowLiterals.Always,this._tabAction=e.TabAction.Control,this._hideEnter=!1,this._hidePromptOnLeave=!1,this._textWithPromptChar=null,this.PerformSpin=function(e){var t=this.Spin.Increment,n=!0;e==="down"&&(n=!1),this.PerformSpinProcess(this.SelectionStart,this.SelectionEnd,t,this.Spin.Wrap,n,!0),this.UIUpdate.SetFocus(),this.SetSelection(this.SelectionStart,this.SelectionEnd)},this.Init()}return __extends(r,n),r.Mask_ImeResponse=!1,r.prototype.AttachInput=function(e){this.InputElement=e,this.AddAllEventsHandler()},r.prototype.DetachInput=function(){t(this.InputElement).unbind(".wijinput"),this.InputElement=null},r.prototype.GetAutoConvert=function(){return this._autoConvert},r.prototype.SetAutoConvert=function(e){this._autoConvert=e},r.prototype.GetExitOnLastChar=function(){return this._exitOnLastChar},r.prototype.SetExitOnLastChar=function(t){t=e.Utility.CheckBool(t),this._exitOnLastChar=t},r.prototype.GetNull=function(){return this._null},r.prototype.SetNull=function(e){if(e!==this._null){var t=C.ParseFillExpression(e,this.Format.Fields);t.Expression===null?this.Format.Fields._focusNull=e:this.Format.Fields._focusNull=t.Expression,this._null=e}},r.prototype._getDisplayNullExpression=function(){return this._displayNullExpresson!==null?this._displayNullExpresson:this._displayNull},r.prototype.GetDisplayNull=function(){return this._displayNull},r.prototype.SetDisplayNull=function(t){t===undefined&&(t=null),t!==null&&(t=e.Utility.CheckString(t));if(t!==this._displayNull){var n=C.ParseFillExpression(t,this.Format.Fields);this._displayNullExpresson=n.Expression,this._displayNull=t;var r=this.GetValue();this.SetValue(r)}},r.prototype.GetFormatPattern=function(){return this._formatPattern},r.prototype.SetFormatPattern=function(t){t=e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Filter);if(t!==this._formatPattern)try{var n=C.ParseFormat(t,this);this.Clear(),this.Format.Fields=n,this.ResetNullAndDispalyNull(),this.FormatIsNull=this.Format.Fields.formatIsNull,this.Clear(),this.SetSelectionStart(0),this._formatPattern=t;var r=this.GetDisplayText();this.UpdateDisplayText(r)}catch(i){throw"Format pattern is invalid"}},r.prototype.ResetNullAndDispalyNull=function(){var e=C.ParseFillExpression(this.GetNull(),this.Format.Fields);e.Expression===null?this.Format.Fields._focusNull=this.GetNull():this.Format.Fields._focusNull=e.Expression,e=C.ParseFillExpression(this.GetDisplayNull(),this.Format.Fields),this._displayNullExpresson=e.Expression},r.prototype.GetPromptChar=function(){return this._promptChar},r.prototype.SetPromptChar=function(e){e||(e="_"),e.length>1&&(e=e.charAt(0));if(e!==this._promptChar){this._promptChar=e;var t=this.GetValue();this.SetValue(t)}},r.prototype.GetShowLiterals=function(){return this._showLiterals},r.prototype.SetShowLiterals=function(e){if(e!=this._showLiterals){this._showLiterals=e;var t=this.GetValue();this.SetValue(t)}},r.prototype.GetTabAction=function(){return this._tabAction},r.prototype.SetTabAction=function(e){this._tabAction=e},r.prototype.GetCursorPosition=function(){return this.CursorPosition},r.prototype.SetCursorPosition=function(t){t=e.Utility.CheckInt(t,-1,Math.pow(2,31)),t=Math.min(t,this.Format.Fields.GetTotalInputFieldCount()-1),t!==this.CursorPosition&&(this.CursorPosition=t)},r.prototype.Init=function(){this._autoConvert=!0,this.FormatIsNull=!0,this.CursorPosition=-1,this.truePosition=-1,this.japInput=!1,this.ImeMode=!1,this.IsImplementImeInput=!1,this.IsJapanConvertKeyPress=!1,this.HelpID="__"+this.ID+"_State",this.IsDragDrop=!1;var t={};t.ID=this.ID,t.HelpID=this.HelpID,t.Owner=this,this.UIProcess=this._createUIProcess(t),this.Format.Fields=C.ParseFormat("",this),this.FormatIsNull=this.Format.Fields.formatIsNull,this.UIProcess.Format=this.Format,this.NewSelectionStart=0,this.NewSelectionEnd=0,this.IsInUpdatePanelAndAsyncPostBack||this.UIUpdate&&(this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(this.UIUpdate.GetText(),!0)),this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.MouseButton=e.MouseButton.Default,this.FocusType=e.FocusType.None;if(this.IsInUpdatePanelAndAsyncPostBack){var n=this.UIUpdate.GetText();if(n!=this.UIProcess.GetShowText(this.GetShowLiterals(),null,true)&&n!=this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus",false))if(this.ShowLiterals===e.ShowLiterals.Always)this.UIProcess.Format.Fields.ClearContent(),this.UIProcess.Format.Fields.SetText(n,!0),this.SetHideValue();else{this.UIProcess.Format.Fields.ClearContent();var r=this.UIProcess.GetShowText("Always",null,!0);n.GetLength()<r.GetLength()&&(n+=r.Substring(n.GetLength(),r.GetLength())),this.UIProcess.Format.Fields.SetText(n,!0),this.SetHideValue()}this.Text=this.UIProcess.Format.Fields.GetText(),this.Value=this.UIProcess.Format.Fields.GetValue(),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText()}this.UIUpdate&&(this.DisplayText=this.GetTextboxValue()),this.LastStart=0,this.LastEnd=0,this.OrientText="",this.ImeSelect=!1,this.ImeSelectTimes=0,this.Type="Mask",this.UIUpdate&&this.ReLoadData()},r.prototype._createUIProcess=function(e){return new L(e)},r.prototype.Clear=function(){this.SetValue(""),this.SelectionStart=this.SelectionEnd=this.Format.Fields.GetFirstInputPosition()},r.prototype.SetValue=function(t){t&&(typeof t!="string"&&(t=t.toString()),this.FormatIsNull&&(t=t.replace(/[\r\n]/g,"")),t=e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Filter)),this.UIProcess.Format.Fields.SetValue(t,!1)&&this.AfterSetTextValue()},r.prototype.GetValue=function(){return this.Value},r.prototype.GetSelectedText=function(){var t=Math.min(this.SelectionStart,this.SelectionEnd),n=Math.max(this.SelectionStart,this.SelectionEnd),r=this.Text.Substring(t,n);if(this.GetClipContent()===e.ClipContent.ExcludeLiterals){var i=Math.min(this.SelectionStart,this.SelectionEnd),s=this.GetSelectionLength();r=this.UIProcess.Format.Fields.GetNonPromptText(i,s)}return r},r.prototype.SetSelectedText=function(e){if(!e)return;var t=this.Value,n=this.Text;this.UIProcess.Paste(this.SelectionStart,this.SelectionEnd,e,!1,!0);var r={};r.Text=this.GetDisplayText("Focus");if(!this.UpdateText(r))return;this.UpdateDisplayText(this.Text),this.Value=this.UIProcess.Format.Fields.GetValue(),this.Text!=n&&this.FireClientEvent("TextChanged",null),this.Value!=t&&this.FireClientEvent("ValueChanged",null)},r.prototype.SetText=function(t){try{this.ShowPromptChar(),this.Value=this.UIProcess.Format.Fields.GetValue();if(!t){this.SetValue("");return}if(t===this.UIProcess.Format.Fields._focusNull&&!this.UIProcess.Format.Fields.formatIsNull){this.SetValue("");return}this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull&&(t=t.replace(/[\r\n]/g,"")),t=e.BaseUIProcess.UpdateCrLfString(t,e.CrLfMode.Filter),this.UIProcess.Format.Fields.SetText(t,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.AfterSetTextValue()}finally{this.HidePromptChar()}},r.prototype.AfterSetTextValue=function(){var e=this.Value,t=this.Text,n={};n.Text=this.GetDisplayText("Focus");if(!this.UpdateText(n))return;this.Value=this.UIProcess.Format.Fields.GetValue(),this.UpdateDisplayText(this.GetDisplayText()),this.Text!=t&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),this.FireClientEvent("TextChanged",null)),this.Value!=e&&this.FireClientEvent("ValueChanged",null)},r.prototype.GetText=function(){return this.GetDisplayText("Focus")},r.prototype.GetDisplayText=function(e){return e?e==="Focus"?this.UIProcess.GetShowText(this.GetShowLiterals()):"":this.UIProcess.GetShowText(this.GetShowLiterals(),"LoseFocus")},r.prototype.GetCurrentField=function(){return this.UIProcess.GetCurrentField(this.SelectionEnd)!=null?this.UIProcess.GetCurrentField(this.SelectionEnd).index:0},r.prototype.GetValueIsFull=function(){return this.UIProcess.Format.Fields.ValueIsFull(1)},r.prototype._getFormatIsNull=function(){return this.FormatIsNull},r.prototype.FireClientEvent=function(e,t){var n="";switch(e){case"TextChanged":this.TextChanged!=""&&(n=this.TextChanged);break;case"ValueChanged":this.ValueChanged!=""&&(n=this.ValueChanged);break;default:return}return this.UIProcess.FireEvent(this,n,t,e)},r.prototype.Focus=function(){this.ShowPromptChar(),!this.IsDragDrop&&this.FocusType!=e.FocusType.ClientEvent&&this.FocusType!=e.FocusType.SpinButton&&(this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText());if(this.UIProcess.Format.Fields.fieldCount>0){var t=this.UIProcess.FocusInternal(this.FocusType,this.InputElement,this.GetHighlightText(),this.CursorPosition,this.SelectionStart);if(!t)return;t.Text!=null&&(this.Text=t.Text),t.SelectionStart!=null&&this.NeedReCalCursorPos&&(this.SelectionStart=t.SelectionStart),t.SelectionEnd!=null&&this.NeedReCalCursorPos&&(this.SelectionEnd=t.SelectionEnd,this.SelectionLength=this.GetSelectionLength()),this.NeedReCalCursorPos||(this.NeedReCalCursorPos=!0),this.japInput===!0&&(this.truePosition!=-1&&(this.SelectionStart=this.truePosition,this.SelectionEnd=this.truePosition),this.japInput=!1),this.GetReadOnly()===!0&&this.FocusType===e.FocusType.None&&(this.SelectionStart=0,this.SelectionEnd=this.Text.length),this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd,!0),!this.IsDragDrop&&this.FocusType!=e.FocusType.ClientEvent&&this.FocusType!=e.FocusType.SpinButton&&this.FocusType!=e.FocusType.DropDown&&(this.OldValue=this.Value)}else this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),this.OldValue=this.Value;this.IsDragDrop=!1},r.prototype._shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},r.prototype.LoseFocus=function(){this.FireKeyExit();var t=this.ImeMode;e.Utility.IsIE()?this.ImeInput("LoseFocusInput"):this.ImeInput("ReInput",!0);if(this.SpinBtnPressed)return;this.SetLastClientValues();var n=this.UIProcess.LoseFocus();this.DisplayText=n.Text,this.Value=n.Value,this.Text=this.UIProcess.Format.Fields.GetText(),(e.Utility.IsIE()||!t)&&this.UpdateDisplayText(this.DisplayText),!e.Utility.IsIE()&&t&&this.UpdateDisplayText(this.DisplayText),this.FocusType=e.FocusType.None;var r;n.EventInfo!=null&&(r=this.UIProcess.FireEvent(this,n.EventInfo.Name,n.EventInfo.Args,n.EventInfo.Type),r!=null&&(this.FocusType=r));var i=this;!e.Utility.IsIE()&&this.DisplayText!=this.UIUpdate.GetText()&&t&&window.setTimeout(function(){i.UpdateDisplayText(i.DisplayText)},0),this.GetHighlightText()===e.HighlightText.All&&(this.SelectionStart=0),this._shouldFireValueChangedEvent()&&(r=this.FireClientEvent("TextChanged",null),r!=null&&(this.FocusType=r),r=this.FireClientEvent("ValueChanged",null),r!=null&&(this.FocusType=r),this.OldText=this.UIProcess.Format.Fields.GetText(),this.OldFocusText=this.UIProcess.Format.Fields.GetText(),e.Utility.FireSystemEvent(this.InputElement,"onchange"),this._getAutoPostBack()),window.setTimeout(function(){i.HidePromptChar()},50)},r.prototype.shouldFireValueChangedEvent=function(){return this.OldText!=this.Text},r.prototype.MouseDown=function(t){var r=e.Utility.GetMouseButton(t);this.FocusedWhenMouseDown=document.activeElement===(t.srcElement||t.target),this.MouseDownOnClearButton=e.Utility.IsMouseDownOnClearButton(t),n.prototype.MouseDown.call(this,t),this.MouseButton===e.MouseButton.Right?this.FocusType=e.FocusType.ContextMenu:this.MouseButton=e.MouseButton.Left,this.UIProcess.isDblClick=!1,this.SelectionLength=this.GetSelectionLength(),!e.Utility.IsIE()&&this.ImeMode&&r===e.MouseButton.Left&&(this.IsImplementImeInput=!0)},r.prototype.MouseUp=function(t){if(!e.Utility.IsIE()&&this.ImeMode){if(!this.IsImplementImeInput)return;this.IsImplementImeInput=!1}this.LastStart=this.SelectionStart,this.LastEnd=this.SelectionEnd,n.prototype.MouseUp.call(this,t);if(!this.ImeMode)this.SelectionLength=this.GetSelectionLength();else{this.SelectionStart=this.LastStart,this.SelectionEnd=this.LastEnd,this.SelectionLength=this.GetSelectionLength(),e.Utility.IsIE()?this.ImeInput("ClickInput"):this.ImeInput("ReInput",!0);if(!e.Utility.IsIE()&&this.Text!=this.UIUpdate.GetText()){var r=this;window.setTimeout(function(){r.UpdateDisplayText(r.Text)},0)}}this.MouseUpPointerType==undefined&&(this.MouseUpHasValue=this.GetInputElement().value.length>0),this.HandleClearButton(t)},r.prototype.KeyDown=function(t){var r=t.keyCode,i={};i.Shift=!1,i.Ctrl=!1,i.Alt=!1,t.shiftKey&&(i.Shift=!0),t.ctrlKey&&(i.Ctrl=!0),t.altKey&&(i.Alt=!0);var s={},o=this.ImeMode;this.ImeMode=!1;if(r===229)return e.Utility.IsIE8OrBelow()&&(this.ImeMode=!0),!0;!this.ImeMode&&o&&!i.Shift&&!i.Ctrl&&r!=9&&r!=65545&&(this.ImeInput("ReInput",!0),this.ImeSelectTimes=0),s.KeyCode=r,s.Text=this.Text,s.FuncKeysPressed=i,s.SelectionStart=this.SelectionStart,s.SelectionEnd=this.SelectionEnd,s.EditMode=this._getEditModeInternal(),s.ReadOnly=this.GetReadOnly(),s.ClipContent=this.GetClipContent(),s.ExitOnLastChar=this.GetExitOnLastChar(),s.ExitOnLeftRightKey=this.GetExitOnLeftRightKey(),s.TabAction=this.GetTabAction();var u=n.prototype.KeyDown.call(this,s);return u.inputChar!=null?!0:(i.Shift||i.Ctrl||i.Alt)&&!u?!0:this.GetHideEnter()&&r===13?!1:u.System},r.prototype.KeyPress=function(t,n){var r=n.keyCode||n.charCode,i=r===192&&n.altKey;if(!e.Utility.IsIE()&&this.ImeMode&&i)return this.ImeInput("ReInput",!0),!1;if(!e.Utility.IsIE()&&(r===229||i))return!1;var s=t,o=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),s);if(this.japInput!=1){o.SelectionStart!=null&&(this.NewSelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.NewSelectionEnd=o.SelectionEnd);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text)}var u=this._doExtraWorkForKeyPress(t);if(u===!0)return;o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),o.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.exception!=null&&(this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd)),o.EventInfo!=null&&(this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),o.EventInfo.Type==="KeyExit"&&(this.EventInfo=o.EventInfo,this.FireKeyExit()),this.FocusType=e.FocusType.ClientEvent);if(n.keyCode===13)return!0}else{if(n.keyCode===13)return!0;o.SelectionStart!=null&&(this.truePosition=o.SelectionStart),o.EventInfo!=null&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type)}},r.prototype._doExtraWorkForKeyPress=function(e){return!1},r.prototype.innerKeyPress=function(t,n,r){var i=t;n=!!n;var s=this.UIProcess.KeyPressInternal(this.InputElement,this.SelectionStart,this.SelectionEnd,this.GetExitOnLastChar(),i);if(this.japInput!=1){if(s.Text!=null){if(!this.UpdateText(s))return!1;r||this.UpdateDisplayText(this.Text)}s.SelectionStart!=null&&(this.SelectionStart=s.SelectionStart),s.SelectionEnd!=null&&(this.SelectionEnd=s.SelectionEnd,this.SelectionLength=this.GetSelectionLength(),s.FocusExit!=1&&!n&&!r&&s.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),s.exception!=null&&(r||this.UpdateDisplayText(this.Text),s.FocusExit!=1&&this.SetSelection(this.SelectionStart,this.SelectionEnd)),s.EventInfo!=null&&(this.UIProcess.FireEvent(this,s.EventInfo.Name,s.EventInfo.Args,s.EventInfo.Type),this.FocusType=e.FocusType.ClientEvent);if(window.event!=null&&event.keyCode===13)return!0}else{if(window.event!=null&&event.keyCode===13)return!0;s.SelectionStart!=null&&(this.truePosition=s.SelectionStart),s.EventInfo!=null&&this.UIProcess.FireEvent(this,s.EventInfo.Name,s.EventInfo.Args,s.EventInfo.Type)}},r.prototype.KeyUp=function(t){if(this.ImeMode===!0&&e.Utility.IsIE8OrBelow()){var n=t.keyCode,r=e.CharProcess.CharEx,i=this.GetTextboxValue(),s=i;if(this.SelectionEnd<this.Text.GetLength()){var o=this.Text.GetLength()-this.SelectionEnd;s=i.Substring(0,i.GetLength()-o)}s=s.Substring(s.GetLength()-1,s.GetLength());if(n===13)this.ImeInput("DirectInput");else if(n>=48&&n<=57||n>=96&&n<=105)n>=96&&(n-=48),s=r.ToHalfWidth(s),s==String.fromCharCode(n)&&(s===String.fromCharCode(n)&&this.ImeSelectTimes<1||this.ImeSelect||this.ImeInput("ReInput")),this.ImeSelectTimes=0;else if(n===32){if(this.ImeSelect===!1)if(this.ImeSelectTimes===1)this.ImeSelect=!0;else if(r.ToHalfWidth(s)!=String.fromCharCode(n))this.ImeSelectTimes++;else{var u=i.Substring(this.SelectionStart,i.GetLength()-o);r.ToHalfWidth(u)===String.fromCharCode(n)&&this.ImeInput("DirectInput")}}else n>=65&&n<=90?this.ImeSelectTimes=0:n===32||n===106||n===107||n===109||n===110||n===111||n===219||n===220||n===221||n===222||n>=186&&n<=192?(this.ImeSelectTimes>=1&&this.ImeInput("ReInput"),this.ImeSelectTimes=0):n===40||n===38?this.ImeSelect===!1&&this.ImeSelectTimes===1&&(this.ImeSelect=!0):n===8||n===46||n===27?this.ImeSelectTimes=0:n===244&&(this.IsJapanConvertKeyPress=!0)}if(t.keyCode!==13)return!1},r.prototype.PerformSpinProcess=function(t,n,r,i,s,o){if(this.GetReadOnly()&&o)return;var u=this.UIProcess.PerformSpinInternal(t,n,r,i,s);this.FocusType=e.FocusType.SpinButton;if(!u){this.UIUpdate.SetFocus();return}if(u.Text!=null&&!this.UpdateText(u))return;u.SelectionStart!=null&&(this.SelectionStart=u.SelectionStart),u.SelectionEnd!=null&&(this.SelectionEnd=u.SelectionEnd,this.SelectionLength=this.GetSelectionLength());if(u.EventInfo){var a=this.UIProcess.FireEvent(this,u.EventInfo.Name,u.EventInfo.Args,u.EventInfo.Type);a!=null&&(this.FocusType=a)}if(this.Text!==this.GetTextboxValue()){var f=this.Format.Fields.fieldArray;for(var l=0;l<f.length;l++)if(f[l].fieldLabel==="EnumField")break;if(l===f.length)return;this.UpdateDisplayText(this.Text)}},r.prototype.SelectStart=function(e){if(!!this.ImeMode)return!1;n.prototype.SelectStart.call(this,e)},r.prototype.Click=function(){},r.prototype.DragDrop=function(t){return!e.Utility.IsIE()&&this.GetReadOnly()?!1:(this.IsDragDrop=!0,this.Paste(t,!0,0,0),!1)},r.prototype.DragOver=function(){},r.prototype.DragInit=function(){},r.prototype.ImeInput=function(t,n){var i=this.UIUpdate.GetText();if(i===this.Text)return window.event&&e.Utility.PreventDefault(window.event),this.ImeMode=!1,!1;var s;if(this.Text!==""){var o=Math.min(this.SelectionStart,this.SelectionEnd),u=Math.max(this.SelectionStart,this.SelectionEnd);if(u<this.Text.GetLength()){var a=this.Text.Substring(u,this.Text.GetLength()),f=i.IndexOf(a);f!==-1?s=i.Substring(o,i.GetLength()-a.GetLength()):s=""}else s=i.Substring(o,i.GetLength())}else s=i;t==="ReInput"&&(n?s=s.Substring(0,s.GetLength()):s=s.Substring(0,s.GetLength()-1));if(t==="Record")return s;var l=!1;if(t==="LoseFocusInput"){if(s==="")return;r.Mask_ImeResponse=!0,l=!0}for(var c=0;c<s.GetLength();c++){c===s.GetLength()-1&&t==="LoseFocusInput"&&(this.japInput=!0),r.Mask_ImeResponse=!0;if(s.GetLength()>c+1){var h=s.Substring(c+1,c+2),p=new e.CharCategory,d=h.charCodeAt(0)-(p.KATAKANA_VOICED.charCodeAt(0)-1);d===1||d===2?(this.innerKeyPress(s.Substring(c,c+2),l),c++):t==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}else t==="ReInput"?this.innerKeyPress(s.Substring(c,c+1),l,!0):this.innerKeyPress(s.Substring(c,c+1),l)}this.japInput=!1,this.ImeMode=!1,this.ImeSelect=!1;if(t==="ReInput"||t==="ClickInput")this.truePosition=this.SelectionStart,this.FocusType=e.FocusType.ImeInput},r.prototype.SetInnerText=function(e){this.Clear(),this.UIProcess.Format.Fields.SetText(e,!0).isValid===!1?this.UIProcess.Format.Fields.RollBack():this.UIProcess.Format.Fields.SaveOldState();var t={};t.Text=this.GetDisplayText("Focus");if(!this.UpdateText(t))return;this.UpdateDisplayText(this.Text)},r.prototype.Copy=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),n.prototype.Copy.call(this)},r.prototype.Cut=function(){this.SetSelection(this.SelectionStart,this.SelectionEnd),n.prototype.Cut.call(this)},r.prototype.Paste=function(t,n,r,i){var s="";t!=null&&(s=t),r||(r=this.SelectionStart),i||(i=this.SelectionEnd);var o=this.UIProcess.Paste(r,i,s,this.GetExitOnLastChar(),n);if(!o)return!1;o.Value!=null&&(this.Value=o.Value);if(o.Text!=null){if(!this.UpdateText(o))return!1;this.UpdateDisplayText(this.Text),e.Utility.IsIE()||this.SetInnerFocus()}return o.SelectionStart!=null&&(this.SelectionStart=o.SelectionStart),o.SelectionEnd!=null&&(this.SelectionEnd=o.SelectionEnd,this.SelectionLength=Math.abs(this.SelectionEnd-this.SelectionStart)),(!o||o.FocusExit==null||!o.FocusExit)&&this.SetSelection(this.SelectionStart,this.SelectionEnd),o.EventInfo&&this.UIProcess.FireEvent(this,o.EventInfo.Name,o.EventInfo.Args,o.EventInfo.Type),!0},r.prototype.SetHideValue=function(){},r.prototype.GetHideValue=function(){},r.prototype.CanUndo=function(){return this.Format.Fields.CanUndo()?!0:!1},r.prototype.DoSpinUp=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("up",e,t)},r.prototype.DoSpinDown=function(e,t){arguments.length===1&&(t=e,e=undefined),this.DoSpin("down",e,t)},r.prototype.DoSpin=function(t,n,r){if(typeof n=="number"&&isNaN(n)||typeof r=="number"&&isNaN(r))return;var i=this.SelectionStart,s=this.SelectionEnd,o=this.Increment;if(n!=undefined){n=e.Utility.CheckInt(n,0,Math.pow(2,31));var u={};u.start=0,u.length=0,u=this.Format.Fields.GetRealFieldRange(n),i=u.start,s=u.start+u.length}r!=undefined&&(o=r),o=e.Utility.CheckInt(o,-Math.pow(2,31),Math.pow(2,31)),t==="up"?this.PerformSpinProcess(i,s,o,this.Wrap,!0,!1):this.PerformSpinProcess(i,s,o,this.Wrap,!1,!1)},r.prototype.UpdateText=function(e){if(!e)return!1;var t="";e.Text!=null&&(t=e.Text);if(t!==this.Text&&this.TextChanging!=null&&this.TextChanging!=""){var n={},r={};r.Result=t,r.Cancel=!1,n.Name=this.TextChanging,n.Args=r,e.SelectionStart!=null&&(this.NewSelectionStart=e.SelectionStart),e.SelectionEnd!=null&&(this.NewSelectionEnd=e.SelectionEnd);var i=this.UIProcess.GetSepText();this.RollBack(),typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&this.SetHideValue(),n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1&&(this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i));var s=this.UIProcess.FireEvent(this,n.Name,n.Args,"TextChanging");n.Name.IndexOf&&n.Name.IndexOf("gcsh_InputManWeb_AjaxServerEventHandler")>-1,s!=null&&(this.FocusType=s),typeof this.TextChanging!="undefined"&&(this.NeedSetHideValue=!1);if(r.Cancel)return this.UpdateDisplayText(this.Text),this.SetSelection(this.SelectionStart,this.SelectionEnd),!1;this.UIProcess.Format.Fields.ClearContent(),this.FormatIsNull?this.UIProcess.Format.Fields.SetText(i,!0):this.UIProcess.SetSepText(i)}return this.Text=t,this.Value=this.UIProcess.Format.Fields.GetValue(),!0},r.prototype.UpdateDisplayText=function(e){typeof this.NeedSetHideValue=="undefined"&&(this.NeedSetHideValue=!0),this.NeedSetHideValue&&(n.prototype.UpdateDisplayText.call(this,e),this.EditingTextChanged&&this.EditingTextChanged.call(this))},r.prototype.RollBack=function(){this.UIProcess.Format.Fields.RollBack()},r.prototype.ProcessReservedKey=function(e){var t=n.prototype.ProcessReservedKey.call(this,e);if(!t){switch(e){case 118:case 119:return!0}return!1}return!0},r.prototype.AddAllEventsHandler=function(){n.prototype.AddAllEventsHandler.call(this);var r=this;e.Utility.IsIE10OrLater()&&t(this.GetInputElement()).bind("MSPointerUp.wijinput",function(t){e.GlobalEventHandler.OnMSPointerUp(r,t)},!1)},r.prototype.CompositionStart=function(e){this.ImeMode=!0},r.prototype.CompositionUpdate=function(e){},r.prototype.CompositionEnd=function(t){var n=this,r=function(){try{n.ImeInput("DirectInput")}finally{n.ImeMode=!1}};e.Utility.IsIE9OrLater()?r():window.setTimeout(r,0)},r.prototype.Select=function(){if(this.ImeMode)return;this.SelectionStart=e.Utility.GetSelectionStartPosition(this.GetInputElement()),this.SelectionEnd=this.SelectionStart+e.Utility.GetSelectionText(this.GetInputElement()).GetLength()},r.prototype.MSPointerUp=function(e){e&&(this.MouseUpPointerType=e.pointerType,this.MouseUpHasValue=(e.srcElement||e.target).value.length>0)},r.prototype.HandleClearButton=function(t){if(e.Utility.IsIE10OrLater()&&this.FocusedWhenMouseDown&&this.MouseDownOnClearButton&&(t.srcElement||t.target)===this.InputElement){var n=document.activeElement===(t.srcElement||t.target),r=e.Utility.IsMouseDownOnClearButton(t);if(this.MouseUpHasValue&&n&&r){this.Clear();var i=this.GetText(),s=this;window.setTimeout(function(){s.UpdateDisplayText(i),s.SelectionStart=s.SelectionEnd=s.Format.Fields.GetFirstInputPosition(),s.SetSelection(s.SelectionStart,s.SelectionEnd)},0)}}},r.prototype.HidePromptChar=function(){if(this.GetHidePromptOnLeave()){var e=this.GetInputElement().value;this._textWithPromptChar=e,e=e.replace(new RegExp(this.GetPromptChar(),"g")," "),this.GetInputElement().value=e}},r.prototype.ShowPromptChar=function(){this._textWithPromptChar!==null&&(this.GetInputElement().value=this._textWithPromptChar,this._textWithPromptChar=null)},r.prototype.GetHideEnter=function(){return this._hideEnter},r.prototype.SetHideEnter=function(e){this._hideEnter=e},r.prototype.GetHidePromptOnLeave=function(){return this._hidePromptOnLeave},r.prototype.SetHidePromptOnLeave=function(e){e!==this._hidePromptOnLeave&&(this._hidePromptOnLeave=e,e&&document.activeElement!==this.GetInputElement()&&this.HidePromptChar(),!e&&document.activeElement!==this.GetInputElement()&&this.ShowPromptChar())},r.prototype.FireKeyExit=function(){this.EventInfo!=null&&this.EventInfo.Type=="KeyExit"&&(this.KeyExit&&this.KeyExit.call(this),this.FocusType=e.FocusType.KeyExit,this.EventInfo=null)},r.prototype.OnEditStatusChanged=function(t){t=e.Utility.CheckFunction(t),this.EditStatusChangedEvent=t},r.prototype.OnInvalidInput=function(t){t=e.Utility.CheckFunction(t),this.InvalidInputEvent=t},r.prototype.OnKeyExit=function(t){t=e.Utility.CheckFunction(t),this.KeyExit=t},r.prototype.OnSpinDown=function(t){t=e.Utility.CheckFunction(t),this.SpinDown=t},r.prototype.OnSpinUp=function(t){t=e.Utility.CheckFunction(t),this.SpinUp=t},r.prototype.OnTextChanged=function(t){t=e.Utility.CheckFunction(t),this.TextChanged=t},r.prototype.OnTextChanging=function(t){t=e.Utility.CheckFunction(t),this.TextChanging=t},r.prototype.OnValueChanged=function(t){t=e.Utility.CheckFunction(t),this.ValueChanged=t},r.prototype.OnMouseDownCallBack=function(t){t=e.Utility.CheckFunction(t),this.MouseDownEvent=t},r.prototype.OnMouseUpCallBack=function(t){t=e.Utility.CheckFunction(t),this.MouseUpEvent=t},r.prototype.OnEditingTextChanged=function(t){t=e.Utility.CheckFunction(t),this.EditingTextChanged=t},r.prototype.IsFocused=function(){try{return document.activeElement===this.GetInputElement()}catch(e){return!1}},r.prototype.GetTextOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!1),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},r.prototype.GetPostValueOnSimpleMode=function(){if(!this.IsFocused()&&this.Format.Fields.ValueIsNull()&&this._getDisplayNullExpression()!==null)return this.GetTextboxValue();var e=this.Format.Fields.GetTextSimpleMode(!0),t=new RegExp("\\"+this.GetPromptChar(),"g");return e=e.replace(t," "),e},r}(T);e.MaskControl=A})(e.input||(e.input={}));var t=e.input})(wijmo||(wijmo={}));