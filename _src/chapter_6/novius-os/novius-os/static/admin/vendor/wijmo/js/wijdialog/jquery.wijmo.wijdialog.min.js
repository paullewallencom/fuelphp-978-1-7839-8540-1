var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(d){var h=jQuery,e="wijdialog";var g=(function(i){__extends(j,i);function j(){i.apply(this,arguments)}j.prototype._create=function(){return h.ui.dialog.prototype._create.apply(this,arguments)};j.prototype._init=function(){return h.ui.dialog.prototype._init.apply(this,arguments)};j.prototype._destroy=function(){return h.ui.dialog.prototype._destroy.apply(this,arguments)};j.prototype._appendTo=function(){return h.ui.dialog.prototype._appendTo.apply(this,arguments)};j.prototype._setOptions=function(){return h.ui.dialog.prototype._setOptions.apply(this,arguments)};j.prototype._setOption=function(k,l){return h.ui.dialog.prototype._setOption.apply(this,arguments)};j.prototype.widget=function(){return h.ui.dialog.prototype.widget.apply(this,arguments)};j.prototype.close=function(){return h.ui.dialog.prototype.close.apply(this,arguments)};j.prototype.isOpen=function(){return h.ui.dialog.prototype.isOpen.apply(this,arguments)};j.prototype.moveToTop=function(){return h.ui.dialog.prototype.moveToTop.apply(this,arguments)};j.prototype._moveToTop=function(){return h.ui.dialog.prototype._moveToTop.apply(this,arguments)};j.prototype.open=function(){return h.ui.dialog.prototype.open.apply(this,arguments)};j.prototype._focusTabbable=function(){return h.ui.dialog.prototype._focusTabbable.apply(this,arguments)};j.prototype._keepFocus=function(){return h.ui.dialog.prototype._keepFocus.apply(this,arguments)};j.prototype._createWrapper=function(){return h.ui.dialog.prototype._createWrapper.apply(this,arguments)};j.prototype._createTitlebar=function(){return h.ui.dialog.prototype._createTitlebar.apply(this,arguments)};j.prototype._title=function(){return h.ui.dialog.prototype._title.apply(this,arguments)};j.prototype._createButtonPane=function(){return h.ui.dialog.prototype._createButtonPane.apply(this,arguments)};j.prototype._createButtons=function(){return h.ui.dialog.prototype._createButtons.apply(this,arguments)};j.prototype._makeDraggable=function(){return h.ui.dialog.prototype._makeDraggable.apply(this,arguments)};j.prototype._makeResizable=function(){return h.ui.dialog.prototype._makeResizable.apply(this,arguments)};j.prototype._minHeight=function(){return h.ui.dialog.prototype._minHeight.apply(this,arguments)};j.prototype._position=function(){return h.ui.dialog.prototype._position.apply(this,arguments)};j.prototype._size=function(){return h.ui.dialog.prototype._size.apply(this,arguments)};j.prototype._blockFrames=function(){return h.ui.dialog.prototype._blockFrames.apply(this,arguments)};j.prototype._unblockFrames=function(){return h.ui.dialog.prototype._unblockFrames.apply(this,arguments)};j.prototype._createOverlay=function(){if(!this.options.modal){return}var k=this,l=k.options.wijCSS;if(!h.ui.dialog.overlayInstances){this._delay(function(){if(h.ui.dialog.overlayInstances){this.document.bind("focusin.dialog",function(o){if(!h(o.target).closest(".ui-dialog").length&&!h(o.target).closest(".ui-datepicker").length){o.preventDefault();if(o.relatedTarget&&h(o.relatedTarget).closest(".ui-dialog").length){return}var m=h(".ui-dialog:visible:last .ui-dialog-content"),n;if(m.data("wijmo-wijdialog")){n=m.data("wijmo-wijdialog")}else{n=m.data("wijmo-c1dialog")}if(n){n._focusTabbable()}}})}})}this.overlay=h("<div>").addClass(l.overlay+" "+l.uiFront+" "+l.wijdialogOverlay).appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});h.ui.dialog.overlayInstances++};j.prototype._destroyOverlay=function(){return h.ui.dialog.prototype._destroyOverlay.apply(this,arguments)};return j})(b.JQueryUIWidget);d.JQueryUIDialog=g;var c=(function(){function i(){this.wijCSS={wijdialog:"wijmo-wijdialog",wijdialogZone:"wijmo-wijdialog-defaultdockingzone",uiFront:"ui-front",uiDialog:"ui-dialog",wijdialogOverlay:"ui-dialog-overlay",uiDialogContent:"ui-dialog-content",wijdialogCaptionButton:"wijmo-wijdialog-captionbutton",wijdialogHasFrame:"wijmo-wijdialog-hasframe",iconPinW:"ui-icon-pin-w",iconPinS:"ui-icon-pin-s",iconRefresh:"ui-icon-refresh",iconCarat1N:"ui-icon-carat-1-n",iconCarat1S:"ui-icon-carat-1-s",iconMinus:"ui-icon-minus",iconExtlink:"ui-icon-extlink",iconNewWin:"ui-icon-newwin",uiDialogClose:"ui-dialog-titlebar-close",uiDialogTitleBar:"ui-dialog-titlebar",uiDialogButtonPanel:"ui-dialog-buttonpane",uiDialogButtons:"ui-dialog-buttons",wijdialogTitleBarClose:"",wijdialogTitleBarPin:"",wijdialogTitleBarRefresh:"",wijdialogTitleBarToggle:"",wijdialogTitleBarMinimize:"",wijdialogTitleBarMaximize:"",wijdialogTitleBarRestore:""};this.appendTo="body";this.autoOpen=true;this.buttons=[];this.closeOnEscape=true;this.closeText="close";this.dialogClass="";this.draggable=true;this.height="auto";this.hide=null;this.maxHeight=null;this.maxWidth=null;this.minHeight=150;this.minWidth=150;this.modal=false;this.position={my:"center",at:"center",of:window};this.resizable=true;this.show=null;this.title=null;this.width=300;this.stack=true;this.beforeClose=null;this.close=null;this.create=null;this.drag=null;this.dragStart=null;this.dragStop=null;this.focus=null;this.open=null;this.resize=null;this.resizeStart=null;this.resizeStop=null;this.zIndex=1000;this.initSelector="";this.captionButtons={};this.collapsingAnimation=null;this.expandingAnimation=null;this.contentUrl="";this.minimizeZoneElementId="";this.buttonCreating=null;this.stateChanged=null;this.blur=null}return i})();var f=(function(i){__extends(j,i);function j(){i.apply(this,arguments)}j.prototype._create=function(){var k=this,n=k.options,m=n.wijCSS,l=k.element.attr("title");k._titlebarButtonClassPrefix="wijmo-wijdialog-titlebar-";h.ui.dialog.maxZ=h.ui.dialog.maxZ||100;if(h.isArray(n.buttons)){h.each(n.buttons,function(o,p){var q=p.click;if(q&&(typeof q==="string")&&window[q]){p.click=window[q]}})}k.form=k.element.closest("form[id]");i.prototype._create.call(this);k.element.removeClass("ui-dialog-content ui-widget-content").addClass(m.uiDialogContent).addClass(m.content);k.uiDialog.removeClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front").addClass(m.uiDialog).addClass(m.widget).addClass(m.content).addClass(m.cornerAll).addClass(m.uiFront).addClass(m.wijdialog).removeClass(this.options.dialogClass).addClass(this.options.dialogClass);if(l){k.uiDialog.attr("title",l)}k.uiDialogTitlebar.removeClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").addClass(m.uiDialogTitleBar).addClass(m.header).addClass(m.cornerAll).addClass(m.helperClearFix);k._initWijWindow();k._bindWindowResize();k._attachDraggableResizableEvent();k._originalPosition=n.position;k.uiDialog.css({zIndex:n.zIndex});k.isPin=false;if(k.options.appendTo==="body"){if(k.form.length){k.formOnSubmit=(k.form)[0].onsubmit;(k.form)[0].onsubmit=function(){k.uiDialog.appendTo(k.form);return(!k.formOnSubmit)?true:k.formOnSubmit()};k.uiDialog.find("input[type='submit'], button[type='submit']").bind("click.wijdialog",function(){k.form.submit()})}}};j.prototype._createButtonPane=function(){var k=this.options.wijCSS;i.prototype._createButtonPane.call(this);this.uiDialogButtonPane.removeClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix").addClass(k.uiDialogButtonPanel).addClass(k.content).addClass(k.helperClearFix)};j.prototype._createButtons=function(){i.prototype._createButtons.call(this);if(this.uiDialog.hasClass("ui-dialog-buttons")){this.uiDialog.removeClass("ui-dialog-buttons").addClass(this.options.wijCSS.uiDialogButtons)}};j.prototype._makeDraggable=function(){i.prototype._makeDraggable.call(this);this.uiDialog.draggable("option","cancel","."+this.options.wijCSS.wijdialogCaptionButton)};j.prototype._createOverlay=function(){var k=this.options.wijCSS;i.prototype._createOverlay.call(this);if(this.overlay){this.overlay.removeClass("ui-widget-overlay ui-front").addClass(k.overlay).addClass(k.uiFront)}};j.prototype._handleDisabledOption=function(l,m){var k=this;this.uiDialog.removeClass(this.options.wijCSS.stateDisabled);if(l){if(!k.disabledDiv){k.disabledDiv=k._createDisabledDiv()}k.disabledDiv.appendTo(k.options.appendTo);if(h.browser.msie&&k.uiDialog.data("ui-draggable")){k.uiDialog.draggable("disable")}this.uiDialog.addClass(this.options.wijCSS.stateDisabled)}else{if(k.disabledDiv){k.disabledDiv.remove();k.disabledDiv=null;if(h.browser.msie&&k.uiDialog.data("ui-draggable")){k.uiDialog.draggable("enable")}}}};j.prototype._createDisabledDiv=function(){var l=this,p,o=l.uiDialog,n=o.offset(),m=o.outerWidth(),k=o.outerHeight();p=h("<div></div>").addClass(l.options.wijCSS.stateDisabled).css({"z-index":"99999",position:"absolute",width:m,height:k,left:n.left,top:n.top});if(h.browser.msie){p.css("background-color","white");if(h.browser.version==="9.0"){p.css("opacity","0.1")}}return p};j.prototype.destroy=function(){var k=this,l=k.options.wijCSS;if(k.disabledDiv){k.disabledDiv.remove();k.disabledDiv=null}if(k.options.appendTo==="body"&&k.form.length){k.uiDialog.find("input[type='submit'], button[type='submit']").off("click.wijdialog");(k.form)[0].onsubmit=null;if(k.formOnSubmit){(k.form)[0].onsubmit=k.formOnSubmit}}i.prototype.destroy.call(this);k.element.removeClass(l.uiDialogContent).removeClass(l.content);k.element.unbind(".wijdialog").removeData("wijdialog").removeData(this.widgetFullName)};j.prototype._attachDraggableResizableEvent=function(){var l=this,k=l.uiDialog,m=l.options;if(m.draggable&&k.draggable){k.bind("dragstop",function(n,o){l._saveNormalState();l._destoryIframeMask()}).bind("dragstart",function(n,o){l._createIframeMask()})}if(m.resizable&&k.resizable){k.bind("resizestop",function(n,o){l._saveNormalState();l._destoryIframeMask()}).bind("resizestart",function(n,o){l._createIframeMask();if(l.initWidth===undefined&&l.initHeight===undefined){l.initWidth=l.uiDialog.width();l.initHeight=l.uiDialog.height()}})}};j.prototype._createIframeMask=function(){var k=this;if(k.innerFrame){k.mask=h("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(h.ui.dialog.maxZ+1)+"'></div>").appendTo(k.uiDialog)}};j.prototype._destoryIframeMask=function(){var k=this;if(k.innerFrame&&k.mask){k.mask.remove();k.mask=undefined}};j.prototype._initWijWindow=function(){var k=this,l=true;k._createCaptionButtons();k._checkUrl();k.uiDialog.bind("mousedown",function(n){var m=n.target;if(!h.contains(k.element[0],m)){k.uiDialog.focus()}}).bind("mouseenter",function(m){l=true}).bind("mouseleave",function(m){l=false}).bind("focusout",function(m){if(!l){k._trigger("blur",m,{el:k.element})}})};j.prototype._moveToTop=function(n,o){var k=this,m=k.options,l;if((m.modal&&!o)||(!m.stack&&!m.modal)){k._trigger("focus",n);return false}if(m.zIndex>h.ui.dialog.maxZ){h.ui.dialog.maxZ=m.zIndex}if(k.overlay){h.ui.dialog.maxZ+=1;k.overlay.css("z-index",h.ui.dialog.maxZ)}l={scrollTop:k.element.scrollTop(),scrollLeft:k.element.scrollLeft()};h.ui.dialog.maxZ+=1;k.uiDialog.css("z-index",h.ui.dialog.maxZ);k.element.attr(l);k._trigger("focus",n);return false};j.prototype._checkUrl=function(){var k=this,n=k.options,l=n.contentUrl,m=h('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');if(typeof l==="string"&&l.length>0){k.element.addClass(n.wijCSS.wijdialogHasFrame);k.element.append(m);k.innerFrame=m}k.contentWrapper=k.element};j.prototype._setOption=function(l,m){var k=this;i.prototype._setOption.call(this,l,m);if(l==="disabled"){k._handleDisabledOption(m,k.element)}else{if(l==="contentUrl"){if(k.innerFrame){k.innerFrame.attr("src",m)}else{k._checkUrl()}}else{if(l==="captionButtons"){k._createCaptionButtons()}else{if(l==="minimizeZoneElementId"){if(k.getState()==="minimized"&&h("#"+m).length>0){h("#"+m).append(k.uiDialog)}}else{if(l==="stack"){if(!m){k.uiDialog.css("z-index",k.options.zIndex)}}}}}}};j.prototype._createCaptionButtons=function(){var p=[],k=this,s=k.options,l,r=s.wijCSS,n={pin:{visible:true,click:k.pin,iconClassOn:r.iconPinW,iconClassOff:r.iconPinS},refresh:{visible:true,click:k.refresh,iconClassOn:r.iconRefresh},toggle:{visible:true,click:k.toggle,iconClassOn:r.iconCarat1N,iconClassOff:r.iconCarat1S},minimize:{visible:true,click:k.minimize,iconClassOn:r.iconMinus},maximize:{visible:true,click:k.maximize,iconClassOn:r.iconExtlink},close:{visible:true,text:s.closeText,click:k.close,iconClassOn:r.iconClose}},m=s.captionButtons,q=k.uiDialogTitlebar;q.children("."+s.wijCSS.uiDialogClose+", ."+s.wijCSS.wijdialogCaptionButton).remove();h.each(n,function(o,t){if(m&&m[o]){h.extend(t,m[o])}p.push({button:o,info:t})});k._trigger("buttonCreating",null,p);for(l=0;l<p.length;l++){k._createCaptionButton(p[l],q)}};j.prototype._createCaptionButton=function(n,k,p){var t=this,r=t.options.wijCSS,m,s=t._titlebarButtonClassPrefix+n.button+" "+r["wijdialogTitleBar"+n.button.charAt(0).toUpperCase()+n.button.substring(1)],o=k.children("."+t._titlebarButtonClassPrefix+n.button),l=n.info,q=h("<span></span>");if(l.visible){if(o.size()===0){q.addClass("ui-icon "+l.iconClassOn).text(l.text||n.button);m=h('<a href="#"></a>').append(q).addClass(s+" ui-corner-all "+r.wijdialogCaptionButton).attr("role","button").hover(function(){m.addClass(r.stateHover)},function(){m.removeClass(r.stateHover)}).click(function(u){if(n.button=="close"){u.preventDefault()}if(q.hasAllClasses(l.iconClassOff)){q.removeClass(l.iconClassOff)}else{q.addClass(l.iconClassOff)}if(h.isFunction(l.click)){l.click.apply(t,arguments)}return false});if(p){return m}else{m.appendTo(k)}}t[n.button+"Button"]=m}else{o.remove()}};j.prototype.pin=function(){var l=this.isPin,k=this.pinButton.children("span"),m=this.options.wijCSS;if(!l){if(k.length){if(!k.hasAllClasses(m.iconPinS)){k.addClass(m.iconPinS)}}}else{k.removeClass(m.iconPinS)}this._enableDisableDragger(!l);this.isPin=!l};j.prototype.refresh=function(){var k=this.innerFrame;if(k!==undefined){k.attr("src",k.attr("src"))}};j.prototype.toggle=function(){var l=this,k=l.toggleButton.children("span"),m=l.options.wijCSS;if(!l.minimized){if(l.collapsed===undefined||!l.collapsed){l.collapsed=true;if(!k.hasAllClasses(m.iconCarat1S)){k.addClass(m.iconCarat1S)}l._collapseDialogContent(true)}else{l.collapsed=false;if(k.hasAllClasses(m.iconCarat1S)){k.removeClass(m.iconCarat1S)}l._expandDialogContent(true)}}};j.prototype._expandDialogContent=function(m){var l=this,n=l.options,k=n.expandingAnimation;l.uiDialog.height("auto");if(m&&k!==null){l.contentWrapper.show(k.animated,k.options,k.duration,function(o){l.uiDialog.css("height",l._toggleHeight);if(h.isFunction(k.callback)){k.callback(o)}if(n.resizable){l._enableDisableResizer(false)}})}else{l.contentWrapper.show();if(n.resizable){l._enableDisableResizer(false)}l.uiDialog.css("height",l.toggleHeight)}};j.prototype._collapseDialogContent=function(n,m){var l=this,p=l.options,k=p.collapsingAnimation;if(p.resizable){l._enableDisableResizer(true)}if(!m){l._toggleHeight=l.uiDialog[0].style.height}l.uiDialog.height("auto");if(n&&k!==null){l.contentWrapper.hide(k.animated,k.options,k.duration)}else{l.contentWrapper.hide()}l._enableDisableDragger(l.isPin)};j.prototype._enableDisableResizer=function(k){var l=this.uiDialog;if(!this.options.resizable){return}l.resizable({disabled:k});if(k){l.removeClass(this.options.wijCSS.stateDisabled)}};j.prototype._enableDisableDragger=function(k){var l=this.uiDialog;if(!this.options.draggable){return}l.draggable({disabled:k});if(k){l.removeClass(this.options.wijCSS.stateDisabled)}};j.prototype.minimize=function(){var z=this,v=z.uiDialog,n=z.options,y=n.wijCSS,k=null,w=h("<div></div>"),u=h("<div></div>"),r,m,x,q,s={width:undefined,height:undefined},p,A={width:undefined,height:undefined},t="uiDialog",l;if(!z.minimized){q=z.uiDialog.position();s.width=z.uiDialog.width();s.height=z.uiDialog.height();l=z.getState();if(z.maximized){z.maximized=false;z.restoreButton.remove();h(window).unbind(".onWinResize")}else{if(z.collapsed){z._expandDialogContent(false)}z._saveNormalState()}z._enableDisableResizer(true);if(z.collapsed){z._collapseDialogContent(false)}w.appendTo(z.options.appendTo).css({top:z.uiDialog.offset().top,left:z.uiDialog.offset().left,height:z.uiDialog.innerHeight(),width:z.uiDialog.innerWidth(),position:"absolute"});z.contentWrapper.hide();if(z.uiDialogButtonPane.length){z.uiDialogButtonPane.hide()}v.height("auto");v.width("auto");z._doButtonAction(z.minimizeButton,"hide");z._restoreButton(true,z.minimizeButton,"After");z._doButtonAction(z.pinButton,"hide");z._doButtonAction(z.refreshButton,"hide");z._doButtonAction(z.toggleButton,"hide");z._doButtonAction(z.maximizeButton,"show");if(h.browser.webkit){h("."+y.wijdialogCaptionButton,z.uiDialog).css("float","left")}if(z.innerFrame){t="copy";z[t]=z.uiDialog.clone();z[t].empty();z.uiDialogTitlebar.appendTo(z[t])}if(n.minimizeZoneElementId.length>0){k=h("#"+n.minimizeZoneElementId)}if(k!==null&&k.size()>0){k.append(z[t])}else{r=h("."+y.wijdialogZone);if(r.size()===0){r=h('<div class="'+y.wijdialogZone+'"></div>');h(document.body).append(r)}r.append(z[t]).css("z-index",v.css("z-index"))}z[t].css("position","static");z[t].css("float","left");if(h.browser.msie&&h.browser.version==="6.0"){m=h(document).scrollTop();x=document.documentElement.clientHeight-r.height()+m;r.css({position:"absolute",left:"0px",top:x})}u.appendTo("body").css({top:z[t].offset().top,left:z[t].offset().left,height:z[t].innerHeight(),width:z[t].innerWidth(),position:"absolute"});z.uiDialog.hide();if(z.innerFrame){z[t].hide()}w.effect("transfer",{to:u,className:y.content},100,function(){w.remove();u.remove();z[t].show();z.minimized=true;p=z.uiDialog.position();A.width=z.uiDialog.width();A.height=z.uiDialog.height();z._enableDisableDragger(true);z._trigger("resize",null,{originalPosition:q,originalSize:s,position:p,size:A});z._trigger("stateChanged",null,{originalState:l,state:"minimized"})})}};j.prototype._doButtonAction=function(k,l){if(k!==undefined){k.removeClass(this.options.wijCSS.stateHover);k[l]()}};j.prototype.maximize=function(){var m=this,l=h(window),p,o={width:undefined,height:undefined},k,n={width:undefined,height:undefined},q;if(!m.maximized){m._enableDisableDragger(false);p=m.uiDialog.position();o.width=m.uiDialog.width();o.height=m.uiDialog.height();if(m.minimized){m.restore()}else{if(m.collapsed){m._expandDialogContent(false)}m._saveNormalState();q="normal"}m.maximized=true;if(m.maximizeButton!==undefined){m.maximizeButton.hide();m._restoreButton(true,m.maximizeButton,"Before")}if(h.browser.webkit){h("."+this.options.wijCSS.wijdialogCaptionButton).css("float","")}m._onWinResize(m,l);if(m.collapsed){m._collapseDialogContent(false)}if(!m.collapsed){m._enableDisableDragger(true)}m._enableDisableResizer(true);k=m.uiDialog.position();n.width=m.uiDialog.width();n.height=m.uiDialog.height();m._trigger("resize",null,{originalPosition:p,originalSize:o,position:k,size:n});if(q==="normal"){m._trigger("stateChanged",null,{originalState:"normal",state:"maximized"})}}};j.prototype._bindWindowResize=function(){var l=this,k=h(window),o,n,m;k.resize(function(){if(l.maximized){l._onWinResize(l,k)}});if(h.browser.msie&&h.browser.version==="6.0"){k.bind("scroll.wijdialog resize.wijdialog",function(){if(l.minimized){n=h(document).scrollTop();m=l.uiDialog.parent();o=document.documentElement.clientHeight-m.height()+n;m.css({top:o})}})}};j.prototype._saveNormalState=function(){var k=this,l=k.uiDialog,m=k.element;if(!k.maximized){k.normalWidth=l.css("width");k.normalLeft=l.css("left");k.normalTop=l.css("top");k.normalHeight=l.css("height");k.normalInnerHeight=m.css("height");k.normalInnerWidth=m.css("width");k.normalInnerMinWidth=m.css("min-width");k.normalInnerMinHeight=m.css("min-height")}};j.prototype._onWinResize=function(l,k){l.uiDialog.css("top",k.scrollTop());l.uiDialog.css("left",k.scrollLeft());l.uiDialog.setOutWidth(k.width());l.uiDialog.setOutHeight(k.height());l.options.width=l.uiDialog.width();l.options.height=l.uiDialog.height();l._size();if(l.collapsed){l.uiDialog.height("auto");l.contentWrapper.hide()}};j.prototype._restoreButton=function(l,n,k){var m=this,p={button:"restore",info:{visible:l,click:m.restore,iconClassOn:this.options.wijCSS.iconNewWin}},o=m._createCaptionButton(p,m.uiDialogTitlebar,true);if(l){o["insert"+k](n);m.restoreButton=o}};j.prototype._appendToBody=function(k){if(!this.innerFrame){k.appendTo(this.options.appendTo)}else{this.uiDialogTitlebar.prependTo(k);k.show()}};j.prototype.restore=function(){var s=this,q=s.uiDialog,l,n={width:undefined,height:undefined},m,t={width:undefined,height:undefined},r=h("<div></div>"),p=h("<div></div>"),o="uiDialog",k;if(s.minimized){s.minimized=false;if(s.innerFrame){o="copy";if(!s[o]){o="uiDialog"}}l=s[o].position();n.width=s[o].width();n.height=s[o].height();r.appendTo(s.options.appendTo).css({top:s[o].offset().top,left:s[o].offset().left,height:s[o].innerHeight(),width:s[o].innerWidth(),position:"absolute"});q.css("position","absolute");q.css("float","");s._appendToBody(q);s._enableDisableResizer(false);if(!s.isPin){s._enableDisableDragger(false)}s._restoreToNormal();s.contentWrapper.show();if(s.uiDialogButtonPane.length){s.uiDialogButtonPane.show()}p.appendTo(s.options.appendTo).css({top:s.uiDialog.offset().top,left:s.uiDialog.offset().left,height:s.uiDialog.innerHeight(),width:s.uiDialog.innerWidth(),position:"absolute"});s.uiDialog.hide();r.effect("transfer",{to:p,className:this.options.wijCSS.content},150,function(){s.uiDialog.show();m=s.uiDialog.position();t.width=s.uiDialog.width();t.height=s.uiDialog.height();r.remove();p.remove();if(s.copy){s.copy.remove()}s._trigger("resize",null,{originalPosition:l,originalSize:n,position:m,size:t});k=s.getState();s._trigger("stateChanged",null,{originalState:"minimized",state:k})});if(s.collapsed){s._collapseDialogContent()}s._doButtonAction(s.minimizeButton,"show");s._doButtonAction(s.restoreButton,"remove");s._doButtonAction(s.pinButton,"show");s._doButtonAction(s.refreshButton,"show");s._doButtonAction(s.toggleButton,"show");if(h.browser.webkit){h("."+this.options.wijCSS.wijdialogCaptionButton).css("float","")}}else{if(s.maximized){s.maximized=false;l=s.uiDialog.position();n.width=s.uiDialog.width();n.height=s.uiDialog.height();h(window).unbind(".onWinResize");if(s.collapsed){s._expandDialogContent()}s._enableDisableResizer(false);if(!s.isPin){s._enableDisableDragger(false)}s._restoreToNormal();s.contentWrapper.show();if(s.collapsed){s._collapseDialogContent()}if(s.maximizeButton!==undefined){s.maximizeButton.show();s._restoreButton(false,s.maximizeButton,"before")}m=s.uiDialog.position();t.width=s.uiDialog.width();t.height=s.uiDialog.height();s._trigger("resize",null,{originalPosition:l,originalSize:n,position:m,size:t});k=s.getState();s._trigger("stateChanged",null,{originalState:"maximized",state:k})}}};j.prototype.getState=function(){var k=this;return k.minimized?"minimized":(k.maximized?"maximized":"normal")};j.prototype.reset=function(){var k=this;if(k.getState()==="normal"){k.normalWidth=k.normalLeft=k.normalTop=k.normalHeight=k.normalInnerHeight=k.normalInnerWidth=k.normalInnerMinWidth=k.normalInnerMinHeight=undefined;if(k.initHeight&&k.initWidth){k.options.width=k.initWidth;k.options.height=k.initHeight;k._size()}k._setOption("position",k._originalPosition)}else{k.element.one(this.widgetEventPrefix+"statechanged",function(){k.normalWidth=k.normalLeft=k.normalTop=k.normalHeight=k.normalInnerHeight=k.normalInnerWidth=k.normalInnerMinWidth=k.normalInnerMinHeight=undefined;if(k.initHeight&&k.initWidth){k.options.width=k.initWidth;k.options.height=k.initHeight;k._size()}k._setOption("position",k._originalPosition)});k.restore()}};j.prototype.open=function(){var k=this,m=k.options,l;if((m.hide==="drop"||m.hide==="bounce")&&h.browser.msie){k.uiDialog.css("filter","auto")}if(!k.innerFrame){if(!k.minimized){i.prototype.open.call(this)}else{k._setOpener();k.uiDialog.show();k._isOpen=true}k.uiDialog.wijTriggerVisibility()}else{if(k._isIE9()){l=["blind","bounce","clip","drop","explode","fold","size","shake","slide","transfer"];if(m.show&&l.indexOf(m.show)>-1){m.show=null}window.setTimeout(function(){k.innerFrame.attr("src",m.contentUrl)},200)}else{k.innerFrame.attr("src",m.contentUrl)}if(!k.minimized){i.prototype.open.call(this)}else{k._setOpener();k.uiDialogTitlebar.show();k._isOpen=true}}if(k.collapsed){k._collapseDialogContent(false,true)}if(m.disabled){if(k.disabledDiv){k.disabledDiv.show()}else{k.disable()}}};j.prototype._setOpener=function(){var k=this;if(!k.opener&&k.document&&k.document[0]){k.opener=h(k.document[0].activeElement)}};j.prototype._isIE9=function(){return h.browser.msie&&parseInt(h.browser.version)===9};j.prototype.close=function(){var k=this,m=k.options,l;if(k.innerFrame&&k._isIE9()){l=["blind","bounce","clip","drop","explode","fold","size","shake","slide","transfer"];if(m.hide&&l.indexOf(m.hide)>-1){m.hide=null}}if(i.prototype.close.call(this)){if(k.innerFrame){k.innerFrame.attr("src","");if(k.minimized){k.uiDialogTitlebar.hide()}}if(k.disabledDiv&&m.disabled){k.disabledDiv.hide()}}};j.prototype._restoreToNormal=function(){var k=this,l=k.uiDialog,m=k.element;l.css("width",k.normalWidth);l.css("left",k.normalLeft);l.css("top",k.normalTop);l.css("height",k.normalHeight);m.css("height",k.normalInnerHeight);m.css("width",k.normalInnerWidth);m.css("min-width",k.normalInnerMinWidth);m.css("min-height",k.normalInnerMinHeight);k.options.width=k.uiDialog.width();k.options.height=k.uiDialog.height()};return j})(g);d.wijdialog=f;if(h.ui&&h.ui.dialog){h.extend(h.ui.dialog.overlay,{create:function(j){if(this.instances.length===0){setTimeout(function(){if(h.ui.dialog.overlay.instances.length){h(document).bind(h.ui.dialog.overlay.events,function(k){if(h(k.target).zIndex()<h.ui.dialog.overlay.maxZ&&!h.contains(j.element[0],k.target)){return false}})}},1);h(document).bind("keydown.dialog-overlay",function(k){var l=b.getKeyCodeEnum();if(j.options.closeOnEscape&&!k.isDefaultPrevented()&&k.keyCode&&k.keyCode===l.ESCAPE){j.close(k);k.preventDefault()}});h(window).bind("resize.dialog-overlay",h.ui.dialog.overlay.resize)}var i=(this.oldInstances.pop()||h("<div></div>").addClass(j.options.wijCSS.overlay)).appendTo(document.body).css({width:this.width(),height:this.height()});if(h.fn.bgiframe){i.bgiframe()}this.instances.push(i);return i},height:function(){var j,i;if(h.browser.msie){j=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(j<i){return h(window).height()+"px"}else{return j+"px"}}else{return h(document).height()+"px"}},width:function(){var i,j;if(h.browser.msie){i=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);j=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(i<j){return h(window).width()+"px"}else{return i+"px"}}else{return h(document).width()+"px"}}});f.prototype.options=h.extend(true,{},b.wijmoWidget.prototype.options,h.ui.dialog.prototype.options,new c());f.prototype.disable=function(){return this._setOption("disabled",true)};f.prototype.enable=function(){return this._setOption("disabled",false)};h.wijmo.registerWidget(e,h.ui.dialog,f.prototype)}})(b.dialog||(b.dialog={}));var a=b.dialog})(wijmo||(wijmo={}));