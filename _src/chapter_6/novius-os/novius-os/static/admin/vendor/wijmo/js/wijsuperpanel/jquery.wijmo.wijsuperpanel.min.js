var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var wijmo;(function(b){(function(u){var g=jQuery;var v=(function(){function z(){this.wijCSS={superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""};this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-b",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"};this.initSelector=":jqmData(role='wijsuperpanel')";this.allowResize=false;this.autoRefresh=false;this.animationOptions={queue:false,disabled:false,duration:250,easing:undefined};this.hScrollerActivating=null;this.hScroller={scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0};this.keyboardSupport=false;this.keyDownInterval=100;this.mouseWheelSupport=true;this.bubbleScrollingEvent=true;this.resizableOptions={handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"};this.resized=null;this.dragStop=null;this.painted=null;this.scrolling=null;this.scroll=null;this.scrolled=null;this.showRounder=true;this.vScrollerActivating=null;this.vScroller={scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0};this.customScrolling=false;this.listenContentScroll=false}return z})();var h=(function(A){__extends(z,A);function z(){A.apply(this,arguments)}z.prototype.destroy=function(){};z.prototype.needToScroll=function(B){};z.prototype.scrollChildIntoView=function(B){};z.prototype.hScrollTo=function(B,C){};z.prototype.vScrollTo=function(C,B){};z.prototype.scrollPxToValue=function(C,B){};z.prototype.scrollValueToPx=function(C,B){};z.prototype.scrollTo=function(B,D,C){};z.prototype.refresh=function(){};z.prototype.paintPanel=function(B){};z.prototype.getContentElement=function(){};return z})(b.wijmoWidget);u.wijsuperpanel=h;var l;if(!g.support.isTouchEnabled||!g.support.isTouchEnabled()){var d="wijmo-wijsuperpanel-handle",w="wijmo-wijsuperpanel-hbarcontainer",s="wijmo-wijsuperpanel-vbarcontainer",t="",i="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper'><div class='wijmo-wijsuperpanel-templateouterwrapper'></div></div></div>",y="<div class='wijmo-wijsuperpanel-hbarcontainer {superpanelHBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconVGripSolid}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonleft {superpanelHBarbuttonLeft} {stateDefault} {cornerBL}'><span class='{icon} {iconArrowLeft}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonright {superpanelHBarbuttonRight} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowRight}'></span></div></div>",o="<div class='wijmo-wijsuperpanel-vbarcontainer {superpanelVBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconHGripSolid}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttontop {superpanelVBarbuttonTop} {stateDefault} {cornerTR}'><span class='{icon} {iconArrowUp}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttonbottom {superpanelVBarbuttonBottom} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowDown}'></span></div></div>",j="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonleft {superpanelButtonLeft}'><span class='{icon} {iconCaratLeft}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonright {superpanelButtonRight}'><span class='{icon} {iconCaratRight}'></span></div>",x="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton}  wijmo-wijsuperpanel-buttontop {superpanelButtonTop}'><span class='{icon} {iconCaratUp}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonbottom {superpanelButtonBottom}'><span class='{icon} {iconCaratDown}'> </span></div>";h.prototype=g.extend(true,{},g.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(B,E){var z=this,G=z.options,D=z._fields(),F=D.hbarDrag,A=D.vbarDrag,C=D.resizer;if(B==="animationOptions"){E=g.extend(G.animationOptions,E)}else{if(B==="hScroller"){if(E.scrollLargeChange!==undefined&&E.scrollLargeChange!==null){z._autoHLarge=false}E=g.extend(G.hScroller,E);z._adjustScrollValue("h");z.refresh()}else{if(B==="vScroller"){if(E.scrollLargeChange!==undefined&&E.scrollLargeChange!==null){z._autoVLarge=false}z._adjustScrollValue("v");E=g.extend(G.vScroller,E);z.refresh()}else{if(B==="resizableOptions"){E=g.extend(z.resizableOptions,E)}}}}g.Widget.prototype._setOption.apply(z,arguments);if(g.isPlainObject(E)){z.options[B]=E}switch(B){case"allowResize":z._initResizer();break;case"disabled":if(E){if(F!==undefined){F.draggable("disable")}if(A!==undefined){A.draggable("disable")}if(C!==undefined){C.resizable("disable")}}else{if(F!==undefined){F.draggable("enable")}if(A!==undefined){A.draggable("enable")}if(C!==undefined){C.resizable("enable")}}break;case"mouseWheelSupport":case"keyboardSupport":z._bindElementEvents(z,D,z.element,G);break}return z},_create:function(){var z=this,A=z.options;A.vScroller.dir="v";A.hScroller.dir="h";z._initMarkup();z.paintPanel(A.unfocus);z._initResizer();if(z.options.disabled){z.disable()}z._detectAutoRefresh();if(A.listenContentScroll){z._listenContentScroll()}if(z.element.is(":hidden")&&z.element.wijAddVisibilityObserver){z.element.wijAddVisibilityObserver(function(){if(z.element.wijRemoveVisibilityObserver){z.element.wijRemoveVisibilityObserver()}z.refresh()},"wijsuperpanel")}},_initMarkup:function(){var z=this.options.wijCSS,A=/\{(\w+?)\}/ig,B=function(D,C){return z[C]};t=z.stateActive;y=y.replace(A,B);o=o.replace(A,B);j=j.replace(A,B);x=x.replace(A,B)},_detectAutoRefresh:function(){var z=this,A=g.wijmo.wijsuperpanel.panels;if(A===undefined){A=[];g.wijmo.wijsuperpanel.panels=A}A.push(z);if(z.options.autoRefresh){if(!g.wijmo.wijsuperpanel.setAutoRefreshInterval){g.wijmo.wijsuperpanel.setAutoRefreshInterval=z._setAutoRefreshInterval;g.wijmo.wijsuperpanel.setAutoRefreshInterval()}}},_setAutoRefreshInterval:function(){var z=g.wijmo.wijsuperpanel.autoRereshInterval,A=g.wijmo.wijsuperpanel.panels,B;B=window.setInterval(function(){window.clearInterval(B);var F=A.length,H=false,E,C,J,D,G,I;for(E=0;E<F;E++){C=A[E];J=C.element[0];D=C.options.autoRefresh;if(D){H=true}G=C.getContentElement();I=C._paintedMark;if(D&&G.is(":visible")&&(I===undefined||I.width!==G[0].offsetWidth||I.height!==G[0].offsetHeight||I.mainWidth!==J.offsetWidth||I.mainHeight!==J.offsetHeight)){C.paintPanel()}}if(H){window.setTimeout(g.wijmo.wijsuperpanel.setAutoRefreshInterval,0)}},z===undefined?500:z)},destroy:function(){var z=this,D=z._fields(),C=z.element,B,A,E=z.options.wijCSS;g.wijmo.wijsuperpanel.panels=g.grep(g.wijmo.wijsuperpanel.panels,function(F){return F!==z},false);if(!D.initialized){return}if(z._radiusKey){z.element.css(z._radiusKey,"")}if(D.intervalID!==undefined){window.clearInterval(D.intervalID);D.intervalID=undefined}if(D.resizer!==undefined){D.resizer.resizable("destroy")}if(D.hbarContainer!==undefined){D.hbarDrag.remove();D.hbarContainer.unbind("."+z.widgetName)}if(D.vbarContainer!==undefined){D.vbarDrag.remove();D.vbarContainer.unbind("."+z.widgetName)}C.unbind("."+z.widgetName);D.contentWrapper.unbind("."+z.widgetName);B=D.stateContainer.find(">.wijmo-wijsuperpanel-button");B.unbind("."+z.widgetName);A=D.templateWrapper;A.contents().each(function(F,G){C.append(G)});D.stateContainer.remove();if(D.tabindex){C.removeAttr("tabindex")}C.removeClass(["wijmo-wijsuperpanel",E.widget,E.content,E.cornerAll].join(" "));g.Widget.prototype.destroy.apply(z,arguments)},_fields:function(){var z=this,B=z.element,A=z.widgetName+"-fields",C=z._fieldsStore;if(C===undefined){C={};B.data(A,C);z._fieldsStore=C}return C},_hasMode:function(z,B){var A=z.scrollMode.split(",");A=g.map(A,function(C){return g.trim(C).toLowerCase()});return g.inArray(B.toLowerCase(),A)>-1},_bindElementEvents:function(A,E,D,F){var z=A._hasMode(F.hScroller,"edge"),C=A._hasMode(F.vScroller,"edge"),B=A.widgetName;if(z||C){if(A._mousemoveBind===undefined){A._mousemoveBind=true;D.bind("mousemove."+B,A,A._contentMouseMove);D.bind("mouseleave."+B,null,function(){A._clearInterval()})}}else{D.unbind("mousemove",A._contentMouseMove);A._mousemoveBind=undefined}if(F.mouseWheelSupport){if(A._mouseWheelBind===undefined){A._mouseWheelBind=true;D.bind("mousewheel."+B,A,A._panelMouseWheel)}}else{D.unbind("mousewheel",A._panelMouseWheel);A._mouseWheelBind=undefined}if(F.keyboardSupport){if(A._keyboardBind===undefined){A._keyboardBind=true;D.bind("keydown."+B,A,A._panelKeyDown)}}else{D.unbind("keydown",A._panelKeyDown);A._keyboardBind=undefined}},_dragStop:function(C,z,A){var B={dragHandle:A};z._trigger("dragStop",C,B)},_contentMouseMove:function(N){if(N.data.options.disabled){return}var G=N.data,I=G.options,C=I.hScroller,z=I.vScroller,D=g(N.currentTarget),M=G._fields(),O=G._hasMode(C,"edge"),F=G._hasMode(z,"edge"),Q={X:N.pageX,Y:N.pageY},P=D.offset(),A=P.left,E=P.top,K=C.hoverEdgeSpan,B=z.hoverEdgeSpan,L=D.innerHeight(),J=D.innerWidth(),H="";A=Q.X-A;E=Q.Y-E;G._clearInterval();if(O){if(A<K){H="left"}if(A>(J-K)){H="right"}}if(F){if(E<B){H="top"}if(E>(L-B)){H="bottom"}}G._setScrollingInterval(M,H,G,false)},_setScrollingInterval:function(C,A,z,B){var D=z.options;if(A.length>0){C.internalFuncID=window.setInterval(function(){z._doScrolling(A,z,B)},D.keyDownInterval)}},_scrollButtonMouseOver:function(B){var z=B.data,C=z.options,A=g(B.currentTarget);if(C.disabled){return}if(!A.hasAllClasses(C.wijCSS.stateDisabled)){A.bind("mouseout."+z.widgetName,z,z._buttonMouseOut).bind("mousedown."+z.widgetName,z,z._buttonMouseDown).bind("mouseup."+z.widgetName,z,z._buttonMouseUp).addClass(C.wijCSS.stateHover);z._buttonScroll(A,z,"buttonshover")}},_buttonScroll:function(C,z,F){var B="",E=z.options,D=z._fields(),A=z._hasMode(E.hScroller,F),G=z._hasMode(E.vScroller,F);if(C.hasClass("wijmo-wijsuperpanel-buttonleft")&&A){B="left"}else{if(C.hasClass("wijmo-wijsuperpanel-buttonright")&&A){B="right"}else{if(C.hasClass("wijmo-wijsuperpanel-buttontop")&&G){B="top"}else{if(C.hasClass("wijmo-wijsuperpanel-buttonbottom")&&G){B="bottom"}}}}if(B.length>0){z._clearInterval();z._doScrolling(B,z,true);z._setScrollingInterval(D,B,z,true)}},_listenContentScroll:function(){var O=this,C=O.options,J=O._fields(),I=J.hbarContainer,E=J.hbarDrag,L=J.vbarContainer,K=J.vbarDrag,D=J.templateWrapper,H=J.contentWrapper,N=H.width(),G=H.height(),F=D&&D.offset(),B=F&&F.left,A=F&&F.top,z=J.contentWidth,M=J.contentHeight;H.bind("scroll",function(Q){var S=D.position(),P=S.left,R=S.top;H.scrollTop(0).scrollLeft(0);D.css({left:P,top:R});if(P<=0&&P>N-z){O._updateScrollValue(O.scrollPxToValue(-P,"h"),C.hScroller);O._scrollDrag("h",I,E,true)}if(R<=0&&R>G-M){O._updateScrollValue(O.scrollPxToValue(-R,"v"),C.vScroller);O._scrollDrag("v",L,K,true)}})},_buttonMouseDown:function(B){var z=B.data,A=g(B.currentTarget),C=z.options.wijCSS;if(z.options.disabled){return}if(!A.hasAllClasses(C.stateDisabled)){A.addClass(C.stateActive);z._buttonScroll(A,z,"buttons")}},_buttonMouseUp:function(B){var z=B.data,A=g(B.currentTarget);A.removeClass(z.options.wijCSS.stateActive);z._clearInterval()},_buttonMouseOut:function(B){var z=B.data,C=z.options.wijCSS,A=g(B.currentTarget);A.unbind("mouseout",z._buttonMouseOut).unbind("mousedown",z._buttonMouseDown).unbind("mouseup",z._buttonMouseUp).removeClass(C.stateHover).removeClass(C.stateActive);z._clearInterval()},_updateScrollValue:function(B,z){var A=g.Event("scrollValueChanged");z.scrollValue=B;this._trigger("scrollValueChanged",A,z)},_panelKeyDown:function(D){var B=D.data,E=B.options,A=D.shiftKey,z=D.keyCode,C=b.getKeyCodeEnum();if(!E.keyboardSupport||E.disabled){return}if(z===C.LEFT){B._doScrolling("left",B,A)}else{if(z===C.RIGHT){B._doScrolling("right",B,A)}else{if(z===C.UP){B._doScrolling("top",B,A)}else{if(z===C.DOWN){B._doScrolling("bottom",B,A)}}}}D.stopPropagation();D.preventDefault()},_draggingInternal:function(G,N,I,L){var D=I.dir,H=D==="h",K=H?"left":"top",C=G.position[K]-N._getScrollContainerPadding(K),A=N._getTrackLen(D)-L[H?"outerWidth":"outerHeight"](true),F=C/A,E=(I.scrollMax-I.scrollLargeChange+1),J=F*E,M,z,B;if(J<I.scrollMin){J=I.scrollMin}if(J>E){J=E}M={oldValue:I.scrollValue,newValue:J,dir:D};if(!N._scrolling(true,N,M)){return}if(N.customScroll){B=Math.abs(N.customScroll);z=N.scrollPxToValue(B,I.dir)}N._updateScrollValue(z||J,I);N.customScroll=undefined;N._setDragAndContentPosition(true,false,D,"dragging")},_dragging:function(D,B,A){var E=A.options,z=g(D.target),C=z.parent();if(C.hasAllClasses(w)){A._draggingInternal(B,A,E.hScroller,z)}else{A._draggingInternal(B,A,E.vScroller,z)}},_panelMouseWheel:function(E,G){var I=E.data,z=I.options,H,A="",B,D=z.hScroller,C=z.vScroller,F;if(!z.mouseWheelSupport||z.disabled){return}H=g(E.srcElement||E.originalEvent.target);B=H.closest("."+w,I.element).size()>0;if(G>0){A=B?"left":"top"}else{A=B?"right":"bottom"}if(A.length>0){I._doScrolling(A,I)}F=false;if(A==="left"){F=!I.hNeedScrollBar||Math.abs(D.scrollValue-D.scrollMin)<0.001}if(A==="right"){F=!I.hNeedScrollBar||Math.abs(D.scrollValue-(D.scrollMax-I._getHScrollBarLargeChange()+1))<0.001}if(A==="top"){F=!I.vNeedScrollBar||Math.abs(C.scrollValue-C.scrollMin)<0.001}if(A==="bottom"){F=!I.vNeedScrollBar||Math.abs(C.scrollValue-(C.scrollMax-I._getVScrollBarLargeChange()+1))<0.001}if(!F||!z.bubbleScrollingEvent||A==="left"||A==="right"){E.stopPropagation();E.preventDefault()}},_documentMouseUp:function(B){var z=B.data.self,A=B.data.ele;A.removeClass(z.options.wijCSS.stateActive);z._clearInterval();g(document).unbind("mouseup",z._documentMouseUp)},_scrollerMouseOver:function(C){var A=C.data,D=A.options,z,B=null,E=false;if(D.disabled){return}z=g(C.srcElement||C.originalEvent.target||C.originalEvent.srcElement);if(z.hasAllClasses(D.wijCSS.stateDefault)){B=z;E=true}else{if(z.parent().hasAllClasses(D.wijCSS.stateDefault)){B=z.parent();E=true}else{if(z.hasAllClasses(s)||z.hasAllClasses(w)){B=z}}}if(B){if(E){B.addClass(D.wijCSS.stateHover)}B.bind("mouseout."+A.widgetName,A,A._elementMouseOut);B.bind("mousedown."+A.widgetName,A,A._elementMouseDown);B.bind("mouseup."+A.widgetName,A,A._elementMouseUp)}},_elementMouseUp:function(A){var z=g(A.currentTarget);z.removeClass(t)},_elementMouseDown:function(E){var J=g(E.currentTarget),I=E.data,A,D,z="",H=false,B=false,G,F,C;if(I.options.disabled||E.which!==1){return}if(J.hasClass("wijmo-wijsuperpanel-vbar-buttontop")){z="top";B=true}else{if(J.hasClass("wijmo-wijsuperpanel-vbar-buttonbottom")){z="bottom";B=true}else{if(J.hasClass("wijmo-wijsuperpanel-hbar-buttonleft")){z="left";B=true}else{if(J.hasClass("wijmo-wijsuperpanel-hbar-buttonright")){z="right";B=true}else{if(J.hasAllClasses(d)){J.addClass(t);return}else{if(J.hasAllClasses(w)){A=J.find("."+d);G=A.offset();if(E.pageX<G.left){z="left"}else{z="right"}H=true}else{if(J.hasAllClasses(s)){D=J.find("."+d);F=D.offset();if(E.pageY<F.top){z="top"}else{z="bottom"}H=true}}}}}}}I._clearInterval();I._doScrolling(z,I,H);C=I._fields();I._setScrollingInterval(C,z,I,H);if(B){J.addClass(t)}g(document).bind("mouseup."+I.widgetName,{self:I,ele:J},I._documentMouseUp)},doScrolling:function(z,A){this._doScrolling(z,this,A)},_setScrollerValue:function(D,G,J,A,M,K,O){var H=G.scrollMin,I=K?A:J,L=G.scrollValue,N=0,C,E,F,z,B;if(!L){L=H}C=G.scrollMax-A+1;if(L>C){L=C}if(M){if(Math.abs(L-C)<0.001){O._clearInterval();return false}E=G.firstStepChangeFix;N=L+I;if(!K&&Math.abs(L-H)<0.0001&&!isNaN(E)){N+=E}if(N>C){N=C}}else{if(Math.abs(L-H)<0.001){O._clearInterval();return false}N=L-I;if(N<0){N=H}}F={oldValue:G.scrollValue,newValue:N,direction:D,dir:G.dir};if(!O._scrolling(true,O,F)){return false}if(O.customScroll){B=Math.abs(O.customScroll);z=O.scrollPxToValue(B,G.dir)}O._updateScrollValue(z||N,G);O.customScroll=undefined;return true},_doScrolling:function(B,I,H){var A=I.options,D=A.vScroller,E=A.hScroller,C=I._getVScrollBarSmallChange(),G=I._getVScrollBarLargeChange(),F=I._getHScrollBarLargeChange(),z=I._getHScrollBarSmallChange();if(B==="top"||B==="bottom"){if(!I._setScrollerValue(B,D,C,G,B==="bottom",H,I)){return}B="v"}else{if(B==="left"||B==="right"){if(!I._setScrollerValue(B,E,z,F,B==="right",H,I)){return}B="h"}}I._setDragAndContentPosition(true,true,B)},_disableButtonIfNeeded:function(L){var F=L._fields(),z=L.options,A=F.buttonLeft,C=F.buttonRight,D=F.buttonTop,M=F.buttonBottom,H,I,E,G,K,N,J,B;if(F.intervalID>0){window.clearInterval(F.intervalID)}if(A!==undefined){H=L._getHScrollBarLargeChange();I=z.hScroller.scrollMax-H+1;E=z.hScroller.scrollValue;G=z.hScroller.scrollMin;if(E===undefined){E=G}if(Math.abs(E-G)<0.001||!F.hScrolling){A.addClass(z.wijCSS.stateDisabled)}else{A.removeClass(z.wijCSS.stateDisabled)}if(Math.abs(E-I)<0.001||!F.hScrolling){C.addClass(z.wijCSS.stateDisabled)}else{C.removeClass(z.wijCSS.stateDisabled)}}if(D!==undefined){K=L._getVScrollBarLargeChange();N=z.vScroller.scrollMax-K+1;J=z.vScroller.scrollValue;B=z.vScroller.scrollMin;if(J===undefined){J=B}if(Math.abs(J-B)<0.001||!F.vScrolling){D.addClass(z.wijCSS.stateDisabled)}else{D.removeClass(z.wijCSS.stateDisabled)}if(Math.abs(J-N)<0.001||!F.vScrolling){M.addClass(z.wijCSS.stateDisabled)}else{M.removeClass(z.wijCSS.stateDisabled)}}},_clearInterval:function(){var A=this._fields(),z=A.internalFuncID;if(z>0){window.clearInterval(z);A.internalFuncID=-1}},_elementMouseOut:function(A){var B=g(A.currentTarget),z=A.data;B.unbind("mouseout",z._elementMouseOut);B.unbind("mousedown",z._elementMouseDown);B.unbind("mouseup",z._elementMouseUp);B.removeClass(z.options.wijCSS.stateHover)},_getScrollOffset:function(F){var B=g(F),G=this._fields(),J=G.contentWrapper,L=G.templateWrapper,H,D,C,I,z,E,A,K={left:null,top:null};if(B.length===0){return K}H=B.offset();D=L.offset();H.leftWidth=H.left+B.outerWidth();H.topHeight=H.top+B.outerHeight();C=J.offset();C.leftWidth=C.left+J.outerWidth();C.topHeight=C.top+J.outerHeight();E=H.left-D.left;if(H.left<C.left){K.left=E}else{if(H.leftWidth>C.leftWidth){A=H.leftWidth-D.left-J.innerWidth();if(E<A){K.left=E}else{K.left=A}}}I=H.top-D.top;if(H.top<C.top){K.top=I}else{if(H.topHeight>C.topHeight){z=H.topHeight-D.top-J.innerHeight();if(I<z){K.top=I}else{K.top=z}}}return K},_scrollDrag:function(D,G,C,z){var P=this,B=P.options,N=D==="v",I=N?B.vScroller:B.hScroller,E=I.scrollMin,K=I.scrollMax,H=I.scrollValue===undefined?E:(I.scrollValue-E),J=P._getLargeChange(D),L=K-E-J+1,O=-1,A,F,M;if(H>L){H=L}if(G!==undefined){A=P._getTrackLen(D);F=C[N?"outerHeight":"outerWidth"]();M=P._getScrollContainerPadding(N?"top":"left");O=(H/L)*(A-F)+M}if(O>=0){C.css(N?"top":"left",O+"px")}P._scrollEnd(z,P,D)},needToScroll:function(A){var z=this._getScrollOffset(A);return z.top!==null||z.left!==null},scrollChildIntoView:function(C){var B=this._getScrollOffset(C),A=B.left,z=B.top;if(A!==null){this.hScrollTo(A)}if(z!==null){this.vScrollTo(z)}},hScrollTo:function(z,A){var B=this.options;this._updateScrollValue(!!A?z:this.scrollPxToValue(z,"h"),B.hScroller);this._setDragAndContentPosition(true,true,"h","nonestop")},vScrollTo:function(B,z){var A=this.options;this._updateScrollValue(!!z?B:this.scrollPxToValue(B,"v"),A.vScroller);this._setDragAndContentPosition(true,true,"v","nonestop")},scrollPxToValue:function(K,A){var z=this.options,B=(A==="h"?"outerWidth":"outerHeight"),M=(A==="h"?"contentWidth":"contentHeight"),D=(A==="h"?"hScroller":"vScroller"),E=this._fields(),L=E.contentWrapper,O=E[M],J=L[B](),G=z[D].scrollMin,N=z[D].scrollMax,C=N-G,I=(A==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange()),H=C-I+1,F=H*(K/(O-J));if(F<G){F=G}if(F>H){F=H}return F},scrollValueToPx:function(M,D){var O=this,C=O.options,I=O._fields(),G=D==="h",z,F,H,N,P,B,E,J,A,K,L;z=G?"outerWidth":"outerHeight";F=G?"contentWidth":"contentHeight";H=G?"hScroller":"vScroller";A=G?O._getHScrollBarLargeChange():O._getVScrollBarLargeChange();N=I.contentWrapper;P=I[F];B=N[z]();E=C[H].scrollMin;J=C[H].scrollMax;K=(J-E)-A+1;if(M===undefined||M<E){M=E}if(M>K){M=K}L=(P-B)*(M/K);return Math.round(L)},scrollTo:function(z,B,A){this.hScrollTo(z,A);this.vScrollTo(B,A)},refresh:function(){this.paintPanel()},paintPanel:function(A){var z=this,D=z.element,E,F,C,B;if(D.is(":visible")){E=typeof document.activeElement!="unknown"?document.activeElement:undefined;F=z.options;C=z._fields();if(!C.initialized){z._initialize(C,D,z)}z._resetLargeChange(z,C,F);z._bindElementEvents(z,C,D,F);B=C.templateWrapper;B.css({"float":"left",left:"0px",top:"0px",width:"auto",height:"auto"});B.hide();B.show();C.contentWidth=B.width();C.contentHeight=B.height();B.css("float","");z._setRounder(z,D);z._setInnerElementsSize(C,D);if(z._testScroll(z,C,F)===false){return false}z._initScrollBars(z,C,F);z._initScrollButtons(z,C,F);z._trigger("painted");z._paintedMark={date:new Date(),mainWidth:D[0].offsetWidth,mainHeight:D[0].offsetHeight,width:C.contentWidth,height:C.contentWidth};if(E!==undefined&&!A){g(E).focus()}return true}return false},_adjustScrollValue:function(B){var D=B==="h",H=this,A=this.options,I=D?H.hNeedScrollBar:H.vNeedScrollBar,F=D?A.hScroller:A.vScroller,G=F.scrollMax,E=F.scrollMin,z,C;if(I){z=D?H._getHScrollBarLargeChange():H._getVScrollBarLargeChange();C=G-z+1;if(F.scrollValue>C){F.scrollValue=C}if(F.scrollValue<E){F.scrollValue=E}}},_resetLargeChange:function(z,B,C){var A;if(z._autoVLarge){C.vScroller.scrollLargeChange=null}if(z._autoHLarge){C.hScroller.scrollLargeChange=null}B.vTrackLen=undefined;B.hTrackLen=undefined;if(B.vbarContainer){A=B.vbarContainer.children("."+d+":eq(0)");A.detach();B.vbarContainer.remove();B.vbarContainer=undefined}if(B.hbarContainer){A=B.hbarContainer.children("."+d+":eq(0)");A.detach();B.hbarContainer.remove();B.hbarContainer=undefined}},_initialize:function(C,B,A){var D=A.options.wijCSS;C.initialized=true;B.addClass(["wijmo-wijsuperpanel",D.widget,D.content].join(" "));C.oldHeight=B.css("height");var z=B.css("overflow");B.css("overflow","");B.height(B.height());B.css("overflow",z);A._createAdditionalDom(A,C,B)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(N,A,F,B,H,G,z){var E=B==="h",L="mouseover."+N.widgetName,O=E?"buttonLeft":"buttonTop",K=E?"buttonRight":"buttonBottom",C=G[O],M=G[K],D,I,J;if(N._hasMode(F,"buttons")||N._hasMode(F,"buttonshover")){D=E?j:x;if(C===undefined){I=g(D).appendTo(z);I.bind(L,N,N._scrollButtonMouseOver);G[O]=C=z.children(E?".wijmo-wijsuperpanel-buttonleft":".wijmo-wijsuperpanel-buttontop");G[K]=M=z.children(E?".wijmo-wijsuperpanel-buttonright":".wijmo-wijsuperpanel-buttonbottom")}J={my:E?"left":"top",of:H,at:E?"left":"top",collision:"none"};g.extend(J,F.decreaseButtonPosition);C.position(J);J={my:E?"right":"bottom",of:H,at:E?"right":"bottom",collision:"none"};g.extend(J,F.increaseButtonPosition);M.position(J)}else{if(C!==undefined){C.remove();M.remove();G[O]=G[K]=undefined}}},_initScrollButtons:function(A,C,D){var z=C.contentWrapper,B=C.stateContainer;A._setButtonPosition(A,D,D.hScroller,"h",z,C,B);A._setButtonPosition(A,D,D.vScroller,"v",z,C,B)},_getVScrollBarSmallChange:function(){var A=this.options,z;if(!A.vScroller.scrollSmallChange){z=this._getVScrollBarLargeChange();A.vScroller.scrollSmallChange=z/2}return A.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(C){var P=this,B=P.options,I=P._fields(),O=C==="v",H=O?B.vScroller:B.hScroller,J=O?"innerHeight":"innerWidth",F=O?"contentHeight":"contentWidth",G=O?"_autoVLarge":"_autoHLarge",M,E,A,L,z,D,K,N;if(H.scrollLargeChange){return H.scrollLargeChange}M=H.scrollMax;E=H.scrollMin;A=M-E;L=I.contentWrapper;z=L[J]();D=I[F];K=z/(D-z);N=((A+1)*K)/(1+K);if(isNaN(N)){N=0}H.scrollLargeChange=N;P[G]=true;return H.scrollLargeChange},_getHScrollBarSmallChange:function(){var A=this.options,z;if(!A.hScroller.scrollSmallChange){z=this._getHScrollBarLargeChange();A.hScroller.scrollSmallChange=z/2}return A.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(O,T,Q){var H=Q.hScroller,L=H.scrollMax,J=H.scrollMin,K=L-J,B=Q.vScroller,P=B.scrollMax,N=B.scrollMin,E=P-N,D=T.hbarDrag,S=T.vbarDrag,A,R,G,V,U,I,C,M,z,F;if(O.hNeedScrollBar&&D.is(":visible")){A=O._getHScrollBarLargeChange();R=O._getTrackLen("h");G=O._getDragLength(K,A,R,Q.hScroller.scrollMinDragLength);D.width(G);V=D.outerWidth(true)-D.width();D.width(G-V);U=D.children("span");U.css("margin-left",(D.width()-U[0].offsetWidth)/2);if(R<=D.outerWidth(true)){D.hide()}else{D.show()}if(O._isDragging==true){g(document).trigger("mouseup");O._isDragging=false}}if(O.vNeedScrollBar&&S.is(":visible")){I=O._getVScrollBarLargeChange();C=O._getTrackLen("v");M=O._getDragLength(E,I,C,Q.vScroller.scrollMinDragLength);S.height(M);z=S.outerHeight(true)-S.height();S.height(M-z);F=S.children("span");F.css("margin-top",(S.height()-F[0].offsetHeight)/2);if(C<=S.outerHeight(true)){S.hide()}else{S.show()}if(O._isDragging==true){g(document).trigger("mouseup");O._isDragging=false}}O._setDragAndContentPosition(false,false,"both")},_getTrackLen:function(A){var H=this,D=H._fields(),G=A+"TrackLen",C=D.hbarContainer,E=D.vbarContainer,z=0,F=0,B=0;if(D[G]!==undefined){return D[G]}if(A==="h"){F=H._getScrollContainerPadding("h");B=H._getScrollContainerBorders("h");z=C.innerWidth()}if(A==="v"){F=H._getScrollContainerPadding("v");B=H._getScrollContainerBorders("v");z=E.innerHeight()}D[G]=(z-F-B);return D[G]},_getScrollContainerPadding:function(z){var B=this,D=B._fields(),E=0,A,C;if(z==="h"){E=B._getScrollContainerPadding("left")+B._getScrollContainerPadding("right")}else{if(z==="v"){E=B._getScrollContainerPadding("top")+B._getScrollContainerPadding("bottom")}else{if(z==="left"||z==="right"){A=D.hbarContainer}else{A=D.vbarContainer}C=z+"Padding";if(D[C]!==undefined){E=D[C];return E}if(A&&A.css){E=parseFloat(A.css("padding-"+z))}D[C]=E}}return E},_getScrollContainerBorders:function(A){var z=this,C=z._fields(),D=0,B;B=A+"Borders";if(C[B]!==undefined){D=C[B];return D}if(A==="h"){D=z._getScrollContainerBorder("left")+z._getScrollContainerBorder("right")}else{if(A==="v"){D=z._getScrollContainerBorder("top")+z._getScrollContainerBorder("bottom")}}C[B]=D;return D},_getScrollContainerBorder:function(F){var C=this,G=C._fields(),D=0,z,E,B,A;if(F==="left"||F==="right"){z=G.hbarContainer}else{z=G.vbarContainer}E=F+"Border";if(G[E]!==undefined){D=G[E];return D}if(z&&z.css){A=z.css("border-"+F+"-width").toLowerCase();D=parseFloat(A);if(isNaN(D)){B=z.css("border-"+F+"-style").toLowerCase();switch(B){case"none":case"hidden":D=0;break;default:switch(A){case"thin":D=1;break;case"medium":D=3;break;case"thick":D=5;break;default:D=0;break}break}}}G[E]=D;return D},_triggerScroll:function(z,A,C){var B={position:z,dir:A,animationOptions:C};this._trigger("scroll",null,B)},_contentDragAnimate:function(R,ac,G,E,W,ae,T){var P=this,S=P.options,J=R==="v",ab=J?S.vScroller:S.hScroller,A=J?"outerHeight":"outerWidth",F=J?"top":"left",K=ab.scrollMin,N=ab.scrollMax,L=N-K,U=ab.scrollValue===undefined?K:ab.scrollValue,z=P._getLargeChange(R),Y=L-z+1,aa=P._fields(),V=aa.templateWrapper,ad,C,Q,Z,O,M,I,H,D,X,B,af;ad=P.scrollValueToPx(U,R);C=-1;if(G!==undefined){if(ac&&E.is(":animated")&&W!=="nonestop"){E.stop(true,false)}Q=P._getTrackLen(R);Z=E[A](true);O=Q-Z;M=P._getScrollContainerPadding(F);C=(U/Y)*O+M}if(ac&&S.animationOptions&&!S.animationOptions.disabled){if(C>=0&&T!=="dragging"){I=g.extend({},S.animationOptions);I.complete=undefined;if(J){H={top:C}}else{H={left:C}}E.animate(H,I)}D=g.extend({},S.animationOptions);X=S.animationOptions.complete;D.complete=function(){P._scrollEnd(ae,P,R);if(g.isFunction(X)){X(arguments)}};if(ac&&V.is(":animated")&&W!=="nonestop"){V.stop(true,false)}if(J){B={top:-ad}}else{B={left:-ad}}if(!S.customScrolling){V.animate(B,D)}else{P._scrollEnd(ae,P,R,U)}P._triggerScroll(ad,R,D)}else{af=J?"top":"left";if(C>=0&&T!=="dragging"){E[0].style[af]=C+"px"}if(!S.customScrolling){V[0].style[af]=-ad+"px"}P._triggerScroll(ad,R);P._scrollEnd(ae,P,R,U)}},_setDragAndContentPosition:function(z,C,B,H,I){var J=this,E=J._fields(),D=E.hbarContainer,A=E.hbarDrag,G=E.vbarContainer,F=E.vbarDrag;if((B==="both"||B==="h")&&E.hScrolling){J._contentDragAnimate("h",C,D,A,H,z,I)}if((B==="both"||B==="v")&&E.vScrolling){J._contentDragAnimate("v",C,G,F,H,z,I)}if(E.intervalID>0){window.clearInterval(E.intervalID)}E.intervalID=window.setInterval(function(){J._disableButtonIfNeeded(J)},500)},_scrolling:function(A,z,C){var B=true;if(A){C.beforePosition=z.getContentElement().position();z._beforePosition=C.beforePosition;B=z._trigger("scrolling",null,C);z.customScroll=C.customScroll}return B},_scrollEnd:function(B,z,A,C){if(B){window.setTimeout(function(){var D=z.getContentElement(),F,E;if(!D.is(":visible")){return}F=z.getContentElement().position();E={dir:A,beforePosition:z._beforePosition,afterPosition:F};if(!isNaN(C)){E.newValue=C}z._trigger("scrolled",null,E)},0)}},_getDragLength:function(C,z,A,D){var F=C/z,E=A/F,B=D;if(E<B){E=B}else{if((E+1)>=A){E=A-1}}return Math.round(E)},_needScrollbar:function(A,B){var z=this._hasMode(A,"scrollbar"),C=A.scrollBarVisibility,D=z&&(C==="visible"||(C==="auto"&&B));return D},_bindBarEvent:function(B,C,A){var z=this;B.bind("mouseover."+z.widgetName,z,z._scrollerMouseOver);if(!g.fn.draggable){return}C.draggable({axis:A==="h"?"x":"y",start:function(E,D){if(z.options.disabled){return false}z._isDragging=true},drag:function(E,D){z._dragging(E,D,z)},containment:"parent",stop:function(D){z._dragStop(D,z,A);g(D.target).removeClass(t);z._isDragging=false}})},_createBarIfNeeded:function(M,E,C,H,J){if(M){var N=this,F,I=N._fields(),B=C+"barContainer",D=C+"barDrag",G=C==="h",z=J[G?"innerHeight":"innerWidth"](),L=I[B]=g(H),A,K;E.append(L);A=L[0][G?"offsetHeight":"offsetWidth"];z=z-A;F={direction:G?"horizontal":"vertical",targetBarLen:A,contentLength:z};if(N._trigger(G?"hScrollerActivating":"vScrollerActivating",null,F)===false){return false}K=I[D]=L.find("."+d);N._bindBarEvent(L,K,C);J[G?"height":"width"](z)}},_setScrollbarPosition:function(B,M,P,A,N,H,z,T,V,O,L){var C=O==="h",J,U,D,F,K,S,I,R,Q,G,E=M.options.wijCSS;if(H){J=A[0][C?"offsetHeight":"offsetWidth"];U=M._getScrollContainerPadding(O);D=M._getScrollContainerBorders(O);F=C?"top":"left";K=C?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"};S=C?{top:J+"px",left:null}:{left:J+"px"};I=C?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"};R=C?{top:"",left:null}:{left:""};Q=P[C?"innerWidth":"innerHeight"]();if(T===F){A.css(K);P.css(S);if(C){A.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(E.cornerBL).addClass(E.cornerTL);A.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(E.cornerBR).addClass(E.cornerTR);A.removeClass(E.cornerBottom).addClass(E.cornerTop)}else{A.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(E.cornerTR).addClass(E.cornerTL);A.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(E.cornerBR).addClass(E.cornerBL);A.removeClass(E.cornerRight).addClass(E.cornerLeft)}}else{A.css(I);P.css(R);if(C){A.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(E.cornerTL).addClass(E.cornerBL);A.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(E.cornerBL).addClass(E.cornerBR);A.removeClass(E.cornerTop).addClass(E.cornerBottom)}else{A.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(E.cornerTL).addClass(E.cornerTR);A.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(E.cornerBL).addClass(E.cornerBR);A.removeClass(E.cornerLeft).addClass(E.cornerRight)}}G=0;if(z){G=N[0][C?"offsetWidth":"offsetHeight"];if(V==="left"){A.css("right","0px")}else{if(V==="right"){A.css("left","0px")}else{if(V==="top"){A.css("bottom","0px")}else{if(V==="bottom"){A.css("top","0px")}}}}}if(!C&&z){G=0}A[C?"width":"height"](Q-U-D);M._enableDisableScrollBar(O,A,!L)}else{B.css(C?"left":"top","")}},_testScroll:function(O,H,C){var A=H.templateWrapper,I=H.contentWrapper,F=H.stateContainer,z=I.innerWidth(),M=I.innerHeight(),E=H.contentWidth,D=H.contentHeight,L,N,G,J,K,B;H.hScrolling=E>z;H.vScrolling=D>M;L=O.hNeedScrollBar=O._needScrollbar(C.hScroller,H.hScrolling);if(O._createBarIfNeeded(L,F,"h",y,I)===false){return false}if(L&&!H.vScrolling){A.css("float","left");H.contentHeight=A.height();H.vScrolling=H.contentHeight>(M-H.hbarContainer[0].offsetHeight);A.css("float","")}N=O.vNeedScrollBar=O._needScrollbar(C.vScroller,H.vScrolling);if(O._createBarIfNeeded(N,F,"v",o,I)===false){return false}if(N&&!H.hScrolling){A.css("float","left");H.contentWidth=A.width();H.hScrolling=H.contentWidth>(z-H.vbarContainer[0].offsetWidth);A.css("float","");if(H.hScrolling&&!L){L=O.hNeedScrollBar=O._needScrollbar(C.hScroller,H.hScrolling);if(O._createBarIfNeeded(L,F,"h",y,I)===false){return false}}}G=H.hbarContainer;J=H.vbarContainer;K=C.hScroller.scrollBarPosition;B=C.vScroller.scrollBarPosition;O._setScrollbarPosition(A,O,I,G,J,L,N,K,B,"h",H.hScrolling);O._setScrollbarPosition(A,O,I,J,G,N,L,B,K,"v",H.vScrolling)},_enableDisableScrollBar:function(A,B,z){var C=this.options;if(A==="v"){B[z?"addClass":"removeClass"]("wijmo-wijsuperpanel-vbarcontainer-disabled");B.find("."+C.wijCSS.stateDefault)[z?"addClass":"removeClass"](C.wijCSS.stateDisabled)}else{if(A==="h"){B[z?"addClass":"removeClass"]("wijmo-wijsuperpanel-hbarcontainer-disabled");B.find("."+C.wijCSS.stateDefault)[z?"addClass":"removeClass"](C.wijCSS.stateDisabled)}}B.children("."+d)[z?"hide":"show"]()},_initResizer:function(){var A=this,D=A.options,B=A._fields(),E=B.resizer,z,C;if(!g.fn.resizable){return}if(!E&&D.allowResize){z=D.resizableOptions;C=z.stop;z.stop=function(F){A._resizeStop(F,A);if(g.isFunction(C)){C(F)}};B.resizer=E=A.element.resizable(z)}if(!D.allowResize&&B.resizer){E.resizable("destroy");B.resizer=null}},_resizeStop:function(A,z){if(!this.options.autoRefresh){z.paintPanel(true)}z._trigger("resized")},_createAdditionalDom:function(A,C,B){if(!B.attr("tabindex")){B.attr("tabindex","-1");C.tabindex=true}var z=C.stateContainer=g(i),E,D=A.options.wijCSS;C.contentWrapper=z.children();E=C.templateWrapper=C.contentWrapper.children();B.contents().each(function(F,G){var H=g(G);if(H.hasAllClasses(D.superpanelHeader)){C.header=H;return}if(H.hasAllClasses(D.superpanelFooter)){C.footer=H;return}E[0].appendChild(G)});if(C.header!==undefined){B.prepend(C.header)}B[0].appendChild(z[0]);if(C.footer!==undefined){C.footer.insertAfter(z)}},_setRounder:function(z,E){if(this.options.showRounder){E.addClass(this.options.wijCSS.cornerAll);if(z._rounderAdded){return}if(g.browser.msie){return}var C="",B="",D,A;if(g.browser.webkit){B="WebkitBorderTopLeftRadius";C="WebkitBorderRadius"}else{if(g.browser.mozilla){B="MozBorderRadiusBottomleft";C="MozBorderRadius"}else{B="border-top-left-radius";C="border-radius"}}D=E.css(B);A=parseInt(D,10);E.css(C,A+1);z._rounderAdded=true;z._radiusKey=C}else{E.removeClass(this.options.wijCSS.cornerAll)}},_setInnerElementsSize:function(C,H){var z=C.stateContainer,D=C.contentWrapper,G=0,A,B,F,E;if(C.header!==undefined){G+=C.header.outerHeight()}if(C.footer!==undefined){G+=C.footer.outerHeight()}A=z[0].style;B=H.innerHeight()-G;F=H.innerWidth();A.display="none";A.height=B+"px";A.width=F+"px";E=D[0].style;E.height=B+"px";E.width=F+"px";A.display=""}});h.prototype.options=g.extend(true,{},b.wijmoWidget.prototype.options,new v());g.wijmo.registerWidget("wijsuperpanel",h.prototype)}else{var d="wijmo-wijsuperpanel-handle",i="<div class='wijmo-wijsuperpanel-statecontainer' style='float: left; height: 100%; -webkit-overflow-scrolling: auto;'><div class='wijmo-wijsuperpanel-contentwrapper-touch'></div></div>",k="wijmo-wijsuperpanel-panelContainer",q="wijmo-wijsuperpanel-assistContainer",e="wijmo-wijsuperpanel-simulateScrollBar",p="wijmo-wijsuperpanel-scrollBarEle",m=window.navigator.userAgent.match(/iPhone|iPad|iPod/i),f=window.navigator.userAgent.match(/Windows/i),r=m?"<div class='"+p+"' style='position: absolute; width: 3px; background:#7E7E7E; -webkit-border-radius: 1px; display: none'></div>":"",c="<div class='"+q+"' style='position: absolute;'><div class='"+e+"' style='position: absolute; overflow-x: hidden; -webkit-overflow-scrolling: touch; -ms-overflow-style: -ms-autohiding-scrollbar'><div></div></div>"+r+"</div>",n=f?18:4;h.prototype=g.extend(true,{},g.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(B,E){var z=this,D=z.element,F=z.options,C=z._fields();if(B==="animationOptions"||B==="resizableOptions"){E=g.extend(F[B],E)}else{if(B==="hScroller"||B==="vScroller"){var A=B==="hScroller"?"h":"v";E=g.extend(F[B],E);z._adjustScrollValue(A);z.refresh()}}if(B==="customScrolling"){if(F[B]!==E){F[B]=E;z._initialize(C,D,z);z._bindElementEvents()}}g.Widget.prototype._setOption.apply(z,arguments);switch(B){case"allowResize":z._initResizer();break;case"disabled":z._handleDisabledOption(E,z.element);break;case"mouseWheelSupport":case"keyboardSupport":z._bindElementEvents(z,C,z.element,F);break}},_create:function(){var z=this,A=z.options;A.vScroller.dir="v";A.hScroller.dir="h";z._createDom();if(z.options.disabled){z.disable()}if(z.element.is(":hidden")&&z.element.wijAddVisibilityObserver){z.element.wijAddVisibilityObserver(function(){z.refresh();if(z.element.wijRemoveVisibilityObserver){z.element.wijRemoveVisibilityObserver()}},"wijsuperpanel")}},_handleDisabledOption:function(A,B){var z=this;if(A){if(!z.disabledDiv){z.disabledDiv=z._createDisabledDiv(B)}z.disabledDiv.appendTo("body")}else{if(z.disabledDiv){z.disabledDiv.remove();z.disabledDiv=null}}},_createDisabledDiv:function(B){var A=this,E=B?B:A.element,D=E.offset(),C=E.outerWidth(),z=E.outerHeight();return g("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:C,height:z,left:D.left,top:D.top})},_createDom:function(){var z=this,A=z.element;z.paintPanel();z._initResizer();z._bindElementEvents()},_applyOverflow:function(z){var B={},C=this.options,A=C.hScroller.scrollBarVisibility,D=C.vScroller.scrollBarVisibility;B["overflow-x"]=A;B["overflow-y"]=D;if(A==="visible"&&D==="visible"){B["overflow-x"]="auto";B["overflow-y"]="auto"}B["touch-action"]="";B["ms-touch-action"]="";if(C.customScrolling){B["overflow-y"]="hidden";B["touch-action"]="none";B["ms-touch-action"]="none";if(B["overflow-x"]==="auto"){B["touch-action"]="pan-x";B["ms-touch-action"]="pan-x"}}z.css(B)},_createAdditionalDom:function(I,D,J){if(!J.attr("tabindex")){J.attr("tabindex","-1");D.tabindex=true}var z=g("<div class='"+k+"'></div>"),E=I.options.customScrolling,F=D.stateContainer=g(i),A=D.assistContainer=g(c),B=D.simulateScroll=A.find("."+e),C=D.customScrollBarEle=A.find("."+p),G=I.options.wijCSS,H=false;D.contentWrapper=F.children();J.contents().each(function(K,L){var M=g(L);if(M.hasAllClasses(G.superpanelHeader)){D.header=M;return}if(M.hasAllClasses(G.superpanelFooter)){D.footer=M;return}if(M.hasClass(k)){H=true;return false}D.contentWrapper[0].appendChild(L)});if(D.header!==undefined){J.prepend(D.header)}if(H){z=J.children("."+k);F=D.stateContainer=z.find(".wijmo-wijsuperpanel-statecontainer");D.contentWrapper=F.children()}z[0].appendChild(F[0]);J[0].appendChild(z[0]);if(z.children("."+q).length>0){D.assistContainer=z.children("."+q);D.simulateScroll=D.assistContainer.find("."+e);D.customScrollBar=D.assistContainer.find("."+p)}if(E){z[0].appendChild(D.assistContainer[0])}else{D.assistContainer.remove()}I._resetDom();z.height(F.height()).width(F.width()+n);if(D.footer!==undefined){D.footer.insertAfter(z)}D.contentWrapper.css("float","left");D.contentWidth=D.contentWrapper.width();D.contentHeight=D.contentWrapper.height();D.contentWrapper.css("float","");if(E){I._setAssistElementStyle(D)}I._applyOverflow(D.stateContainer)},_setAssistElementStyle:function(E){var I=this,H=I.options.vScroller.scrollBarVisibility,F=E.stateContainer,B=E.assistContainer,z=E.simulateScroll,F,C,G,D,A;C=F.height();G=E.contentHeight;A=F.position().left+F.width()-n;D=z.children();z.css("width",n).css("height",C).css("overflow-y",H);B.css("left",(A)+"px").css("width",n).css("height",C);D.css("width",n+2).css("height",G).css("background","transparent");I._setCustomScrollDragLengthForIOS(I.options,E)},_setCustomScrollDragLengthForIOS:function(A,H){if(!m){return}var I=this,z=H.customScrollBarEle,F=A.vScroller.scrollMax-A.vScroller.scrollMin,C=I._getVScrollBarLargeChange(),B=H.stateContainer.height(),E=F/C,D=B/E,G=A.vScroller.scrollMinDragLength||6;if(D<G){D=G}else{if((D+1)>=B){D=B-1}}D=Math.round(D);z.height(D)},_elementScrolled:function(H,B,J,A,G){var K=this,D=K.options,L=K.element,I,E,z,C,F;if(B===A&&H===J){return}if(B===A){if(G){return}E="h";if(H>J){I="right"}else{I="left"}z=D.hScroller.scrollValue;F=H}else{E="v";if(B>A){I="bottom"}else{I="top"}z=D.vScroller.scrollValue;F=B}C=K.scrollPxToValue(F,E);C=Math.round(C);K._trigger("scrolling",null,{dir:E,direction:I,oldValue:z,newValue:C,beforePosition:{left:-J,top:-A}});K._triggerScroll(F,E);K._updateScrollValue(F,E);K._trigger("scrolled",null,{dir:E,beforePosition:{left:-J,top:-A},afterPosition:{left:-H,top:-B},newValue:C})},_bindElementEvents:function(){var K=this,H=K.element,M=K.options,X=K._fields(),A=K.widgetName,Y=X.stateContainer,J=Y.scrollLeft(),G=Y.scrollTop(),O=X.simulateScroll,B,P,U=X.customScrollBarEle,S,L,R,W,T,E,I,V,F,z,C=false,Q=false,D,N=m&&(U.length>0);O.unbind();Y.unbind("."+A);g(document).unbind("mouseup."+A);if(M.customScrolling){if(O.length>0){R=O.children().height();W=O.height();G=O.scrollTop();if(N){U.css("display","block");L=U.height();U.css("display","none");S=U.position().top}O.bind("scroll",function(Z,aa){B=O.scrollTop();P=Y.scrollLeft();if(N){S=K._getCustomScrollOffset(B,R,W,L);if(S<0){S=0}U.css("top",S+"px")}K._elementScrolled(P,B,J,G,true);J=P;G=B});Y.bind("wijmousedown."+A,function(Z){T=Z.pageY;V=Z.pageX;Q=true;if(D){clearTimeout(D)}if(N){U.stop().fadeIn(100)}});Y.bind("wijmousemove."+A,function(Z){if(Q){E=Z.pageY;I=E-T;F=Z.pageX;z=F-V;C=(Math.abs(I)<Math.abs(z));if(I){if(!C){B=O.scrollTop();O.scrollTop(B-I)}T=E}}if(!g.browser.msie&&!C){Z.stopPropagation();Z.preventDefault()}});Y.bind("wijmouseup."+A,function(Z){T=Z.pageY;V=Z.pageX;Q=false;C=false;if(N){D=setTimeout(function(){U.fadeOut("slow")},1000)}});g(document).bind("mouseup."+A,function(Z){Q=false;C=false;T=Z.pageY;V=Z.pageX})}Y.bind("mousewheel."+A,K,K._panelMouseWheel)}Y.bind("scroll",function(Z,aa){if(M.customScrolling&&O.length>0){B=O.scrollTop()}else{B=Y.scrollTop()}P=Y.scrollLeft();K._elementScrolled(P,B,J,G,false);J=P;G=B});if(M.keyboardSupport){if(K._keyboardBind===undefined){K._keyboardBind=true;H.bind("keydown."+A,K,K._panelKeyDown)}}else{H.unbind("keydown."+A,K._panelKeyDown);K._keyboardBind=undefined}if(!M.mouseWheelSupport){H.bind("mousewheel",function(Z){Z.stopPropagation();return false})}},_getCustomScrollOffset:function(A,C,B,z){var D,E;E=(B-z)/(C-B);return A*E},_panelMouseWheel:function(G,K){var N=G.data,z=N.options,M,A="",B,E=z.hScroller,D=z.vScroller,I,C,J,L,F,H;if(!z.mouseWheelSupport||z.disabled){return}M=g(G.srcElement||G.originalEvent.target);B=M.closest("."+w,N.element).size()>0;if(B){G.stopPropagation();G.preventDefault();return}if(K>0){A="top"}else{A="bottom"}if(A.length>0){C=N._getVScrollBarSmallChange();J=N._getVScrollBarLargeChange();if(!N._setScrollerValue(A,D,C,J,A==="bottom",false,N)){return}L=D.scrollValue;F=L?N._scrollValueToPx(L,"v"):0;if(L!==undefined){N._fields().assistContainer.find("."+e).prop("scrollTop",F)}}I=false;if(A==="top"){I=!N.vNeedScrollBar||Math.abs(D.scrollValue-D.scrollMin)<0.001}if(A==="bottom"){I=!N.vNeedScrollBar||Math.abs(D.scrollValue-(D.scrollMax-N._getVScrollBarLargeChange()+1))<0.001}if(!I||!z.bubbleScrollingEvent){G.stopPropagation();G.preventDefault()}},_getVScrollBarSmallChange:function(){var A=this.options,z;if(!A.vScroller.scrollSmallChange){z=this._getVScrollBarLargeChange();A.vScroller.scrollSmallChange=z/2}return A.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){var K=this,z=K.options,E=K._fields(),D=z.vScroller,B="_autoVLarge",L,H,C,G,I,A,F,J;if(D.scrollLargeChange){return D.scrollLargeChange}L=D.scrollMax;H=D.scrollMin;C=L-H;G=E.simulateScroll;I=G.innerHeight();A=E.contentHeight;F=I/(A-I);J=((C+1)*F)/(1+F);if(isNaN(J)){J=0}D.scrollLargeChange=J;K[B]=true;return D.scrollLargeChange},_setScrollerValue:function(I,N,H,z,M,A,G){var J=this.options,F=N.scrollMin,C=A?z:H,K=N.scrollValue,E=0,L,B,P,D,Q,O;if(!K){K=F}L=N.scrollMax-z+1;if(K>L){K=L}if(M){if(Math.abs(K-L)<0.0001){G._clearInterval();return false}B=N.firstStepChangeFix;E=K+C;if(!A&&Math.abs(K-F)<0.0001&&!isNaN(B)){E+=B}if(E>L){E=L}}else{if(Math.abs(K-F)<0.0001){G._clearInterval();return false}E=K-C;if(E<0){E=F}}P={oldValue:N.scrollValue,newValue:E,direction:I,dir:N.dir};if(!G._scrolling(true,G,P)){return false}if(G.customScroll){Q=Math.abs(G.customScroll);D=G.scrollPxToValue(Q,N.dir)}N.scrollValue=D||E;O=g.Event("scrollValueChanged");this._trigger("scrollValueChanged",O,N);G.customScroll=undefined;return true},_clearInterval:function(){var A=this._fields(),z=A.internalFuncID;if(z>0){window.clearInterval(z);A.internalFuncID=-1}},_scrolling:function(A,z,C){var B=true;if(A){C.beforePosition=z.getContentElement().position();z._beforePosition=C.beforePosition;B=z._trigger("scrolling",null,C);z.customScroll=C.customScroll}return B},_setScrollingInterval:function(C,A,z,B){var D=z.options;if(A.length>0){C.internalFuncID=window.setInterval(function(){z._doScrolling(A,z,B)},D.keyDownInterval)}},_triggerScroll:function(z,A){var B={position:z,dir:A};this._trigger("scroll",null,B)},_panelKeyDown:function(D){var B=D.data,E=B.options,A,z,C=b.getKeyCodeEnum();if(!E.keyboardSupport||E.disabled){return}A=D.shiftKey;z=D.keyCode;if(z===C.LEFT){B._doScrolling("left",B,A)}else{if(z===C.RIGHT){B._doScrolling("right",B,A)}else{if(z===C.UP){B._doScrolling("top",B,A)}else{if(z===C.DOWN){B._doScrolling("bottom",B,A)}}}}D.stopPropagation();D.preventDefault()},_doScrolling:function(A,H,G){var F,C,z,D=H._fields(),I=H.options.customScrolling?D.simulateScroll[0]:D.stateContainer[0],B={},E;if(A==="top"||A==="bottom"){C="v";z="scrollTop"}else{if(A==="left"||A==="right"){C="h";z="scrollLeft"}}if(G){F=H._getLargeChange(C)}else{F=H._getSmallChange(C)}E=I[z];if(A==="top"||A==="left"){B[z]=E-F}else{B[z]=E+F}H._animateTo(B)},_getLargeChange:function(D){var A=this,C=A._fields(),z,B=D=="h"?C.clientWidth:C.clientHeight;if(B){z=B}else{z=C.stateContainer[D=="h"?"width":"height"]()}return z},_getSmallChange:function(){return this._getLargeChange()/2},_setRounder:function(z,F){var E=this.options.wijCSS.cornerAll;if(this.options.showRounder){F.addClass(E);if(z._rounderAdded){return}if(g.browser.msie){return}var C="",B="",D,A;if(g.browser.webkit){B="WebkitBorderTopLeftRadius";C="WebkitBorderRadius"}else{if(g.browser.mozilla){B="MozBorderRadiusBottomleft";C="MozBorderRadius"}else{B="border-top-left-radius";C="border-radius"}}D=F.css(B);A=parseInt(D,10);F.css(C,A+1);z._rounderAdded=true;z._radiusKey=C}else{F.removeClass(E)}},_initResizer:function(){var A=this,D=A.options,B=A._fields(),E=B.resizer,z,C;if(!g.fn.resizable){return}if(!E&&D.allowResize){z=D.resizableOptions;C=z.stop;z.stop=function(F){A._resetDom();A._trigger("resized");if(g.isFunction(C)){C(F)}};B.resizer=E=A.element.resizable(z)}if(!D.allowResize&&B.resizer){E.resizable("destroy");B.resizer=null}},_adjustScrollValue:function(B){var D=B==="h",H=this,A=this.options,I=D?H.hNeedScrollBar:H.vNeedScrollBar,F=D?A.hScroller:A.vScroller,G=F.scrollMax,E=F.scrollMin,z,C;if(I){z=D?H._getHScrollBarLargeChange():H._getVScrollBarLargeChange();C=G-z+1;if(F.scrollValue>C){F.scrollValue=C}if(F.scrollValue<E){F.scrollValue=E}}},_resetDom:function(){var A=this,E=A.options,D=A.element,C=A._fields(),B=D.width(),z=D.height();if(C.header!==undefined){z-=C.header.outerHeight()}if(C.footer!==undefined){z-=C.footer.outerHeight()}if(C.stateContainer.length){C.stateContainer.css({width:B,height:z});C.clientWidth=C.stateContainer[0].clientWidth;C.clientHeight=C.stateContainer[0].clientHeight}A._initScrollPosition()},_fields:function(){var z=this,B=z.element,A=z.widgetName+"-fields",C=z._fieldsStore;if(C===undefined){C={};B.data(A,C);z._fieldsStore=C}return C},_getScrollOffset:function(F){var B=g(F),G,J,H,D,C,I,z,E,A,K={left:null,top:null};if(B.length===0){return K}G=this._fields();J=G.contentWrapper;H=B.offset();H.leftWidth=H.left+B.outerWidth();H.topHeight=H.top+B.outerHeight();C=J.offset();C.leftWidth=C.left+G.clientWidth;C.topHeight=C.top+G.clientHeight;E=H.left-C.left;if(H.left<C.left){K.left=E}else{if(H.leftWidth>C.leftWidth){A=H.leftWidth-C.left-G.clientWidth;if(E<A){K.left=E}else{K.left=A}}}I=H.top-C.top;if(H.top<C.top){K.top=I}else{if(H.topHeight>C.topHeight){z=H.topHeight-C.top-G.clientHeight;if(I<z){K.top=I}else{K.top=z}}}return K},_initialize:function(B,A,z){var C=z.options.wijCSS;B.initialized=true;A.addClass(["wijmo-wijsuperpanel",C.widget,C.content].join(" "));z._setRounder(z,A);z._createAdditionalDom(z,B,A);z._trigger("painted");z._initScrollPosition()},_initScrollPosition:function(){var z=this.options,B=z.hScroller,A=z.vScroller,F=B.scrollValue,H=A.scrollValue,E=this._fields(),G=z.customScrolling?E.simulateScroll:E.stateContainer,D=F?this._scrollValueToPx(F,"h"):0,C=H?this._scrollValueToPx(H,"v"):0;if(F){E.stateContainer.prop("scrollLeft",D)}if(H){G.prop("scrollTop",C)}},_updateScrollValue:function(B,A){var D=this.scrollPxToValue(B,A),E=this.options,z=(A==="h"?"hScroller":"vScroller"),C=g.Event("scrollValueChanged");E[z].scrollValue=D;this._trigger("scrollValueChanged",C,E[z])},scrollPxToValue:function(M,C){var O=this,B=O.options,H=O._fields(),L,A,G,K,F,N,D,z,J,P,E,I;L=(C==="h"?"clientWidth":"clientHeight");A=(C==="h"?"scrollWidth":"scrollHeight");G=(C==="h"?"hScroller":"vScroller");F=H.stateContainer[0];K=B.customScrolling?H.simulateScroll[0]:F,N=C==="h"?F:K;D=N[L];z=N[A];J=B[G].scrollMin;P=B[G].scrollMax-O._getVScrollBarLargeChange()+1;E=P-J;I=E*M/(z-D)+J;return I},scrollValueToPx:function(A,z){return this._scrollValueToPx(A,z)},_scrollValueToPx:function(M,C){var O=this,B=O.options,H=O._fields(),L,A,G,N,D,z,J,P,E,I,K,F;L=(C==="h"?"clientWidth":"clientHeight");A=(C==="h"?"scrollWidth":"scrollHeight");G=(C==="h"?"hScroller":"vScroller");F=H.stateContainer[0];K=B.customScrolling?H.simulateScroll[0]:F,N=(C==="h"?F:K);D=N[L];z=N[A];J=B[G].scrollMin;P=B[G].scrollMax-O._getVScrollBarLargeChange()+1;E=P-J;if(M===undefined||M<J){M=J}if(M>P){M=P}I=(M-J)*(z-D)/E;return I},_animateTo:function(E){var z=this,C=z.element,D=z.options,A=D.animationOptions,B=z._fields();if(D.customScrolling){B.simulateScroll.animate(E,A)}else{B.stateContainer.animate(E,A)}},destroy:function(){var A=this,D=A.element,F=A.options,C=A._fields(),B,z,E=F.wijCSS;if(A.disabledDiv){A.disabledDiv.remove();A.disabledDiv=null}if(C.resizer!==undefined){C.resizer.resizable("destroy")}D.unbind("."+A.widgetName);D.removeClass(["wijmo-wijsuperpanel",E.widget,E.content,E.cornerAll].join(" "));z=D.find("."+k);B=C.contentWrapper;B.contents().each(function(G,H){D.append(H)});C.stateContainer.remove();C.assistContainer.remove();z.remove();g.Widget.prototype.destroy.apply(A,arguments)},doScrolling:function(z,A){this._doScrolling(z,this,A)},paintPanel:function(A){var z=this,C=z.element,B=z._fields();if(!B.initialized){this._initialize(B,C,z)}},needToScroll:function(z){var A=this._getScrollOffset(z);return A.top!==null||A.left!==null},scrollChildIntoView:function(z){var C=this._getScrollOffset(z),B=C.left,A=C.top;this.scrollTo(B,A)},getContentElement:function(){return this._fields().contentWrapper},hScrollTo:function(z,A){var B=!!A?this._scrollValueToPx(z):z;this._animateTo({scrollLeft:B})},vScrollTo:function(B,z){var A=!!z?this._scrollValueToPx(B):B;this._animateTo({scrollTop:A})},refresh:function(){var z=this,A=z._fields();z._applyOverflow(A.stateContainer);z._resetDom()},scrollTo:function(A,D,C){var B=!!C?this._scrollValueToPx(A):A,z=!!C?this._scrollValueToPx(D):D;this._animateTo({scrollTop:z});this._animateTo({scrollLeft:B})}});h.prototype.options=g.extend(true,{},b.wijmoWidget.prototype.options,{wijCSS:{superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-b",stateDefault:"ui-btn ui-btn-b",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='wijsuperpanel')",allowResize:false,animationOptions:{queue:false,disabled:false,duration:250,easing:undefined},hScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,firstStepChangeFix:0,scrollMin:0,hoverEdgeSpan:20},keyboardSupport:false,keyDownInterval:100,mouseWheelSupport:true,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,painted:null,scroll:null,showRounder:true,vScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,scrollMin:0,firstStepChangeFix:0,hoverEdgeSpan:20}});g.wijmo.registerWidget("wijsuperpanel",h.prototype)}})(b.superpanel||(b.superpanel={}));var a=b.superpanel})(wijmo||(wijmo={}));