var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){var n=$.wijmo.wijcandlestickchart,r=function(r){function i(){r.apply(this,arguments)}return __extends(i,r),i.prototype._create=function(){var e=this,t=e.options,n=e._getDefFill(),i,s;$.each(t.seriesList,function(e,n){if(n.type==="bar")return $.extend(!0,t.axis,{x:{compass:"west"},y:{compass:"south"}}),!0;n.type==="pie"&&n.pieSeriesList?n.data=n.pieSeriesList:n.candlestickSeries&&n.candlestickSeries.data&&$.inArray(n.type,["hl","ohlc","candlestick"])!=-1&&(n.data=n.candlestickSeries.data)}),$.extend(!0,{compass:"east"},t.hint),t.is100Percent&&(t.is100Percent=!1),t.yAxes&&$.isArray(t.yAxes)&&t.yAxes.length>0&&(s=[],$.each(t.yAxes,function(e,n){s.push($.extend({},t.axis.y,n))}),t.axis.y=s),e._handleChartStyles(),e._checkChartType(),e.isContainsCandlestick&&(e.bindXData=!1,e._handleXDataForCandlestick()),r.prototype._create.call(this),e.chartElement.addClass(t.wijCSS.compositechart)},i.prototype._setOption=function(e,t){e!=="is100Percent"&&(e==="axis"&&this.isContainsCandlestick&&n&&n.prototype._handleMaxMinInAxis.apply(this,[t]),r.prototype._setOption.call(this,e,t))},i.prototype._seriesListSeted=function(){this._checkChartType(),this.isContainsCandlestick&&(this.timeUtil.dispose(),this.timeUtil=null,this._handleXDataForCandlestick())},i.prototype._supportStacked=function(){return!0},i.prototype.destroy=function(){var e=this,t=e.chartElement,n=t.data("fields"),i=n&&n.aniBarsAttr;t.removeClass(e.options.wijCSS.compositechart),this.timeUtil&&this.timeUtil.dispose(),r.prototype.destroy.call(this),e._destroyRaphaelArray(i),e.aniPathsAttr=null,t.data("fields",null)},i.prototype._isBarChart=function(){return!0},i.prototype._clearChartElement=function(){var e=this,t=e.options,n=e.chartElement,i=n.data("fields");i&&i.allElements&&($.each(i.allElements,function(t,n){t==="scatters"&&n.length&&$.each(n,function(e,t){t.length&&($.each(t,function(e,n){n&&n.remove&&n.remove(),t[e]=null}),n[e]=null)}),e._destroyRaphaelArray(n)}),i.allElements=null),r.prototype._clearChartElement.call(this),i&&i.ctracers&&(i.ctracers=null),e.element.removeData("plotInfos"),t.seriesTransition.enabled||i&&i.aniBarsAttr&&(i.aniBarsAttr=null)},i.prototype._bindSeriesData=function(e,t,n){var i=this,s=t.data,o=t.type,u,a,f,l=[];o==="pie"?(u=s.label,a=s.value,f=s.offset,u&&u.bind&&(u=this._getBindData(e,u.bind)),a&&a.bind&&(a=this._getBindData(e,a.bind)),f&&f.bind&&(f=this._getBindData(e,f.bind)),u&&$.isArray(u)&&u.length&&a&&$.isArray(a)&&a.length&&($.each(a,function(e,t){var n,r=0;e>=0&&e<u.length&&(n=u[e]),f&&$.isArray(a)&&f.length&&e>=0&&e<f.length&&(r=typeof f[e]=="undefined"?0:f[e]),l.push({data:t,label:n,offset:r,legendEntry:!0})}),t.data=l)):(r.prototype._bindSeriesData.call(this,e,t,n),s.x&&$.isArray(s.x)&&(this.bindXData=!0),$.each(["high","low","open","close","y1"],function(t,n){var r=s[n];r&&r.bind&&(s[n]=i._getBindData(e,r.bind))}))},i.prototype.getElement=function(e,t,n){var r=this.chartElement,i=r.data("fields"),s=i.chartElements;switch(e){case"bar":case"column":return s.bars[t];case"line":case"area":return s.paths[t];case"linemarkers":return s.markersSet[t];case"pie":return this._getPie(s,t,n)}return null},i.prototype._getPie=function(e,t,n){if(n!==undefined)return e["sectors"+n]?e["sectors"+n][t]:null;var r=[];return $.each(e,function(e,t){/sectors/.test(e)&&e!=="sectors"&&$.each(t,function(e,t){r.push(t)})}),r.length===0&&(r=e.sectors),r[t]},i.prototype._paintLegendIcon=function(e,t,n,i,s,o,u,a,f,l){var c=this,h=this.options,p=f.type,d,v,m=3,g=!1,y,b;return p==="line"||p==="area"||p==="spline"||p==="bezier"?(d=c.canvas.path(Raphael.format("M{0},{1}L{2},{3}",e,t+i/2,e+n,t+i/2)),s&&(h.legend.size&&h.legend.size.height&&(m=h.legend.size.height),d.attr($.extend(!0,{},s,{"stroke-width":m}))),g=!0,f.markers&&f.markers.visible&&(y=f.markers.type,b=f.markerStyle,b=$.extend({fill:s.stroke,stroke:s.stroke,opacity:1},b),s["stroke-dasharray"]&&d.attr({"stroke-width":1,"stroke-dasharray":s["stroke-dasharray"]}),y||(y="circle"),v=this.canvas.paintMarker(y,e+n/2,t+i/2,3),$.wijraphael.addClass($(v.node),Raphael.format("{0} {1} {2}",h.wijCSS.legend,h.wijCSS.legendDot,h.wijCSS.canvasObject)),v.attr(b),$(v.node).data("index",u).data("legendIndex",o),this.legendDots[o]=v)):p==="scatter"?(b=f.markerStyle,y=f.markerType,b=$.extend({fill:s.stroke,stroke:s.stroke,opacity:1},b),y||(y="circle"),d=c.canvas.paintMarker(y,e+n/2,t+i/2,3),d.attr(b),f.visible===!1&&($(l.node).data("dotOpacity",d.attr("opacity")||1),d.attr("opacity",.3)),g=!0):p==="bubble"?(b=f.markerStyle,b=$.extend({fill:s.stroke,stroke:s.stroke,opacity:1},b),f.markers&&(y=f.markers.type),y||(y="circle"),d=c.canvas.paintMarker(y,e+n/2,t+i/2,Math.min(n,i)/2),d.attr(b),g=!0):d=r.prototype._paintLegendIcon.call(this,e,t,n,i,s,o,u,a,f,l),g&&($.wijraphael.addClass($(d.node),a),$(d.node).data("legendIndex",o).data("index",u),c.legendIcons.push(d)),d},i.prototype._showHideCandlestickSeries=function(e,t){n&&n.prototype._showHideSeries.apply(this,arguments)},i.prototype._showSerieEles=function(e){var t=e.type,n=e.eles,r=this.options.showChartLabels,i;switch(t){case"pie":n.sector&&(n.sector.show(),n.sector.shadow&&n.sector.shadow.show(),n.sector.tracker&&n.sector.tracker.show()),n.label&&n.label.show();break;case"line":case"spline":case"bezier":case"area":n.markers&&$.each(n.markers,function(e,t){i=$(t.node).data("wijchartDataObj");if(i&&i.lineSeries&&i.lineSeries.markers&&!i.lineSeries.markers.visible)return!0;t.show()}),n.dcl&&$.each(n.dcl,function(e,t){r&&t.show()});if(n.path){i=$(n.path.node).data("wijchartDataObj");if(i.visible||!(!i.visible&&i.markers&&i.markers.visible))n.path.show(),n.path.shadow&&n.path.shadow.show(),n.path.area&&n.path.area.show(),n.path.tracker&&n.path.tracker.show(),$(n.path.node).data("wijchartDataObj")&&$(n.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(n.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!0})}break;case"bar":case"column":$.each(n,function(e,t){t.bar&&(t.bar.show(),t.bar.shadow&&t.bar.shadow.show(),t.bar.tracker&&t.bar.tracker.show(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!0)),t.dcl&&t.dcl.show(),t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.show()});break;case"scatter":$.each(n,function(e,t){t.show(),t.label&&t.label.show(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!0)});break;case"ohlc":case"hl":case"candlestick":this._showHideCandlestickSeries(n,"show");break;case"bubble":$.each(n,function(e,t){t.bubble&&(t.bubble.show(),t.bubble.shadow&&t.bubble.shadow.show(),t.bubble.tracker&&t.bubble.tracker.show(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!0)),t.dcl&&t.dcl.show(),t.symbol&&t.symbol.show()})}},i.prototype._hideSerieEles=function(e){var t=e.type,n=e.eles;switch(t){case"pie":n.sector&&(n.sector.hide(),n.sector.shadow&&n.sector.shadow.hide(),n.sector.tracker&&n.sector.tracker.hide()),n.label&&n.label.hide();break;case"line":case"spline":case"bezier":case"area":n.markers&&$.each(n.markers,function(e,t){t.hide()}),n.dcl&&$.each(n.dcl,function(e,t){t.hide()}),n.path&&(n.path.hide(),n.path.shadow&&n.path.shadow.hide(),n.path.area&&n.path.area.hide(),n.path.tracker&&n.path.tracker.hide(),$(n.path.node).data("wijchartDataObj")&&$(n.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(n.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!1}));break;case"bar":case"column":$.each(n,function(e,t){t.bar&&(t.bar.hide(),t.bar.shadow&&t.bar.shadow.hide(),t.bar.tracker&&t.bar.tracker.hide(),$(t.bar.node).data("wijchartDataObj")&&($(t.bar.node).data("wijchartDataObj").visible=!1)),t.dcl&&t.dcl.hide(),t.animatedBar&&!t.animatedBar.removed&&t.animatedBar.hide()});break;case"scatter":$.each(n,function(e,t){t.hide(),t.label&&t.label.hide(),$(t.element).data("wijchartDataObj")&&($(t.element).data("wijchartDataObj").visible=!1)});break;case"ohlc":case"hl":case"candlestick":this._showHideCandlestickSeries(n,"hide");break;case"bubble":$.each(n,function(e,t){t.bubble&&(t.bubble.hide(),t.bubble.shadow&&t.bubble.shadow.hide(),t.bubble.tracker&&t.bubble.tracker.hide(),$(t.bubble.node).data("wijchartDataObj")&&($(t.bubble.node).data("wijchartDataObj").visible=!1)),t.dcl&&t.dcl.hide(),t.symbol&&t.symbol.hide()})}},i.prototype._indicatorLineShowing=function(e){var t;r.prototype._indicatorLineShowing.call(this,e),$.each(e,function(e,n){t=n.type,t==="column"||t==="bar"?n.bar.attr(n.hoverStyle):t==="marker"?n.marker.attr(n.markerHoverStyle):t==="scatter"&&(n.dot.attr(n.hoverStyle),n.dot.scale(1.5,1.5))})},i.prototype._removeIndicatorStyles=function(e){var t;$.each(e,function(e,n){t=n.type,t==="column"||t==="bar"?n.bar.attr(n.style):t==="marker"?(n.marker.attr(n.markerStyle),n.marker.transform("s1")):t==="scatter"&&(n.dot.attr(n.style),n.dot.scale(1,1))})},i.prototype._paintTooltip=function(){var e=this,t=e.chartElement,n=t.data("fields")||{},i=n.ctracers||[];r.prototype._paintTooltip.call(this),e.tooltip&&$.each(i,function(t,n){n.trackers&&n.trackers.length&&t===0&&e.tooltip.setOptions({relatedElement:n.trackers[0]})})},i.prototype._setDefaultTooltipText=function(e){return e.type==="candlestick"&&n?n.prototype._setDefaultTooltipText.apply(this,arguments):r.prototype._setDefaultTooltipText.call(this,e)},i.prototype._checkChartType=function(){var e=this;this.isContainsBubble=!1,this.isContainsCandlestick=!1,$.each(this.options.seriesList,function(t,n){var r=n.type;!!e.isContainsCandlestick||r!=="ohlc"&&r!=="hl"&&r!=="candlestick"?!e.isContainsBubble&&r==="bubble"&&(e.isContainsBubble=!0):e.isContainsCandlestick=!0})},i.prototype._handleXDataForCandlestick=function(){n&&n.prototype._handleXData.apply(this,arguments)},i.prototype._isCandlestickSeries=function(e){var t=e.type;return t==="ohlc"||t==="hl"||t==="candlestick"},i.prototype._paintChartArea=function(){var e=this,n=e.options.seriesList;if(e._isSeriesListDataEmpty())return;$.each(n,function(t,n){var r=n.data;e._isCandlestickSeries(n)&&(r.y=[].concat(r.high).concat(r.low))}),this.bubbleAxisAdjust&&this.bubbleAxisAdjust.dispose(),this.bubbleAxisAdjust=new t.BubbleAxisAdjust(this),r.prototype._paintChartArea.call(this),$.each(n,function(t,n){e._isCandlestickSeries(n)&&delete n.data.y})},i.prototype._checkSeriesDataEmpty=function(e){var t=e.type,n=e.data,i=this._checkEmptyData;if(this._isCandlestickSeries(e)){if(!n||i(n.x)||i(n.high)||i(n.low))return!0;if(t==="ohlc"||t==="candlestick")if(i(n.open)||i(n.low))return!0;return!1}if(t==="pie")return!n||!$.isArray(n)?!0:!1;if(t==="bubble")if(!n||i(n.y1))return!0;return r.prototype._checkSeriesDataEmpty.call(this,e)},i.prototype._calculateMajorMinor=function(e,t){this.isContainsCandlestick&&t.id==="x"?n.prototype._calculateMajorMinor.apply(this,arguments):r.prototype._calculateMajorMinor.call(this,e,t)},i.prototype._getXTickText=function(e){var t=this,r=t.formatString;return t.isContainsCandlestick&&n?n.prototype._getXTickText.apply(this,arguments):e},i.prototype._adjustTickValuesForCandlestickChart=function(e){return this.isContainsCandlestick&&n?n.prototype._adjustTickValuesForCandlestickChart.apply(this,arguments):r.prototype._adjustTickValuesForCandlestickChart.call(this,e)},i.prototype._getTickTextForCalculateUnit=function(e,t,i){return t.id==="x"&&this.isContainsCandlestick?n.prototype._getTickTextForCalculateUnit.apply(this,arguments):r.prototype._getTickTextForCalculateUnit.call(this,e,t,i)},i.prototype._AdjustAxisBounds=function(e,n){var r=this,i=r.options,s,o,u,a,f=e.max,l=e.min,c=f-l,h=t.ChartDataUtil.nicePrecision(c),p=h+1,d=e.bounds,v=$.extend(!0,{},i.textStyle,n.textStyle,n.labels.style);s=r._text(-1e3,-1e3,$.round(f,p).toString()).attr(v),o=r._text(-1e3,-1e3,$.round(l,p).toString()).attr(v),u=s.wijGetBBox(),a=o.wijGetBBox(),e.isStartAxis||(d.startY+=a.height),e.isLastAxis||(d.endY-=u.height)},i.prototype._initYAxisHeight=function(){var e=this,t=e.options,n=t.axis,r=n.y,i=e.canvasBounds,s=i.endX-i.startX,o=i.endY-i.startY,u=e.axisInfo,a=u.y,f=0,l=-1,c=0,h;$.isArray(r)&&($.each(r,function(e,t){t.height&&!isNaN(t.height)?f+=t.height:t.height==="auto"&&(l=e),a[e].height=t.height}),l>-1&&(a[l].height=o-f),$.each(a,function(t,n){var s=n.height;if(s===undefined)return!0;s>0&&(n.isPartAxis=!0,n.isLastAxis=parseInt(t)===r.length-1,n.isStartAxis=parseInt(t)===0),h?n.bounds={startY:h.endY,endY:h.endY+s}:n.bounds={startY:i.startY,endY:i.startY+s},n.bounds.startX=i.startX,n.bounds.endX=i.endX,e._AdjustAxisBounds(n,r[t]),n.bounds&&(h=$.extend({},n.bounds))}))},i.prototype._getDataExtreme=function(e){var t=this;return t._initYAxisHeight(),r.prototype._getDataExtreme.call(this,e)},i.prototype._paintPlotArea=function(){var t=this,r=t.options,i="seriesList",s="seriesStyles",o="seriesHoverStyles",u=r[s],a=r[o],f=t.canvasBounds,l={},c=0,h=-1,p=[],d=$.isArray(r.axis.y),v={canvas:t.canvas,tooltip:t.tooltip,bounds:f,widgetName:t.widgetName,seriesTransition:r.seriesTransition,showChartLabels:r.showChartLabels,textStyle:r.textStyle,chartLabelStyle:r.chartLabelStyle,chartLabelFormatString:r.chartLabelFormatString,shadow:r.shadow,hint:r.hint,animation:r.animation,disabled:r.disabled,culture:t._getCulture(),widget:this,wijCSS:r.wijCSS,mouseDown:function(e,n){t._trigger("mouseDown",e,n)},mouseUp:function(e,n){t._trigger("mouseUp",e,n)},mouseOver:function(e,n){t._trigger("mouseOver",e,n)},mouseOut:function(e,n){t._trigger("mouseOut",e,n)},mouseMove:function(e,n){t._trigger("mouseMove",e,n)},click:function(e,n){t._trigger("click",e,n)}},m=t.chartElement.data("fields"),g,y,b;m&&(m.ctracers=[]),$.each(r[i],function(e,t){var n=t.type,f={},p=n,v={},m=$.extend({},u[c]),g=$.extend({},a[c]),y=t.yAxis;if(!n||n.length===0)return!0;if(p==="spline"||p==="bezier")p="line";f=l[p],f||(n==="pie"?f=[]:f={},l[p]=f,t.hint&&(f.hint=t.hint,r.hint.content||(r.hint.content=t.hint.content),r.hint.title||(r.hint.title=t.hint.title)));if(n==="pie")return $.each(t.data,function(t,n){m=$.extend({},u[c]),g=$.extend({},a[c]),v[i]||(v[i]=[]),v[s]||(v[s]=[]),v[o]||(v[o]=[]),n.pieID=e+1,v[i].push(n),v[s].push(m),v[o].push(g),h===-1&&(h=c),c++}),v.sIndex=h,v.radius=t.radius,v.center=t.center,v.label=t.label,h=-1,f.push(v),!0;n==="column"?f.horizontal=!1:n==="bar"?f.horizontal=!0:n==="spline"?t.fitType="spline":n==="bezier"&&(t.fitType="bezier"),d&&(f.yAxis=y||0);if(n==="line"||n==="spline"||n==="bezier")delete m.fill,delete g.fill;f[i]||(f[i]=[]),f[s]||(f[s]=[]),f[o]||(f[o]=[]),n==="scatter"&&(f.showChartLabels=r.showChartLabels,t.showChartLabels!==undefined&&(f.showChartLabels=t.showChartLabels)),t.sIndex=c,f[i].push(t),f[s].push(m),f[o].push(g),c++}),$.each(l,function(i,s){var o=e.chart,u=s.yAxis,a=r.chartLabel;u!==undefined&&t.axisInfo.y[u].bounds&&(v.bounds=t.axisInfo.y[u].bounds);switch(i){case"pie":var l;$.each(s,function(e,n){var r=n.center,s=n.radius||50,u,a=f.endX-f.startX,l=f.endY-f.startY;a<2*s&&(s=a/2),l<2*s&&(s=l/2),n.radius=s,u=r?{startX:r.x-s,startY:r.y-s,endX:r.x+s,endY:r.y+s}:{startX:f.startX+a/2-s,startY:f.startY+l/2-s,endX:f.startX+2*s,endY:f.startY+2*s},g=$.extend(!0,{},v,{bounds:u,radius:s,isTouchBehaviorEnable:!1},n),b=new o.PieChartRender(t.chartElement,g),b.render(),t.chartElement.data("fields").aniSectorAttrs=null,t.chartElement.data("fields").aniLabelAttrs=null,t._savechartData(i,n.sIndex)});break;case"bar":case"column":g=$.extend(!0,{},v,{stacked:r.stacked,axis:r.axis,clusterOverlap:r.clusterOverlap,clusterWidth:r.clusterWidth,clusterSpacing:r.clusterSpacing,is100Percent:r.is100Percent,clusterRadius:r.clusterRadius,isYTime:t.axisInfo.y[0].isTime,isXTime:t.axisInfo.x.isTime,yAxisInfo:t.axisInfo.y,yAxisIndex:u},s),b=new o.BarChartRender(t.chartElement,g),b.render(),p=[],$.each(s.seriesList,function(e,t){p.push(t.sIndex)}),t._savechartData(i,p);break;case"line":case"spline":case"bezier":case"area":y=t._getyAxisGroup(s),t.aniPathsAttr||(t.aniPathsAttr={}),$.each(y,function(e,n){t.aniPathsAttr[i]||(t.aniPathsAttr[i]=[]),g=$.extend(!0,{},v,{axis:r.axis,isXTime:t.axisInfo.x.isTime,isYTime:t.axisInfo.y[0].isTime,type:i==="area"?"area":"line",hole:r.hole},n),g.aniPathsAttr=t.aniPathsAttr[i],g.chartLabelEles=t.chartLabelEles,g.axis.y=r.axis.y[e]||r.axis.y,g.extremeValue={txx:t.extremeValue.txx,txn:t.extremeValue.txn,tyx:t.extremeValue.y[e].tyx,tyn:t.extremeValue.y[e].tyn},b=new o.LineChartRender(t.chartElement,g),b.render(),p=[],$.each(n.seriesList,function(e,t){p.push(t.sIndex)}),t._savechartData(i,p,!0)});break;case"scatter":y=t._getyAxisGroup(s),$.each(y,function(e,n){g=$.extend(!0,{},v,{axis:r.axis,isXTime:t.axisInfo.x.isTime,isYTime:t.axisInfo.y[0].isTime,zoomOnHover:r.zoomOnHover},n),g.axis.y=r.axis.y[e]||r.axis.y,b=new o.ScatterChartRender(t.chartElement,g),b.render(),p=[],$.each(n.seriesList,function(e,t){p.push(t.sIndex)}),t._savechartData(i,p)});break;case"ohlc":case"hl":case"candlestick":y=t._getyAxisGroup(s),$.each(y,function(e,s){g=$.extend(!0,{},v,{axis:r.axis,timeUtil:t.timeUtil,type:i},s),g.axis.y=r.axis.y[e]||r.axis.y,$.each(g.seriesStyles,function(e,t){n.prototype._setDefaultFill(i,t)}),b=new o.CandlestickChartRender(t.chartElement,g),b.render(),p=[],$.each(s.seriesList,function(e,t){p.push(t.sIndex)}),t._savechartData(i,p)});break;case"bubble":y=t._getyAxisGroup(s),a||(a={visible:r.showChartLabels,style:r.chartLabelStyle}),$.each(y,function(e,n){g=$.extend(!0,{},v,{axis:r.axis,isXTime:t.axisInfo.x.isTime,isYTime:t.axisInfo.y[0].isTime,xAxisInfo:t.axisInfo.x,yAxisInfo:t.axisInfo.y,chartLabel:a,minimumSize:r.minimumSize||5,maximumSize:r.maximumSize||20,sizingMethod:r.sizingMethod||"diameter",bubbleRadius:t.bubbleAxisAdjust.bubbleRadius},n),g.axis.y=r.axis.y[e]||r.axis.y,g.yAxisInfo=t.axisInfo.y[e]||t.axisInfo.y[0],b=new o.BubbleChartRender(t.chartElement,g),b.render(),p=[],$.each(n.seriesList,function(e,t){p.push(t.sIndex)}),t._savechartData(i,p)})}}),t.chartElement.data("fields").seriesEles=null,t._bindtooltip()},i.prototype._savechartData=function(e,t,n){var r=this,i=r.chartElement.data("fields"),s=i.seriesEles,o=i.allElements||{},u,a=t;$.isArray(a)&&(a=0),$.each(s,function(n,i){$.isArray(t)?(r.seriesEles[t[a]]={eles:i,type:e},a++):(r.seriesEles[a]={eles:i,type:e},a++)}),n||(u=i.ctracers||[],u.push({trackers:i.trackers,type:e}),i.ctracers=u),i&&i.chartElements&&$.each(i.chartElements,function(e,t){r._copyElements(o,e,t)}),i.allElements=o},i.prototype._copyElements=function(e,t,n){var r;n&&$.isArray(n)?(r=e[t]||[],e[t]=r.concat(n)):n&&(r=e[t]||[],r.concat([n]))},i.prototype._getyAxisGroup=function(e){var t={};return $.each(e.seriesList,function(n,r){var i=r.yAxis||0;t[i]||(t[i]={seriesList:[],seriesStyles:[],seriesHoverStyles:[]}),t[i].seriesList.push(r),t[i].seriesStyles.push(e.seriesStyles[n]),t[i].seriesHoverStyles.push(e.seriesHoverStyles[n])}),t},i.prototype._bindtooltip=function(){var e=this,t=e.widgetName,n=e.chartElement.data("fields");n&&n.ctracers&&$.each(n.ctracers,function(e,t){var n=t.type;t.trackers&&t.trackers.toFront()}),e.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker","mouseover."+t,$.proxy(e._tooltipMouseOver,e)),e.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker","mouseout."+t,$.proxy(e._tooltipMouseOut,e)),e.chartElement.delegate(".linetracker, .wijchart-canvas-marker, .bartracker, .pietracker, .wijscatterchart, .bubbletracker, .candlesticktracker","mousemove."+t,$.proxy(e._tooltipMouseMove,e))},i.prototype._tooltipMouseOver=function(e){var t=e.target,n=this,r=n.tooltip,i=n.options.hint,s=null,o=i.title,u=i.content,a=i.style,f=$.isFunction(o),l=$.isFunction(u),c,h,p,d;p=$(n.canvas.canvas.parentNode).offset();if(n.indicatorLine)return;$(t).data("owner")&&(t=$(t).data("owner")),t=$(t),c=t.data("wijchartDataObj");if(n.tooltip){s=r.getOptions();if(f||l)f&&(s.title=$.proxy(o,c)),l&&(s.content=$.proxy(u,c));if(c.type==="line"||c.type==="marker"){c.type==="marker"&&(c=c.lineSeries);if(c.path.removed)return;if(n.hoverLine!==c||n.hoverLine===null)n.isNewLine=!0,n.hoverLine&&(n.hoverLine.path.removed||(n.hoverLine.path.wijAttr(n.hoverLine.lineStyle),n.hoverPoint&&!n.hoverPoint.isSymbol&&(n.hoverPoint.marker.wijAttr(n.hoverPoint.markerStyle),n.hoverPoint.marker.transform("s1")))),c.lineHoverStyle&&c.path.wijAttr(c.lineHoverStyle),n.hoverLine=c,n.hoverPoint=null,n.hoverVirtualPoint=null}else c.type==="scatter"||i.relativeTo==="element"?(n._clearHoverState(),c.type==="scatter"?h=c.dot.getBBox():t[0]&&t[0].raphael&&t[0].raphaelid&&(d=n.canvas.getById(t[0].raphaelid),d&&(h=d.getBBox())),s.style.stroke=a.stroke||t.attr("stroke"),h&&n.tooltip.showAt({x:h.x+h.width/2,y:h.y},e)):(n._clearHoverState(),s.style.stroke=a.stroke||t.attr("stroke"),n.tooltip.showAt({x:e.pageX-p.left,y:e.pageY-p.top},e))}},i.prototype._tooltipMouseMove=function(e){var t=this,n=e.target,r,i=t.options.hint,s=$(t.canvas.canvas.parentNode).offset();$(n).data("owner")&&(n=$(n).data("owner")),n=$(n),r=n.data("wijchartDataObj"),t.tooltip&&!this.indicatorLine&&r.type!=="line"&&r.type!=="marker"&&r.type!=="scatter"&&i.relativeTo!=="element"&&t.tooltip.showAt({x:e.pageX-s.left,y:e.pageY-s.top},e)},i.prototype._tooltipMouseOut=function(e){var t=this,n=e.target,r;$(n).data("owner")&&(n=$(n).data("owner")),n=$(n),r=n.data("wijchartDataObj"),r.type!=="line"&&r.type!=="marker"&&!t.indicatorLine&&t.tooltip&&t.tooltip.hide()},i.prototype._mouseMoveInsidePlotArea=function(e,t){var n=this,i=n.tooltip,s=n.options.hint,o,u,a=0,f,l,c,h,p=null,d=null,v=null,m=s.title,g=s.content,y=$.isFunction(m),b=$.isFunction(g),w=0,E;i&&(v=i.getOptions());if(n.hoverLine&&!n.indicatorLine){E=n.hoverLine,n.isNewLine&&(s.enable&&i&&i.hide(),n.isNewLine=!1),o=E.lineMarkers,u=E.virtualMarkers,a=-1,f={x:0,y:0};if(o&&o.length){$.each(o,function(e,n){if(n.removed)return!0;var r=n.wijGetBBox(),i=r.x+r.width/2,s=Math.abs(i-t.left);if(e===0||s<w)w=s,a=e,f={x:i,y:r.y+r.height/2}});if(n.hoverPoint&&n.hoverPoint.index===a)return;if(a>-1){if(o[a].removed)return;l=$(o[a].node).data("wijchartDataObj"),l&&(n.hoverPoint&&!n.hoverPoint.isSymbol&&(n.hoverPoint.removed||(n.hoverPoint.marker.wijAttr(n.hoverPoint.markerStyle),n.hoverPoint.marker.transform("s1"))),l.isSymbol||l.marker.removed||l.marker.wijAttr(l.markerHoverStyle)),n.hoverPoint=l,n.hoverVirtualPoint=u[a]}}else{$.each(u,function(e,n){var r=Math.abs(n.x-t.left);if(e===0||r<w)w=r,a=e,f={x:n.x,y:n.y}});if(n.hoverVirtualPoint&&n.hoverVirtualPoint.index===a)return;a>-1&&(n.hoverPoint=null,n.hoverVirtualPoint=u[a])}if(i){d=n.hoverVirtualPoint,c=d.valX,h=d.valY;if(y||b)y&&(v.title=function(){var e={pointIndex:a,lineIndex:E.index,x:c,y:h,label:E.label,data:d,fmt:m},t=$.proxy(e.fmt,e),n=t();return n}),b&&(v.content=function(){var e={pointIndex:a,lineIndex:E.index,x:c,y:h,label:E.label,data:d,fmt:g},t=$.proxy(e.fmt,e),n=t();return n});p=$.extend({stroke:E.path.attr("stroke")},s.style),v.style.stroke=p.stroke,i.showAt(f)}}r.prototype._mouseMoveInsidePlotArea.call(this,e,t)},i.prototype._mouseDownInsidePlotArea=function(e,t){r.prototype._mouseDownInsidePlotArea.call(this,e,t),this._clearHoverState(!0)},i.prototype._mouseMoveOutsidePlotArea=function(e,t){var n=this;n._clearHoverState(),r.prototype._mouseMoveOutsidePlotArea.call(this,e,t)},i.prototype._clearHoverState=function(e){var t=this,n=t.tooltip,r=t.options.hint;t.hoverLine&&(r.enable&&n&&!e&&n.hide(),t.hoverLine.path.removed||(t.hoverLine.path.wijAttr(t.hoverLine.lineStyle),t.hoverPoint&&!t.hoverPoint.isSymbol&&(t.hoverPoint.marker.wijAttr(t.hoverPoint.markerStyle),t.hoverPoint.marker.transform("s1")))),t.hoverLine=null,t.hoverPoint=null,t.hoverVirtualPoint=null},i.prototype._getTooltipText=function(e,t){return""},i.prototype._calculateParameters=function(e,t){var i=this,s=!1,o,u=0,a=0,f,l=e.max,c=e.min;r.prototype._calculateParameters.call(this,e,t),e.max=Math.max(l,e.max),c!==0&&(e.min=Math.min(c,e.min)),$.each(i.options.seriesList,function(e,t){if(t.type==="column"||t.type==="bar")return s=!0,!1}),e.id==="x"&&(o=t.unitMinor,s&&(u=a=Math.max(u,i._getBarAdjustment(e,o))),i.isContainsCandlestick&&n&&(u=a=Math.max(u,n.prototype._getCandlestickAdjustment.apply(this,[e,o])))),i.isContainsBubble&&$.wijmo.wijbubblechart&&(f=this.bubbleAxisAdjust.getAdjust(e,t),u=Math.max(u,f.max-e.max),a=Math.max(a,e.min-f.min)),a&&(e.min-=a),u&&(e.max+=u),(u||a)&&i._calculateMajorMinor(t,e)},i.prototype._getBarAdjustment=function(e,t){var n=0,r=this.options,i=e.max,s=e.min,o=0,u;return $.each(r.seriesList,function(e,t){if(t.type==="pie")return!0;if(t.data.x===undefined||t.data.y===undefined)return!0;o=t.data.x.length,n<o&&(n=o)}),n>1?u=(i-s)/n*r.clusterWidth*.0125:n===1?(s===0&&i===1&&(s=-1,e.min=s),u=(i-s)*.0125):u=0,u===0?u=t:t<u&&t!==0&&(u=Math.floor(u/t)*t),u},i}(t.wijchartcore);t.wijcompositechart=r,r.prototype.widgetEventPrefix="wijcompositechart";var i=function(){function e(){this.initSelector=":jqmData(role='wijcompositechart')",this.wijCSS={compositechart:"wijmo-wijcompositechart",barLabel:"wijbarchart-label",barElement:"wijbarchart",barTracker:"bartracker",bubbleElement:"wijbubblechart-bubble",bubbleTracker:"bubbletracker",bubbleLabel:"wijbubblechart-label",bubbleSymbol:"wijbubblechart-symbol",scatterElement:"wijscatterchart",pieLabel:"wijpiechart-label",pieElement:"wijpiechart",pieTracker:"pietracker",lineLabel:"wijlinechart-label",lineElement:"wijlinechart",areaElement:"wijlinechart-area",lineTracker:"linetracker",canvasMarker:"wijchart-canvas-marker",wijCandlestickChart:"wijmo-wijcandlestickchart",candlestickChart:"wijcandlestickchart",candlestickChartTracker:"candlesticktracker"},this.stacked=!1,this.clusterOverlap=0,this.clusterWidth=85,this.clusterRadius=0,this.clusterSpacing=0,this.seriesList=[],this.animation={enabled:!0,duration:400,easing:">"},this.seriesTransition={enabled:!0,duration:400,easing:">"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return e}();r.prototype.options=$.extend(!0,{},t.wijchartcore.prototype.options,new i),$.wijmo.registerWidget("wijcompositechart",r.prototype)})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));